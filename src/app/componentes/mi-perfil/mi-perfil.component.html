<app-logo [showSpinner]="loading"></app-logo>
    <div class="container-fluid d-flex justify-content-center align-items-center" style="min-height: 90vh; padding: 20px;">
          
          <!-- DISEÑO MODERNO PARA ESPECIALISTA -->
          <div *ngIf="userData?.tipo == 'especialista' && !this.mostrar" class="perfil-card">
            
            <!-- Encabezado del perfil con la imagen y el nombre -->
            <div class="perfil-header">
              <div class="perfil-header-content">
                
                <!-- Contenedor de Imagen de Perfil -->
                <div class="perfil-foto-container">
                  <img class="perfil-foto"
                       [src]="userData?.foto1"
                       [alt]="'Foto de ' + userData?.nombre + ' ' + userData?.apellido">
                  
                  <!-- Indicador de Verificación -->
                 
                </div>

                <!-- Detalles principales del doctor -->
                <div class="perfil-info-principal">
                  <p class="perfil-bienvenida">¡BIENVENIDO DR.!</p>
                  <h1 class="perfil-nombre">
                    Dr. {{userData?.nombre}} {{userData?.apellido}}
                  </h1>
                  <p class="perfil-rol">Especialista</p>
                </div>
              </div>
            </div>

            <!-- Cuerpo del perfil (Detalles e Información de Contacto) -->
            <div class="perfil-body">

              <!-- Columna 1: Especialidades -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Especialidades</h3>
                <div class="perfil-especialidades">
                  <!-- Etiquetas de Especialidades dinámicas -->
                  <span *ngFor="let item of userData?.especialidad" 
                        class="perfil-badge-especialidad">
                    {{item.especialidad}}
                  </span>
                </div>
              </div>

              <!-- Columna 2: Información de Contacto y Personal -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Información de Contacto</h3>
                
                <div class="perfil-info-item">
                  <p class="perfil-info-label">Correo Electrónico:</p>
                  <p class="perfil-info-value">{{userData?.email}}</p>
                </div>

                <div class="perfil-info-item">
                  <p class="perfil-info-label">Edad:</p>
                  <p class="perfil-info-value">{{userData?.edad}} años</p>
                </div>

                <div class="perfil-info-item">
                  <p class="perfil-info-label">DNI:</p>
                  <p class="perfil-info-value">{{userData?.dni}}</p>
                </div>
              </div>

            </div>
            
            <!-- Pie de página y Botón de Acción -->
            <div class="perfil-footer">
             
              <!-- Botones de acción -->
              <div class="perfil-buttons-container">
                <!-- Botón Ver Mis Horarios -->
                <button (click)="abrirMisHorarios()" class="perfil-btn-horarios">
                  <i class="fa fa-clock-o"></i> Ver Mis Horarios
                </button>

                <!-- Botón Configurar Duraciones -->
                <button (click)="abrirModalDuraciones()" class="perfil-btn-duraciones">
                  <i class="fa fa-hourglass-half"></i> Configurar Duración de Turnos
                </button>
              </div>
            </div>

          </div>

          <!-- DISEÑO MODERNO PARA PACIENTE -->
          <div *ngIf="userData?.tipo == 'paciente' && !this.mostrar" class="perfil-card">
            
            <!-- Encabezado del perfil -->
            <div class="perfil-header">
              <div class="perfil-header-content">
                
                <!-- Carrusel de fotos para paciente -->
                <div class="perfil-foto-container-paciente">
                  <div id="carouselPaciente" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img [src]="userData?.foto1" class="perfil-foto-carousel" alt="Foto 1">
                      </div>
                      <div class="carousel-item">
                        <img [src]="userData?.foto2" class="perfil-foto-carousel" alt="Foto 2">
                      </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselPaciente" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselPaciente" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    </button>
                  </div>
                </div>

                <!-- Detalles principales del paciente -->
                <div class="perfil-info-principal">
                  <p class="perfil-bienvenida">¡BIENVENIDO/A!</p>
                  <h1 class="perfil-nombre">
                    {{userData?.nombre}} {{userData?.apellido}}
                  </h1>
                  <p class="perfil-rol">Paciente</p>
                </div>
              </div>
            </div>

            <!-- Cuerpo del perfil -->
            <div class="perfil-body">

              <!-- Columna 1: Datos personales -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Datos Personales</h3>
                
                <div class="perfil-info-item">
                  <p class="perfil-info-label">Edad:</p>
                  <p class="perfil-info-value">{{userData?.edad}} años</p>
                </div>

                <div class="perfil-info-item">
                  <p class="perfil-info-label">DNI:</p>
                  <p class="perfil-info-value">{{userData?.dni}}</p>
                </div>

                <div class="perfil-info-item">
                  <p class="perfil-info-label">Obra Social:</p>
                  <p class="perfil-info-value">{{userData?.obraSocial}}</p>
                </div>
              </div>

              <!-- Columna 2: Información de Contacto -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Información de Contacto</h3>
                
                <div class="perfil-info-item">
                  <p class="perfil-info-label">Correo Electrónico:</p>
                  <p class="perfil-info-value">{{userData?.email}}</p>
                </div>
              </div>

            </div>
            
            <!-- Pie de página -->
            <div class="perfil-footer">
              

              <!-- Botón Historial Clínico -->
              <button routerLink="/historial" class="perfil-btn-horarios">
                Ver Historial Clínico
              </button>
            </div>

          </div>

          <!-- DISEÑO MODERNO PARA ADMIN -->
          <div *ngIf="userData?.tipo == 'admin' && !this.mostrar" class="perfil-card">
            
            <!-- Encabezado del perfil -->
            <div class="perfil-header">
              <div class="perfil-header-content">
                
                <!-- Sin foto para admin, solo iniciales -->
                <div class="perfil-foto-container">
                  <img class="perfil-foto"
                       [src]="userData?.foto1"
                       [alt]="'Foto de ' + userData?.nombre + ' ' + userData?.apellido">
                  
                  <!-- Badge de admin -->
                  
                </div>

                <!-- Detalles principales del admin -->
                <div class="perfil-info-principal">
                  <p class="perfil-bienvenida">ADMINISTRADOR</p>
                  <h1 class="perfil-nombre">
                    {{userData?.nombre}} {{userData?.apellido}}
                  </h1>
                  <p class="perfil-rol">Administrador del Sistema</p>
                </div>
              </div>
            </div>

            <!-- Cuerpo del perfil -->
            <div class="perfil-body">

              <!-- Columna 1: Información Personal -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Información Personal</h3>
                
                <div class="perfil-info-item">
                  <p class="perfil-info-label">Edad:</p>
                  <p class="perfil-info-value">{{userData?.edad}} años</p>
                </div>

                <div class="perfil-info-item">
                  <p class="perfil-info-label">DNI:</p>
                  <p class="perfil-info-value">{{userData?.dni}}</p>
                </div>
              </div>

              <!-- Columna 2: Información de Contacto -->
              <div class="perfil-seccion">
                <h3 class="perfil-titulo-seccion">Información de Contacto</h3>
                
                <div class="perfil-info-item">
                  <p class="perfil-info-label">Correo Electrónico:</p>
                  <p class="perfil-info-value">{{userData?.email}}</p>
                </div>
              </div>

            </div>
            
            <!-- Pie de página -->
            <div class="perfil-footer">
            
            </div>

          </div>
          <!-- HORARIOS PARA ESPECIALISTA -->
          <div class="horarios-section" *ngIf="userData?.tipo === 'especialista' && mostrar === true">
            
            <!-- Header -->
            <div class="horarios-header-main">
              <h2 class="horarios-titulo-main">Disponibilidad Horaria</h2>
              <p class="horarios-subtitulo-main">Configure sus horarios de atención por día</p>
            </div>

            <!-- Grid de días (4 por fila) -->
            <div class="horarios-grid">
              <div class="dia-card" *ngFor="let dias of dias; let i=index">
                
                <!-- Botón de estado del día -->
                <button (click)="cambiarEstado(dias.dia, disponibilidades[i])"
                        [ngClass]="{
                          'dia-habilitado': disponibilidades[i] === 'Habilitado', 
                          'dia-inhabilitado': disponibilidades[i] === 'Inhabilitado'
                        }"
                        class="btn-dia-toggle">
                  {{ dias.dia }}
                  <span class="estado-badge-small">{{ disponibilidades[i] }}</span>
                </button>

                <!-- Contenido cuando está habilitado -->
                <div class="dia-content" *ngIf="disponibilidades[i] === 'Habilitado'">
                  
                  <div class="horario-group">
                    <label class="horario-label-small">Inicio</label>
                    <mat-form-field appearance="fill" class="mat-field-compact">
                      <mat-select (selectionChange)="cambiarHorario(dias.dia, 'inicio', $event)" 
                                  [(ngModel)]="dias.ini">
                        <mat-option *ngFor="let hora of getHorariosPorDia(dias.dia)" [value]="hora">{{hora}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="horario-group">
                    <label class="horario-label-small">Fin</label>
                    <mat-form-field appearance="fill" class="mat-field-compact">
                      <mat-select (selectionChange)="cambiarHorario(dias.dia, 'fin', $event)" 
                                  [(ngModel)]="dias.fin">
                        <mat-option *ngFor="let hora of getHorariosPorDia(dias.dia)" [value]="hora">{{hora}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                  <div class="horario-group">
                    <label class="horario-label-small">Especialidad</label>
                    <mat-form-field appearance="fill" class="mat-field-compact">
                      <mat-select (selectionChange)="cambiarEspecialidad(dias.dia, $event)" 
                                  [(ngModel)]="especialidadesPorDia[i]">
                        <mat-option *ngFor="let esp of userData.especialidad" [value]="esp.especialidad">
                          {{esp.especialidad}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                </div>

                <!-- Vista deshabilitada -->
                <div class="dia-disabled" *ngIf="disponibilidades[i] === 'Inhabilitado'">
                  <p class="disabled-msg">Día inhabilitado<br>Sin atención</p>
                </div>

              </div>
            </div>

            <!-- Botón de confirmación -->
            <div class="horarios-footer-main">
              <button class="btn-confirmar-main" (click)="cerrarModulo()">
                Confirmar y Guardar
              </button>
            </div>

          </div>

          <!-- MODAL PARA CONFIGURAR DURACIONES DE TURNOS -->
          <div class="modal-overlay" *ngIf="mostrarModalDuraciones" (click)="cerrarModalDuraciones()">
            <div class="modal-duraciones" (click)="$event.stopPropagation()">
              
              <!-- Header del Modal -->
              <div class="modal-header">
                <h3 class="modal-title">
                  <i class="fa fa-hourglass-half"></i> Configurar Duración de Turnos
                </h3>
                <button class="modal-close-btn" (click)="cerrarModalDuraciones()">
                  <i class="fa fa-times"></i>
                </button>
              </div>

              <!-- Contenido del Modal -->
              <div class="modal-body">
                <p class="modal-description">
                  Configure la duración de los turnos para cada una de sus especialidades. 
                  La duración mínima es de 30 minutos.
                </p>

                <!-- Lista de especialidades con inputs -->
                <div class="especialidades-duracion-list">
                  <div class="especialidad-duracion-item" *ngFor="let esp of userData?.especialidad; let i = index">
                    <div class="especialidad-info">
                      <i class="fa fa-stethoscope"></i>
                      <span class="especialidad-nombre">{{esp.especialidad}}</span>
                    </div>
                    <div class="duracion-input-group">
                      <label class="duracion-label">Duración (minutos):</label>
                      <input 
                        type="number" 
                        class="duracion-input" 
                        [(ngModel)]="duracionesTemporal[i]"
                        min="30"
                        step="15"
                        placeholder="30">
                      <span class="duracion-unit">min</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Footer del Modal -->
              <div class="modal-footer">
                <button class="btn-modal-cancelar" (click)="cerrarModalDuraciones()">
                  <i class="fa fa-times"></i> Cancelar
                </button>
                <button class="btn-modal-guardar" (click)="guardarDuraciones()">
                  <i class="fa fa-check"></i> Guardar Cambios
                </button>
              </div>

            </div>
          </div>
         
      </div>
