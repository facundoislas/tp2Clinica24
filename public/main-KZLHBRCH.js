import{a as ac,b as lc,c as cc,d as dc,g as uc,h as hc,i as fc,j as pc,l as _c,m as bc,n as xc,o as vc,p as Ms,q as Es}from"./chunk-GHZMD5KH.js";import{a as rc,b as rt}from"./chunk-VOIYR52N.js";import{$ as Bl,A as Ml,B as El,C as Fo,Ca as Oe,D as Tl,Da as oc,E as No,F as Pl,G as st,I as ys,J as Ce,K as kl,L as Il,M as ot,N as Ht,O as Lo,P as nn,Q as Ol,R as Dl,S as Al,T as Rl,U as sn,V as Vo,W as Fl,X as Nl,Y as Ll,Z as Vl,_ as Wl,a as hs,aa as zl,b as bl,ba as on,c as xl,ca as jl,d as yt,da as Hl,e as fs,ea as Ul,f as vl,fa as Yl,g as yl,ga as ql,h as hi,ha as Gl,i as re,ia as $l,ja as Kl,k as Ct,ka as Xl,l as ps,la as Ql,ma as Jl,n as ms,na as Zl,o as gs,oa as ec,p as _s,q as Cl,qa as Cs,r as bs,ra as pi,s as xs,sa as ws,t as vs,ta as tc,u as ge,v as wt,va as ic,w as F,wa as nc,x as fi,y as wl,ya as sc,z as Sl}from"./chunk-CA3IJAVP.js";import{f as yc,g as rn,h as Ts,m as Cc,n as Ps,p as wc,u as Sc}from"./chunk-XMKRO6VU.js";import{$a as os,$b as gl,Ab as R,Ac as ye,Ba as ol,Bb as y,Cc as de,Da as rl,Fa as en,H as Jn,Jc as mc,Kb as ul,Kc as ft,La as tn,Lb as x,Lc as gc,Mb as W,Nb as be,Nc as we,Oa as ci,Ob as Ue,Pa as al,Pb as ls,Pc as St,Qb as U,Rb as Y,Rc as Ss,Sb as q,Ta as _,Ua as j,Ub as te,Va as ll,Vb as hl,Wb as ui,Xa as cl,Xb as fl,Yb as pl,Za as ss,Zb as cs,_a as dl,_b as ml,a as Xn,ab as di,b as Qn,ca as il,ea as Zn,g as Fe,ha as es,ic as _l,ja as ts,ka as li,la as Zi,lb as A,na as ee,nb as C,ob as rs,pa as nl,qa as is,qb as as,ra as ns,tb as p,ub as f,uc as ds,va as sl,vb as O,wa as P,xa as k,yb as V,yc as us,zc as Ye}from"./chunk-Y4Q3JQPZ.js";function em(t,i){t&1&&(p(0,"div",1),O(1,"img",2),f())}var ks=(()=>{class t{showSpinner;constructor(){}ngOnInit(){}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-logo"]],inputs:{showSpinner:"showSpinner"},standalone:!0,features:[te],decls:1,vars:1,consts:[["class","spinner-container position-fixed d-flex justify-content-center align-items-center",4,"ngIf"],[1,"spinner-container","position-fixed","d-flex","justify-content-center","align-items-center"],["src","../../../assets/imagenes/logo.png","alt","",1,"spinner","heartbeat"]],template:function(n,s){n&1&&A(0,em,2,0,"div",0),n&2&&C("ngIf",s.showSpinner)},dependencies:[de,ye],styles:[".spinner-container[_ngcontent-%COMP%]{height:100%;width:100%;z-index:10;background-color:#c3c3c3;display:flex;flex-direction:column}.spinner[_ngcontent-%COMP%]{height:250px}.heartbeat[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_heartbeat 3.5s ease-in-out infinite both;animation:_ngcontent-%COMP%_heartbeat 3.5s ease-in-out infinite both}.logo[_ngcontent-%COMP%]{text-transform:uppercase;font-size:1.5rem;font-weight:800;text-decoration:none;color:#004373}.span-logo[_ngcontent-%COMP%]{color:#49a22b}@-webkit-keyframes _ngcontent-%COMP%_heartbeat{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}10%{-webkit-transform:scale(.91);transform:scale(.91);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}17%{-webkit-transform:scale(.98);transform:scale(.98);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}33%{-webkit-transform:scale(.87);transform:scale(.87);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}45%{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}@keyframes _ngcontent-%COMP%_heartbeat{0%{-webkit-transform:scale(1);transform:scale(1);-webkit-transform-origin:center center;transform-origin:center center;-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}10%{-webkit-transform:scale(.91);transform:scale(.91);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}17%{-webkit-transform:scale(.98);transform:scale(.98);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}33%{-webkit-transform:scale(.87);transform:scale(.87);-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in}45%{-webkit-transform:scale(1);transform:scale(1);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}}.text-focus-in[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_text-focus-in 1s cubic-bezier(.55,.085,.68,.53) both;animation:_ngcontent-%COMP%_text-focus-in 1s cubic-bezier(.55,.085,.68,.53) both}@-webkit-keyframes _ngcontent-%COMP%_text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}to{-webkit-filter:blur(0px);filter:blur(0px);opacity:1}}@keyframes _ngcontent-%COMP%_text-focus-in{0%{-webkit-filter:blur(12px);filter:blur(12px);opacity:0}to{-webkit-filter:blur(0px);filter:blur(0px);opacity:1}}"]})}return t})();var Mc=(()=>{class t{loading=!0;user=null;ngOnInit(){setTimeout(()=>{this.loading=!1},2500)}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-bienvenido"]],standalone:!0,features:[te],decls:23,vars:2,consts:[[3,"showSpinner"],[1,"content"],[1,"container"],[1,"row",2,"margin-top","90px"],[1,"col-lg-6","text-center"],["alt","Generic placeholder image","height","235","src","./../../../assets/imagenes/login.png","width","243",1,"rounded-circle"],["href","#","role","button","routerLink","/login",1,"btn","btn-primary","btn-lg"],["alt","Generic placeholder image","height","235","src","./../../../assets/imagenes/registro.jpg","width","243",1,"rounded-circle"],["href","#","role","button","routerLink","/registro",1,"btn","btn-primary","btn-lg"]],template:function(n,s){n&1&&(O(0,"app-logo",0),p(1,"div",1),O(2,"app-logo",0),p(3,"main",2)(4,"div",3)(5,"div",4),O(6,"img",5),p(7,"h2"),x(8,"Iniciar Sesi\xF3n"),f(),p(9,"p"),x(10,"Para poder comenzar con las gestiones, deber\xE1 ingresar con su usuario y contrase\xF1a."),f(),p(11,"p")(12,"a",6),x(13,"Ingresar"),f()()(),p(14,"div",4),O(15,"img",7),p(16,"h2"),x(17,"Registrarse"),f(),p(18,"p"),x(19,"En caso de no contar con un usuario creado, podr\xE1 generarlo aqu\xED"),f(),p(20,"p")(21,"a",8),x(22,"Registrarse"),f()()()()()()),n&2&&(C("showSpinner",s.loading),_(2),C("showSpinner",s.loading))},dependencies:[de,fs,ks],styles:['.row[_ngcontent-%COMP%]{width:100vw}.fondo[_ngcontent-%COMP%]{background:url("./media/slider-bg-2-7UI2L5W4.jpg");background-size:cover;height:100%;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]{text-align:center}.marketing[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}.fondo[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10.75rem;margin-left:-7.25rem}p[_ngcontent-%COMP%]{text-align:center;color:#00096b;font-size:20px}h2[_ngcontent-%COMP%]{color:#27c82a;text-align:center}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}main[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;box-sizing:border-box}'],data:{animation:[]}})}return t})();function nm(t,i){t&1&&(p(0,"small"),x(1,"El email es requerida."),f())}function sm(t,i){t&1&&(p(0,"small"),x(1,"Debe ser formato Corre Electronico"),f())}function om(t,i){if(t&1&&(p(0,"div",29),A(1,nm,2,0,"small",15)(2,sm,2,0,"small",15),f()),t&2){let e,n,s=y();_(),C("ngIf",(e=s.formRegistro.get("usuario"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("usuario"))==null||n.errors==null?null:n.errors.email)}}function rm(t,i){t&1&&(p(0,"small"),x(1,"La contrase\xF1a es requerida."),f())}function am(t,i){t&1&&(p(0,"small"),x(1,"Debe tener al menos 6 caracteres"),f())}function lm(t,i){if(t&1&&(p(0,"div",29),A(1,rm,2,0,"small",15)(2,am,2,0,"small",15),f()),t&2){let e,n,s=y();_(),C("ngIf",(e=s.formRegistro.get("pass"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("pass"))==null||n.errors==null?null:n.errors.minlength)}}function cm(t,i){if(t&1){let e=V();p(0,"div",30),O(1,"br"),p(2,"button",31),R("click",function(){P(e);let s=y();return k(s.entrar())}),x(3,"Ingresar"),f()()}}function dm(t,i){if(t&1&&(p(0,"div")(1,"div",32)(2,"div",33),x(3),f()()()),t&2){let e=y();_(2),as(e.clase),rs("width",e.ProgresoDeAncho),_(),Ue(" ",e.progresoMensaje," - ",e.progreso,"% ")}}function um(t,i){if(t&1){let e=V();p(0,"div",0)(1,"button",34),R("click",function(){P(e);let s=y();return k(s.borrar())}),x(2,"Cancelar"),f(),p(3,"button",35),x(4,"Registrarse"),f()()}}var Tc=(()=>{class t{router;authService;firestore;fb;firebase;alert;userData;tipoUser;user={email:"",password:"",tipo:""};Mensaje;semuestra;progreso;progresoMensaje="esperando...";logeando=!0;logueado;ProgresoDeAncho;formRegistro;clase="progress-bar progress-bar-info progress-bar-striped ";subscription;constructor(e,n,s,o,r,a){this.router=e,this.authService=n,this.firestore=s,this.fb=o,this.firebase=r,this.alert=a,this.progreso=0,this.ProgresoDeAncho="0%",sessionStorage.getItem("user")==null?this.logueado=!1:this.logueado=!0,this.formRegistro=this.fb.group({usuario:["",[re.required,re.email]],pass:["",[re.required,re.minLength(6)]]})}ngOnInit(){sessionStorage.clear()}entrar(){return Fe(this,null,function*(){if(this.formRegistro.valid){let e=this.authService.login(this.user.email,this.user.password);this.MoverBarraDeProgreso(),(yield e)?(this.userData=yield this.firebase.getUsuarioEmail(this.user.email),console.log("email",this.userData.email),sessionStorage.setItem("user",this.user.email),sessionStorage.setItem("muestra","true"),sessionStorage.setItem("tipo",this.userData.tipo),this.firebase.guardarLogLogin(this.user.email)):(this.alert.showSuccessAlert1("","Usuario o clave incorrectos","error"),this.borrar(),this.logeando=!0)}})}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let e=Jn(30);this.subscription=e.subscribe(n=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription.unsubscribe();break}})}borrar(){this.user.email="",this.user.password=""}MostarMensaje(e,n){this.Mensaje=e;var s=document.getElementById("snackbar");n&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3500)}autoComplete(e,n){this.formRegistro.setValue({usuario:e,pass:n})}mostrarFoto(e){return Fe(this,null,function*(){yield this.firebase.getUsuarioEmail(e).then(n=>n?.foto1)})}static \u0275fac=function(n){return new(n||t)(j(yt),j(pi),j(ws),j(vs),j(Oe),j(Cs))};static \u0275cmp=ee({type:t,selectors:[["app-login"]],standalone:!0,features:[te],decls:51,vars:9,consts:[[1,"container"],[1,"d-flex",2,"margin-top","5%"],[1,"card","col-md-6","mt-5"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"input-group","form-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","text","placeholder","Usuario","name","uname","formControlName","usuario",1,"form-control",3,"ngModelChange","ngModel"],["class","validacion",4,"ngIf"],[1,"fa","fa-key"],["type","password","placeholder","Clave","name","psw","formControlName","pass",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[4,"ngIf"],["class","container",4,"ngIf"],[1,"col-md-6","mt-5",2,"margin-left","20%"],[1,"mt-5"],[1,"d-flex","flex-row"],[1,"d-inline-block"],[1,"btn","btn-outline","square-button",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/pacientes%2F%C2%A1Increible-Susana-Gimenez-regresa-a-la-television-y-revela-detalles-exclusivos.jpg?alt=media&token=5ca8f684-3cde-4336-b59c-87307e5dc0c8","alt","",1,"foto","paciente-btn"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/pacientes%2F1677619311348.jpg?alt=media&token=9885f1bb-12cc-48d4-91e4-0bca4d0a1644","alt","",1,"foto","paciente-btn"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/pacientes%2Falberto1.jpg?alt=media&token=80f901c1-74aa-4767-901f-edd529f27ccd","alt","",1,"foto","paciente-btn"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/especialistas%2Fdassad_400x400.jpg?alt=media&token=18424970-fed4-40e7-91fc-7e9a5384bcb2","alt","",1,"foto","especialista-btn"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/especialistas%2F1366_2000.jpeg?alt=media&token=225728e8-579b-4c2c-ade4-072a4a82843a","alt","",1,"foto","especialista-btn"],["src","https://firebasestorage.googleapis.com/v0/b/clinica-22442.appspot.com/o/especialistas%2F318184722_169463255708064_6801540025908267373_n.jpg?alt=media&token=0da9a166-890c-45bf-8638-4b93c1cad377","alt","",1,"foto","admin-btn"],["id","snackbar"],[1,"validacion"],[1,"form-group"],[1,"btn","btn-primary",3,"click"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"],["type","button",1,"cancelbtn",3,"click"],["type","button","routerLink","/registro",1,"aceptbtn"]],template:function(n,s){if(n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3"),x(5,"Ingreso"),f(),p(6,"div",4)(7,"form",5)(8,"div",6)(9,"div",7)(10,"span",8),O(11,"i",9),f()(),p(12,"input",10),q("ngModelChange",function(r){return Y(s.user.email,r)||(s.user.email=r),r}),f(),A(13,om,3,2,"div",11),f(),p(14,"div",6)(15,"div",7)(16,"span",8),O(17,"i",12),f()(),p(18,"input",13),q("ngModelChange",function(r){return Y(s.user.password,r)||(s.user.password=r),r}),f(),A(19,lm,3,2,"div",11)(20,cm,4,0,"div",14),f(),A(21,dm,4,6,"div",15)(22,um,5,0,"div",16),f()()()(),p(23,"div",17)(24,"h2",18),x(25,"Accesos R\xE1pidos"),f(),p(26,"div",19)(27,"div",20)(28,"h5"),x(29,"Pacientes"),f(),p(30,"div",21),R("click",function(){return s.autoComplete("kobrolexobru-1395@yopmail.com","123456")}),O(31,"img",22),f(),p(32,"div",21),R("click",function(){return s.autoComplete("","123456")}),O(33,"img",23),f(),p(34,"div",21),R("click",function(){return s.autoComplete("xausibeiweme-1448@yopmail.com","999999")}),O(35,"img",24),f()(),p(36,"div",20)(37,"h5"),x(38,"Especialistas"),f(),p(39,"div",21),R("click",function(){return s.autoComplete("touppoibrouquotrou-9644@yopmail.com","123123")}),O(40,"img",25),f(),p(41,"div",21),R("click",function(){return s.autoComplete("joibrofounihe-6605@yopmail.com","123123")}),O(42,"img",26),f()(),p(43,"div",20)(44,"h5"),x(45,"Administrador"),f(),p(46,"div",21),R("click",function(){return s.autoComplete("racejihoibrei-1918@yopmail.com","111111")}),O(47,"img",27),f()()()(),p(48,"div")(49,"div",28),x(50),f()()()()),n&2){let o,r;_(7),C("formGroup",s.formRegistro),_(5),U("ngModel",s.user.email),_(),C("ngIf",(o=s.formRegistro.get("usuario"))==null?null:o.invalid),_(5),U("ngModel",s.user.password),_(),C("ngIf",(r=s.formRegistro.get("pass"))==null?null:r.invalid),_(),C("ngIf",s.logeando),_(),C("ngIf",!s.logeando),_(),C("ngIf",s.logeando),_(28),W(s.Mensaje)}},dependencies:[de,ye,wt,gs,hi,Ct,ps,bs,xs,ge],styles:['.fondo[_ngcontent-%COMP%]{display:inline-flex;background:url("./media/slider-bg-2-7UI2L5W4.jpg");width:100%;height:100%}input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#064b06;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{opacity:.8}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336;float:right}.aceptbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#3664f4}.imgcontainer[_ngcontent-%COMP%]{text-align:center;margin:24px 0 12px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;height:100%;font-family:Numans,sans-serif}.container[_ngcontent-%COMP%]{height:100%}.card[_ngcontent-%COMP%]{height:390px;margin-top:auto;margin-bottom:auto;width:450px;background-color:#00000080!important;display:inline-table}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.input-group-prepend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;background-color:#ffc312;color:#fff;border:0!important}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;margin-left:-125px;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1;left:50%;bottom:30px;font-size:17px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#6e2f05;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}img[_ngcontent-%COMP%]{height:100px;margin-bottom:20px}.invalid-feedback[_ngcontent-%COMP%]{padding:0;margin:0}.position[_ngcontent-%COMP%]{position:relative;width:100%}span[_ngcontent-%COMP%]{margin:10px}.d-inline-block[_ngcontent-%COMP%]{width:160px}.btn-outline[_ngcontent-%COMP%]{height:85px;width:85px;margin-bottom:10px;display:flex;align-items:center;justify-content:center}.paciente-btn[_ngcontent-%COMP%]{border:2px solid rgb(182,11,11)}.especialista-btn[_ngcontent-%COMP%]{border:2px solid green}.admin-btn[_ngcontent-%COMP%]{border:2px solid purple}.foto[_ngcontent-%COMP%]{margin-top:15px;height:70px;width:70px;border-radius:5px;box-shadow:10px 10px 10px #000000bf;-webkit-box-shadow:10px 10px 10px 0px rgba(0,0,0,.75);-moz-box-shadow:10px 10px 10px 0px rgba(0,0,0,.75)}.foto[_ngcontent-%COMP%]:hover{transition:all .5s;transform:scale(1.5)}.validacion[_ngcontent-%COMP%]{color:#fff;font-family:Arial,Helvetica,sans-serif;font-size:15px}']})}return t})();var Pc=(()=>{class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-error"]],standalone:!0,features:[te],decls:16,vars:0,consts:[[1,"container-fluid"],[1,"container"],[1,"jumbotron"],[1,"display-1"],[1,"fa","fa-spin","fa-cog","fa-3x"],[1,"display-3"],[1,"lower-case"],["id","footer-container-fluid",1,"container-fluid"]],template:function(n,s){n&1&&(p(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h1",3),x(5,"4"),O(6,"i",4),x(7," 4"),f(),p(8,"h1",5),x(9,"ERROR"),f(),p(10,"p",6),x(11,"La pagina a la que quiere ingresar no existe"),f(),p(12,"p",6),x(13,"Por favor vuelva al inicio"),f()()(),p(14,"div",7),O(15,"div",1),f()()())},styles:["body[_ngcontent-%COMP%]{margin-top:21%}.display-1[_ngcontent-%COMP%]{text-align:center;color:#e1b7b7}.display-1[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%]{animation:fa-spin 5s infinite linear}.display-3[_ngcontent-%COMP%]{text-align:center;color:#df726a}.lower-case[_ngcontent-%COMP%]{text-align:center}"]})}return t})();var kc=(()=>{class t{transform(e){return e?"Habilitado":"Deshabilitado"}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=is({name:"misPipes",type:t,pure:!0,standalone:!0})}return t})();function hm(t,i){if(t&1){let e=V();p(0,"button",13),R("click",function(){P(e);let s=y().$implicit,o=y();return k(o.deshabilitarEspecialista(s))}),x(1,"Deshabilitar"),f()}}function fm(t,i){if(t&1){let e=V();p(0,"button",13),R("click",function(){P(e);let s=y().$implicit,o=y();return k(o.habilitarEspecialista(s))}),x(1,"Habilitar"),f()}}function pm(t,i){if(t&1){let e=V();p(0,"button",14),R("click",function(){P(e);let s=y().$implicit,o=y();return k(o.seleccionarPaciente(s.email))}),x(1,"Historia Clinica"),f()}}function mm(t,i){if(t&1&&(p(0,"tr")(1,"td"),x(2),f(),p(3,"td"),x(4),f(),p(5,"td"),x(6),f(),p(7,"td"),x(8),f(),p(9,"td"),x(10),f(),p(11,"td"),x(12),f(),p(13,"td"),x(14),cs(15,"misPipes"),f(),p(16,"td"),A(17,hm,2,0,"button",11)(18,fm,2,0,"button",11),f(),p(19,"td"),A(20,pm,2,0,"button",12),p(21,"label"),x(22),f()()()),t&2){let e=i.$implicit,n=y();_(2),W(e.nombre),_(2),W(e.apellido),_(2),W(e.edad),_(2),W(e.tipo),_(2),W(e.email),_(2),W(e.obraSocial),_(2),W(ml(15,11,e.aprobado)),_(3),C("ngIf",e.aprobado),_(),C("ngIf",!e.aprobado),_(2),C("ngIf",e.tipo=="paciente"),_(2),W(n.getEspecialidades(e))}}var Ic=(()=>{class t{userService;excelExportService;usuarios=[];pacienteSeleccionado=new en;constructor(e,n){this.userService=e,this.excelExportService=n}traer(){this.userService.getUsuarios().subscribe(e=>{this.usuarios=e,console.log(this.usuarios)})}ngOnInit(){this.traer()}habilitarEspecialista(e){this.userService.updateUsuario(e.id,!0).then(()=>{e.aprobado=!0,console.log("se actualizo")}).catch(n=>console.error("error actualizando el usuario"))}deshabilitarEspecialista(e){this.userService.updateUsuario(e.id,!1).then(()=>{e.aprobado=!1}).catch(n=>console.error("error actualizando el usuario"))}seleccionarPaciente(e){this.pacienteSeleccionado.emit(e)}exportToExcel(){this.excelExportService.exportAsExcelFile(this.usuarios,"usuarios")}getEspecialidades(e){return e.especialidad&&e.especialidad.length>0?e.especialidad.map(n=>n.especialidad).join(", "):""}static \u0275fac=function(n){return new(n||t)(j(Oe),j(rc))};static \u0275cmp=ee({type:t,selectors:[["app-tabla-usuarios"]],outputs:{pacienteSeleccionado:"pacienteSeleccionado"},standalone:!0,features:[te],decls:33,vars:1,consts:[["id","tabs",1,"project-tab"],[1,"btn","btn-success",3,"click"],[1,"container"],[1,"row"],[1,"col-md-12"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[1,"text-center"],[1,"table","table-striped","table-hover","text-center"],[1,"thead-dark"],[4,"ngFor","ngForOf"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-info",3,"click",4,"ngIf"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-info",3,"click"]],template:function(n,s){n&1&&(p(0,"section",0)(1,"button",1),R("click",function(){return s.exportToExcel()}),x(2,"Exportar a Excel"),f(),p(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"div",6)(8,"h1",7),x(9,"Usuarios"),f(),p(10,"table",8)(11,"thead",9)(12,"tr")(13,"th"),x(14,"Nombre"),f(),p(15,"th"),x(16,"Apellido"),f(),p(17,"th"),x(18,"Edad"),f(),p(19,"th"),x(20,"Tipo"),f(),p(21,"th"),x(22,"Correo"),f(),p(23,"th"),x(24,"Obra Social"),f(),p(25,"th"),x(26,"Estado"),f(),p(27,"th"),x(28,"Acci\xF3n"),f(),p(29,"th"),x(30,"Especialidad/Historia Clinica"),f()()(),p(31,"tbody"),A(32,mm,23,13,"tr",10),f()()()()()()()()),n&2&&(_(32),C("ngForOf",s.usuarios))},dependencies:[de,Ye,ye,ge,kc],styles:[".project-tab[_ngcontent-%COMP%]{padding:8%}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]{background:#007b5e;color:#eee}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   h6.section-title[_ngcontent-%COMP%]{color:#eee}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#3cff00;background-color:transparent;border-color:transparent transparent #ffe600;border-bottom:3px solid!important;font-size:16px;font-weight:700}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;color:#ffe600;border-color:transparent transparent #ffe600;border-bottom:3px solid!important;font-size:16px;font-weight:600}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border:none;color:#3cff00}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{border:none;color:#3cff00}.project-tab[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#d9d9d9;color:#ab0000}.project-tab[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:none;color:#020822;font-weight:900;background-color:#a2e5be}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(odd){background-color:#0000000d}.table-hover[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#00000013}.text-center[_ngcontent-%COMP%]{text-align:center}.btn[_ngcontent-%COMP%]{font-weight:600}.btn-success[_ngcontent-%COMP%]{margin-bottom:20px}"]})}return t})();var mi=class extends hc{tipo="admin";aprobado=!0};function gm(t,i){t&1&&(p(0,"small"),x(1,"El nombre es requerido."),f())}function _m(t,i){t&1&&(p(0,"small"),x(1,"El nombre debe tener al menos 3 caracteres."),f())}function bm(t,i){if(t&1&&(p(0,"div",20),A(1,gm,2,0,"small",21)(2,_m,2,0,"small",21),f()),t&2){let e,n,s=y(2);_(),C("ngIf",(e=s.formRegistro.get("nombre"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("nombre"))==null||n.errors==null?null:n.errors.minlength)}}function xm(t,i){t&1&&(p(0,"small"),x(1,"El apellido es requerido."),f())}function vm(t,i){t&1&&(p(0,"small"),x(1,"El apellido debe tener al menos 2 caracteres."),f())}function ym(t,i){if(t&1&&(p(0,"div",20),A(1,xm,2,0,"small",21)(2,vm,2,0,"small",21),f()),t&2){let e,n,s=y(2);_(),C("ngIf",(e=s.formRegistro.get("apellido"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("apellido"))==null||n.errors==null?null:n.errors.minlength)}}function Cm(t,i){t&1&&(p(0,"small"),x(1,"La edad es requerida."),f())}function wm(t,i){t&1&&(p(0,"small"),x(1,"Ingrese una edad real."),f())}function Sm(t,i){if(t&1&&(p(0,"div",20),A(1,Cm,2,0,"small",21)(2,wm,2,0,"small",21),f()),t&2){let e,n,s=y(2);_(),C("ngIf",(e=s.formRegistro.get("edad"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("edad"))==null||n.errors==null?null:n.errors.maxlength)}}function Mm(t,i){t&1&&(p(0,"small"),x(1,"El dni es requerido."),f())}function Em(t,i){t&1&&(p(0,"small"),x(1,"El dni debe tener al menos 6 caracteres."),f())}function Tm(t,i){t&1&&(p(0,"small"),x(1,"El dni no debe tener mas de 9 caracteres."),f())}function Pm(t,i){if(t&1&&(p(0,"div",20),A(1,Mm,2,0,"small",21)(2,Em,2,0,"small",21)(3,Tm,2,0,"small",21),f()),t&2){let e,n,s,o=y(2);_(),C("ngIf",(e=o.formRegistro.get("dni"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=o.formRegistro.get("dni"))==null||n.errors==null?null:n.errors.min),_(),C("ngIf",(s=o.formRegistro.get("dni"))==null||s.errors==null?null:s.errors.max)}}function km(t,i){t&1&&(p(0,"small"),x(1,"El email es requerido."),f())}function Im(t,i){t&1&&(p(0,"small"),x(1,"Respetar formato de correo."),f())}function Om(t,i){if(t&1&&(p(0,"div",20),A(1,km,2,0,"small",21)(2,Im,2,0,"small",21),f()),t&2){let e,n,s=y(2);_(),C("ngIf",(e=s.formRegistro.get("email"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=s.formRegistro.get("email"))==null||n.errors==null?null:n.errors.email)}}function Dm(t,i){t&1&&(p(0,"small"),x(1,"La Contrase\xF1a es requerida."),f())}function Am(t,i){t&1&&(p(0,"small"),x(1,"Debe tener mas de 6 caracteres"),f())}function Rm(t,i){t&1&&(p(0,"small"),x(1,"Debe tener menos de 9 caractere"),f())}function Fm(t,i){if(t&1&&(p(0,"div",20),A(1,Dm,2,0,"small",21)(2,Am,2,0,"small",21)(3,Rm,2,0,"small",21),f()),t&2){let e,n,s,o=y(2);_(),C("ngIf",(e=o.formRegistro.get("contrasena"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=o.formRegistro.get("contrasena"))==null||n.errors==null?null:n.errors.minlength),_(),C("ngIf",(s=o.formRegistro.get("contrasena"))==null||s.errors==null?null:s.errors.maxlength)}}function Nm(t,i){t&1&&(p(0,"small"),x(1,"La Contrase\xF1a es requerida."),f())}function Lm(t,i){t&1&&(p(0,"small"),x(1,"Debe tener mas de 6 caracteres"),f())}function Vm(t,i){t&1&&(p(0,"small"),x(1,"Debe tener menos de 9 caractere"),f())}function Wm(t,i){if(t&1&&(p(0,"div",20),A(1,Nm,2,0,"small",21)(2,Lm,2,0,"small",21)(3,Vm,2,0,"small",21),f()),t&2){let e,n,s,o=y(2);_(),C("ngIf",(e=o.formRegistro.get("contrasena2"))==null||e.errors==null?null:e.errors.required),_(),C("ngIf",(n=o.formRegistro.get("contrasena2"))==null||n.errors==null?null:n.errors.minlength),_(),C("ngIf",(s=o.formRegistro.get("contrasena2"))==null||s.errors==null?null:s.errors.maxlength)}}function Bm(t,i){t&1&&(p(0,"small"),x(1,"La foto es requerida."),f())}function zm(t,i){if(t&1&&(p(0,"div",20),A(1,Bm,2,0,"small",21),f()),t&2){let e,n=y(2);_(),C("ngIf",(e=n.formRegistro.get("foto1"))==null||e.errors==null?null:e.errors.required)}}function jm(t,i){if(t&1){let e=V();p(0,"div",18)(1,"button",22),R("click",function(){P(e);let s=y(2);return k(s.enviar())}),x(2,"Enviar"),f()()}}function Hm(t,i){if(t&1){let e=V();p(0,"div",18)(1,"button",23),R("click",function(){P(e);let s=y(2);return k(s.enviar())}),x(2,"Enviar"),f()()}}function Um(t,i){if(t&1){let e=V();p(0,"form",5)(1,"div")(2,"input",6),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.nombre,s)||(o.paciente.nombre=s),k(s)}),f(),A(3,bm,3,2,"div",7),f(),p(4,"div")(5,"input",8),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.apellido,s)||(o.paciente.apellido=s),k(s)}),f(),A(6,ym,3,2,"div",7),f(),p(7,"div")(8,"input",9),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.edad,s)||(o.paciente.edad=s),k(s)}),f(),A(9,Sm,3,2,"div",7),f(),p(10,"div")(11,"input",10),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.dni,s)||(o.paciente.dni=s),k(s)}),f(),A(12,Pm,4,3,"div",7),f(),p(13,"div")(14,"input",11),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.email,s)||(o.paciente.email=s),k(s)}),f(),A(15,Om,3,2,"div",7),f(),p(16,"div")(17,"input",12),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.pass,s)||(o.paciente.pass=s),k(s)}),f(),A(18,Fm,4,3,"div",7),f(),p(19,"div")(20,"input",13),q("ngModelChange",function(s){P(e);let o=y();return Y(o.contrasena2,s)||(o.contrasena2=s),k(s)}),f(),A(21,Wm,4,3,"div",7),f(),p(22,"div")(23,"input",14),q("ngModelChange",function(s){P(e);let o=y();return Y(o.paciente.img_1,s)||(o.paciente.img_1=s),k(s)}),R("change",function(s){P(e);let o=y();return k(o.onFileSelected(s,1))}),f(),A(24,zm,2,1,"div",7),f(),p(25,"div",15)(26,"app-captcha2",16),R("resultadoFinal",function(s){P(e);let o=y();return k(o.tomarResultado(s))}),f()(),A(27,jm,3,0,"div",17)(28,Hm,3,0,"div",17),p(29,"div",18)(30,"div",19),x(31,"Loguearse"),f()()()}if(t&2){let e,n,s,o,r,a,l,c,d=y();C("formGroup",d.formRegistro),_(2),U("ngModel",d.paciente.nombre),_(),C("ngIf",(e=d.formRegistro.get("nombre"))==null?null:e.invalid),_(2),U("ngModel",d.paciente.apellido),_(),C("ngIf",(n=d.formRegistro.get("apellido"))==null?null:n.invalid),_(2),U("ngModel",d.paciente.edad),_(),C("ngIf",(s=d.formRegistro.get("edad"))==null?null:s.invalid),_(2),U("ngModel",d.paciente.dni),_(),C("ngIf",(o=d.formRegistro.get("dni"))==null?null:o.invalid),_(2),U("ngModel",d.paciente.email),_(),C("ngIf",(r=d.formRegistro.get("email"))==null?null:r.invalid),_(2),U("ngModel",d.paciente.pass),_(),C("ngIf",(a=d.formRegistro.get("contrasena"))==null?null:a.invalid),_(2),U("ngModel",d.contrasena2),_(),C("ngIf",(l=d.formRegistro.get("contrasena2"))==null?null:l.invalid),_(2),U("ngModel",d.paciente.img_1),_(),C("ngIf",(c=d.formRegistro.get("foto1"))==null?null:c.invalid),_(3),C("ngIf",d.resultado!=!0),_(),C("ngIf",d.resultado==!0)}}function Ym(t,i){if(t&1&&(p(0,"div",24)(1,"div",25)(2,"div",26),x(3),f()()()),t&2){let e=y();_(2),as(e.clase),rs("width",e.ProgresoDeAncho),_(),Ue(" ",e.progresoMensaje," - ",e.progreso,"% ")}}var Oc=(()=>{class t{fb;authService;fire;router;resultado;paciente;nuevoPaciente;Mensaje;progreso;progresoMensaje="esperando...";logeando=!0;contrasena2;logueado;ProgresoDeAncho;subscription;foto1;foto2;storage=lc();formRegistro;clase="progress-bar progress-bar-info progress-bar-striped ";constructor(e,n,s,o){this.fb=e,this.authService=n,this.fire=s,this.router=o,this.paciente=new mi,this.nuevoPaciente=new mi,this.formRegistro=this.fb.group({nombre:["",[re.required,re.minLength(3)]],apellido:["",[re.required,re.minLength(2)]],edad:["",[re.required,re.min(0),re.max(150)]],dni:["",[re.required,re.min(1e6),re.max(1e8)]],email:["",[re.required,re.email]],contrasena:["",[re.required,re.minLength(6),re.maxLength(8)]],contrasena2:["",[re.required,re.minLength(6),re.maxLength(8)]],foto1:["",[re.required]]})}ngOnInit(){sessionStorage.clear()}onFileSelected(e,n){let s=e.target.files[0];n===1?this.foto1=s:this.foto2=s}tomarResultado(e){this.resultado=e}enviar(){return Fe(this,null,function*(){if(this.formRegistro.valid&&this.resultado===!0)if(this.paciente.pass==this.contrasena2){let e=yield this.authService.register(this.paciente.email,this.paciente.pass);if(this.MoverBarraDeProgreso(),yield e){yield new Promise(r=>setTimeout(r,2500)),this.paciente.tipo="admin";let n=nc(this.fire,"Usuarios"),s=cc(this.storage,`admin/${this.foto1.name}`),o=yield dc(s,this.foto1);this.paciente.img_1=yield ac(o.ref),ic(n,{email:this.paciente.email,nombre:this.paciente.nombre,apellido:this.paciente.apellido,tipo:this.paciente.tipo,dni:this.paciente.dni,contrase\u00F1a:this.paciente.pass,edad:this.paciente.edad,foto1:this.paciente.img_1,aprobado:!0,id:e?.user.uid}),sessionStorage.setItem("user",this.paciente.email),sessionStorage.setItem("muestra","true"),this.router.navigateByUrl("/home",{replaceUrl:!0})}else this.MostarMensaje("Usuario ya registrado, por favor utilice otro correo",!0),this.paciente=new mi,this.contrasena2="",this.logeando=!0}else this.MostarMensaje("Las contrase\xF1as no coinciden, por favor revisarlas",!0),this.logeando=!0;else this.MostarMensaje("Hay datos invalidos en el formulario, por favor revisarlos",!0),this.logeando=!0})}MostarMensaje(e,n){this.Mensaje=e;var s=document.getElementById("snackbar");n&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3e3)}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let e=Jn(30);this.subscription=e.subscribe(n=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription.unsubscribe();break}})}static \u0275fac=function(n){return new(n||t)(j(vs),j(pi),j(ws),j(yt))};static \u0275cmp=ee({type:t,selectors:[["app-form-admin"]],standalone:!0,features:[te],decls:7,vars:3,consts:[[1,"container"],[1,"heading"],[3,"formGroup",4,"ngIf"],["style","margin-top: 90%;",4,"ngIf"],["id","snackbar"],[3,"formGroup"],["type","text","name","fname","id","fname","formControlName","nombre","placeholder","Nombre",1,"form-control",3,"ngModelChange","ngModel"],["class","validacion",4,"ngIf"],["type","text","name","lname","id","lname","formControlName","apellido","placeholder","Apellido",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","edad","id","edad","formControlName","edad","placeholder","Edad",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","dni","id","dni","formControlName","dni","placeholder","DNI",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","id","email","formControlName","email","placeholder","Correo Electr\xF3nico",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","formControlName","contrasena","placeholder","Contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password2","id","password2","formControlName","contrasena2","placeholder","Reingresar contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","file","name","foto1","id","foto1","formControlName","foto1","placeholder","Foto 1",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-sm-12"],[3,"resultadoFinal"],["class","col-sm-12","style","margin-left: -34px;",4,"ngIf"],[1,"col-sm-12",2,"margin-left","-34px"],["routerLink","/login",1,"btn","btn-warning"],[1,"validacion"],[4,"ngIf"],["disabled","",1,"btn","btn-warning",3,"click"],[1,"btn","btn-warning",3,"click"],[2,"margin-top","90%"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"]],template:function(n,s){n&1&&(p(0,"div",0)(1,"header",1),x(2,"Formulario de Registro de Pacientes"),f(),A(3,Um,32,19,"form",2)(4,Ym,4,6,"div",3),p(5,"div",4),x(6),f()()),n&2&&(_(3),C("ngIf",s.logeando),_(),C("ngIf",!s.logeando),_(2),W(s.Mensaje))},dependencies:[de,ye,ge,gs,hi,_s,Ct,ps,wt,bs,xs,uc],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc}.cancelbtn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#f44336}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{float:left;width:50%}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006;padding-top:60px}.container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#000;border-style:1px solid grey;padding:3.9%;text-align:center;opacity:.8;max-width:40%}.lastname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:10px}.firstname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:5px}#lname[_ngcontent-%COMP%]{margin-top:5px}.heading[_ngcontent-%COMP%]{text-decoration:bold;text-align:center;font-size:30px;color:#f96;padding-top:35px}#email[_ngcontent-%COMP%]{margin-top:5px}.mail[_ngcontent-%COMP%]{font-family:sans-serif;color:#fff;font-size:14px;margin-top:13px}.pass[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-family:sans-serif;margin-top:9px}#password[_ngcontent-%COMP%]{margin-top:6px}.pno[_ngcontent-%COMP%]{font-size:18px;margin-left:-13px;margin-top:10px;color:#ff9}.gender[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif;font-size:14px;margin-left:28px;margin-top:8px}.sbutton[_ngcontent-%COMP%]{color:#fff;font-size:20px;border:1px solid white;background-color:#080808;width:32%;margin-left:41%;margin-top:16px;box-shadow:0 2px 2px #fff}.btn.btn-warning[_ngcontent-%COMP%]:hover{box-shadow:2px 1px 2px 3px #9cf;background:#5900a6;color:#fff;transition:background-color 1.15s ease-in-out,border-color 1.15s ease-in-out,box-shadow 1.15s ease-in-out}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;color:#fff;text-align:center;border-radius:2px;z-index:1;left:50%;bottom:30px;font-size:20px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#df1818;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}form[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px}.form-control[_ngcontent-%COMP%]{width:100%;padding:10px;margin-top:5px}.col-sm-12[_ngcontent-%COMP%]{grid-column:span 2}.validacion[_ngcontent-%COMP%]{color:#fff;font-family:Arial,Helvetica,sans-serif;font-size:15px}"]})}return t})();function qm(t,i){if(t&1&&(p(0,"li",8)(1,"b"),x(2),f(),p(3,"span"),x(4),f(),p(5,"span"),x(6),f(),p(7,"span"),x(8),f(),p(9,"span"),x(10),f()()),t&2){let e=i.$implicit;_(2),be("",e.clave,": "),_(2),W(e.valor),_(2),W(e.numero),_(2),W(e.rango),_(2),W(e.eleccion)}}function Gm(t,i){if(t&1&&(p(0,"div",5)(1,"div",6)(2,"ul",7)(3,"li",8)(4,"b"),x(5,"Altura: "),f(),p(6,"span"),x(7),f()(),p(8,"li",8)(9,"b"),x(10,"Peso: "),f(),p(11,"span"),x(12),f()(),p(13,"li",8)(14,"b"),x(15,"Temperatura: "),f(),p(16,"span"),x(17),f()(),p(18,"li",8)(19,"b"),x(20,"Presi\xF3n: "),f(),p(21,"span"),x(22),f()(),p(23,"li",8)(24,"b"),x(25,"Especialidad: "),f(),p(26,"span"),x(27),f()(),A(28,qm,11,5,"li",9),f()()()),t&2){let e=i.$implicit;_(7),be("",e.altura," cm"),_(5),be("",e.peso," kg"),_(5),be("",e.temperatura," \xB0C"),_(5),be("",e.presion," mmHg"),_(5),W(e.especialidad),_(),C("ngForOf",e.dinamicos)}}var gi=(()=>{class t{firebaseService;historiaService;usuario;mail=sessionStorage.getItem("user");paciente=new fc;historias=[];pacientes=[];emailPaciente;constructor(e,n){this.firebaseService=e,this.historiaService=n}ngOnInit(){console.log(this.mail),this.cargarUsuario(),setTimeout(()=>{this.usuario.tipo=="paciente"&&(this.paciente=this.usuario)},5500),console.log("email paciente",this.emailPaciente),this.emailPaciente?this.cargarPaciente2():(this.cargarPacientes(),console.log("historias",this.historias))}cargarUsuario(){return Fe(this,null,function*(){let e=sessionStorage.getItem("user");this.usuario=yield this.firebaseService.getUsuarioEmail(e),console.log("usuario",this.usuario)})}cargarPacientes(){this.historias=[],this.firebaseService.getUsuariosPorTipo("paciente").subscribe(e=>{this.pacientes=e,console.log(this.pacientes),this.pacientes.forEach(n=>{this.mail==n.email&&(this.paciente=n)}),this.historiaService.getHistoriaDB().subscribe(n=>{n.forEach(s=>{s.paciente===this.paciente.email&&this.historias.push(s)})})})}cargarPaciente2(){this.historias=[],this.firebaseService.getUsuariosPorTipo("paciente").subscribe(e=>{this.pacientes=e,console.log(this.pacientes),this.pacientes.forEach(n=>{this.emailPaciente==n.email&&(this.paciente=n)}),this.historiaService.getHistoriaDB().subscribe(n=>{n.forEach(s=>{s.paciente===this.paciente.email&&this.historias.push(s)})})})}static \u0275fac=function(n){return new(n||t)(j(Oe),j(rt))};static \u0275cmp=ee({type:t,selectors:[["app-historia-clinica"]],inputs:{emailPaciente:"emailPaciente"},standalone:!0,features:[te],decls:8,vars:3,consts:[[1,"mt-5",2,"text-align","center"],[1,"container","mt-4"],[1,"row","justify-content-center"],[1,"col-md-8"],["class","card mb-4 shadow-sm historia-card",4,"ngFor","ngForOf"],[1,"card","mb-4","shadow-sm","historia-card"],[1,"card-body"],[1,"list-group"],[1,"list-group-item","historia-item"],["class","list-group-item historia-item",4,"ngFor","ngForOf"]],template:function(n,s){n&1&&(p(0,"div",0),O(1,"br"),p(2,"h1"),x(3),f()(),p(4,"div",1)(5,"div",2)(6,"div",3),A(7,Gm,29,6,"div",4),f()()()),n&2&&(_(3),Ue("Historia Clinica de: ",s.paciente.nombre," ",s.paciente.apellido,""),_(4),C("ngForOf",s.historias))},dependencies:[de,Ye,ge],styles:[".paciente-titulo[_ngcontent-%COMP%]{color:#4a90e2;font-family:Arial,sans-serif;font-weight:700;text-shadow:2px 2px 4px rgba(0,0,0,.1)}.historia-card[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:10px;transition:transform .3s ease-in-out}.historia-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.historia-item[_ngcontent-%COMP%]{font-family:Verdana,sans-serif;font-size:16px;background-color:#f8f9fa;border:none;border-bottom:1px solid #dee2e6}.historia-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.historia-item[_ngcontent-%COMP%]   b[_ngcontent-%COMP%]{color:#17a2b8}.historia-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:5px;color:#6c757d}"]})}return t})();function $m(t,i){if(t&1){let e=V();p(0,"div"),O(1,"app-form-admin"),p(2,"button",1),R("click",function(){P(e);let s=y(2);return k(s.volverMenuSeleccion())}),x(3,"Volver"),f()()}}function Km(t,i){if(t&1){let e=V();p(0,"div")(1,"button",1),R("click",function(){P(e);let s=y(2);return k(s.cambiarSeccion("admin"))}),x(2,"Crear usuario Admininistrador"),f(),p(3,"app-tabla-usuarios",2),R("pacienteSeleccionado",function(s){P(e);let o=y(2);return k(o.recibirPacienteSeleccionado(s))}),f()()}}function Xm(t,i){if(t&1&&(p(0,"div"),A(1,$m,4,0,"div",0)(2,Km,4,0,"div",0),f()),t&2){let e=y();_(),C("ngIf",e.seccion=="seleccion"),_(),C("ngIf",e.seccion=="menu")}}function Qm(t,i){if(t&1&&(p(0,"div"),O(1,"app-historia-clinica",3),f()),t&2){let e=y();_(),C("emailPaciente",e.emailSeleccionado)}}var Dc=(()=>{class t{emailSeleccionado;seccion="menu";tipoUsuarioARegistrar="";cambiarSeccion(e){this.seccion="seleccion",this.tipoUsuarioARegistrar=e}volverMenuSeleccion(){this.seccion="menu"}recibirPacienteSeleccionado(e){this.emailSeleccionado=e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-usuarios"]],standalone:!0,features:[te],decls:2,vars:2,consts:[[4,"ngIf"],[1,"volver-btn",3,"click"],[3,"pacienteSeleccionado"],[3,"emailPaciente"]],template:function(n,s){n&1&&A(0,Xm,3,2,"div",0)(1,Qm,2,1,"div",0),n&2&&(C("ngIf",!s.emailSeleccionado),_(),C("ngIf",s.emailSeleccionado))},dependencies:[Ic,ge,de,ye,Oc,gi],styles:[".fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);height:100vh}.volver-btn[_ngcontent-%COMP%]{position:absolute;top:110px;right:10%;background-color:#f44336;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer}"]})}return t})();var Zm=(t,i)=>({"btn-success":t,"btn-danger":i});function eg(t,i){t&1&&O(0,"div",16)}function tg(t,i){if(t&1&&(p(0,"div",16),O(1,"img",17),f()),t&2){let e=y(2);_(),C("src",e.userData==null?null:e.userData.foto1,ci)}}function ig(t,i){if(t&1&&(p(0,"div",16)(1,"div",18)(2,"div",19)(3,"div",20),O(4,"img",21),f(),p(5,"div",22),O(6,"img",23),f()(),p(7,"button",24),O(8,"span",25),p(9,"span",26),x(10,"Previous"),f()(),p(11,"button",27),O(12,"span",28),p(13,"span",26),x(14,"Next"),f()()()()),t&2){let e=y(2);_(4),C("src",e.userData.foto1,ci),_(2),C("src",e.userData.foto2,ci)}}function ng(t,i){t&1&&(p(0,"button",29),x(1,"Historial Cl\xEDnico"),f())}function sg(t,i){if(t&1&&(p(0,"p",13),x(1),f()),t&2){let e=y(2);_(),be("Obra social: ",e.userData==null?null:e.userData.obraSocial,"")}}function og(t,i){if(t&1&&(p(0,"ul")(1,"li"),x(2),f()()),t&2){let e=i.$implicit;_(2),W(e.especialidad)}}function rg(t,i){if(t&1){let e=V();p(0,"div")(1,"p",13),x(2,"Especialidades:"),f(),A(3,og,3,1,"ul",30),O(4,"hr"),p(5,"div")(6,"button",31),R("click",function(){P(e);let s=y(2);return k(s.abrirMisHorarios())}),x(7,"Mis Horarios"),f()()()}if(t&2){let e=y(2);_(3),C("ngForOf",e.userData==null?null:e.userData.especialidad)}}function ag(t,i){if(t&1&&(p(0,"div",6),A(1,eg,1,0,"div",7)(2,tg,2,1,"div",7)(3,ig,15,2,"div",7),p(4,"div",8)(5,"div",9)(6,"div",10)(7,"h1",11),x(8),f(),A(9,ng,2,0,"button",12),f(),p(10,"p",13),x(11),f(),p(12,"p",13),x(13),f(),p(14,"p",13),x(15),f(),p(16,"p",13),x(17),f(),A(18,sg,2,1,"p",14)(19,rg,8,1,"div",15),f()()()),t&2){let e=y();_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="admin"),_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="especialista"),_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="paciente"),_(5),Ue("",e.userData==null?null:e.userData.nombre," ",e.userData==null?null:e.userData.apellido,""),_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="paciente"),_(2),be("Rol: ",e.userData==null?null:e.userData.tipo,""),_(2),be("Email: ",e.userData==null?null:e.userData.email,""),_(2),be("Edad: ",e.userData==null?null:e.userData.edad,""),_(2),be("DNI: ",e.userData==null?null:e.userData.dni,""),_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="paciente"),_(),C("ngIf",(e.userData==null?null:e.userData.tipo)=="especialista")}}function lg(t,i){if(t&1&&(p(0,"div")(1,"button",42),x(2),O(3,"span",43),f()()),t&2){let e=y().$implicit;_(2),W(e.ini)}}function cg(t,i){if(t&1&&(p(0,"mat-option",46),x(1),f()),t&2){let e=i.$implicit;C("value",e),_(),W(e)}}function dg(t,i){if(t&1){let e=V();p(0,"div")(1,"mat-form-field")(2,"mat-select",44),R("change",function(s){P(e);let o=y().$implicit,r=y(2);return k(r.cambiarHorario(o.dia,"inicio",s))}),q("ngModelChange",function(s){P(e);let o=y().$implicit;return Y(o.ini,s)||(o.ini=s),k(s)}),A(3,cg,2,2,"mat-option",45),f()()()}if(t&2){let e=y().$implicit,n=y(2);_(2),U("ngModel",e.ini),_(),C("ngForOf",n.horarios)}}function ug(t,i){if(t&1&&(p(0,"div")(1,"button",42),x(2),O(3,"span",43),f()()),t&2){let e=y().$implicit;_(2),W(e.fin)}}function hg(t,i){if(t&1&&(p(0,"mat-option",46),x(1),f()),t&2){let e=i.$implicit;C("value",e),_(),W(e)}}function fg(t,i){if(t&1){let e=V();p(0,"div")(1,"mat-form-field")(2,"mat-select",44),R("change",function(s){P(e);let o=y().$implicit,r=y(2);return k(r.cambiarHorario(o.dia,"fin",s))}),q("ngModelChange",function(s){P(e);let o=y().$implicit;return Y(o.fin,s)||(o.fin=s),k(s)}),A(3,hg,2,2,"mat-option",45),f()()()}if(t&2){let e=y().$implicit,n=y(2);_(2),U("ngModel",e.fin),_(),C("ngForOf",n.horarios)}}function pg(t,i){if(t&1&&(p(0,"div")(1,"button",47),x(2),O(3,"span",43),f()()),t&2){let e=y().index,n=y(2);_(2),W(n.especialidadesPorDia[e])}}function mg(t,i){if(t&1&&(p(0,"mat-option",46),x(1),f()),t&2){let e=i.$implicit;C("value",e),_(),W(e.especialidad)}}function gg(t,i){if(t&1){let e=V();p(0,"div")(1,"mat-form-field")(2,"mat-select",44),R("change",function(s){P(e);let o=y().$implicit,r=y(2);return k(r.cambiarEspecialidad(o.dia,s))}),q("ngModelChange",function(s){P(e);let o=y().index,r=y(2);return Y(r.especialidadesPorDia[o],s)||(r.especialidadesPorDia[o]=s),k(s)}),A(3,mg,2,2,"mat-option",45),f()()()}if(t&2){let e=y().index,n=y(2);_(2),U("ngModel",n.especialidadesPorDia[e]),_(),C("ngForOf",n.userData.especialidad)}}function _g(t,i){if(t&1){let e=V();p(0,"div",37)(1,"div",38)(2,"button",39),R("click",function(){let s=P(e),o=s.$implicit,r=s.index,a=y(2);return k(a.cambiarEstado(o.dia,a.disponibilidades[r]))}),x(3),f()(),p(4,"div",38)(5,"div",40)(6,"div",41),A(7,lg,4,1,"div",15)(8,dg,4,2,"div",15),f()()(),p(9,"div",38)(10,"div",40)(11,"div",41),A(12,ug,4,1,"div",15)(13,fg,4,2,"div",15),f()()(),p(14,"div",38)(15,"div",40)(16,"div",41),A(17,pg,4,1,"div",15)(18,gg,4,2,"div",15),f()()()()}if(t&2){let e=i.$implicit,n=i.index,s=y(2);_(2),C("ngClass",fl(9,Zm,s.disponibilidades[n]==="Habilitado",s.disponibilidades[n]==="Inhabilitado")),_(),Ue("",e.dia," ",s.disponibilidades[n],""),_(4),C("ngIf",s.disponibilidades[n]!="Habilitado"),_(),C("ngIf",s.disponibilidades[n]=="Habilitado"),_(4),C("ngIf",s.disponibilidades[n]!="Habilitado"),_(),C("ngIf",s.disponibilidades[n]=="Habilitado"),_(4),C("ngIf",s.disponibilidades[n]!="Habilitado"),_(),C("ngIf",s.disponibilidades[n]=="Habilitado")}}function bg(t,i){if(t&1){let e=V();p(0,"div",32)(1,"div",33),O(2,"br"),p(3,"h1",34),x(4,"Disponibilidad Horaria"),f(),O(5,"br"),A(6,_g,19,12,"div",35),p(7,"button",36),R("click",function(){P(e);let s=y();return k(s.cerrarModulo())}),x(8,"Confirmar"),f(),O(9,"br"),f()()}if(t&2){let e=y();_(6),C("ngForOf",e.dias)}}var Ac=(()=>{class t{firebaseService;horarioEspService;loading=!0;mostrar=!1;email;userData;porTipo=[];dias=[{dia:"Lunes",ini:"",fin:""},{dia:"Martes",ini:"",fin:""},{dia:"Miercoles",ini:"",fin:""},{dia:"Jueves",ini:"",fin:""},{dia:"Viernes",ini:"",fin:""},{dia:"Sabado",ini:"",fin:""}];horasDefault=[8,9,10,11,12,13,14,15,16,17,18,19];disponibilidades=["Habilitado","Habilitado","Habilitado","Habilitado","Habilitado","Habilitado"];horarios=["8:00","9:00","10:00","11:00","12:00","13:00","14:00","15:00","16:00","17:00","18:00","19:00"];horariosEspecialista;especialidadesPorDia=[];seccion="menu";tipoUsuarioARegistrar="";constructor(e,n){this.firebaseService=e,this.horarioEspService=n}ngOnInit(){this.email=sessionStorage.getItem("user"),setTimeout(()=>{this.loading=!1},3500),this.firebaseService.getUsuariosPorTipo("especialista").subscribe(e=>{this.porTipo=e,console.log(this.porTipo)}),this.searchUser().then(()=>{this.horarioEspService.getHorarioEspecialistas().subscribe(e=>{e.forEach(n=>{console.log(n),this.userData.email==n.email&&(this.horariosEspecialista=n,this.disponibilidades=this.horariosEspecialista.estados,this.especialidadesPorDia=this.horariosEspecialista.especialidadesPorDia,this.cargarHorarios(n))})})})}searchUser(){return Fe(this,null,function*(){console.log("entre aca"),this.userData=yield this.firebaseService.getUsuarioEmail(this.email)})}cambiarSeccion(e){this.seccion="seleccion",this.tipoUsuarioARegistrar=e}volverMenuSeleccion(){this.seccion="menu"}abrirMisHorarios(){this.mostrar=!0}cargarHorarios(e){this.dias[0].ini=e.lunInicio,this.dias[0].fin=e.lunFin,this.dias[1].ini=e.marInicio,this.dias[1].fin=e.marFin,this.dias[2].ini=e.mierInicio,this.dias[2].fin=e.mierFin,this.dias[3].ini=e.jueInicio,this.dias[3].fin=e.jueFin,this.dias[4].ini=e.vierInicio,this.dias[4].fin=e.vierFin,this.dias[5].ini=e.sabInicio,this.dias[5].fin=e.sabFin}cambiarEstado(e,n){switch(n=="Habilitado"?n="Inhabilitado":n="Habilitado",e){case"Lunes":this.horariosEspecialista.estados[0]=n;break;case"Martes":this.horariosEspecialista.estados[1]=n;break;case"Miercoles":this.horariosEspecialista.estados[2]=n;break;case"Jueves":this.horariosEspecialista.estados[3]=n;break;case"Viernes":this.horariosEspecialista.estados[4]=n;break;case"Sabado":this.horariosEspecialista.estados[5]=n;break}console.log(this.horarios)}cambiarHorario(e,n,s){let r=s.target.value;if(n=="inicio")switch(e){case"Lunes":this.dias[0].ini=r;break;case"Martes":this.dias[1].ini=r;break;case"Miercoles":this.dias[2].ini=r;break;case"Jueves":this.dias[3].ini=r;break;case"Viernes":this.dias[4].ini=r;break;case"Sabado":this.dias[5].ini=r;break}else switch(e){case"Lunes":this.dias[0].fin=r;break;case"Martes":this.dias[1].fin=r;break;case"Miercoles":this.dias[2].fin=r;break;case"Jueves":this.dias[3].fin=r;break;case"Viernes":this.dias[4].fin=r;break;case"Sabado":this.dias[5].fin=r;break}}cambiarEspecialidad(e,n){console.log(this.especialidadesPorDia);let o=n.target.value;switch(e){case"Lunes":this.especialidadesPorDia[0]=o;break;case"Martes":this.especialidadesPorDia[1]=o;break;case"Miercoles":this.especialidadesPorDia[2]=o;break;case"Jueves":this.especialidadesPorDia[3]=o;break;case"Viernes":this.especialidadesPorDia[4]=o;break;case"Sabado":this.especialidadesPorDia[5]=o;break}}actualizarHorarioEspecialista(){this.horariosEspecialista.lunInicio=this.dias[0].ini,this.horariosEspecialista.lunFin=this.dias[0].fin,this.horariosEspecialista.marInicio=this.dias[1].ini,this.horariosEspecialista.marFin=this.dias[1].fin,this.horariosEspecialista.mierInicio=this.dias[2].ini,this.horariosEspecialista.mierFin=this.dias[2].fin,this.horariosEspecialista.jueInicio=this.dias[3].ini,this.horariosEspecialista.jueFin=this.dias[3].fin,this.horariosEspecialista.vierInicio=this.dias[4].ini,this.horariosEspecialista.vierFin=this.dias[4].fin,this.horariosEspecialista.sabInicio=this.dias[5].ini,this.horariosEspecialista.sabFin=this.dias[5].fin}cerrarModulo(){this.actualizarHorarioEspecialista(),this.horarioEspService.updateHorarioEspecialistas(this.horariosEspecialista),this.mostrar=!1}static \u0275fac=function(n){return new(n||t)(j(Oe),j(Ms))};static \u0275cmp=ee({type:t,selectors:[["app-mi-perfil"]],standalone:!0,features:[te],decls:6,vars:3,consts:[[3,"showSpinner"],[1,"container-fluid","d-flex","justify-content-center","aling-content-center"],[1,"pantalla","d-flex","flex-column","position-relative"],[1,"card","m-5","p-3",2,"width","80%","max-width","90%"],["class","row g-0",4,"ngIf"],["class","container-fluid contenedor p-4 text-center ",4,"ngIf"],[1,"row","g-0"],["class","col-md-4",4,"ngIf"],[1,"col-md-8"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-title"],["class","btn btn-info","routerLink","/historial",4,"ngIf"],["appLupa","",1,"card-text"],["appLupa","","class","card-text",4,"ngIf"],[4,"ngIf"],[1,"col-md-4"],["alt","...",1,"img-fluid","rounded-start",3,"src"],["id","carouselExampleControls","data-bs-ride","carousel",1,"carousel","slide"],[1,"carousel-inner"],[1,"carousel-item","active"],["alt","...",1,"d-block","w-100","active",3,"src"],[1,"carousel-item"],["alt","...",1,"d-block","w-100",3,"src"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","prev",1,"carousel-control-prev"],["aria-hidden","true",1,"carousel-control-prev-icon"],[1,"visually-hidden"],["type","button","data-bs-target","#carouselExampleControls","data-bs-slide","next",1,"carousel-control-next"],["aria-hidden","true",1,"carousel-control-next-icon"],["routerLink","/historial",1,"btn","btn-info"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","horarios","largo",3,"click"],[1,"container-fluid","contenedor","p-4","text-center"],[1,"modal-content","card",2,"text-align","center","max-width","1200px","max-height","600px","margin","0 auto"],[1,"title"],["style","margin: 0 auto; float: none;","class","w-75 row",4,"ngFor","ngForOf"],[1,"btn","btn-primary",2,"margin","0 auto","float","none",3,"click"],[1,"w-75","row",2,"margin","0 auto","float","none"],[1,"col-md-3","mb-3"],[1,"btn","disponibilidad",3,"click","ngClass"],[1,"form-floating","mb-3"],["dropdown","",1,"btn-group","w-100"],["id","button-basic","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn","btn-secondary","dropdown-toggle"],[1,"caret"],[3,"change","ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","button-basic2","dropdownToggle","","type","button","aria-controls","dropdown-basic",1,"btn","btn","btn-secondary","dropdown-toggle"]],template:function(n,s){n&1&&(O(0,"app-logo",0),p(1,"div",1)(2,"div",2)(3,"div",3),A(4,ag,20,12,"div",4)(5,bg,10,1,"div",5),f()()()),n&2&&(C("showSpinner",s.loading),_(4),C("ngIf",!s.mostrar),_(),C("ngIf",(s.userData==null?null:s.userData.tipo)==="especialista"&&s.mostrar===!0))},dependencies:[de,us,Ye,ye,ge,Ct,ms,vc,_c,xc,pc,bc,fs,ks],styles:['.fondo[_ngcontent-%COMP%]{background:url("./media/slider-bg-2-7UI2L5W4.jpg");background-size:cover;height:100%;display:flex;align-items:center;justify-content:center}.pantalla[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:15vh;background-color:#00000080;height:90%;width:80%;border-radius:20px;padding:20px}.backMenu[_ngcontent-%COMP%]{border-radius:50px;background-color:#fa9b39;font-size:25px;font-weight:700}.backMenu[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}.titulo[_ngcontent-%COMP%]{color:#fff;margin-bottom:20px}.img-btn[_ngcontent-%COMP%]{width:25px;height:25px;margin-left:5px;margin-right:5px}']})}return t})();var Os=class{id;paciente;especialista;dinamicos;altura;peso;temperatura;presion;especialidad;constructor(i,e,n,s,o,r,a,l,c){this.id=i,this.paciente=e,this.especialista=n,this.dinamicos=s,this.altura=o,this.peso=r,this.temperatura=a,this.presion=l,this.especialidad=c}};var Rc=(()=>{class t{firebaseService;turnosService;especialistas=[];pacientes=[];historias=[];constructor(e,n){this.firebaseService=e,this.turnosService=n}transform(e,n){if(!e||!n)return e;n=n.toLowerCase();let s=n.length,o=e.filter(r=>r.estado.toLowerCase().substring(0,s)==n);return o.length>0||(o=e.filter(r=>{let a=!1;return this.firebaseService.getUsuariosPorTipo("especialista").subscribe(l=>{this.especialistas=l,console.log("especialistas",this.especialistas)}),this.especialistas.forEach(l=>{l.email==r.especialista&&l.nombre.toLowerCase().substring(0,s)==n&&(a=!0)}),a}),o.length>0)||(o=e.filter(r=>{let a=!1;return this.turnosService.getHistoriaDB().subscribe(l=>{this.historias=l,console.log(l)}),this.historias.forEach(l=>{l.paciente==r.paciente&&l.especialidad==r.especialidad&&r.estado=="finalizado"&&l.dinamicos.forEach(c=>{console.log(c),console.log(c.clave.toLowerCase()),console.log(n),c.clave.toLowerCase().substring(0,s)==n&&r.estado=="finalizado"&&(a=!0,console.log(r))})}),a}),o.length>0)||(o=e.filter(r=>{let a=!1;return this.turnosService.getHistoriaDB().subscribe(l=>{this.historias=l,console.log(l)}),this.historias.forEach(l=>{l.paciente==r.paciente&&l.especialidad==r.especialidad&&r.estado=="finalizado"&&(l.altura.toLowerCase().substring(0,s)==n&&r.estado=="finalizado"||l.peso.toString().toLowerCase().substring(0,s)==n&&r.estado=="finalizado"||l.presion.toString().toLowerCase().substring(0,s)==n&&r.estado=="finalizado"||l.temperatura.toString().toLowerCase().substring(0,s)==n&&r.estado=="finalizado")&&(a=!0)}),a}),o.length>0)||(o=e.filter(r=>r.especialidad.toLowerCase().substring(0,s)==n||r.comentario.toLowerCase().substring(0,s)==n||r.hora.toString().toLowerCase().substring(0,s)==n||r.mes.toString().toLowerCase().substring(0,s)==n||r.estado.toLowerCase().substring(0,s)==n||r.dia.toLowerCase().substring(0,s)==n||r.calificacion.toLowerCase().substring(0,s)==n?!0:r.anio.toLowerCase().substring(0,s)==n),o.length>0)||(o=e.filter(r=>{let a=!1;return this.firebaseService.getUsuariosPorTipo("paciente").subscribe(l=>{this.pacientes=l,console.log("pacientes",this.pacientes)}),this.pacientes.forEach(l=>{l.email==r.paciente&&l.nombre.toLowerCase().substring(0,s)==n&&(a=!0)}),a}),o.length>0)?o:[]}static \u0275fac=function(n){return new(n||t)(j(Oe,16),j(rt,16))};static \u0275pipe=is({name:"filtros",type:t,pure:!0,standalone:!0})}return t})();var Fc=(()=>{class t{el;renderer;estado;constructor(e,n){this.el=e,this.renderer=n}ngOnChanges(){this.setColor()}setColor(){let e="";switch(this.estado){case"finalizado":e="bg-success text-white";break;case"pendiente":e="bg-secondary text-white";break;case"cancelado":e="bg-danger text-white";break;default:e="bg-light"}this.renderer.setAttribute(this.el.nativeElement,"class",e)}static \u0275fac=function(n){return new(n||t)(j(rl),j(dl))};static \u0275dir=nl({type:t,selectors:[["","appEstadoColor",""]],inputs:{estado:[0,"appEstadoColor","estado"]},standalone:!0,features:[sl]})}return t})();var vg=(t,i,e,n)=>({"btn-secondary":t,"btn-danger":i,"btn-primary":e,"btn-success":n}),yg=()=>[],an=t=>({checked:t});function Cg(t,i){if(t&1){let e=V();p(0,"button",24),R("click",function(){let s=P(e).$implicit,o=y();return k(o.verTurno(s))}),p(1,"i"),x(2),f()()}if(t&2){let e=i.$implicit;C("appEstadoColor",e.estado),_(2),ls("",e.especialidad," - ",e.dia," de ",e.mes,"")}}function wg(t,i){t&1&&(p(0,"div",25),O(1,"br"),p(2,"p"),x(3,"No se encontr\xF3 ningun turno"),f()())}function Sg(t,i){if(t&1){let e=V();p(0,"div",15)(1,"label",2),x(2,"Especialista"),f(),p(3,"input",26),q("ngModelChange",function(s){P(e);let o=y();return Y(o.especialistaNombreCompleto,s)||(o.especialistaNombreCompleto=s),k(s)}),f()()}if(t&2){let e=y();_(3),U("ngModel",e.especialistaNombreCompleto),C("readonly",!0)}}function Mg(t,i){if(t&1){let e=V();p(0,"div",15)(1,"label",2),x(2,"Paciente"),f(),p(3,"input",26),q("ngModelChange",function(s){P(e);let o=y();return Y(o.pacienteNombreCompleto,s)||(o.pacienteNombreCompleto=s),k(s)}),f()()}if(t&2){let e=y();_(3),U("ngModel",e.pacienteNombreCompleto),C("readonly",!0)}}function Eg(t,i){if(t&1&&(p(0,"p"),x(1),f()),t&2){let e=y(2);_(),be("Calificaci\xF3n: ",e.turnoElegido.calificacion,"")}}function Tg(t,i){if(t&1&&(p(0,"p"),x(1),f()),t&2){let e=i.$implicit;_(),Ue("",e.clave,": ",e.valor,"")}}function Pg(t,i){if(t&1&&(p(0,"div",12)(1,"label",16),x(2,"Historia Cl\xEDnica"),f(),p(3,"div",27)(4,"p"),x(5),f(),p(6,"p"),x(7),f(),p(8,"p"),x(9),f(),p(10,"p"),x(11),f(),O(12,"hr"),p(13,"h5"),x(14,"Din\xE1micos"),f(),A(15,Tg,2,2,"p",29),f()()),t&2){let e=y().$implicit;_(5),be("Altura: ",e.altura,""),_(2),be("Peso: ",e.peso,""),_(2),be("Presion: ",e.presion,""),_(2),be("Temperatura: ",e.temperatura,""),_(4),C("ngForOf",e.dinamicos)}}function kg(t,i){if(t&1&&(p(0,"div"),A(1,Pg,16,5,"div",18),f()),t&2){let e=i.$implicit,n=y(2);_(),C("ngIf",e.paciente==n.turnoElegido.paciente&&e.especialista==n.turnoElegido.especialista)}}function Ig(t,i){if(t&1&&(p(0,"div",12)(1,"label",16),x(2,"Turno"),f(),p(3,"div",27)(4,"p"),x(5),f(),A(6,Eg,2,1,"p",28),f(),A(7,kg,2,1,"div",29),f()),t&2){let e=y();_(5),be("Diagn\xF3stico: ",e.turnoElegido.comentario,""),_(),C("ngIf",e.usuario.tipo=="especialista"&&e.turnoElegido.calificacion!==""),_(),C("ngForOf",e.historiaPrevia)}}function Og(t,i){if(t&1){let e=V();p(0,"button",32),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("cancelar"))}),x(1,"Cancelar turno"),f()}}function Dg(t,i){if(t&1){let e=V();p(0,"button",33),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("rese\xF1a"))}),x(1,"Ver rese\xF1a"),f()}}function Ag(t,i){if(t&1){let e=V();p(0,"button",33),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("calificar"))}),x(1," Calificar atenci\xF3n"),f()}}function Rg(t,i){if(t&1){let e=V();p(0,"button",33),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("encuesta"))}),x(1,"Completar encuesta"),f()}}function Fg(t,i){if(t&1&&(p(0,"div",25),A(1,Og,2,0,"button",30)(2,Dg,2,0,"button",31)(3,Ag,2,0,"button",31)(4,Rg,2,0,"button",31),O(5,"br"),f()),t&2){let e=y();_(),C("ngIf",e.estado!="finalizado"&&e.estado!="cancelado"&&e.estado!="rechazado"&&e.estado!=""),_(),C("ngIf",e.comentario!=""),_(),C("ngIf",e.estado=="finalizado"),_(),C("ngIf",e.comentario!=""&&e.estado=="finalizado")}}function Ng(t,i){if(t&1){let e=V();p(0,"button",33),R("click",function(){P(e);let s=y(2);return k(s.modificarTurnoSinComentario("aceptado"))}),x(1,"Aceptar turno"),f()}}function Lg(t,i){if(t&1){let e=V();p(0,"button",38),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("finalizado"))}),x(1,"Finalizar turno"),f()}}function Vg(t,i){if(t&1){let e=V();p(0,"button",39),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("rechazar"))}),x(1,"Rechazar turno"),f()}}function Wg(t,i){if(t&1){let e=V();p(0,"button",40),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("cancelar"))}),x(1,"Cancelar turno"),f()}}function Bg(t,i){if(t&1){let e=V();p(0,"button",41),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("rese\xF1a"))}),x(1,"Ver rese\xF1a"),f()}}function zg(t,i){if(t&1&&(p(0,"div",25),A(1,Ng,2,0,"button",31)(2,Lg,2,0,"button",34)(3,Vg,2,0,"button",35)(4,Wg,2,0,"button",36)(5,Bg,2,0,"button",37),O(6,"br"),f()),t&2){let e=y();_(),C("ngIf",e.estado!="aceptado"&&e.estado!="rechazado"&&e.estado!="finalizado"&&e.estado!="cancelado"&&e.estado!=""),_(),C("ngIf",e.estado=="aceptado"),_(),C("ngIf",e.estado!="aceptado"&&e.estado!="rechazado"&&e.estado!="finalizado"&&e.estado!="cancelado"&&e.estado!=""),_(),C("ngIf",e.estado!="aceptado"&&e.estado!="rechazado"&&e.estado!="finalizado"&&e.estado!="cancelado"&&e.estado!=""),_(),C("ngIf",e.comentario!="")}}function jg(t,i){if(t&1){let e=V();p(0,"button",43),R("click",function(){P(e);let s=y(2);return k(s.abrirPopUp("cancelar"))}),x(1,"Cancelar turno"),f()}}function Hg(t,i){if(t&1&&(p(0,"div",25),A(1,jg,2,0,"button",42),O(2,"br"),f()),t&2){let e=y();_(),C("ngIf",e.estado!="aceptado"&&e.estado!="finalizado"&&e.estado!="rechazado"&&e.estado!="cancelado"&&e.estado!="")}}function Ug(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"Cancelar turno"),f(),O(4,"br"),p(5,"label",45),x(6,"Comentario"),f(),p(7,"textarea",46),q("ngModelChange",function(s){P(e);let o=y();return Y(o.comentarioAux,s)||(o.comentarioAux=s),k(s)}),R("ngModelChange",function(){P(e);let s=y();return k(s.resetearMensajeError())}),f(),O(8,"br"),p(9,"p",47),x(10),f(),p(11,"button",48),R("click",function(){P(e);let s=y();return k(s.modificarTurno("cancelado"))}),x(12,"Cancelar turno"),f(),O(13,"br")(14,"br"),f()}if(t&2){let e=y();_(7),U("ngModel",e.comentarioAux),_(3),W(e.mensajeError)}}function Yg(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"Rechazar turno"),f(),O(4,"br"),p(5,"label",45),x(6,"Comentario"),f(),p(7,"textarea",46),q("ngModelChange",function(s){P(e);let o=y();return Y(o.comentarioAux,s)||(o.comentarioAux=s),k(s)}),R("ngModelChange",function(){P(e);let s=y();return k(s.resetearMensajeError())}),f(),O(8,"br"),p(9,"p",47),x(10),f(),p(11,"button",48),R("click",function(){P(e);let s=y();return k(s.modificarTurno("rechazado"))}),x(12,"Rechazar turno"),f(),O(13,"br")(14,"br"),f()}if(t&2){let e=y();_(7),U("ngModel",e.comentarioAux),_(3),W(e.mensajeError)}}function qg(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"Rese\xF1a"),f(),x(4),O(5,"br")(6,"br"),p(7,"button",48),R("click",function(){P(e);let s=y();return k(s.cerrarPopUp())}),x(8,"Cerrar"),f(),O(9,"br")(10,"br"),f()}if(t&2){let e=y();_(4),Ue(" ",e.comentario," ",e.resenia," ")}}function Gg(t,i){if(t&1){let e=V();p(0,"div",4)(1,"div",15)(2,"label",53),x(3,"Clave"),f(),p(4,"input",59),q("ngModelChange",function(s){let o=P(e).index,r=y(2);return Y(r.dinamicos[o].clave,s)||(r.dinamicos[o].clave=s),k(s)}),f()(),p(5,"div",15)(6,"label",55),x(7,"Valor"),f(),p(8,"input",60),q("ngModelChange",function(s){let o=P(e).index,r=y(2);return Y(r.dinamicos[o].valor,s)||(r.dinamicos[o].valor=s),k(s)}),f()(),p(9,"div",15)(10,"label",61),x(11,"Rango de 0 a 100"),f(),p(12,"input",62),q("ngModelChange",function(s){let o=P(e).index,r=y(2);return Y(r.dinamicos[o].rango,s)||(r.dinamicos[o].rango=s),k(s)}),f()(),p(13,"div",15)(14,"label",55),x(15,"Numero"),f(),p(16,"input",63),q("ngModelChange",function(s){let o=P(e).index,r=y(2);return Y(r.dinamicos[o].numero,s)||(r.dinamicos[o].numero=s),k(s)}),f()(),p(17,"div",64)(18,"input",65),q("ngModelChange",function(s){let o=P(e).index,r=y(2);return Y(r.dinamicos[o].eleccion,s)||(r.dinamicos[o].eleccion=s),k(s)}),f(),p(19,"label",66),x(20,"Elecci\xF3n"),f()()()}if(t&2){let e=i.index,n=y(2);_(4),U("ngModel",n.dinamicos[e].clave),_(4),U("ngModel",n.dinamicos[e].valor),_(4),U("ngModel",n.dinamicos[e].rango),_(4),U("ngModel",n.dinamicos[e].numero),_(2),U("ngModel",n.dinamicos[e].eleccion)}}function $g(t,i){if(t&1){let e=V();p(0,"button",48),R("click",function(){P(e);let s=y(2);return k(s.agregarValorDinamico("restar"))}),x(1,"Restar dato"),f()}}function Kg(t,i){if(t&1){let e=V();p(0,"button",48),R("click",function(){P(e);let s=y(2);return k(s.agregarValorDinamico("sumar"))}),x(1,"Agregar dato"),f()}}function Xg(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"Finalizado"),f(),p(4,"div",4)(5,"div",15)(6,"label",49),x(7,"Altura"),f(),p(8,"input",50),q("ngModelChange",function(s){P(e);let o=y();return Y(o.altura,s)||(o.altura=s),k(s)}),f()(),p(9,"div",15)(10,"label",51),x(11,"Peso"),f(),p(12,"input",52),q("ngModelChange",function(s){P(e);let o=y();return Y(o.peso,s)||(o.peso=s),k(s)}),f()()(),p(13,"div",4)(14,"div",15)(15,"label",53),x(16,"Temperatura"),f(),p(17,"input",54),q("ngModelChange",function(s){P(e);let o=y();return Y(o.temperatura,s)||(o.temperatura=s),k(s)}),f()(),p(18,"div",15)(19,"label",55),x(20,"Presion"),f(),p(21,"input",56),q("ngModelChange",function(s){P(e);let o=y();return Y(o.presion,s)||(o.presion=s),k(s)}),f()()(),p(22,"h4"),x(23,"Datos Dinamicos"),f(),A(24,Gg,21,5,"div",57),p(25,"div"),A(26,$g,2,0,"button",58)(27,Kg,2,0,"button",58),f(),O(28,"br"),p(29,"label",45),x(30,"Comentario"),f(),p(31,"textarea",46),q("ngModelChange",function(s){P(e);let o=y();return Y(o.comentarioAux,s)||(o.comentarioAux=s),k(s)}),R("ngModelChange",function(){P(e);let s=y();return k(s.resetearMensajeError())}),f(),O(32,"br"),p(33,"p",47),x(34),f(),p(35,"button",48),R("click",function(){P(e);let s=y();return k(s.finalizarTurno())}),x(36,"Finalizar turno"),f(),O(37,"br")(38,"br"),p(39,"button",48),R("click",function(){P(e);let s=y();return k(s.cerrarPopUp())}),x(40,"Cerrar"),f(),O(41,"br")(42,"br"),f()}if(t&2){let e=y();_(8),U("ngModel",e.altura),_(4),U("ngModel",e.peso),_(5),U("ngModel",e.temperatura),_(4),U("ngModel",e.presion),_(3),C("ngForOf",hl(9,yg).constructor(e.cantidadDatos)),_(2),C("ngIf",e.cantidadDatos>0),_(),C("ngIf",e.cantidadDatos<3),_(4),U("ngModel",e.comentarioAux),_(3),W(e.mensajeError)}}function Qg(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"\xBFC\xF3mo calificarias la atencion de nuestro profesional?"),f(),p(4,"div",67),O(5,"link",68),p(6,"span",69),R("click",function(){P(e);let s=y();return k(s.calificar(5))}),f(),p(7,"span",70),R("click",function(){P(e);let s=y();return k(s.calificar(4))}),f(),p(8,"span",71),R("click",function(){P(e);let s=y();return k(s.calificar(3))}),f(),p(9,"span",72),R("click",function(){P(e);let s=y();return k(s.calificar(2))}),f(),p(10,"span",73),R("click",function(){P(e);let s=y();return k(s.calificar(1))}),f()(),p(11,"div")(12,"label",45),x(13,"Comentario"),f(),p(14,"textarea",46),q("ngModelChange",function(s){P(e);let o=y();return Y(o.calificacion,s)||(o.calificacion=s),k(s)}),R("ngModelChange",function(){P(e);let s=y();return k(s.resetearMensajeError())}),f(),O(15,"br"),p(16,"p",47),x(17),f(),p(18,"button",48),R("click",function(){P(e);let s=y();return k(s.calificarTurno())}),x(19,"Calificar"),f(),O(20,"br")(21,"br"),f()()}if(t&2){let e=y();_(6),C("ngClass",ui(7,an,e.estrellas==5)),_(),C("ngClass",ui(9,an,e.estrellas>=4)),_(),C("ngClass",ui(11,an,e.estrellas>=3)),_(),C("ngClass",ui(13,an,e.estrellas>=2)),_(),C("ngClass",ui(15,an,e.estrellas>=1)),_(4),U("ngModel",e.calificacion),_(3),W(e.mensajeError)}}function Jg(t,i){if(t&1){let e=V();p(0,"div",44),O(1,"br"),p(2,"h1"),x(3,"Encuesta"),f(),p(4,"label",2),x(5,"\xBFC\xF3mo calificarias las instalaciones de nuestro establecimiento?"),f(),p(6,"input",74),q("ngModelChange",function(s){P(e);let o=y();return Y(o.preguntas[0],s)||(o.preguntas[0]=s),k(s)}),f(),O(7,"br"),p(8,"label",2),x(9,"\xBFDeberiamos mejorar aspectos de nuestra clinica?"),f(),p(10,"input",74),q("ngModelChange",function(s){P(e);let o=y();return Y(o.preguntas[1],s)||(o.preguntas[1]=s),k(s)}),f(),O(11,"br"),p(12,"label",2),x(13,"\xBFRecomendar\xEDa nuestra cl\xEDnica a familiares y amigos?"),f(),p(14,"input",74),q("ngModelChange",function(s){P(e);let o=y();return Y(o.preguntas[2],s)||(o.preguntas[2]=s),k(s)}),f(),O(15,"br"),p(16,"button",48),R("click",function(){P(e);let s=y();return k(s.llenarEncuesta())}),x(17,"Completar encuesta"),f(),p(18,"p",47),x(19),f(),O(20,"br")(21,"br"),f()}if(t&2){let e=y();_(6),U("ngModel",e.preguntas[0]),_(4),U("ngModel",e.preguntas[1]),_(4),U("ngModel",e.preguntas[2]),_(5),W(e.mensajeError)}}var Nc=(()=>{class t{firebaseData;data;especialidadesService;usuario;turnos=[];email;loading=!0;turnoElegido;fechaAux;especialistaNombreCompleto="";pacienteNombreCompleto="";especialista;especialidad;estado="";comentarioAux="";comentario="";reseniaAux="";resenia="";calificacion="";tipo;especialistas=[];especialidades=[];pacientes=[];filtro="";formModal;popUpRazon="";mensajeError="";estrellas=0;altura="";peso=0;temperatura=0;presion=0;dinamicos=[];cantidadDatos=0;historiaPrevia=[];preguntas=["","",""];constructor(e,n,s){this.firebaseData=e,this.data=n,this.especialidadesService=s}ngOnInit(){this.cargarUsuario(),setTimeout(()=>{},3500),this.especialidadesService.getEspecialidades().subscribe(e=>{this.especialidades=e}),this.data.getTurnosDB().subscribe(e=>{this.firebaseData.getUsuariosPorTipo("especialista").subscribe(n=>{this.especialistas=n,console.log("especialistas",this.especialistas)}),this.firebaseData.getUsuariosPorTipo("paciente").subscribe(n=>{this.pacientes=n,console.log("pacientes",this.pacientes)}),this.turnos=[],this.tipo=this.usuario.tipo,this.email=this.usuario.email,this.usuario.tipo!=="admin"?e.forEach(n=>{this.tipo==="paciente"&&n.paciente===this.email?this.turnos.push(n):this.usuario.tipo==="especialista"&&n.especialista===this.email&&this.turnos.push(n),console.log("los turnos son",this.turnos)}):this.turnos=e,this.data.getHistoriaDB().subscribe(n=>{this.historiaPrevia=n,console.log(n)})}),this.formModal=new window.bootstrap.Modal(document.getElementById("cancelarTurno"))}cargarUsuario(){return Fe(this,null,function*(){let e=sessionStorage.getItem("user");this.usuario=yield this.firebaseData.getUsuarioEmail(e),console.log("usuario",this.usuario)})}verTurno(e){this.turnos.forEach(n=>{n.especialista==e.especialista&&n.dia==e.dia&&n.mes==e.mes&&n.anio==e.anio&&n.hora==e.hora&&n.especialidad==e.especialidad&&(this.turnoElegido=n,this.fechaAux=n.hora+"Hs "+n.dia+" "+n.mes+" "+n.anio,this.especialidad=n.especialidad,this.buscarEspecialista(n.especialista),this.buscarPaciente(n.paciente),this.estado=n.estado,this.comentario=n.comentario,this.calificacion=n.calificacion)})}agregarValorDinamico(e){e=="sumar"&&this.cantidadDatos<3?(this.cantidadDatos++,this.dinamicos.push({clave:"",valor:"",rango:0,numero:0,eleccion:!1})):e=="restar"&&this.cantidadDatos>0&&(this.cantidadDatos--,this.dinamicos.splice(-1))}calificar(e){this.estrellas=e}abrirPopUp(e){this.popUpRazon=e,this.formModal.show()}cerrarPopUp(){this.formModal.hide()}completarResenia(){this.resenia=this.reseniaAux,this.cerrarPopUp()}completarComentario(){this.comentario=this.comentarioAux,this.cerrarPopUp()}buscarEspecialista(e){for(let n=0;n<this.especialistas.length;n++)this.especialistas[n].email==e&&(this.especialista=this.especialistas[n],this.especialistaNombreCompleto=this.especialistas[n].nombre+" "+this.especialistas[n].apellido);console.log("buscar especialista",this.especialistaNombreCompleto)}buscarPaciente(e){for(let n=0;n<this.pacientes.length;n++)this.pacientes[n].email==e&&(this.pacienteNombreCompleto=this.pacientes[n].nombre+" "+this.pacientes[n].apellido);console.log("buscar paciente",this.pacienteNombreCompleto)}ordernarListaTurnos(){this.turnos.sort((e,n)=>e.anio<n.anio||e.anio==n.anio&&this.mesToNumber(e.mes)<this.mesToNumber(n.mes)||e.anio==n.anio&&e.mes==n.mes&&e.dia<n.dia||e.anio==n.anio&&e.mes==n.mes&&e.dia==n.dia&&e.hora<n.hora?1:-1)}finalizarTurno(){if(this.comentarioAux==""||this.altura==""||this.peso==0||this.temperatura==0||this.presion==0)this.mensajeError="Complete los campos";else{this.estado="finalizado",this.turnoElegido.estado="finalizado",this.comentario=this.comentarioAux,this.turnoElegido.comentario=this.comentario;let e=new Date;this.turnoElegido.fecha=e.getDate().toString()+"/"+e.getMonth().toString()+"/"+e.getFullYear().toString(),this.data.updateTurnos(this.turnoElegido),this.comentario=="",this.altura=="",this.peso==0,this.temperatura==0,this.presion==0;let n=null;this.historiaPrevia.forEach(s=>{this.turnoElegido.paciente==s.paciente&&this.turnoElegido.especialista==s.especialista&&(n=s)}),console.log("El turno elegido",this.turnoElegido,this.historiaPrevia),n!==null&&this.turnoElegido.especialidad===n.especialidad?(n.especialista=this.turnoElegido.especialista,n.dinamicos=this.dinamicos,n.altura=this.altura,n.peso=this.peso,n.temperatura=this.temperatura.toString(),n.presion=this.presion.toString(),n.especialidad=this.turnoElegido.especialidad,this.data.updateHistoria(n)):this.data.cargarHistoriasBD(new Os("",this.turnoElegido.paciente,this.turnoElegido.especialista,this.dinamicos,this.altura,this.peso,this.temperatura.toString(),this.presion.toString(),this.turnoElegido.especialidad)),this.limpiarData(),this.cerrarPopUp()}}modificarTurno(e){this.comentarioAux==""?this.mensajeError="Complete el comentario":(this.estado=e,this.turnoElegido.estado=e,this.comentario=this.comentarioAux,this.turnoElegido.comentario=this.comentario,this.turnoElegido.resenia=this.resenia,this.data.updateTurnos(this.turnoElegido),this.limpiarData(),this.cerrarPopUp())}limpiarData(){this.comentarioAux="",this.comentario="",this.reseniaAux="",this.resenia="",this.calificacion=""}modificarTurnoSinComentario(e){this.estado=e,this.turnoElegido.estado=e,this.turnoElegido.comentario=this.comentario,this.data.updateTurnos(this.turnoElegido),this.limpiarData(),this.cerrarPopUp()}calificarTurno(){this.calificacion==""?this.mensajeError="Complete el comentario":(this.turnoElegido.calificacion=this.calificacion,this.data.updateTurnos(this.turnoElegido),this.limpiarData(),this.cerrarPopUp())}llenarEncuesta(){this.turnoElegido.encuesta=`${this.preguntas[0]}, ${this.preguntas[1]}, ${this.preguntas[2]}`,this.data.updateTurnos(this.turnoElegido),this.limpiarData(),this.cerrarPopUp()}resetearMensajeError(){this.mensajeError=""}mesToNumber(e){let n=-1;switch(e){case"Enero":n=1;break;case"Febrero":n=2;break;case"Marzo":n=3;break;case"Abril":n=4;break;case"Mayo":n=5;break;case"Junio":n=6;break;case"Julio":n=7;break;case"Agosto":n=8;break;case"Septiembre":n=9;break;case"Octubre":n=10;break;case"Noviembre":n=11;break;case"Diciembre":n=12;break}}static \u0275fac=function(n){return new(n||t)(j(Oe),j(rt),j(Es))};static \u0275cmp=ee({type:t,selectors:[["app-mis-turnos"]],standalone:!0,features:[te],decls:54,vars:29,consts:[[1,"container","card","mt-5"],[1,"",2,"text-align","center"],["for","fecha"],["name","filtro","placeholder","Ingrese el nombre de la especialidad o nombre del especialista o paciente...",1,"form-control",3,"ngModelChange","ngModel"],[1,"row"],[1,"col-md-4","order-md-1","mb-4"],[1,"text-center",2,"color","black"],[1,"list-group","bg-light"],["type","button","class","list-group-item list-group-item-action",3,"appEstadoColor","click",4,"ngFor","ngForOf"],["style","text-align: center;",4,"ngIf"],[1,"col-md-8","order-md-2"],[1,"mb-3",2,"text-align","center"],[1,"mb-3"],["name","mail",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","col-md-6 mb-3",4,"ngIf"],[1,"col-md-6","mb-3"],["for","apellido"],["name","apellido",1,"form-control",3,"ngModelChange","ngModel","readonly"],["class","mb-3",4,"ngIf"],[1,"w-100","btn","notButton",3,"ngClass"],["id","cancelarTurno","tabindex","-1","role","dialog","aria-labelledby","exampleModalCenterTitle","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-lg","modal-dialog-centered"],[1,"modal-content","text-bg-dark",2,"text-align","center"],["class","card-color",4,"ngIf"],["type","button",1,"list-group-item","list-group-item-action",3,"click","appEstadoColor"],[2,"text-align","center"],["name","fecha",1,"form-control",3,"ngModelChange","ngModel","readonly"],[1,"card",2,"background-color","#fff"],[4,"ngIf"],[4,"ngFor","ngForOf"],["class","w-50 btn btn-danger",3,"click",4,"ngIf"],["class","w-30 btn btn-primary calificadores",3,"click",4,"ngIf"],[1,"w-50","btn","btn-danger",3,"click"],[1,"w-30","btn","btn-primary","calificadores",3,"click"],["class","w-50 btn btn-success",3,"click",4,"ngIf"],["class","w-30 btn btn-warning calificadores",3,"click",4,"ngIf"],["class","w-30 btn btn-danger calificadores",3,"click",4,"ngIf"],["class","w-50 btn btn-primary",3,"click",4,"ngIf"],[1,"w-50","btn","btn-success",3,"click"],[1,"w-30","btn","btn-warning","calificadores",3,"click"],[1,"w-30","btn","btn-danger","calificadores",3,"click"],[1,"w-50","btn","btn-primary",3,"click"],["class","w-50 btn btn-warning",3,"click",4,"ngIf"],[1,"w-50","btn","btn-warning",3,"click"],[1,"card-color"],["for","textAreaExample",1,"form-label"],["id","textAreaExample1","rows","4",1,"form-control","w-50",2,"margin","0 auto","float","none",3,"ngModelChange","ngModel"],[2,"color","red"],[1,"btn","btn-secondary",2,"margin","0 auto","float","none",3,"click"],["for","altura"],["name","altura",1,"form-control",3,"ngModelChange","ngModel"],["for","peso"],["name","peso",1,"form-control",3,"ngModelChange","ngModel"],["for","temperatura"],["name","temperatura",1,"form-control",3,"ngModelChange","ngModel"],["for","presion"],["name","presion",1,"form-control",3,"ngModelChange","ngModel"],["class","row",4,"ngFor","ngForOf"],["class","btn btn-secondary","style","margin: 0 auto; float: none;",3,"click",4,"ngIf"],["name","temperatura","placeholder","Ej: caries",1,"form-control",3,"ngModelChange","ngModel"],["name","presion","placeholder","Ej: 4",1,"form-control",3,"ngModelChange","ngModel"],["for","customRange1",1,"form-label"],["name","temperatura","type","range","min","0","max","100","placeholder","Ej: caries","id","customRange1",1,"form-range",3,"ngModelChange","ngModel"],["name","presion","type","number","placeholder","Ej: 4",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6","mb-3","form-check","form-switch","d-flex","align-items-center","justify-content-center"],["type","checkbox","role","switch","id","flexSwitchCheckDefault",1,"form-check-input","me-2",3,"ngModelChange","ngModel"],["for","flexSwitchCheckDefault",1,"form-check-label"],[1,"star-wrapper",2,"font-size","40px"],["rel","stylesheet","href",al`https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css`],[1,"fa","fa-star","s1",3,"click","ngClass"],[1,"fa","fa-star","s2",3,"click","ngClass"],[1,"fa","fa-star","s3",3,"click","ngClass"],[1,"fa","fa-star","s4",3,"click","ngClass"],[1,"fa","fa-star","s5",3,"click","ngClass"],["name","mail",1,"w-75","form-control",2,"margin","0 auto","float","none",3,"ngModelChange","ngModel"]],template:function(n,s){n&1&&(p(0,"div",0)(1,"div",1),O(2,"br"),p(3,"h4",2),x(4,"Filtrar Turnos"),f(),p(5,"input",3),q("ngModelChange",function(r){return Y(s.filtro,r)||(s.filtro=r),r}),f()(),p(6,"div",4)(7,"div",5),O(8,"br")(9,"br"),p(10,"h4",6),x(11,"Turnos"),f(),p(12,"div",7),A(13,Cg,3,4,"button",8),cs(14,"filtros"),A(15,wg,4,0,"div",9),f()(),p(16,"div",10),O(17,"br")(18,"br"),p(19,"h4",11),x(20,"Informaci\xF3n"),f(),p(21,"div",12)(22,"label",2),x(23,"Fecha"),f(),p(24,"input",13),q("ngModelChange",function(r){return Y(s.fechaAux,r)||(s.fechaAux=r),r}),f()(),p(25,"div",4),A(26,Sg,4,2,"div",14)(27,Mg,4,2,"div",14),p(28,"div",15)(29,"label",16),x(30,"Especialidad"),f(),p(31,"input",17),q("ngModelChange",function(r){return Y(s.especialidad,r)||(s.especialidad=r),r}),f()()(),A(32,Ig,8,3,"div",18),p(33,"div",12)(34,"label",2),x(35,"Estado"),f(),O(36,"br"),p(37,"button",19),x(38),f()(),O(39,"br")(40,"br")(41,"br"),A(42,Fg,6,4,"div",9)(43,zg,7,5,"div",9)(44,Hg,3,1,"div",9),f()()(),p(45,"div",20)(46,"div",21)(47,"div",22),A(48,Ug,15,2,"div",23)(49,Yg,15,2,"div",23)(50,qg,11,2,"div",23)(51,Xg,43,10,"div",23)(52,Qg,22,17,"div",23)(53,Jg,22,4,"div",23),f()()()),n&2&&(_(5),U("ngModel",s.filtro),_(8),C("ngForOf",gl(14,21,s.turnos,s.filtro)),_(2),C("ngIf",s.turnos.length==0),_(9),U("ngModel",s.fechaAux),C("readonly",!0),_(2),C("ngIf",s.usuario.tipo=="paciente"),_(),C("ngIf",s.usuario.tipo=="especialista"),_(4),U("ngModel",s.especialidad),C("readonly",!0),_(),C("ngIf",s.estado=="finalizado"),_(5),C("ngClass",pl(24,vg,s.estado=="pendiente",s.estado=="cancelado"||s.estado=="rechazado",s.estado=="aceptado",s.estado=="finalizado")),_(),W(s.estado),_(4),C("ngIf",s.usuario.tipo=="paciente"),_(),C("ngIf",s.usuario.tipo=="especialista"),_(),C("ngIf",s.usuario.tipo=="admin"),_(4),C("ngIf",s.popUpRazon=="cancelar"),_(),C("ngIf",s.popUpRazon=="rechazar"),_(),C("ngIf",s.popUpRazon=="rese\xF1a"),_(),C("ngIf",s.popUpRazon=="finalizado"),_(),C("ngIf",s.popUpRazon=="calificar"),_(),C("ngIf",s.popUpRazon=="encuesta"))},dependencies:[de,us,Ye,ye,ge,hi,_s,Cl,yl,Ct,ms,wt,Rc,Fc],styles:[".fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);height:100vh}.card[_ngcontent-%COMP%]{background-color:#919390;padding:70px;opacity:.9}.card-color[_ngcontent-%COMP%]{background-color:#ac9741}.star-wrapper[_ngcontent-%COMP%]{direction:rtl}.star-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:none;transition:all .5s;margin:4px}.star-wrapper[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:gold;transform:scale(1.3);cursor:pointer}.s1[_ngcontent-%COMP%]:hover ~ span[_ngcontent-%COMP%]{color:gold}.s2[_ngcontent-%COMP%]:hover ~ span[_ngcontent-%COMP%]{color:gold}.s3[_ngcontent-%COMP%]:hover ~ span[_ngcontent-%COMP%]{color:gold}.s4[_ngcontent-%COMP%]:hover ~ span[_ngcontent-%COMP%]{color:gold}.s5[_ngcontent-%COMP%]:hover ~ span[_ngcontent-%COMP%]{color:gold}.checked[_ngcontent-%COMP%]{color:gold}.calificadores[_ngcontent-%COMP%]{margin:10px}"]})}return t})();var Ds=class{id;paciente;especialista;especialidad;dia;mes;anio;hora;estado;comentario;resenia;encuesta;calificacion;fecha;constructor(i,e,n,s,o,r,a,l,c,d,u,h){this.id=i,this.paciente=e,this.especialista=n,this.especialidad=s,this.dia=o,this.mes=r,this.anio=a,this.hora=l,this.estado=c,this.comentario=d,this.resenia="",this.encuesta=u,this.calificacion=h,this.fecha=""}};function Zg(t,i){t&1&&(p(0,"h1"),x(1,"Solicitar Turno"),f())}function e_(t,i){if(t&1){let e=V();p(0,"div",10)(1,"div",11),R("click",function(){let s=P(e).$implicit,o=y(2);return k(o.elegirEspecialidad(s.especialidad))}),p(2,"div",12)(3,"p",13),x(4),f()()()()}if(t&2){let e=i.$implicit;_(4),W(e.especialidad)}}function t_(t,i){if(t&1&&(p(0,"div",7)(1,"div",8)(2,"h4"),x(3,"Especialidad"),f()(),A(4,e_,5,1,"div",9),f()),t&2){let e=y();_(4),C("ngForOf",e.especialidades)}}function i_(t,i){t&1&&(p(0,"p"),x(1,"No se encuentran especialistas con esta especialidad. Elija otra por favor."),f())}function n_(t,i){if(t&1){let e=V();p(0,"div",10)(1,"div",16),R("click",function(){let s=P(e).$implicit,o=y(2);return k(o.elegirEspecialista(s.nombre,s.apellido))}),O(2,"img",17),p(3,"div",12)(4,"p",13),x(5),f()()()()}if(t&2){let e=i.$implicit;_(2),C("src",e.img_1,ci)("alt",e.apellido),_(3),W(e.nombre+" "+e.apellido)}}function s_(t,i){if(t&1){let e=V();p(0,"div")(1,"div",7)(2,"div",8)(3,"h4"),x(4,"Especialista"),f(),A(5,i_,2,0,"p",3),f(),A(6,n_,6,3,"div",9),f(),p(7,"div",14)(8,"button",15),R("click",function(){P(e);let s=y();return k(s.volver("especialidad"))}),x(9,"Volver"),f()()()}if(t&2){let e=y();_(5),C("ngIf",e.especialistasPorEspecialidad.length==0),_(),C("ngForOf",e.especialistasPorEspecialidad)}}function o_(t,i){if(t&1){let e=V();p(0,"div",26)(1,"button",27),R("click",function(){let s=P(e).$implicit,o=y(2);return k(o.elegirHorario(s))}),x(2),f()()}if(t&2){let e=i.$implicit;_(2),W(e)}}function r_(t,i){if(t&1){let e=V();p(0,"div",18)(1,"div",19)(2,"div",20)(3,"span"),x(4),f(),p(5,"button",21),R("click",function(){P(e);let s=y();return k(s.sumarRestarDias("antes"))}),x(6,"<"),f(),p(7,"button",22),R("click",function(){P(e);let s=y();return k(s.sumarRestarDias("despues"))}),x(8,">"),f()(),p(9,"h4",23),x(10,"Horarios disponibles"),f(),p(11,"div",7)(12,"h3"),x(13),f(),A(14,o_,3,1,"div",24),f(),p(15,"button",25),R("click",function(){P(e);let s=y();return k(s.volver("especialista"))}),x(16,"Volver"),f()()()}if(t&2){let e=y();_(4),ls("",e.diaString," ",e.dia," de ",e.mes,""),_(),C("disabled",e.restarDia),_(2),C("disabled",!e.sumarDia),_(6),W(e.noHayDatos),_(),C("ngForOf",e.horariosDisponiblesOtroFormato)}}function a_(t,i){if(t&1){let e=V();p(0,"div",28)(1,"h1"),x(2,"Confirmar turno"),f(),p(3,"p"),x(4,"Especialidad "),O(5,"br"),x(6),f(),p(7,"p"),x(8,"Especialista "),O(9,"br"),x(10),f(),p(11,"p"),x(12,"Horario "),O(13,"br"),x(14),f(),p(15,"button",15),R("click",function(){P(e);let s=y();return k(s.confirmar())}),x(16,"Confirmar"),f(),p(17,"button",25),R("click",function(){P(e);let s=y();return k(s.volver("horario"))}),x(18,"Volver"),f()()}if(t&2){let e=y();_(6),W(e.especialidadElegida),_(4),W(e.especialistaElegidoStr),_(4),W(e.diaElegido)}}function l_(t,i){if(t&1){let e=V();p(0,"div",28)(1,"h1"),x(2,"Turno Solicitado"),f(),p(3,"p"),x(4,"Ir a mis turnos"),f(),p(5,"button",29),R("click",function(){P(e);let s=y();return k(s.volver("irMisTurno"))}),x(6,"Mis Turnos"),f()()}}var Lc=(()=>{class t{turnosData;horariosEspecialistaService;especialidadesService;firebaseData;router;hoy=new Date;now=new Date;dia=this.now.getDate().toString();mesNumero=this.now.getMonth();mes=this.mesNumeroToString(this.mesNumero-1);anio=this.now.getFullYear().toString();hora=this.now.getHours();diaString=this.diaSemanaString(this.now.getDay());restarDia=!1;sumarDia=!0;loading=!0;usuario;noHayDatos="";horarios=["8:00","8:30","9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30"];horariosDisponibles=[];horariosDisponiblesOtroFormato=[];etapa="especialidad";turnos=[];especialidades;especialidadElegida;especialistas=[];especialistaElegido;especialistaElegidoStr="";diaElegido="";horarioElegido="";especialistasPorEspecialidad=[];horariosEspecialistas=[];constructor(e,n,s,o,r){this.turnosData=e,this.horariosEspecialistaService=n,this.especialidadesService=s,this.firebaseData=o,this.router=r}ngOnInit(){this.especialidadesService.getEspecialidades().subscribe(e=>{this.especialidades=e,this.ordernarListaEspecialidades(),this.firebaseData.getUsuariosPorTipo("especialista").subscribe(n=>{this.especialistas=n}),this.horariosEspecialistaService.getHorarioEspecialistas().subscribe(n=>{this.horariosEspecialistas=n,console.log(this.horariosEspecialistas)}),this.turnosData.getTurnosDB().subscribe(n=>{this.turnos=n}),setTimeout(()=>{this.loading=!1},2500),this.cargarUsuario()})}cargarUsuario(){return Fe(this,null,function*(){let e=sessionStorage.getItem("user");this.usuario=yield this.firebaseData.getUsuarioEmail(e),console.log("usuario",this.usuario)})}elegirEspecialidad(e){this.especialistasPorEspecialidad=[];let n=-1;this.especialidadElegida=e,this.especialistas.forEach((s,o)=>{s.especialidad.forEach(r=>{r.especialidad==e&&(n=o,this.especialistasPorEspecialidad.push(s))})}),this.volver("especialista")}elegirHorario(e){this.horarioElegido=this.volverCambiarFormato(e),this.diaElegido=this.horarioElegido+" Hrs. "+this.diaString+" "+this.dia+" de "+this.mes,this.volver("confirmar")}confirmar(){this.turnosData.cargarTurnosBD(new Ds("",this.usuario.email,this.especialistaElegido.email,this.especialidadElegida,this.dia,this.mes,this.anio,this.horarioElegido,"pendiente","","","")),this.volver("fin")}elegirEspecialista(e,n){let s=-1;this.especialistas.forEach((o,r)=>{o.nombre==e&&o.apellido==n&&(s=r,this.especialidades=o.especialidad)}),this.especialistaElegido=this.especialistas[s],this.especialistaElegidoStr=this.especialistaElegido.nombre+" "+this.especialistaElegido.apellido,this.cambiarHorariosPorEspecialista(),this.volver("horario")}cambiarHorariosPorEspecialista(){let e=0,n=0;this.diaString=="Sabado"?n=12:n=this.horarios.length,this.horariosEspecialistas.forEach(o=>{o.email==this.especialistaElegido.email&&this.horarios.forEach((r,a)=>{switch(console.log(o.especialidadesPorDia[0]),console.log(this.especialidadElegida),this.diaString){case"Lunes":r==o.lunInicio&&this.especialidadElegida==o.especialidadesPorDia[0]&&(e=a),r==o.lunFin&&this.especialidadElegida==o.especialidadesPorDia[0]&&(n=a),(o.estados[0]=="Inhabilitado"||this.especialidadElegida!=o.especialidadesPorDia[0])&&(e=0,n=0);break;case"Martes":r==o.marInicio&&this.especialidadElegida==o.especialidadesPorDia[1]&&(e=a),r==o.marFin&&this.especialidadElegida==o.especialidadesPorDia[1]&&(n=a),(o.estados[1]=="Inhabilitado"||this.especialidadElegida!=o.especialidadesPorDia[1])&&(e=0,n=0);break;case"Miercoles":r==o.mierInicio&&this.especialidadElegida==o.especialidadesPorDia[2]&&(e=a),r==o.mierFin&&this.especialidadElegida==o.especialidadesPorDia[2]&&(n=a),(o.estados[2]=="Inhabilitado"||this.especialidadElegida!=o.especialidadesPorDia[2])&&(e=0,n=0);break;case"Jueves":r==o.jueInicio&&this.especialidadElegida==o.especialidadesPorDia[3]&&(e=a),r==o.jueFin&&this.especialidadElegida==o.especialidadesPorDia[3]&&(n=a),(o.estados[3]=="Inhabilitado"||this.especialidadElegida!=o.especialidadesPorDia[3])&&(e=0,n=0);break;case"Viernes":r==o.vierInicio&&this.especialidadElegida==o.especialidadesPorDia[4]&&(e=a),r==o.vierFin&&this.especialidadElegida==o.especialidadesPorDia[4]&&(n=a),(o.estados[4]=="Inhabilitado"||this.especialidadElegida!=o.especialidadesPorDia[4])&&(e=0,n=0);break;case"Sabado":r==o.sabInicio&&this.especialidadElegida==o.especialidadesPorDia[5]&&(e=a),r==o.sabFin&&this.especialidadElegida==o.especialidadesPorDia[5]&&(n=a),(o.estados[5]=="Inhabilitado"||this.especialidadElegida==o.especialidadesPorDia[5])&&(e=0,n=0);break}})});let s=[...this.horarios];this.horariosDisponibles=s.splice(e,n-e),console.log(this.horariosDisponibles),console.log(this.horarios),this.horariosDisponibles.length===0?this.noHayDatos="No hay turnos disponibles para el d\xEDa seleccionado":this.noHayDatos="",this.sacarHorariosNoDisponibles(),this.cambiarFormato()}volverCambiarFormato(e){let n=e.split(" "),s=n[1].split(":"),o=Number(s[0]);return n[2]=="PM"&&(o+=12),o+":"+s[1]}cambiarFormato(){this.horariosDisponiblesOtroFormato=[],this.mesNumero+=1,this.horariosDisponibles.forEach(e=>{this.horariosDisponiblesOtroFormato.push(this.anio+"-"+this.mesNumero+"-"+this.dia+" "+this.cambiarHoraAmPm(e))})}cambiarHoraAmPm(e){let n=e.split(":"),s=n[0],o=n[1];return Number(n[0])>12?(s=String(Number(n[0])-12),s+":"+o+" PM"):s+":"+o+" AM"}sacarHorariosNoDisponibles(){let e=[],n=[...this.horariosDisponibles];this.turnos.forEach(s=>{this.horariosDisponibles.forEach((o,r)=>{s.especialista==this.especialistaElegido.email&&s.dia==this.dia&&s.hora==o&&e.push(r)})}),e.forEach(s=>{n.splice(s,1),this.horariosDisponibles=n})}volver(e){e=="home"?this.router.navigateByUrl(""):e=="especialidad"?this.etapa="especialidad":e=="especialista"?this.etapa="especialista":e=="horario"?this.etapa="horario":e=="confirmar"?this.etapa="confirmar":e=="fin"?this.etapa="fin":this.router.navigateByUrl("/turnos")}ordernarListaEspecialidades(){this.especialidades.sort((e,n)=>e<n?-1:1)}cambiarDia(e){console.log("La funci\xF3n cambiarDia se est\xE1 ejecutando.");let n=!1;this.now=new Date,e=="antes"?this.limitarFecha("restar")&&(n=!0,this.now.setDate(this.now.getDate()-1),this.now.getDay()==0&&this.now.setDate(this.now.getDate()-1)):this.limitarFecha("sumar")&&(n=!0,this.now.setDate(this.now.getDate()+1),this.now.getDay()==0&&this.now.setDate(this.now.getDate()+1)),n&&(this.dia=this.now.getDate().toString(),this.mesNumero=this.now.getMonth(),this.mes=this.mesNumeroToString(this.mesNumero),this.diaString=this.diaSemanaString(this.now.getDay()),this.anio=this.now.getFullYear().toString(),console.log(this.dia),this.getHorariosDisponibles(),this.cambiarHorariosPorEspecialista())}limitarFecha(e){let n=this.hoy.getDate();return this.hoy.getDate()+15>30&&(n=this.hoy.getDate()-15),e=="restar"&&this.hoy.getDate()==this.now.getDate()?(this.restarDia=!1,this.sumarDia=!0,!1):e=="sumar"&&n==this.now.getDate()?(this.restarDia=!0,this.sumarDia=!1,!1):(this.restarDia=!0,this.sumarDia=!0,!0)}getHorariosDisponibles(){this.diaString=="Sabado"?this.horariosDisponibles=this.horarios.slice(0,12):this.horariosDisponibles=this.horarios}diaSemanaString(e){let n="";switch(e){case 1:n="Lunes";break;case 2:n="Martes";break;case 3:n="Miercoles";break;case 4:n="Jueves";break;case 5:n="Viernes";break;case 6:n="Sabado";break;case 0:n="Domingo";break}return n}mesNumeroToString(e){e++;let n="";switch(e){case 1:n="Enero";break;case 2:n="Febrero";break;case 3:n="Marzo";break;case 4:n="Abril";break;case 5:n="Mayo";break;case 6:n="Junio";break;case 7:n="Julio";break;case 8:n="Agosto";break;case 9:n="Septiembre";break;case 10:n="Octubre";break;case 11:n="Noviembre";break;case 12:n="Diciembre";break}return n}sumarRestarDias(e){let s=1*(e==="antes"?-1:1),o=new Date(this.now);o.setDate(this.now.getDate()+s);let r=new Date,a=new Date(r);a.setDate(r.getDate()+15),o.getDay()===0&&(e==="antes"?o.setDate(o.getDate()-1):o.setDate(o.getDate()+1)),e==="despues"&&o<=a||e==="antes"&&o>=r?(this.now=o,this.dia=this.now.getDate().toString(),this.mesNumero=this.now.getMonth(),this.mes=this.mesNumeroToString(this.mesNumero),this.anio=this.now.getFullYear().toString(),this.hora=this.now.getHours(),this.diaString=this.diaSemanaString(this.now.getDay()),this.getHorariosDisponibles(),this.cambiarHorariosPorEspecialista()):console.error("No se puede avanzar m\xE1s all\xE1 de los 15 d\xEDas posteriores a la fecha actual o retroceder desde la fecha actual.")}imgEspecialidad(e){let n;switch(e){case"Traumat\xF3logo":n="../../../assets/especialistas/Traumat\xF3logo.png";break;case"Cirujano":n="../../../assets/especialistas/Cirujano.png";break;case"Neum\xF3logo":n="../../../assets/especialistas/Infectologo.png";break;case"Dentista":n="../../../assets/especialistas/Dentista.png";break;case"Cardiologo":n="../../../assets/especialistas/Cardiologo.png";break;case"Pediatra":n="../../../assets/especialistas/Pediatra.png";break;case"Ginecolo":n="../../../assets/especialistas/Ginecologa.png";break;default:n="../../../assets/especialistas/Generico.png";break}return n}static \u0275fac=function(n){return new(n||t)(j(rt),j(Ms),j(Es),j(Oe),j(yt))};static \u0275cmp=ee({type:t,selectors:[["app-crear-turno"]],standalone:!0,features:[te],decls:10,vars:6,consts:[[1,"h-100","text-center"],[1,"container-fluid","p-4","mt-5"],[1,"card"],[4,"ngIf"],["class","row",4,"ngIf"],["class","modal-content rounded-4 shadow text-center",4,"ngIf"],["class","my-3",4,"ngIf"],[1,"row"],[1,"col-12"],["class","col-md-3 mb-3",4,"ngFor","ngForOf"],[1,"col-md-3","mb-3"],[1,"card","especialidad-card",3,"click"],[1,"card-body"],[1,"card-text"],[1,"col-12","text-end"],[1,"btn","btn-success",3,"click"],[1,"card","especialista-card",3,"click"],[1,"card-img-top",3,"src","alt"],[1,"modal-content","rounded-4","shadow","text-center"],[1,"modal-body","p-5","pt-0"],[1,"d-flex","justify-content-end","align-items-center"],[1,"btn","btn-secondary","mx-2",3,"click","disabled"],[1,"btn","btn-secondary",3,"click","disabled"],[1,"mt-4"],["class","col-6 col-md-2 mb-2",4,"ngFor","ngForOf"],[1,"btn","btn-primary","mt-3",3,"click"],[1,"col-6","col-md-2","mb-2"],["type","button",1,"btn","btn-success","w-100",3,"click"],[1,"my-3"],[1,"btn","btn-success","mt-3",3,"click"]],template:function(n,s){n&1&&(p(0,"div",0)(1,"div",1)(2,"div",2),A(3,Zg,2,0,"h1",3),O(4,"br"),A(5,t_,5,1,"div",4)(6,s_,10,2,"div",3)(7,r_,17,7,"div",5)(8,a_,19,3,"div",6)(9,l_,7,0,"div",6),f()()()),n&2&&(_(3),C("ngIf",s.etapa!="confirmar"&&s.etapa!="fin"),_(2),C("ngIf",s.etapa=="especialidad"),_(),C("ngIf",s.etapa=="especialista"),_(),C("ngIf",s.etapa=="horario"),_(),C("ngIf",s.etapa=="confirmar"),_(),C("ngIf",s.etapa=="fin"))},dependencies:[wt,ge,de,Ye,ye],styles:[".fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);height:100vh}.card[_ngcontent-%COMP%]{background-color:#243725;color:#fff;margin-top:23px}.card-body[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center}.especialidad-card[_ngcontent-%COMP%], .especialista-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .2s}.especialidad-card[_ngcontent-%COMP%]:hover, .especialista-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.especialidad-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%], .especialista-card[_ngcontent-%COMP%]   .card-text[_ngcontent-%COMP%]{font-size:1.2em;font-weight:700}.modal-content[_ngcontent-%COMP%]{background-color:#e5eff6;color:#000}.btn[_ngcontent-%COMP%]{margin:20px}.btn-primary[_ngcontent-%COMP%], .btn-success[_ngcontent-%COMP%]{width:150px}.horarios[_ngcontent-%COMP%]{width:100%;margin:2px 0}"]})}return t})();function c_(t,i){if(t&1){let e=V();p(0,"tr")(1,"td"),x(2),f(),p(3,"td"),x(4),f(),p(5,"td"),x(6),f(),p(7,"td"),x(8),f(),p(9,"td"),x(10),f(),p(11,"td")(12,"button",9),R("click",function(){let s=P(e).$implicit,o=y();return k(o.seleccionarPaciente(s.email))}),x(13,"Historia Clinica"),f()()()}if(t&2){let e=i.$implicit;_(2),W(e.nombre),_(2),W(e.apellido),_(2),W(e.edad),_(2),W(e.email),_(2),W(e.obraSocial)}}var Vc=(()=>{class t{firebaseService;turnosService;usuarios=[];historias=[];mail=sessionStorage.getItem("user");listaPacientesEsp=[];pacienteSeleccionado=new en;constructor(e,n){this.firebaseService=e,this.turnosService=n}traer(){this.firebaseService.getUsuariosPorTipo("paciente").subscribe(e=>{this.usuarios=e,this.turnosService.getHistoriaDB().subscribe(n=>{this.historias=n,this.traerPacientesEsp()})})}ngOnInit(){this.traer()}traerPacientesEsp(){this.usuarios.forEach(e=>{this.historias.filter(s=>s.paciente===e.email).forEach(s=>{s.especialista==this.mail&&this.listaPacientesEsp.push(e)})}),console.log("aca",this.listaPacientesEsp)}seleccionarPaciente(e){this.pacienteSeleccionado.emit(e)}static \u0275fac=function(n){return new(n||t)(j(Oe),j(rt))};static \u0275cmp=ee({type:t,selectors:[["app-tabla-pacientes"]],outputs:{pacienteSeleccionado:"pacienteSeleccionado"},standalone:!0,features:[te],decls:25,vars:1,consts:[["id","tabs",1,"project-tab"],[1,"container"],[1,"row"],[1,"col-md-12"],["id","nav-tabContent",1,"tab-content"],["id","nav-home","role","tabpanel","aria-labelledby","nav-home-tab",1,"tab-pane","fade","show","active"],[2,"text-align","center"],["cellspacing","0",1,"table",2,"text-align","center"],[4,"ngFor","ngForOf"],[1,"btn","btn-info",3,"click"]],template:function(n,s){n&1&&(p(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1",6),x(7,"Mis Pacientes"),f(),p(8,"table",7)(9,"thead")(10,"tr")(11,"th"),x(12,"Nombre"),f(),p(13,"th"),x(14,"Apellido"),f(),p(15,"th"),x(16,"Edad"),f(),p(17,"th"),x(18,"Correo"),f(),p(19,"th"),x(20,"Obra Social"),f(),p(21,"th"),x(22,"Historia Clinica"),f()()(),p(23,"tbody",6),A(24,c_,14,5,"tr",8),f()()()()()()()()),n&2&&(_(24),C("ngForOf",s.listaPacientesEsp))},dependencies:[de,Ye,ge],styles:[".project-tab[_ngcontent-%COMP%]{padding:8%}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]{background:#007b5e;color:#eee}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   h6.section-title[_ngcontent-%COMP%]{color:#eee}.project-tab[_ngcontent-%COMP%]   #tabs[_ngcontent-%COMP%]   .nav-tabs[_ngcontent-%COMP%]   .nav-item.show[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%], .nav-tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#3cff00;background-color:transparent;border-color:transparent transparent #ffe600;border-bottom:3px solid!important;font-size:16px;font-weight:700}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{border:1px solid transparent;border-top-left-radius:.25rem;border-top-right-radius:.25rem;color:#ffe600;border-color:transparent transparent #ffe600;border-bottom:3px solid!important;font-size:16px;font-weight:600}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{border:none;color:#3cff00}.project-tab[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:before{border:none;color:#3cff00}.project-tab[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#d9d9d9;color:#ab0000}.project-tab[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-decoration:none;color:#020822;font-weight:900;background-color:#a2e5be}form[_ngcontent-%COMP%]{width:320px;margin:20px}form[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative;overflow:hidden}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:30%;border:2px solid gray;position:relative;top:0;left:0;z-index:1;padding:8px 12px;outline:0}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid, form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:valid{background:#fff}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border-color:#357ebd}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{background:#357ebd;color:#fff;font-size:70%;padding:1px 6px;z-index:2;text-transform:uppercase}form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{display:block;resize:vertical}form.go-bottom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form.go-bottom[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:12px}form.go-bottom[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{top:0;bottom:0;left:0;width:60%}form.go-bottom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form.go-bottom[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{padding:4px 6px 20px}form.go-bottom[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], form.go-bottom[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{top:100%;margin-top:-16px}label[_ngcontent-%COMP%]{text-decoration:none;color:#020822;font-weight:900;background-color:#a2e5be}"]})}return t})();function d_(t,i){if(t&1){let e=V();p(0,"div")(1,"app-tabla-pacientes",2),R("pacienteSeleccionado",function(s){P(e);let o=y();return k(o.recibirPacienteSeleccionado(s))}),f()()}}function u_(t,i){if(t&1&&(p(0,"div"),O(1,"app-historia-clinica",3),f()),t&2){let e=y();_(),C("emailPaciente",e.emailSeleccionado)}}var Wc=(()=>{class t{emailSeleccionado;recibirPacienteSeleccionado(e){this.emailSeleccionado=e}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-mis-pacientes"]],standalone:!0,features:[te],decls:3,vars:2,consts:[[1,"fondo"],[4,"ngIf"],[3,"pacienteSeleccionado"],[3,"emailPaciente"]],template:function(n,s){n&1&&(p(0,"div",0),A(1,d_,2,0,"div",1)(2,u_,2,1,"div",1),f()),n&2&&(_(),C("ngIf",!s.emailSeleccionado),_(),C("ngIf",s.emailSeleccionado))},dependencies:[Vc,ge,de,ye,gi],styles:[".fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);height:100vh}.volver-btn[_ngcontent-%COMP%]{position:absolute;top:110px;right:10%;background-color:#f44336;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer}"]})}return t})();var Bo=(t,i)=>{let e=li(pi),n=li(Cs),s=li(yt);return e.isAdmin()?!0:(n.showSuccessAlert1("No eres un admin","no ok","error"),s.navigateByUrl("/login"),!1)};var Bc=[{path:"",redirectTo:"/bienvenido",pathMatch:"full"},{path:"bienvenido",component:Mc,data:{animation:"BienvenidoPage"}},{path:"login",component:Tc,data:{animation:"LoginPage"}},{path:"registro",loadComponent:()=>import("./chunk-R7LHJFYG.js").then(t=>t.RegistroComponent),data:{animation:"RegistroPage"}},{path:"usuarios",component:Dc,canActivate:[Bo],data:{animation:"UsuariosPage"}},{path:"perfil",component:Ac,data:{animation:"PerfilPage"}},{path:"turnos",component:Nc,data:{animation:"TurnosPage"}},{path:"crearTurno",component:Lc,data:{animation:"CrearTurnoPage"}},{path:"historial",component:gi,data:{animation:"HistorialPage"}},{path:"pacientes",component:Wc,data:{animation:"PacientesPage"}},{path:"estadisticas",loadComponent:()=>import("./chunk-EYUI3I6U.js").then(t=>t.EstadisticasComponent),canActivate:[Bo],data:{animation:"EstadisticasPage"}},{path:"**",component:Pc,data:{animation:"ErrorPage"}}];var zc="@firebase/database",jc="1.0.6";var Vr="";function h_(t){Vr=t}var $o=class{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,e){e==null?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),Ce(e))}get(i){let e=this.domStorage_.getItem(this.prefixedName_(i));return e==null?null:ys(e)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}};var Ko=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,e){e==null?delete this.cache_[i]:this.cache_[i]=e}get(i){return ot(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}};var vd=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let i=window[t];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new $o(i)}}catch{}return new Ko},qt=vd("localStorage"),Xo=vd("sessionStorage");var vi=new Ll("@firebase/database"),f_=function(){let t=1;return function(){return t++}}(),yd=function(t){let i=Rl(t),e=new Dl;e.update(i);let n=e.digest();return wl.encodeByteArray(n)},vn=function(...t){let i="";for(let e=0;e<t.length;e++){let n=t[e];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?i+=vn.apply(null,n):typeof n=="object"?i+=Ce(n):i+=n,i+=" "}return i},Gt=null,Hc=!0,p_=function(t,i){F(!i||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(vi.logLevel=Nl.VERBOSE,Gt=vi.log.bind(vi),i&&Xo.set("logging_enabled",!0)):typeof t=="function"?Gt=t:(Gt=null,Xo.remove("logging_enabled"))},De=function(...t){if(Hc===!0&&(Hc=!1,Gt===null&&Xo.get("logging_enabled")===!0&&p_(!0)),Gt){let i=vn.apply(null,t);Gt(i)}},yn=function(t){return function(...i){De(t,...i)}},Qo=function(...t){let i="FIREBASE INTERNAL ERROR: "+vn(...t);vi.error(i)},mt=function(...t){let i=`FIREBASE FATAL ERROR: ${vn(...t)}`;throw vi.error(i),new Error(i)},He=function(...t){let i="FIREBASE WARNING: "+vn(...t);vi.warn(i)},m_=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&He("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Cd=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},g_=function(t){if(st()||document.readyState==="complete")t();else{let i=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}i||(i=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Ci="[MIN_NAME]",$t="[MAX_NAME]",ki=function(t,i){if(t===i)return 0;if(t===Ci||i===$t)return-1;if(i===Ci||t===$t)return 1;{let e=Uc(t),n=Uc(i);return e!==null?n!==null?e-n===0?t.length-i.length:e-n:-1:n!==null?1:t<i?-1:1}},__=function(t,i){return t===i?0:t<i?-1:1},ln=function(t,i){if(i&&t in i)return i[t];throw new Error("Missing required key ("+t+") in object: "+Ce(i))},Wr=function(t){if(typeof t!="object"||t===null)return Ce(t);let i=[];for(let n in t)i.push(n);i.sort();let e="{";for(let n=0;n<i.length;n++)n!==0&&(e+=","),e+=Ce(i[n]),e+=":",e+=Wr(t[i[n]]);return e+="}",e},wd=function(t,i){let e=t.length;if(e<=i)return[t];let n=[];for(let s=0;s<e;s+=i)s+i>e?n.push(t.substring(s,e)):n.push(t.substring(s,s+i));return n};function $e(t,i){for(let e in t)t.hasOwnProperty(e)&&i(e,t[e])}var Sd=function(t){F(!Cd(t),"Invalid JSON number");let i=11,e=52,n=(1<<i-1)-1,s,o,r,a,l;t===0?(o=0,r=0,s=1/t===-1/0?1:0):(s=t<0,t=Math.abs(t),t>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),n),o=a+n,r=Math.round(t*Math.pow(2,e-a)-Math.pow(2,e))):(o=0,r=Math.round(t/Math.pow(2,1-n-e))));let c=[];for(l=e;l;l-=1)c.push(r%2?1:0),r=Math.floor(r/2);for(l=i;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);c.push(s?1:0),c.reverse();let d=c.join(""),u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},b_=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},x_=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var v_=new RegExp("^-?(0*)\\d{1,10}$"),y_=-2147483648,C_=2147483647,Uc=function(t){if(v_.test(t)){let i=Number(t);if(i>=y_&&i<=C_)return i}return null},Cn=function(t){try{t()}catch(i){setTimeout(()=>{let e=i.stack||"";throw He("Exception was thrown by user callback.",e),i},Math.floor(0))}},w_=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fn=function(t,i){let e=setTimeout(t,i);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var Jo=class{constructor(i,e){this.appName_=i,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(e,n):e(null)},0)})}addTokenChangeListener(i){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(n=>n.addTokenListener(i))}notifyForInvalidToken(){He(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Zo=class{constructor(i,e,n){this.appName_=i,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(s=>this.auth_=s)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(e=>e&&e.code==="auth/token-not-initialized"?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(e,n):e(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(e=>e.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(e=>e.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?i+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?i+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':i+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',He(i)}},pn=(()=>{class t{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Rs="5",Md="v",Ed="s",Td="r",Pd="f",kd=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Id="ls",Od="p",er="ac",Dd="websocket",Ad="long_polling";var Fs=class{constructor(i,e,n,s,o=!1,r="",a=!1,l=!1){this.secure=e,this.namespace=n,this.webSocketOnly=s,this.nodeAdmin=o,this.persistenceKey=r,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qt.get("host:"+i)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&qt.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){let i=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${i}${this.host}/${e}`}};function S_(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Rd(t,i,e){F(typeof i=="string","typeof type must == string"),F(typeof e=="object","typeof params must == object");let n;if(i===Dd)n=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(i===Ad)n=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+i);S_(t)&&(e.ns=t.namespace);let s=[];return $e(e,(o,r)=>{s.push(o+"="+r)}),n+s.join("&")}var tr=class{constructor(){this.counters_={}}incrementCounter(i,e=1){ot(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=e}get(){return Ml(this.counters_)}};var zo={},jo={};function Br(t){let i=t.toString();return zo[i]||(zo[i]=new tr),zo[i]}function M_(t,i){let e=t.toString();return jo[e]||(jo[e]=i()),jo[e]}var ir=class{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,e){this.closeAfterResponse=i,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,e){for(this.pendingResponses[i]=e;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let s=0;s<n.length;++s)n[s]&&Cn(()=>{this.onMessage_(n[s])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Yc="start",E_="close",T_="pLPCommand",P_="pRTLPCB",Fd="id",Nd="pw",Ld="ser",k_="cb",I_="seg",O_="ts",D_="d",A_="dframe",Vd=1870,Wd=30,R_=Vd-Wd,F_=25e3,N_=3e4,nr=class t{constructor(i,e,n,s,o,r,a){this.connId=i,this.repoInfo=e,this.applicationId=n,this.appCheckToken=s,this.authToken=o,this.transportSessionId=r,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=yn(i),this.stats_=Br(e),this.urlFn=l=>(this.appCheckToken&&(l[er]=this.appCheckToken),Rd(e,Ad,l))}open(i,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ir(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(N_)),g_(()=>{if(this.isClosed_)return;this.scriptTagHolder=new sr((...o)=>{let[r,a,l,c,d]=o;if(this.incrementIncomingBytes_(o),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,r===Yc)this.id=a,this.password=l;else if(r===E_)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+r)},(...o)=>{let[r,a]=o;this.incrementIncomingBytes_(o),this.myPacketOrderer.handleResponse(r,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[Yc]="t",n[Ld]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[k_]=this.scriptTagHolder.uniqueCallbackIdentifier),n[Md]=Rs,this.transportSessionId&&(n[Ed]=this.transportSessionId),this.lastSessionId&&(n[Id]=this.lastSessionId),this.applicationId&&(n[Od]=this.applicationId),this.appCheckToken&&(n[er]=this.appCheckToken),typeof location<"u"&&location.hostname&&kd.test(location.hostname)&&(n[Td]=Pd);let s=this.urlFn(n);this.log_("Connecting via long-poll to "+s),this.scriptTagHolder.addTag(s,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return st()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!b_()&&!x_()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){let e=Ce(i);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=Sl(e),s=wd(n,R_);for(let o=0;o<s.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,s.length,s[o]),this.curSegmentNum++}addDisconnectPingFrame(i,e){if(st())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[A_]="t",n[Fd]=i,n[Nd]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){let e=Ce(i).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},sr=class t{constructor(i,e,n,s){if(this.onDisconnect=n,this.urlFn=s,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,st())this.commandCB=i,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=f_(),window[T_+this.uniqueCallbackIdentifier]=i,window[P_+this.uniqueCallbackIdentifier]=e,this.myIFrame=t.createIFrame_();let o="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(o='<script>document.domain="'+document.domain+'";<\/script>');let r="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(a){De("frame writing exception"),a.stack&&De(a.stack),De(a)}}}static createIFrame_(){let i=document.createElement("iframe");if(i.style.display="none",document.body){document.body.appendChild(i);try{i.contentWindow.document||De("No IE domain setting required")}catch{let n=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,e){for(this.myID=i,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let i={};i[Fd]=this.myID,i[Nd]=this.myPW,i[Ld]=this.currentSerial;let e=this.urlFn(i),n="",s=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Wd+n.length<=Vd;){let r=this.pendingSegs.shift();n=n+"&"+I_+s+"="+r.seg+"&"+O_+s+"="+r.ts+"&"+D_+s+"="+r.d,s++}return e=e+n,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(i,e,n){this.pendingSegs.push({seg:i,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(i,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},s=setTimeout(n,Math.floor(F_)),o=()=>{clearTimeout(s),n()};this.addTag(i,o)}addTag(i,e){st()?this.doNodeLongPoll(i,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=i,n.onload=n.onreadystatechange=function(){let s=n.readyState;(!s||s==="loaded"||s==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{De("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var L_=16384,V_=45e3,Ns=null;typeof MozWebSocket<"u"?Ns=MozWebSocket:typeof WebSocket<"u"&&(Ns=WebSocket);var cn=(()=>{class t{constructor(e,n,s,o,r,a,l){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=yn(this.connId),this.stats_=Br(n),this.connURL=t.connectionURL_(n,a,l,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,r){let a={};return a[Md]=Rs,!st()&&typeof location<"u"&&location.hostname&&kd.test(location.hostname)&&(a[Td]=Pd),n&&(a[Ed]=n),s&&(a[Id]=s),o&&(a[er]=o),r&&(a[Od]=r),Rd(e,Dd,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qt.set("previous_websocket_failure",!0);try{let s;if(st()){let o=this.nodeAdmin?"AdminNode":"Node";s={headers:{"User-Agent":`Firebase/${Rs}/${Vr}/${process.platform}/${o}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(s.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);let r=process.env,a=this.connURL.indexOf("wss://")===0?r.HTTPS_PROXY||r.https_proxy:r.HTTP_PROXY||r.http_proxy;a&&(s.proxy={origin:a})}this.mySock=new Ns(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");let o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");let o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&Ns!==null&&!t.forceDisallow_}static previouslyFailed(){return qt.isInMemoryStorage||qt.get("previous_websocket_failure")===!0}markConnectionHealthy(){qt.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let s=ys(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(F(this.frames===null,"We already have a frame buffer"),e.length<=6){let n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();let n=Ce(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let s=wd(n,L_);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(V_))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),W_=(()=>{class t{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[nr,cn]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let n=cn&&cn.isAvailable(),s=n&&!cn.previouslyFailed();if(e.webSocketOnly&&(n||He("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[cn];else{let o=this.transports_=[];for(let r of t.ALL_TRANSPORTS)r&&r.isAvailable()&&o.push(r);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),B_=6e4,z_=5e3,j_=10*1024,H_=100*1024,Ho="t",qc="d",U_="s",Gc="r",Y_="e",$c="o",Kc="a",Xc="n",Qc="p",q_="h",or=class{constructor(i,e,n,s,o,r,a,l,c,d){this.id=i,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=s,this.authToken_=o,this.onMessage_=r,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=yn("c:"+this.id+":"),this.transportManager_=new W_(e),this.log_("Connection created"),this.start_()}start_(){let i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let s=i.healthyTimeout||0;s>0&&(this.healthyTimeout_=fn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>H_?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>j_?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(s)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return e=>{i===this.conn_?this.onConnectionLost_(e):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return e=>{this.state_!==2&&(i===this.rx_?this.onPrimaryMessageReceived_(e):i===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(i){let e={t:"d",d:i};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if(Ho in i){let e=i[Ho];e===Kc?this.upgradeIfSecondaryHealthy_():e===Gc?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===$c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){let e=ln("t",i),n=ln("d",i);if(e==="c")this.onSecondaryControl_(n);else if(e==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Qc,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Kc,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Xc,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){let e=ln("t",i),n=ln("d",i);e==="c"?this.onControl_(n):e==="d"&&this.onDataMessage_(n)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){let e=ln(Ho,i);if(qc in i){let n=i[qc];if(e===q_){let s=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(s.h=this.repoInfo_.host),this.onHandshake_(s)}else if(e===Xc){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let s=0;s<this.pendingDataMessages.length;++s)this.onDataMessage_(this.pendingDataMessages[s]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===U_?this.onConnectionShutdown_(n):e===Gc?this.onReset_(n):e===Y_?Qo("Server Error: "+n):e===$c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Qo("Unknown control packet command: "+e)}}onHandshake_(i){let e=i.ts,n=i.v,s=i.h;this.sessionId=i.s,this.repoInfo_.host=s,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),Rs!==n&&He("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),fn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(B_))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,e){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(z_))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Qc,d:{}}}))}onSecondaryConnectionLost_(){let i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,!i&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(i)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Ls=class{put(i,e,n,s){}merge(i,e,n,s){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,e,n){}onDisconnectMerge(i,e,n){}onDisconnectCancel(i,e){}reportStats(i){}};var Vs=class{constructor(i){this.allowedEvents_=i,this.listeners_={},F(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...e){if(Array.isArray(this.listeners_[i])){let n=[...this.listeners_[i]];for(let s=0;s<n.length;s++)n[s].callback.apply(n[s].context,e)}}on(i,e,n){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:e,context:n});let s=this.getInitialEvent(i);s&&e.apply(n,s)}off(i,e,n){this.validateEventType_(i);let s=this.listeners_[i]||[];for(let o=0;o<s.length;o++)if(s[o].callback===e&&(!n||n===s[o].context)){s.splice(o,1);return}}validateEventType_(i){F(this.allowedEvents_.find(e=>e===i),"Unknown event: "+i)}};var Ws=class t extends Vs{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!No()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(i){return F(i==="online","Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}};var Jc=32,Zc=768,ne=class{constructor(i,e){if(e===void 0){this.pieces_=i.split("/");let n=0;for(let s=0;s<this.pieces_.length;s++)this.pieces_[s].length>0&&(this.pieces_[n]=this.pieces_[s],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=e}toString(){let i="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(i+="/"+this.pieces_[e]);return i||"/"}};function ie(){return new ne("")}function K(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Et(t){return t.pieces_.length-t.pieceNum_}function ae(t){let i=t.pieceNum_;return i<t.pieces_.length&&i++,new ne(t.pieces_,i)}function Bd(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G_(t){let i="";for(let e=t.pieceNum_;e<t.pieces_.length;e++)t.pieces_[e]!==""&&(i+="/"+encodeURIComponent(String(t.pieces_[e])));return i||"/"}function zd(t,i=0){return t.pieces_.slice(t.pieceNum_+i)}function jd(t){if(t.pieceNum_>=t.pieces_.length)return null;let i=[];for(let e=t.pieceNum_;e<t.pieces_.length-1;e++)i.push(t.pieces_[e]);return new ne(i,0)}function Me(t,i){let e=[];for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);if(i instanceof ne)for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);else{let n=i.split("/");for(let s=0;s<n.length;s++)n[s].length>0&&e.push(n[s])}return new ne(e,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function qe(t,i){let e=K(t),n=K(i);if(e===null)return i;if(e===n)return qe(ae(t),ae(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+t+")")}function Hd(t,i){if(Et(t)!==Et(i))return!1;for(let e=t.pieceNum_,n=i.pieceNum_;e<=t.pieces_.length;e++,n++)if(t.pieces_[e]!==i.pieces_[n])return!1;return!0}function tt(t,i){let e=t.pieceNum_,n=i.pieceNum_;if(Et(t)>Et(i))return!1;for(;e<t.pieces_.length;){if(t.pieces_[e]!==i.pieces_[n])return!1;++e,++n}return!0}var rr=class{constructor(i,e){this.errorPrefix_=e,this.parts_=zd(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=sn(this.parts_[n]);Ud(this)}};function $_(t,i){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(i),t.byteLength_+=sn(i),Ud(t)}function K_(t){let i=t.parts_.pop();t.byteLength_-=sn(i),t.parts_.length>0&&(t.byteLength_-=1)}function Ud(t){if(t.byteLength_>Zc)throw new Error(t.errorPrefix_+"has a key path longer than "+Zc+" bytes ("+t.byteLength_+").");if(t.parts_.length>Jc)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Jc+") or object contains a cycle "+Yt(t))}function Yt(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var ar=class t extends Vs{constructor(){super(["visible"]);let i,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let n=!document[i];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new t}getInitialEvent(i){return F(i==="visible","Unknown event type: "+i),[this.visible_]}};var dn=1e3,X_=60*5*1e3,ed=30*1e3,Q_=1.3,J_=3e4,Z_="server_kill",td=3,zr=(()=>{class t extends Ls{constructor(e,n,s,o,r,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=r,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=yn("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=dn,this.maxReconnectDelay_=X_,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!st())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ar.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Ws.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){let o=++this.requestNumber_,r={r:o,a:e,b:n};this.log_(Ce(r)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();let n=new Fo,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;let r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),n.promise}listen(e,n,s,o){this.initConnection_();let r=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+r),this.listens.has(a)||this.listens.set(a,new Map),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(r),"listen() called twice for same path/queryId.");let l={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(a).set(r,l),this.connected_&&this.sendListen_(l)}sendGet_(e){let n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){let n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);let r={p:s},a="q";e.tag&&(r.q=n._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest(a,r,l=>{let c=l.d,d=l.s;t.warnOnListenWarnings_(c,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&ot(e,"w")){let s=Ht(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){let o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',r=n._path.toString();He(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${r} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Il(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ed)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,n=kl(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{let r=o.s,a=o.d||"error";this.authToken_===e&&(r==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(r,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){let s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),F(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);let r={p:e},a="n";o&&(r.q=s,r.t=o),this.sendRequest(a,r)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){let r={p:n,d:s};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,a=>{o&&setTimeout(()=>{o(a.s,a.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,r){this.initConnection_();let a={p:n,d:s};r!==void 0&&(a.h=r),this.outstandingPuts_.push({action:e,request:a,onComplete:o}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){let n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,r=>{this.log_(n+" response",r),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(r.s,r.d)})}reportStats(e){if(this.connected_){let n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){let r=s.d;this.log_("reportStats","Error sending stats: "+r)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Ce(e));let n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):Qo("Unrecognized action received from server: "+Ce(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dn,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=dn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>J_&&(this.reconnectDelay_=dn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Q_)}this.onConnectStatus_(!1)}establishConnection_(){return Fe(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,r=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,s())},d=function(h){F(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,m]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,l=new or(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,g=>{He(g+" ("+this.repoInfo_.toString()+")"),this.interrupt(Z_)},r))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&He(h),c())}}})}interrupt(e){De("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){De("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Lo(this.interruptReasons_)&&(this.reconnectDelay_=dn,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(r=>Wr(r)).join("$"):s="default";let o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){let s=new ne(e).toString(),o;if(this.listens.has(s)){let r=this.listens.get(s);o=r.get(n),r.delete(n),r.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){De("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=td&&(this.reconnectDelay_=ed,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){De("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=td&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},n="js";st()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),e["sdk."+n+"."+Vr.replace(/\./g,"-")]=1,No()?e["framework.cordova"]=1:Pl()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=Ws.getInstance().currentlyOnline();return Lo(this.interruptReasons_)&&e}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),X=class t{constructor(i,e){this.name=i,this.node=e}static Wrap(i,e){return new t(i,e)}};var wi=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,e){let n=new X(Ci,i),s=new X(Ci,e);return this.compare(n,s)!==0}minPost(){return X.MIN}};var As,Bs=class extends wi{static get __EMPTY_NODE(){return As}static set __EMPTY_NODE(i){As=i}compare(i,e){return ki(i.name,e.name)}isDefinedOn(i){throw fi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,e){return!1}minPost(){return X.MIN}maxPost(){return new X($t,As)}makePost(i,e){return F(typeof i=="string","KeyIndex indexValue must always be a string."),new X(i,As)}toString(){return".key"}},yi=new Bs;var bi=class{constructor(i,e,n,s,o=null){this.isReverse_=s,this.resultGenerator_=o,this.nodeStack_=[];let r=1;for(;!i.isEmpty();)if(i=i,r=e?n(i.key,e):1,s&&(r*=-1),r<0)this.isReverse_?i=i.left:i=i.right;else if(r===0){this.nodeStack_.push(i);break}else this.nodeStack_.push(i),this.isReverse_?i=i.right:i=i.left}getNext(){if(this.nodeStack_.length===0)return null;let i=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(i.key,i.value):e={key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}},et=(()=>{class t{constructor(e,n,s,o,r){this.key=e,this.value=n,this.color=s??t.RED,this.left=o??Ge.EMPTY_NODE,this.right=r??Ge.EMPTY_NODE}copy(e,n,s,o,r){return new t(e??this.key,n??this.value,s??this.color,o??this.left,r??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this,r=s(e,o.key);return r<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):r===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ge.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return Ge.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),lr=class{copy(i,e,n,s,o){return this}insert(i,e,n){return new et(i,e,null)}remove(i,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Ge=class t{constructor(i,e=t.EMPTY_NODE){this.comparator_=i,this.root_=e}insert(i,e){return new t(this.comparator_,this.root_.insert(i,e,this.comparator_).copy(null,null,et.BLACK,null,null))}remove(i){return new t(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,et.BLACK,null,null))}get(i){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(i,n.key),e===0)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(i){let e,n=this.root_,s=null;for(;!n.isEmpty();)if(e=this.comparator_(i,n.key),e===0){if(n.left.isEmpty())return s?s.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else e<0?n=n.left:e>0&&(s=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new bi(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,e){return new bi(this.root_,i,this.comparator_,!1,e)}getReverseIteratorFrom(i,e){return new bi(this.root_,i,this.comparator_,!0,e)}getReverseIterator(i){return new bi(this.root_,null,this.comparator_,!0,i)}};Ge.EMPTY_NODE=new lr;function e0(t,i){return ki(t.name,i.name)}function jr(t,i){return ki(t,i)}var cr;function t0(t){cr=t}var Yd=function(t){return typeof t=="number"?"number:"+Sd(t):"string:"+t},qd=function(t){if(t.isLeafNode()){let i=t.val();F(typeof i=="string"||typeof i=="number"||typeof i=="object"&&ot(i,".sv"),"Priority must be a string or number.")}else F(t===cr||t.isEmpty(),"priority of unexpected type.");F(t===cr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var id,Si=(()=>{class t{constructor(e,n=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),qd(this.priorityNode_)}static set __childrenNodeConstructor(e){id=e}static get __childrenNodeConstructor(){return id}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new t(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $(e)?this:K(e)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){let s=K(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(F(s!==".priority"||Et(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ae(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Yd(this.priorityNode_.val())+":");let n=typeof this.value_;e+=n+":",n==="number"?e+=Sd(this.value_):e+=this.value_,this.lazyHash_=yd(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(F(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let n=typeof e.value_,s=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),r=t.VALUE_TYPE_ORDER.indexOf(s);return F(o>=0,"Unknown leaf type: "+n),F(r>=0,"Unknown leaf type: "+s),o===r?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Gd,$d;function i0(t){Gd=t}function n0(t){$d=t}var dr=class extends wi{compare(i,e){let n=i.node.getPriority(),s=e.node.getPriority(),o=n.compareTo(s);return o===0?ki(i.name,e.name):o}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,e){return!i.getPriority().equals(e.getPriority())}minPost(){return X.MIN}maxPost(){return new X($t,new Si("[PRIORITY-POST]",$d))}makePost(i,e){let n=Gd(i);return new X(e,new Si("[PRIORITY-POST]",n))}toString(){return".priority"}},Re=new dr;var s0=Math.log(2),ur=class{constructor(i){let e=o=>parseInt(Math.log(o)/s0,10),n=o=>parseInt(Array(o+1).join("1"),2);this.count=e(i+1),this.current_=this.count-1;let s=n(this.count);this.bits_=i+1&s}nextBitIsOne(){let i=!(this.bits_&1<<this.current_);return this.current_--,i}},zs=function(t,i,e,n){t.sort(i);let s=function(l,c){let d=c-l,u,h;if(d===0)return null;if(d===1)return u=t[l],h=e?e(u):u,new et(h,u.node,et.BLACK,null,null);{let m=parseInt(d/2,10)+l,g=s(l,m),b=s(m+1,c);return u=t[m],h=e?e(u):u,new et(h,u.node,et.BLACK,g,b)}},o=function(l){let c=null,d=null,u=t.length,h=function(g,b){let v=u-g,S=u;u-=g;let w=s(v+1,S),E=t[v],I=e?e(E):E;m(new et(I,E.node,b,null,w))},m=function(g){c?(c.left=g,c=g):(d=g,c=g)};for(let g=0;g<l.count;++g){let b=l.nextBitIsOne(),v=Math.pow(2,l.count-(g+1));b?h(v,et.BLACK):(h(v,et.BLACK),h(v,et.RED))}return d},r=new ur(t.length),a=o(r);return new Ge(n||i,a)};var Uo,_i={},Mi=class t{constructor(i,e){this.indexes_=i,this.indexSet_=e}static get Default(){return F(_i&&Re,"ChildrenNode.ts has not been loaded"),Uo=Uo||new t({".priority":_i},{".priority":Re}),Uo}get(i){let e=Ht(this.indexes_,i);if(!e)throw new Error("No index defined for "+i);return e instanceof Ge?e:null}hasIndex(i){return ot(this.indexSet_,i.toString())}addIndex(i,e){F(i!==yi,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],s=!1,o=e.getIterator(X.Wrap),r=o.getNext();for(;r;)s=s||i.isDefinedOn(r.node),n.push(r),r=o.getNext();let a;s?a=zs(n,i.getCompare()):a=_i;let l=i.toString(),c=Object.assign({},this.indexSet_);c[l]=i;let d=Object.assign({},this.indexes_);return d[l]=a,new t(d,c)}addToIndexes(i,e){let n=nn(this.indexes_,(s,o)=>{let r=Ht(this.indexSet_,o);if(F(r,"Missing index implementation for "+o),s===_i)if(r.isDefinedOn(i.node)){let a=[],l=e.getIterator(X.Wrap),c=l.getNext();for(;c;)c.name!==i.name&&a.push(c),c=l.getNext();return a.push(i),zs(a,r.getCompare())}else return _i;else{let a=e.get(i.name),l=s;return a&&(l=l.remove(new X(i.name,a))),l.insert(i,i.node)}});return new t(n,this.indexSet_)}removeFromIndexes(i,e){let n=nn(this.indexes_,s=>{if(s===_i)return s;{let o=e.get(i.name);return o?s.remove(new X(i.name,o)):s}});return new t(n,this.indexSet_)}};var un,ue=(()=>{class t{constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&qd(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return un||(un=new t(new Ge(jr),null,Mi.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||un}updatePriority(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let n=this.children_.get(e);return n===null?un:n}}getChild(e){let n=K(e);return n===null?this:this.getImmediateChild(n).getChild(ae(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(F(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{let s=new X(e,n),o,r;n.isEmpty()?(o=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),r=this.indexMap_.addToIndexes(s,this.children_));let a=o.isEmpty()?un:this.priorityNode_;return new t(o,a,r)}}updateChild(e,n){let s=K(e);if(s===null)return n;{F(K(e)!==".priority"||Et(e)===1,".priority must be the last token in a path");let o=this.getImmediateChild(s).updateChild(ae(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let n={},s=0,o=0,r=!0;if(this.forEachChild(Re,(a,l)=>{n[a]=l.val(e),s++,r&&t.INTEGER_REGEXP_.test(a)?o=Math.max(o,Number(a)):r=!1}),!e&&r&&o<2*s){let a=[];for(let l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Yd(this.getPriority().val())+":"),this.forEachChild(Re,(n,s)=>{let o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":yd(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){let o=this.resolveIndex_(s);if(o){let r=o.getPredecessorKey(new X(e,n));return r?r.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let n=this.resolveIndex_(e);if(n){let s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){let n=this.getFirstChildName(e);return n?new X(n,this.children_.get(n)):null}getLastChildName(e){let n=this.resolveIndex_(e);if(n){let s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){let n=this.getLastChildName(e);return n?new X(n,this.children_.get(n)):null}forEachChild(e,n){let s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){let s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{let o=this.children_.getIteratorFrom(e.name,X.Wrap),r=o.peek();for(;r!=null&&n.compare(r,e)<0;)o.getNext(),r=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){let s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{let o=this.children_.getReverseIteratorFrom(e.name,X.Wrap),r=o.peek();for(;r!=null&&n.compare(r,e)>0;)o.getNext(),r=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===wn?-1:0}withIndex(e){if(e===yi||this.indexMap_.hasIndex(e))return this;{let n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===yi||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let s=this.getIterator(Re),o=n.getIterator(Re),r=s.getNext(),a=o.getNext();for(;r&&a;){if(r.name!==a.name||!r.node.equals(a.node))return!1;r=s.getNext(),a=o.getNext()}return r===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===yi?null:this.indexMap_.get(e.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),hr=class extends ue{constructor(){super(new Ge(jr),ue.EMPTY_NODE,Mi.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return ue.EMPTY_NODE}isEmpty(){return!1}},wn=new hr;Object.defineProperties(X,{MIN:{value:new X(Ci,ue.EMPTY_NODE)},MAX:{value:new X($t,wn)}});Bs.__EMPTY_NODE=ue.EMPTY_NODE;Si.__childrenNodeConstructor=ue;t0(wn);n0(wn);var o0=!0;function Ae(t,i=null){if(t===null)return ue.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(i=t[".priority"]),F(i===null||typeof i=="string"||typeof i=="number"||typeof i=="object"&&".sv"in i,"Invalid priority type found: "+typeof i),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let e=t;return new Si(e,Ae(i))}if(!(t instanceof Array)&&o0){let e=[],n=!1;if($e(t,(r,a)=>{if(r.substring(0,1)!=="."){let l=Ae(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),e.push(new X(r,l)))}}),e.length===0)return ue.EMPTY_NODE;let o=zs(e,e0,r=>r.name,jr);if(n){let r=zs(e,Re.getCompare());return new ue(o,Ae(i),new Mi({".priority":r},{".priority":Re}))}else return new ue(o,Ae(i),Mi.Default)}else{let e=ue.EMPTY_NODE;return $e(t,(n,s)=>{if(ot(t,n)&&n.substring(0,1)!=="."){let o=Ae(s);(o.isLeafNode()||!o.isEmpty())&&(e=e.updateImmediateChild(n,o))}}),e.updatePriority(Ae(i))}}i0(Ae);var fr=class extends wi{constructor(i){super(),this.indexPath_=i,F(!$(i)&&K(i)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,e){let n=this.extractChild(i.node),s=this.extractChild(e.node),o=n.compareTo(s);return o===0?ki(i.name,e.name):o}makePost(i,e){let n=Ae(i),s=ue.EMPTY_NODE.updateChild(this.indexPath_,n);return new X(e,s)}maxPost(){let i=ue.EMPTY_NODE.updateChild(this.indexPath_,wn);return new X($t,i)}toString(){return zd(this.indexPath_,0).join("/")}};var pr=class extends wi{compare(i,e){let n=i.node.compareTo(e.node);return n===0?ki(i.name,e.name):n}isDefinedOn(i){return!0}indexedValueChanged(i,e){return!i.equals(e)}minPost(){return X.MIN}maxPost(){return X.MAX}makePost(i,e){let n=Ae(i);return new X(e,n)}toString(){return".value"}},r0=new pr;function a0(t){return{type:"value",snapshotNode:t}}function l0(t,i){return{type:"child_added",snapshotNode:i,childName:t}}function c0(t,i){return{type:"child_removed",snapshotNode:i,childName:t}}function nd(t,i,e){return{type:"child_changed",snapshotNode:i,childName:t,oldSnap:e}}function d0(t,i){return{type:"child_moved",snapshotNode:i,childName:t}}var mr=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Re}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Ci}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:$t}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Re}copy(){let i=new t;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}};function sd(t){let i={};if(t.isDefault())return i;let e;if(t.index_===Re?e="$priority":t.index_===r0?e="$value":t.index_===yi?e="$key":(F(t.index_ instanceof fr,"Unrecognized index type!"),e=t.index_.toString()),i.orderBy=Ce(e),t.startSet_){let n=t.startAfterSet_?"startAfter":"startAt";i[n]=Ce(t.indexStartValue_),t.startNameSet_&&(i[n]+=","+Ce(t.indexStartName_))}if(t.endSet_){let n=t.endBeforeSet_?"endBefore":"endAt";i[n]=Ce(t.indexEndValue_),t.endNameSet_&&(i[n]+=","+Ce(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?i.limitToFirst=t.limit_:i.limitToLast=t.limit_),i}function od(t){let i={};if(t.startSet_&&(i.sp=t.indexStartValue_,t.startNameSet_&&(i.sn=t.indexStartName_),i.sin=!t.startAfterSet_),t.endSet_&&(i.ep=t.indexEndValue_,t.endNameSet_&&(i.en=t.indexEndName_),i.ein=!t.endBeforeSet_),t.limitSet_){i.l=t.limit_;let e=t.viewFrom_;e===""&&(t.isViewFromLeft()?e="l":e="r"),i.vf=e}return t.index_!==Re&&(i.i=t.index_.toString()),i}var gr=class t extends Ls{constructor(i,e,n,s){super(),this.repoInfo_=i,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=s,this.log_=yn("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,e){return e!==void 0?"tag$"+e:(F(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,e,n,s){let o=i._path.toString();this.log_("Listen called for "+o+" "+i._queryIdentifier);let r=t.getListenId_(i,n),a={};this.listens_[r]=a;let l=sd(i._queryParams);this.restRequest_(o+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(o,u,!1,n),Ht(this.listens_,r)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",s(h,null)}})}unlisten(i,e){let n=t.getListenId_(i,e);delete this.listens_[n]}get(i){let e=sd(i._queryParams),n=i._path.toString(),s=new Fo;return this.restRequest_(n+".json",e,(o,r)=>{let a=r;o===404&&(a=null,o=null),o===null?(this.onDataUpdate_(n,a,!1,null),s.resolve(a)):s.reject(new Error(a))}),s.promise}refreshAuthToken(i){}restRequest_(i,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([s,o])=>{s&&s.accessToken&&(e.auth=s.accessToken),o&&o.token&&(e.ac=o.token);let r=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+Ol(e);this.log_("Sending REST request for "+r);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+r+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=ys(a.responseText)}catch{He("Failed to parse JSON response for "+r+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&He("Got unsuccessful REST response for "+r+" Status: "+a.status),n(a.status);n=null}},a.open("GET",r,!0),a.send()})}};var _r=class{constructor(){this.rootNode_=ue.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,e){this.rootNode_=this.rootNode_.updateChild(i,e)}};function js(){return{value:null,children:new Map}}function Kd(t,i,e){if($(i))t.value=e,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(i,e);else{let n=K(i);t.children.has(n)||t.children.set(n,js());let s=t.children.get(n);i=ae(i),Kd(s,i,e)}}function br(t,i,e){t.value!==null?e(i,t.value):u0(t,(n,s)=>{let o=new ne(i.toString()+"/"+n);br(s,o,e)})}function u0(t,i){t.children.forEach((e,n)=>{i(n,e)})}var xr=class{constructor(i){this.collection_=i,this.last_=null}get(){let i=this.collection_.get(),e=Object.assign({},i);return this.last_&&$e(this.last_,(n,s)=>{e[n]=e[n]-s}),this.last_=i,e}};var rd=10*1e3,h0=30*1e3,f0=5*60*1e3,vr=class{constructor(i,e){this.server_=e,this.statsToReport_={},this.statsListener_=new xr(i);let n=rd+(h0-rd)*Math.random();fn(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let i=this.statsListener_.get(),e={},n=!1;$e(i,(s,o)=>{o>0&&ot(this.statsToReport_,s)&&(e[s]=o,n=!0)}),n&&this.server_.reportStats(e),fn(this.reportStats_.bind(this),Math.floor(Math.random()*2*f0))}};var pt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(pt||{});function Xd(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Qd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Jd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var yr=class t{constructor(i,e,n){this.path=i,this.affectedTree=e,this.revert=n,this.type=pt.ACK_USER_WRITE,this.source=Xd()}operationForChild(i){if($(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new ne(i));return new t(ie(),e,this.revert)}}else return F(K(this.path)===i,"operationForChild called for unrelated child."),new t(ae(this.path),this.affectedTree,this.revert)}};var Ei=class t{constructor(i,e,n){this.source=i,this.path=e,this.snap=n,this.type=pt.OVERWRITE}operationForChild(i){return $(this.path)?new t(this.source,ie(),this.snap.getImmediateChild(i)):new t(this.source,ae(this.path),this.snap)}};var Hs=class t{constructor(i,e,n){this.source=i,this.path=e,this.children=n,this.type=pt.MERGE}operationForChild(i){if($(this.path)){let e=this.children.subtree(new ne(i));return e.isEmpty()?null:e.value?new Ei(this.source,ie(),e.value):new t(this.source,ie(),e)}else return F(K(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ae(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var _n=class{constructor(i,e,n){this.node_=i,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if($(i))return this.isFullyInitialized()&&!this.filtered_;let e=K(i);return this.isCompleteForChild(e)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}};function p0(t,i,e,n){let s=[],o=[];return i.forEach(r=>{r.type==="child_changed"&&t.index_.indexedValueChanged(r.oldSnap,r.snapshotNode)&&o.push(d0(r.childName,r.snapshotNode))}),hn(t,s,"child_removed",i,n,e),hn(t,s,"child_added",i,n,e),hn(t,s,"child_moved",o,n,e),hn(t,s,"child_changed",i,n,e),hn(t,s,"value",i,n,e),s}function hn(t,i,e,n,s,o){let r=n.filter(a=>a.type===e);r.sort((a,l)=>g0(t,a,l)),r.forEach(a=>{let l=m0(t,a,o);s.forEach(c=>{c.respondsTo(a.type)&&i.push(c.createEvent(l,t.query_))})})}function m0(t,i,e){return i.type==="value"||i.type==="child_removed"||(i.prevName=e.getPredecessorChildName(i.childName,i.snapshotNode,t.index_)),i}function g0(t,i,e){if(i.childName==null||e.childName==null)throw fi("Should only compare child_ events.");let n=new X(i.childName,i.snapshotNode),s=new X(e.childName,e.snapshotNode);return t.index_.compare(n,s)}function Zd(t,i){return{eventCache:t,serverCache:i}}function mn(t,i,e,n){return Zd(new _n(i,e,n),t.serverCache)}function eu(t,i,e,n){return Zd(t.eventCache,new _n(i,e,n))}function Cr(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Kt(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Yo,_0=()=>(Yo||(Yo=new Ge(__)),Yo),Ne=class t{constructor(i,e=_0()){this.value=i,this.children=e}static fromObject(i){let e=new t(null);return $e(i,(n,s)=>{e=e.set(new ne(n),s)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,e){if(this.value!=null&&e(this.value))return{path:ie(),value:this.value};if($(i))return null;{let n=K(i),s=this.children.get(n);if(s!==null){let o=s.findRootMostMatchingPathAndValue(ae(i),e);return o!=null?{path:Me(new ne(n),o.path),value:o.value}:null}else return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if($(i))return this;{let e=K(i),n=this.children.get(e);return n!==null?n.subtree(ae(i)):new t(null)}}set(i,e){if($(i))return new t(e,this.children);{let n=K(i),o=(this.children.get(n)||new t(null)).set(ae(i),e),r=this.children.insert(n,o);return new t(this.value,r)}}remove(i){if($(i))return this.children.isEmpty()?new t(null):new t(null,this.children);{let e=K(i),n=this.children.get(e);if(n){let s=n.remove(ae(i)),o;return s.isEmpty()?o=this.children.remove(e):o=this.children.insert(e,s),this.value===null&&o.isEmpty()?new t(null):new t(this.value,o)}else return this}}get(i){if($(i))return this.value;{let e=K(i),n=this.children.get(e);return n?n.get(ae(i)):null}}setTree(i,e){if($(i))return e;{let n=K(i),o=(this.children.get(n)||new t(null)).setTree(ae(i),e),r;return o.isEmpty()?r=this.children.remove(n):r=this.children.insert(n,o),new t(this.value,r)}}fold(i){return this.fold_(ie(),i)}fold_(i,e){let n={};return this.children.inorderTraversal((s,o)=>{n[s]=o.fold_(Me(i,s),e)}),e(i,this.value,n)}findOnPath(i,e){return this.findOnPath_(i,ie(),e)}findOnPath_(i,e,n){let s=this.value?n(e,this.value):!1;if(s)return s;if($(i))return null;{let o=K(i),r=this.children.get(o);return r?r.findOnPath_(ae(i),Me(e,o),n):null}}foreachOnPath(i,e){return this.foreachOnPath_(i,ie(),e)}foreachOnPath_(i,e,n){if($(i))return this;{this.value&&n(e,this.value);let s=K(i),o=this.children.get(s);return o?o.foreachOnPath_(ae(i),Me(e,s),n):new t(null)}}foreach(i){this.foreach_(ie(),i)}foreach_(i,e){this.children.inorderTraversal((n,s)=>{s.foreach_(Me(i,n),e)}),this.value&&e(i,this.value)}foreachChild(i){this.children.inorderTraversal((e,n)=>{n.value&&i(e,n.value)})}};var it=class t{constructor(i){this.writeTree_=i}static empty(){return new t(new Ne(null))}};function gn(t,i,e){if($(i))return new it(new Ne(e));{let n=t.writeTree_.findRootMostValueAndPath(i);if(n!=null){let s=n.path,o=n.value,r=qe(s,i);return o=o.updateChild(r,e),new it(t.writeTree_.set(s,o))}else{let s=new Ne(e),o=t.writeTree_.setTree(i,s);return new it(o)}}}function ad(t,i,e){let n=t;return $e(e,(s,o)=>{n=gn(n,Me(i,s),o)}),n}function ld(t,i){if($(i))return it.empty();{let e=t.writeTree_.setTree(i,new Ne(null));return new it(e)}}function wr(t,i){return Xt(t,i)!=null}function Xt(t,i){let e=t.writeTree_.findRootMostValueAndPath(i);return e!=null?t.writeTree_.get(e.path).getChild(qe(e.path,i)):null}function cd(t){let i=[],e=t.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Re,(n,s)=>{i.push(new X(n,s))}):t.writeTree_.children.inorderTraversal((n,s)=>{s.value!=null&&i.push(new X(n,s.value))}),i}function Mt(t,i){if($(i))return t;{let e=Xt(t,i);return e!=null?new it(new Ne(e)):new it(t.writeTree_.subtree(i))}}function Sr(t){return t.writeTree_.isEmpty()}function Ti(t,i){return tu(ie(),t.writeTree_,i)}function tu(t,i,e){if(i.value!=null)return e.updateChild(t,i.value);{let n=null;return i.children.inorderTraversal((s,o)=>{s===".priority"?(F(o.value!==null,"Priority writes must always be leaf nodes"),n=o.value):e=tu(Me(t,s),o,e)}),!e.getChild(t).isEmpty()&&n!==null&&(e=e.updateChild(Me(t,".priority"),n)),e}}function iu(t,i){return au(i,t)}function b0(t,i,e,n,s){F(n>t.lastWriteId,"Stacking an older write on top of newer ones"),s===void 0&&(s=!0),t.allWrites.push({path:i,snap:e,writeId:n,visible:s}),s&&(t.visibleWrites=gn(t.visibleWrites,i,e)),t.lastWriteId=n}function x0(t,i){for(let e=0;e<t.allWrites.length;e++){let n=t.allWrites[e];if(n.writeId===i)return n}return null}function v0(t,i){let e=t.allWrites.findIndex(a=>a.writeId===i);F(e>=0,"removeWrite called with nonexistent writeId.");let n=t.allWrites[e];t.allWrites.splice(e,1);let s=n.visible,o=!1,r=t.allWrites.length-1;for(;s&&r>=0;){let a=t.allWrites[r];a.visible&&(r>=e&&y0(a,n.path)?s=!1:tt(n.path,a.path)&&(o=!0)),r--}if(s){if(o)return C0(t),!0;if(n.snap)t.visibleWrites=ld(t.visibleWrites,n.path);else{let a=n.children;$e(a,l=>{t.visibleWrites=ld(t.visibleWrites,Me(n.path,l))})}return!0}else return!1}function y0(t,i){if(t.snap)return tt(t.path,i);for(let e in t.children)if(t.children.hasOwnProperty(e)&&tt(Me(t.path,e),i))return!0;return!1}function C0(t){t.visibleWrites=nu(t.allWrites,w0,ie()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function w0(t){return t.visible}function nu(t,i,e){let n=it.empty();for(let s=0;s<t.length;++s){let o=t[s];if(i(o)){let r=o.path,a;if(o.snap)tt(e,r)?(a=qe(e,r),n=gn(n,a,o.snap)):tt(r,e)&&(a=qe(r,e),n=gn(n,ie(),o.snap.getChild(a)));else if(o.children){if(tt(e,r))a=qe(e,r),n=ad(n,a,o.children);else if(tt(r,e))if(a=qe(r,e),$(a))n=ad(n,ie(),o.children);else{let l=Ht(o.children,K(a));if(l){let c=l.getChild(ae(a));n=gn(n,ie(),c)}}}else throw fi("WriteRecord should have .snap or .children")}}return n}function su(t,i,e,n,s){if(!n&&!s){let o=Xt(t.visibleWrites,i);if(o!=null)return o;{let r=Mt(t.visibleWrites,i);if(Sr(r))return e;if(e==null&&!wr(r,ie()))return null;{let a=e||ue.EMPTY_NODE;return Ti(r,a)}}}else{let o=Mt(t.visibleWrites,i);if(!s&&Sr(o))return e;if(!s&&e==null&&!wr(o,ie()))return null;{let r=function(c){return(c.visible||s)&&(!n||!~n.indexOf(c.writeId))&&(tt(c.path,i)||tt(i,c.path))},a=nu(t.allWrites,r,i),l=e||ue.EMPTY_NODE;return Ti(a,l)}}}function S0(t,i,e){let n=ue.EMPTY_NODE,s=Xt(t.visibleWrites,i);if(s)return s.isLeafNode()||s.forEachChild(Re,(o,r)=>{n=n.updateImmediateChild(o,r)}),n;if(e){let o=Mt(t.visibleWrites,i);return e.forEachChild(Re,(r,a)=>{let l=Ti(Mt(o,new ne(r)),a);n=n.updateImmediateChild(r,l)}),cd(o).forEach(r=>{n=n.updateImmediateChild(r.name,r.node)}),n}else{let o=Mt(t.visibleWrites,i);return cd(o).forEach(r=>{n=n.updateImmediateChild(r.name,r.node)}),n}}function M0(t,i,e,n,s){F(n||s,"Either existingEventSnap or existingServerSnap must exist");let o=Me(i,e);if(wr(t.visibleWrites,o))return null;{let r=Mt(t.visibleWrites,o);return Sr(r)?s.getChild(e):Ti(r,s.getChild(e))}}function E0(t,i,e,n){let s=Me(i,e),o=Xt(t.visibleWrites,s);if(o!=null)return o;if(n.isCompleteForChild(e)){let r=Mt(t.visibleWrites,s);return Ti(r,n.getNode().getImmediateChild(e))}else return null}function T0(t,i){return Xt(t.visibleWrites,i)}function P0(t,i,e,n,s,o,r){let a,l=Mt(t.visibleWrites,i),c=Xt(l,ie());if(c!=null)a=c;else if(e!=null)a=Ti(l,e);else return[];if(a=a.withIndex(r),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=r.getCompare(),h=o?a.getReverseIteratorFrom(n,r):a.getIteratorFrom(n,r),m=h.getNext();for(;m&&d.length<s;)u(m,n)!==0&&d.push(m),m=h.getNext();return d}else return[]}function k0(){return{visibleWrites:it.empty(),allWrites:[],lastWriteId:-1}}function Mr(t,i,e,n){return su(t.writeTree,t.treePath,i,e,n)}function ou(t,i){return S0(t.writeTree,t.treePath,i)}function dd(t,i,e,n){return M0(t.writeTree,t.treePath,i,e,n)}function Us(t,i){return T0(t.writeTree,Me(t.treePath,i))}function I0(t,i,e,n,s,o){return P0(t.writeTree,t.treePath,i,e,n,s,o)}function Hr(t,i,e){return E0(t.writeTree,t.treePath,i,e)}function ru(t,i){return au(Me(t.treePath,i),t.writeTree)}function au(t,i){return{treePath:t,writeTree:i}}var Er=class{constructor(){this.changeMap=new Map}trackChildChange(i){let e=i.type,n=i.childName;F(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),F(n!==".priority","Only non-priority child changes can be tracked.");let s=this.changeMap.get(n);if(s){let o=s.type;if(e==="child_added"&&o==="child_removed")this.changeMap.set(n,nd(n,i.snapshotNode,s.snapshotNode));else if(e==="child_removed"&&o==="child_added")this.changeMap.delete(n);else if(e==="child_removed"&&o==="child_changed")this.changeMap.set(n,c0(n,s.oldSnap));else if(e==="child_changed"&&o==="child_added")this.changeMap.set(n,l0(n,i.snapshotNode));else if(e==="child_changed"&&o==="child_changed")this.changeMap.set(n,nd(n,i.snapshotNode,s.oldSnap));else throw fi("Illegal combination of changes: "+i+" occurred after "+s)}else this.changeMap.set(n,i)}getChanges(){return Array.from(this.changeMap.values())}};var Tr=class{getCompleteChild(i){return null}getChildAfterChild(i,e,n){return null}},lu=new Tr,bn=class{constructor(i,e,n=null){this.writes_=i,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(i){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(i))return e.getNode().getImmediateChild(i);{let n=this.optCompleteServerCache_!=null?new _n(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Hr(this.writes_,i,n)}}getChildAfterChild(i,e,n){let s=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kt(this.viewCache_),o=I0(this.writes_,s,e,1,n,i);return o.length===0?null:o[0]}};function O0(t,i){F(i.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(i.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function D0(t,i,e,n,s){let o=new Er,r,a;if(e.type===pt.OVERWRITE){let c=e;c.source.fromUser?r=Pr(t,i,c.path,c.snap,n,s,o):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||i.serverCache.isFiltered()&&!$(c.path),r=Ys(t,i,c.path,c.snap,n,s,a,o))}else if(e.type===pt.MERGE){let c=e;c.source.fromUser?r=R0(t,i,c.path,c.children,n,s,o):(F(c.source.fromServer,"Unknown source."),a=c.source.tagged||i.serverCache.isFiltered(),r=kr(t,i,c.path,c.children,n,s,a,o))}else if(e.type===pt.ACK_USER_WRITE){let c=e;c.revert?r=L0(t,i,c.path,n,s,o):r=F0(t,i,c.path,c.affectedTree,n,s,o)}else if(e.type===pt.LISTEN_COMPLETE)r=N0(t,i,e.path,n,o);else throw fi("Unknown operation type: "+e.type);let l=o.getChanges();return A0(i,r,l),{viewCache:r,changes:l}}function A0(t,i,e){let n=i.eventCache;if(n.isFullyInitialized()){let s=n.getNode().isLeafNode()||n.getNode().isEmpty(),o=Cr(t);(e.length>0||!t.eventCache.isFullyInitialized()||s&&!n.getNode().equals(o)||!n.getNode().getPriority().equals(o.getPriority()))&&e.push(a0(Cr(i)))}}function cu(t,i,e,n,s,o){let r=i.eventCache;if(Us(n,e)!=null)return i;{let a,l;if($(e))if(F(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){let c=Kt(i),d=c instanceof ue?c:ue.EMPTY_NODE,u=ou(n,d);a=t.filter.updateFullNode(i.eventCache.getNode(),u,o)}else{let c=Mr(n,Kt(i));a=t.filter.updateFullNode(i.eventCache.getNode(),c,o)}else{let c=K(e);if(c===".priority"){F(Et(e)===1,"Can't have a priority with additional path components");let d=r.getNode();l=i.serverCache.getNode();let u=dd(n,e,d,l);u!=null?a=t.filter.updatePriority(d,u):a=r.getNode()}else{let d=ae(e),u;if(r.isCompleteForChild(c)){l=i.serverCache.getNode();let h=dd(n,e,r.getNode(),l);h!=null?u=r.getNode().getImmediateChild(c).updateChild(d,h):u=r.getNode().getImmediateChild(c)}else u=Hr(n,c,i.serverCache);u!=null?a=t.filter.updateChild(r.getNode(),c,u,d,s,o):a=r.getNode()}}return mn(i,a,r.isFullyInitialized()||$(e),t.filter.filtersNodes())}}function Ys(t,i,e,n,s,o,r,a){let l=i.serverCache,c,d=r?t.filter:t.filter.getIndexedFilter();if($(e))c=d.updateFullNode(l.getNode(),n,null);else if(d.filtersNodes()&&!l.isFiltered()){let m=l.getNode().updateChild(e,n);c=d.updateFullNode(l.getNode(),m,null)}else{let m=K(e);if(!l.isCompleteForPath(e)&&Et(e)>1)return i;let g=ae(e),v=l.getNode().getImmediateChild(m).updateChild(g,n);m===".priority"?c=d.updatePriority(l.getNode(),v):c=d.updateChild(l.getNode(),m,v,g,lu,null)}let u=eu(i,c,l.isFullyInitialized()||$(e),d.filtersNodes()),h=new bn(s,u,o);return cu(t,u,e,s,h,a)}function Pr(t,i,e,n,s,o,r){let a=i.eventCache,l,c,d=new bn(s,i,o);if($(e))c=t.filter.updateFullNode(i.eventCache.getNode(),n,r),l=mn(i,c,!0,t.filter.filtersNodes());else{let u=K(e);if(u===".priority")c=t.filter.updatePriority(i.eventCache.getNode(),n),l=mn(i,c,a.isFullyInitialized(),a.isFiltered());else{let h=ae(e),m=a.getNode().getImmediateChild(u),g;if($(h))g=n;else{let b=d.getCompleteChild(u);b!=null?Bd(h)===".priority"&&b.getChild(jd(h)).isEmpty()?g=b:g=b.updateChild(h,n):g=ue.EMPTY_NODE}if(m.equals(g))l=i;else{let b=t.filter.updateChild(a.getNode(),u,g,h,d,r);l=mn(i,b,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function ud(t,i){return t.eventCache.isCompleteForChild(i)}function R0(t,i,e,n,s,o,r){let a=i;return n.foreach((l,c)=>{let d=Me(e,l);ud(i,K(d))&&(a=Pr(t,a,d,c,s,o,r))}),n.foreach((l,c)=>{let d=Me(e,l);ud(i,K(d))||(a=Pr(t,a,d,c,s,o,r))}),a}function hd(t,i,e){return e.foreach((n,s)=>{i=i.updateChild(n,s)}),i}function kr(t,i,e,n,s,o,r,a){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let l=i,c;$(e)?c=n:c=new Ne(null).setTree(e,n);let d=i.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let m=i.serverCache.getNode().getImmediateChild(u),g=hd(t,m,h);l=Ys(t,l,new ne(u),g,s,o,r,a)}}),c.children.inorderTraversal((u,h)=>{let m=!i.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!m){let g=i.serverCache.getNode().getImmediateChild(u),b=hd(t,g,h);l=Ys(t,l,new ne(u),b,s,o,r,a)}}),l}function F0(t,i,e,n,s,o,r){if(Us(s,e)!=null)return i;let a=i.serverCache.isFiltered(),l=i.serverCache;if(n.value!=null){if($(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return Ys(t,i,e,l.getNode().getChild(e),s,o,a,r);if($(e)){let c=new Ne(null);return l.getNode().forEachChild(yi,(d,u)=>{c=c.set(new ne(d),u)}),kr(t,i,e,c,s,o,a,r)}else return i}else{let c=new Ne(null);return n.foreach((d,u)=>{let h=Me(e,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),kr(t,i,e,c,s,o,a,r)}}function N0(t,i,e,n,s){let o=i.serverCache,r=eu(i,o.getNode(),o.isFullyInitialized()||$(e),o.isFiltered());return cu(t,r,e,n,lu,s)}function L0(t,i,e,n,s,o){let r;if(Us(n,e)!=null)return i;{let a=new bn(n,i,s),l=i.eventCache.getNode(),c;if($(e)||K(e)===".priority"){let d;if(i.serverCache.isFullyInitialized())d=Mr(n,Kt(i));else{let u=i.serverCache.getNode();F(u instanceof ue,"serverChildren would be complete if leaf node"),d=ou(n,u)}d=d,c=t.filter.updateFullNode(l,d,o)}else{let d=K(e),u=Hr(n,d,i.serverCache);u==null&&i.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=t.filter.updateChild(l,d,u,ae(e),a,o):i.eventCache.getNode().hasChild(d)?c=t.filter.updateChild(l,d,ue.EMPTY_NODE,ae(e),a,o):c=l,c.isEmpty()&&i.serverCache.isFullyInitialized()&&(r=Mr(n,Kt(i)),r.isLeafNode()&&(c=t.filter.updateFullNode(c,r,o)))}return r=i.serverCache.isFullyInitialized()||Us(n,ie())!=null,mn(i,c,r,t.filter.filtersNodes())}}function V0(t,i){let e=Kt(t.viewCache_);return e&&(t.query._queryParams.loadsAllData()||!$(i)&&!e.getImmediateChild(K(i)).isEmpty())?e.getChild(i):null}function fd(t,i,e,n){i.type===pt.MERGE&&i.source.queryId!==null&&(F(Kt(t.viewCache_),"We should always have a full cache before handling merges"),F(Cr(t.viewCache_),"Missing event cache, even though we have a server cache"));let s=t.viewCache_,o=D0(t.processor_,s,i,e,n);return O0(t.processor_,o.viewCache),F(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=o.viewCache,W0(t,o.changes,o.viewCache.eventCache.getNode(),null)}function W0(t,i,e,n){let s=n?[n]:t.eventRegistrations_;return p0(t.eventGenerator_,i,e,s)}var pd;function B0(t){F(!pd,"__referenceConstructor has already been defined"),pd=t}function Ur(t,i,e,n){let s=i.source.queryId;if(s!==null){let o=t.views.get(s);return F(o!=null,"SyncTree gave us an op for an invalid query."),fd(o,i,e,n)}else{let o=[];for(let r of t.views.values())o=o.concat(fd(r,i,e,n));return o}}function Yr(t,i){let e=null;for(let n of t.views.values())e=e||V0(n,i);return e}var md;function z0(t){F(!md,"__referenceConstructor has already been defined"),md=t}var qs=class{constructor(i){this.listenProvider_=i,this.syncPointTree_=new Ne(null),this.pendingWriteTree_=k0(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function j0(t,i,e,n,s){return b0(t.pendingWriteTree_,i,e,n,s),s?$s(t,new Ei(Xd(),i,e)):[]}function xi(t,i,e=!1){let n=x0(t.pendingWriteTree_,i);if(v0(t.pendingWriteTree_,i)){let o=new Ne(null);return n.snap!=null?o=o.set(ie(),!0):$e(n.children,r=>{o=o.set(new ne(r),!0)}),$s(t,new yr(n.path,o,e))}else return[]}function Gs(t,i,e){return $s(t,new Ei(Qd(),i,e))}function H0(t,i,e){let n=Ne.fromObject(e);return $s(t,new Hs(Qd(),i,n))}function U0(t,i,e,n){let s=fu(t,n);if(s!=null){let o=pu(s),r=o.path,a=o.queryId,l=qe(r,i),c=new Ei(Jd(a),l,e);return mu(t,r,c)}else return[]}function Y0(t,i,e,n){let s=fu(t,n);if(s){let o=pu(s),r=o.path,a=o.queryId,l=qe(r,i),c=Ne.fromObject(e),d=new Hs(Jd(a),l,c);return mu(t,r,d)}else return[]}function du(t,i,e){let s=t.pendingWriteTree_,o=t.syncPointTree_.findOnPath(i,(r,a)=>{let l=qe(r,i),c=Yr(a,l);if(c)return c});return su(s,i,o,e,!0)}function $s(t,i){return uu(i,t.syncPointTree_,null,iu(t.pendingWriteTree_,ie()))}function uu(t,i,e,n){if($(t.path))return hu(t,i,e,n);{let s=i.get(ie());e==null&&s!=null&&(e=Yr(s,ie()));let o=[],r=K(t.path),a=t.operationForChild(r),l=i.children.get(r);if(l&&a){let c=e?e.getImmediateChild(r):null,d=ru(n,r);o=o.concat(uu(a,l,c,d))}return s&&(o=o.concat(Ur(s,t,n,e))),o}}function hu(t,i,e,n){let s=i.get(ie());e==null&&s!=null&&(e=Yr(s,ie()));let o=[];return i.children.inorderTraversal((r,a)=>{let l=e?e.getImmediateChild(r):null,c=ru(n,r),d=t.operationForChild(r);d&&(o=o.concat(hu(d,a,l,c)))}),s&&(o=o.concat(Ur(s,t,n,e))),o}function fu(t,i){return t.tagToQueryMap.get(i)}function pu(t){let i=t.indexOf("$");return F(i!==-1&&i<t.length-1,"Bad queryKey."),{queryId:t.substr(i+1),path:new ne(t.substr(0,i))}}function mu(t,i,e){let n=t.syncPointTree_.get(i);F(n,"Missing sync point for query tag that we're tracking");let s=iu(t.pendingWriteTree_,i);return Ur(n,e,s,null)}var Ir=class t{constructor(i){this.node_=i}getImmediateChild(i){let e=this.node_.getImmediateChild(i);return new t(e)}node(){return this.node_}},Or=class t{constructor(i,e){this.syncTree_=i,this.path_=e}getImmediateChild(i){let e=Me(this.path_,i);return new t(this.syncTree_,e)}node(){return du(this.syncTree_,this.path_)}},q0=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},gd=function(t,i,e){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return G0(t[".sv"],i,e);if(typeof t[".sv"]=="object")return $0(t[".sv"],i);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},G0=function(t,i,e){switch(t){case"timestamp":return e.timestamp;default:F(!1,"Unexpected server value: "+t)}},$0=function(t,i,e){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let n=t.increment;typeof n!="number"&&F(!1,"Unexpected increment value: "+n);let s=i.node();if(F(s!==null&&typeof s<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return n;let r=s.getValue();return typeof r!="number"?n:r+n},K0=function(t,i,e,n){return qr(i,new Or(e,t),n)},X0=function(t,i,e){return qr(t,new Ir(i),e)};function qr(t,i,e){let n=t.getPriority().val(),s=gd(n,i.getImmediateChild(".priority"),e),o;if(t.isLeafNode()){let r=t,a=gd(r.getValue(),i,e);return a!==r.getValue()||s!==r.getPriority().val()?new Si(a,Ae(s)):t}else{let r=t;return o=r,s!==r.getPriority().val()&&(o=o.updatePriority(new Si(s))),r.forEachChild(Re,(a,l)=>{let c=qr(l,i.getImmediateChild(a),e);c!==l&&(o=o.updateImmediateChild(a,c))}),o}}var xn=class{constructor(i="",e=null,n={children:{},childCount:0}){this.name=i,this.parent=e,this.node=n}};function Gr(t,i){let e=i instanceof ne?i:new ne(i),n=t,s=K(e);for(;s!==null;){let o=Ht(n.node.children,s)||{children:{},childCount:0};n=new xn(s,n,o),e=ae(e),s=K(e)}return n}function Ii(t){return t.node.value}function gu(t,i){t.node.value=i,Dr(t)}function _u(t){return t.node.childCount>0}function Q0(t){return Ii(t)===void 0&&!_u(t)}function Ks(t,i){$e(t.node.children,(e,n)=>{i(new xn(e,t,n))})}function bu(t,i,e,n){e&&!n&&i(t),Ks(t,s=>{bu(s,i,!0,n)}),e&&n&&i(t)}function J0(t,i,e){let n=e?t:t.parent;for(;n!==null;){if(i(n))return!0;n=n.parent}return!1}function Sn(t){return new ne(t.parent===null?t.name:Sn(t.parent)+"/"+t.name)}function Dr(t){t.parent!==null&&Z0(t.parent,t.name,t)}function Z0(t,i,e){let n=Q0(e),s=ot(t.node.children,i);n&&s?(delete t.node.children[i],t.node.childCount--,Dr(t)):!n&&!s&&(t.node.children[i]=e.node,t.node.childCount++,Dr(t))}var eb=/[\[\].#$\/\u0000-\u001F\u007F]/,tb=/[\[\].#$\u0000-\u001F\u007F]/,qo=10*1024*1024,xu=function(t){return typeof t=="string"&&t.length!==0&&!eb.test(t)},ib=function(t){return typeof t=="string"&&t.length!==0&&!tb.test(t)},nb=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),ib(t)};var vu=function(t,i,e){let n=e instanceof ne?new rr(e,t):e;if(i===void 0)throw new Error(t+"contains undefined "+Yt(n));if(typeof i=="function")throw new Error(t+"contains a function "+Yt(n)+" with contents = "+i.toString());if(Cd(i))throw new Error(t+"contains "+i.toString()+" "+Yt(n));if(typeof i=="string"&&i.length>qo/3&&sn(i)>qo)throw new Error(t+"contains a string greater than "+qo+" utf8 bytes "+Yt(n)+" ('"+i.substring(0,50)+"...')");if(i&&typeof i=="object"){let s=!1,o=!1;if($e(i,(r,a)=>{if(r===".value")s=!0;else if(r!==".priority"&&r!==".sv"&&(o=!0,!xu(r)))throw new Error(t+" contains an invalid key ("+r+") "+Yt(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);$_(n,r),vu(t,a,n),K_(n)}),s&&o)throw new Error(t+' contains ".value" child '+Yt(n)+" in addition to actual children.")}};var sb=function(t,i){let e=i.path.toString();if(typeof i.repoInfo.host!="string"||i.repoInfo.host.length===0||!xu(i.repoInfo.namespace)&&i.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!nb(e))throw new Error(Al(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var Ar=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function ob(t,i){let e=null;for(let n=0;n<i.length;n++){let s=i[n],o=s.getPath();e!==null&&!Hd(o,e.path)&&(t.eventLists_.push(e),e=null),e===null&&(e={events:[],path:o}),e.events.push(s)}e&&t.eventLists_.push(e)}function Qt(t,i,e){ob(t,e),rb(t,n=>tt(n,i)||tt(i,n))}function rb(t,i){t.recursionDepth_++;let e=!0;for(let n=0;n<t.eventLists_.length;n++){let s=t.eventLists_[n];if(s){let o=s.path;i(o)?(ab(t.eventLists_[n]),t.eventLists_[n]=null):e=!1}}e&&(t.eventLists_=[]),t.recursionDepth_--}function ab(t){for(let i=0;i<t.events.length;i++){let e=t.events[i];if(e!==null){t.events[i]=null;let n=e.getEventRunner();Gt&&De("event: "+e.toString()),Cn(n)}}}var lb="repo_interrupt",cb=25,Rr=class{constructor(i,e,n,s){this.repoInfo_=i,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=s,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ar,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=js(),this.transactionQueueTree_=new xn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function db(t,i,e){if(t.stats_=Br(t.repoInfo_),t.forceRestClient_||w_())t.server_=new gr(t.repoInfo_,(n,s,o,r)=>{_d(t,n,s,o,r)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>bd(t,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ce(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}t.persistentConnection_=new zr(t.repoInfo_,i,(n,s,o,r)=>{_d(t,n,s,o,r)},n=>{bd(t,n)},n=>{hb(t,n)},t.authTokenProvider_,t.appCheckProvider_,e),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(n=>{t.server_.refreshAuthToken(n)}),t.appCheckProvider_.addTokenChangeListener(n=>{t.server_.refreshAppCheckToken(n.token)}),t.statsReporter_=M_(t.repoInfo_,()=>new vr(t.stats_,t.server_)),t.infoData_=new _r,t.infoSyncTree_=new qs({startListening:(n,s,o,r)=>{let a=[],l=t.infoData_.getNode(n._path);return l.isEmpty()||(a=Gs(t.infoSyncTree_,n._path,l),setTimeout(()=>{r("ok")},0)),a},stopListening:()=>{}}),$r(t,"connected",!1),t.serverSyncTree_=new qs({startListening:(n,s,o,r)=>(t.server_.listen(n,o,s,(a,l)=>{let c=r(a,l);Qt(t.eventQueue_,n._path,c)}),[]),stopListening:(n,s)=>{t.server_.unlisten(n,s)}})}function ub(t){let e=t.infoData_.getNode(new ne(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function yu(t){return q0({timestamp:ub(t)})}function _d(t,i,e,n,s){t.dataUpdateCount++;let o=new ne(i);e=t.interceptServerDataCallback_?t.interceptServerDataCallback_(i,e):e;let r=[];if(s)if(n){let l=nn(e,c=>Ae(c));r=Y0(t.serverSyncTree_,o,l,s)}else{let l=Ae(e);r=U0(t.serverSyncTree_,o,l,s)}else if(n){let l=nn(e,c=>Ae(c));r=H0(t.serverSyncTree_,o,l)}else{let l=Ae(e);r=Gs(t.serverSyncTree_,o,l)}let a=o;r.length>0&&(a=Xr(t,o)),Qt(t.eventQueue_,a,r)}function bd(t,i){$r(t,"connected",i),i===!1&&pb(t)}function hb(t,i){$e(i,(e,n)=>{$r(t,e,n)})}function $r(t,i,e){let n=new ne("/.info/"+i),s=Ae(e);t.infoData_.updateSnapshot(n,s);let o=Gs(t.infoSyncTree_,n,s);Qt(t.eventQueue_,n,o)}function fb(t){return t.nextWriteId_++}function pb(t){Cu(t,"onDisconnectEvents");let i=yu(t),e=js();br(t.onDisconnect_,ie(),(s,o)=>{let r=K0(s,o,t.serverSyncTree_,i);Kd(e,s,r)});let n=[];br(e,ie(),(s,o)=>{n=n.concat(Gs(t.serverSyncTree_,s,o));let r=bb(t,s);Xr(t,r)}),t.onDisconnect_=js(),Qt(t.eventQueue_,ie(),n)}function mb(t){t.persistentConnection_&&t.persistentConnection_.interrupt(lb)}function Cu(t,...i){let e="";t.persistentConnection_&&(e=t.persistentConnection_.id+":"),De(e,...i)}function wu(t,i,e){return du(t.serverSyncTree_,i,e)||ue.EMPTY_NODE}function Kr(t,i=t.transactionQueueTree_){if(i||Xs(t,i),Ii(i)){let e=Mu(t,i);F(e.length>0,"Sending zero length transaction queue"),e.every(s=>s.status===0)&&gb(t,Sn(i),e)}else _u(i)&&Ks(i,e=>{Kr(t,e)})}function gb(t,i,e){let n=e.map(c=>c.currentWriteId),s=wu(t,i,n),o=s,r=s.hash();for(let c=0;c<e.length;c++){let d=e[c];F(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=qe(i,d.path);o=o.updateChild(u,d.currentOutputSnapshotRaw)}let a=o.val(!0),l=i;t.server_.put(l.toString(),a,c=>{Cu(t,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let u=[];for(let h=0;h<e.length;h++)e[h].status=2,d=d.concat(xi(t.serverSyncTree_,e[h].currentWriteId)),e[h].onComplete&&u.push(()=>e[h].onComplete(null,!0,e[h].currentOutputSnapshotResolved)),e[h].unwatcher();Xs(t,Gr(t.transactionQueueTree_,i)),Kr(t,t.transactionQueueTree_),Qt(t.eventQueue_,i,d);for(let h=0;h<u.length;h++)Cn(u[h])}else{if(c==="datastale")for(let u=0;u<e.length;u++)e[u].status===3?e[u].status=4:e[u].status=0;else{He("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<e.length;u++)e[u].status=4,e[u].abortReason=c}Xr(t,i)}},r)}function Xr(t,i){let e=Su(t,i),n=Sn(e),s=Mu(t,e);return _b(t,s,n),n}function _b(t,i,e){if(i.length===0)return;let n=[],s=[],r=i.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<i.length;a++){let l=i[a],c=qe(e,l.path),d=!1,u;if(F(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,s=s.concat(xi(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=cb)d=!0,u="maxretry",s=s.concat(xi(t.serverSyncTree_,l.currentWriteId,!0));else{let h=wu(t,l.path,r);l.currentInputSnapshot=h;let m=i[a].update(h.val());if(m!==void 0){vu("transaction failed: Data returned ",m,l.path);let g=Ae(m);typeof m=="object"&&m!=null&&ot(m,".priority")||(g=g.updatePriority(h.getPriority()));let v=l.currentWriteId,S=yu(t),w=X0(g,h,S);l.currentOutputSnapshotRaw=g,l.currentOutputSnapshotResolved=w,l.currentWriteId=fb(t),r.splice(r.indexOf(v),1),s=s.concat(j0(t.serverSyncTree_,l.path,w,l.currentWriteId,l.applyLocally)),s=s.concat(xi(t.serverSyncTree_,v,!0))}else d=!0,u="nodata",s=s.concat(xi(t.serverSyncTree_,l.currentWriteId,!0))}Qt(t.eventQueue_,e,s),s=[],d&&(i[a].status=2,function(h){setTimeout(h,Math.floor(0))}(i[a].unwatcher),i[a].onComplete&&(u==="nodata"?n.push(()=>i[a].onComplete(null,!1,i[a].currentInputSnapshot)):n.push(()=>i[a].onComplete(new Error(u),!1,null))))}Xs(t,t.transactionQueueTree_);for(let a=0;a<n.length;a++)Cn(n[a]);Kr(t,t.transactionQueueTree_)}function Su(t,i){let e,n=t.transactionQueueTree_;for(e=K(i);e!==null&&Ii(n)===void 0;)n=Gr(n,e),i=ae(i),e=K(i);return n}function Mu(t,i){let e=[];return Eu(t,i,e),e.sort((n,s)=>n.order-s.order),e}function Eu(t,i,e){let n=Ii(i);if(n)for(let s=0;s<n.length;s++)e.push(n[s]);Ks(i,s=>{Eu(t,s,e)})}function Xs(t,i){let e=Ii(i);if(e){let n=0;for(let s=0;s<e.length;s++)e[s].status!==2&&(e[n]=e[s],n++);e.length=n,gu(i,e.length>0?e:void 0)}Ks(i,n=>{Xs(t,n)})}function bb(t,i){let e=Sn(Su(t,i)),n=Gr(t.transactionQueueTree_,i);return J0(n,s=>{Go(t,s)}),Go(t,n),bu(n,s=>{Go(t,s)}),e}function Go(t,i){let e=Ii(i);if(e){let n=[],s=[],o=-1;for(let r=0;r<e.length;r++)e[r].status===3||(e[r].status===1?(F(o===r-1,"All SENT items should be at beginning of queue."),o=r,e[r].status=3,e[r].abortReason="set"):(F(e[r].status===0,"Unexpected transaction status in abort"),e[r].unwatcher(),s=s.concat(xi(t.serverSyncTree_,e[r].currentWriteId,!0)),e[r].onComplete&&n.push(e[r].onComplete.bind(null,new Error("set"),!1,null))));o===-1?gu(i,void 0):e.length=o+1,Qt(t.eventQueue_,Sn(i),s);for(let r=0;r<n.length;r++)Cn(n[r])}}function xb(t){let i="",e=t.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let s=e[n];try{s=decodeURIComponent(s.replace(/\+/g," "))}catch{}i+="/"+s}return i}function vb(t){let i={};t.charAt(0)==="?"&&(t=t.substring(1));for(let e of t.split("&")){if(e.length===0)continue;let n=e.split("=");n.length===2?i[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):He(`Invalid query segment '${e}' in query '${t}'`)}return i}var xd=function(t,i){let e=yb(t),n=e.namespace;e.domain==="firebase.com"&&mt(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&mt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||m_();let s=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new Fs(e.host,e.secure,n,s,i,"",n!==e.subdomain),path:new ne(e.pathString)}},yb=function(t){let i="",e="",n="",s="",o="",r=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let d=t.indexOf("/");d===-1&&(d=t.length);let u=t.indexOf("?");u===-1&&(u=t.length),i=t.substring(0,Math.min(d,u)),d<u&&(s=xb(t.substring(d,u)));let h=vb(t.substring(Math.min(t.length,u)));c=i.indexOf(":"),c>=0?(r=a==="https"||a==="wss",l=parseInt(i.substring(c+1),10)):c=i.length;let m=i.slice(0,c);if(m.toLowerCase()==="localhost")e="localhost";else if(m.split(".").length<=2)e=m;else{let g=i.indexOf(".");n=i.substring(0,g).toLowerCase(),e=i.substring(g+1),o=n}"ns"in h&&(o=h.ns)}return{host:i,port:l,domain:e,subdomain:n,secure:r,scheme:a,pathString:s,namespace:o}};var Fr=class t{constructor(i,e,n,s){this._repo=i,this._path=e,this._queryParams=n,this._orderByCalled=s}get key(){return $(this._path)?null:Bd(this._path)}get ref(){return new Pi(this._repo,this._path)}get _queryIdentifier(){let i=od(this._queryParams),e=Wr(i);return e==="{}"?"default":e}get _queryObject(){return od(this._queryParams)}isEqual(i){if(i=Vo(i),!(i instanceof t))return!1;let e=this._repo===i._repo,n=Hd(this._path,i._path),s=this._queryIdentifier===i._queryIdentifier;return e&&n&&s}toJSON(){return this.toString()}toString(){return this._repo.toString()+G_(this._path)}};var Pi=class t extends Fr{constructor(i,e){super(i,e,new mr,!1)}get parent(){let i=jd(this._path);return i===null?null:new t(this._repo,i)}get root(){let i=this;for(;i.parent!==null;)i=i.parent;return i}};B0(Pi);z0(Pi);var Cb="FIREBASE_DATABASE_EMULATOR_HOST",Nr={},wb=!1;function Sb(t,i,e,n){t.repoInfo_=new Fs(`${i}:${e}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),n&&(t.authTokenProvider_=n)}function Mb(t,i,e,n,s){let o=n||t.options.databaseURL;o===void 0&&(t.options.projectId||mt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",t.options.projectId),o=`${t.options.projectId}-default-rtdb.firebaseio.com`);let r=xd(o,s),a=r.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[Cb]),c?(l=!0,o=`http://${c}?ns=${a.namespace}`,r=xd(o,s),a=r.repoInfo):l=!r.repoInfo.secure;let d=s&&l?new pn(pn.OWNER):new Zo(t.name,t.options,i);sb("Invalid Firebase Database URL",r),$(r.path)||mt("Database URL must point to the root of a Firebase Database (not including a child path).");let u=Tb(a,t,d,new Jo(t.name,e));return new Lr(u,t)}function Eb(t,i){let e=Nr[i];(!e||e[t.key]!==t)&&mt(`Database ${i}(${t.repoInfo_}) has already been deleted.`),mb(t),delete e[t.key]}function Tb(t,i,e,n){let s=Nr[i.name];s||(s={},Nr[i.name]=s);let o=s[t.toURLString()];return o&&mt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Rr(t,wb,e,n),s[t.toURLString()]=o,o}var Lr=class{constructor(i,e){this._repoInternal=i,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(db(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pi(this._repo,ie())),this._rootInternal}_delete(){return this._rootInternal!==null&&(Eb(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){this._rootInternal===null&&mt("Cannot call "+i+" on a deleted database.")}};function Tu(t=zl(),i){let e=Wl(t,"database").getImmediate({identifier:i});if(!e._instanceStarted){let n=El("database");n&&Pu(e,...n)}return e}function Pu(t,i,e,n={}){t=Vo(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&mt("Cannot call useEmulator() after instance has already been initialized.");let s=t._repoInternal,o;if(s.repoInfo_.nodeAdmin)n.mockUserToken&&mt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new pn(pn.OWNER);else if(n.mockUserToken){let r=typeof n.mockUserToken=="string"?n.mockUserToken:Tl(n.mockUserToken,t.app.options.projectId);o=new pn(r)}Sb(s,i,e,o)}function Pb(t){h_(Bl),Vl(new Fl("database",(i,{instanceIdentifier:e})=>{let n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return Mb(n,s,o,e)},"PUBLIC").setMultipleInstances(!0)),on(zc,jc,t),on(zc,jc,"esm2017")}zr.prototype.simpleListen=function(t,i){this.sendRequest("q",{p:t},i)};zr.prototype.echo=function(t,i){this.sendRequest("echo",{d:t},i)};Pb();var Mn=class{constructor(i){return i}},ku="database",Qr=class{constructor(){return Ul(ku)}};var Jr=new es("angularfire2.database-instances");function kb(t,i){let e=Hl(ku,t,i);return e&&new Mn(e)}function Ib(t){return(i,e)=>{let n=i.runOutsideAngular(()=>t(e));return new Mn(n)}}var Ob={provide:Qr,deps:[[new Zi,Jr]]},Db={provide:Mn,useFactory:kb,deps:[[new Zi,Jr],$l]};function Iu(t,...i){return on("angularfire",jl.full,"rtdb"),ns([Db,Ob,{provide:Jr,useFactory:Ib(t),multi:!0,deps:[di,ol,ql,Kl,[new Zi,Jl],[new Zi,Yl],...i]}])}var Ou=Gl(Tu,!0);var Ab=(()=>{let i=class i extends Ps{constructor(n,s,o){super(n,s,o)}ngOnDestroy(){this.flush()}};i.\u0275fac=function(s){return new(s||i)(ts(ds),ts(rn),ts(Ts))},i.\u0275prov=Zn({token:i,factory:i.\u0275fac});let t=i;return t})();function Rb(){return new Cc}function Fb(t,i,e){return new Sc(t,i,e)}var Du=[{provide:Ts,useFactory:Rb},{provide:Ps,useClass:Ab},{provide:ss,useFactory:Fb,deps:[hs,Ps,di]}],Nb=[{provide:rn,useFactory:()=>new wc},{provide:tn,useValue:"BrowserAnimations"},...Du],QT=[{provide:rn,useClass:yc},{provide:tn,useValue:"NoopAnimations"},...Du];function Au(){return os("NgEagerAnimations"),[...Nb]}var Lb="@",Vb=(()=>{let i=class i{constructor(n,s,o,r,a){this.doc=n,this.delegate=s,this.zone=o,this.animationType=r,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=li(cl,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-IPUKZK6M.js").then(s=>s)).catch(s=>{throw new il(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:o})=>{this._engine=s(this.animationType,this.doc);let r=new o(this.delegate,this._engine,this.zone);return this.delegate=r,r})}createRenderer(n,s){let o=this.delegate.createRenderer(n,s);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let r=new Zr(o);return s?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(n,s);r.use(l),this.scheduler?.notify(9)}).catch(a=>{r.use(o)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};i.\u0275fac=function(s){ll()},i.\u0275prov=Zn({token:i,factory:i.\u0275fac});let t=i;return t})(),Zr=class{constructor(i){this.delegate=i,this.replay=[],this.\u0275type=1}use(i){if(this.delegate=i,this.replay!==null){for(let e of this.replay)e(i);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(i,e){return this.delegate.createElement(i,e)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}get destroyNode(){return this.delegate.destroyNode}appendChild(i,e){this.delegate.appendChild(i,e)}insertBefore(i,e,n,s){this.delegate.insertBefore(i,e,n,s)}removeChild(i,e,n){this.delegate.removeChild(i,e,n)}selectRootElement(i,e){return this.delegate.selectRootElement(i,e)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,e,n,s){this.delegate.setAttribute(i,e,n,s)}removeAttribute(i,e,n){this.delegate.removeAttribute(i,e,n)}addClass(i,e){this.delegate.addClass(i,e)}removeClass(i,e){this.delegate.removeClass(i,e)}setStyle(i,e,n,s){this.delegate.setStyle(i,e,n,s)}removeStyle(i,e,n){this.delegate.removeStyle(i,e,n)}setProperty(i,e,n){this.shouldReplay(e)&&this.replay.push(s=>s.setProperty(i,e,n)),this.delegate.setProperty(i,e,n)}setValue(i,e){this.delegate.setValue(i,e)}listen(i,e,n){return this.shouldReplay(e)&&this.replay.push(s=>s.listen(i,e,n)),this.delegate.listen(i,e,n)}shouldReplay(i){return this.replay!==null&&i.startsWith(Lb)}};function Ru(t="animations"){return os("NgAsyncAnimations"),ns([{provide:ss,useFactory:(i,e,n)=>new Vb(i,e,n,t),deps:[ds,hs,di]},{provide:tn,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}function Pn(t){return t+.5|0}var Tt=(t,i,e)=>Math.max(Math.min(t,e),i);function En(t){return Tt(Pn(t*2.55),0,255)}function Pt(t){return Tt(Pn(t*255),0,255)}function gt(t){return Tt(Pn(t/2.55)/100,0,1)}function Fu(t){return Tt(Pn(t*100),0,100)}var Ke={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ta=[..."0123456789ABCDEF"],Wb=t=>ta[t&15],Bb=t=>ta[(t&240)>>4]+ta[t&15],Qs=t=>(t&240)>>4===(t&15),zb=t=>Qs(t.r)&&Qs(t.g)&&Qs(t.b)&&Qs(t.a);function jb(t){var i=t.length,e;return t[0]==="#"&&(i===4||i===5?e={r:255&Ke[t[1]]*17,g:255&Ke[t[2]]*17,b:255&Ke[t[3]]*17,a:i===5?Ke[t[4]]*17:255}:(i===7||i===9)&&(e={r:Ke[t[1]]<<4|Ke[t[2]],g:Ke[t[3]]<<4|Ke[t[4]],b:Ke[t[5]]<<4|Ke[t[6]],a:i===9?Ke[t[7]]<<4|Ke[t[8]]:255})),e}var Hb=(t,i)=>t<255?i(t):"";function Ub(t){var i=zb(t)?Wb:Bb;return t?"#"+i(t.r)+i(t.g)+i(t.b)+Hb(t.a,i):void 0}var Yb=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Wu(t,i,e){let n=i*Math.min(e,1-e),s=(o,r=(o+t/30)%12)=>e-n*Math.max(Math.min(r-3,9-r,1),-1);return[s(0),s(8),s(4)]}function qb(t,i,e){let n=(s,o=(s+t/60)%6)=>e-e*i*Math.max(Math.min(o,4-o,1),0);return[n(5),n(3),n(1)]}function Gb(t,i,e){let n=Wu(t,1,.5),s;for(i+e>1&&(s=1/(i+e),i*=s,e*=s),s=0;s<3;s++)n[s]*=1-i-e,n[s]+=i;return n}function $b(t,i,e,n,s){return t===s?(i-e)/n+(i<e?6:0):i===s?(e-t)/n+2:(t-i)/n+4}function ia(t){let e=t.r/255,n=t.g/255,s=t.b/255,o=Math.max(e,n,s),r=Math.min(e,n,s),a=(o+r)/2,l,c,d;return o!==r&&(d=o-r,c=a>.5?d/(2-o-r):d/(o+r),l=$b(e,n,s,d,o),l=l*60+.5),[l|0,c||0,a]}function na(t,i,e,n){return(Array.isArray(i)?t(i[0],i[1],i[2]):t(i,e,n)).map(Pt)}function sa(t,i,e){return na(Wu,t,i,e)}function Kb(t,i,e){return na(Gb,t,i,e)}function Xb(t,i,e){return na(qb,t,i,e)}function Bu(t){return(t%360+360)%360}function Qb(t){let i=Yb.exec(t),e=255,n;if(!i)return;i[5]!==n&&(e=i[6]?En(+i[5]):Pt(+i[5]));let s=Bu(+i[2]),o=+i[3]/100,r=+i[4]/100;return i[1]==="hwb"?n=Kb(s,o,r):i[1]==="hsv"?n=Xb(s,o,r):n=sa(s,o,r),{r:n[0],g:n[1],b:n[2],a:e}}function Jb(t,i){var e=ia(t);e[0]=Bu(e[0]+i),e=sa(e),t.r=e[0],t.g=e[1],t.b=e[2]}function Zb(t){if(!t)return;let i=ia(t),e=i[0],n=Fu(i[1]),s=Fu(i[2]);return t.a<255?`hsla(${e}, ${n}%, ${s}%, ${gt(t.a)})`:`hsl(${e}, ${n}%, ${s}%)`}var Nu={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Lu={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function ex(){let t={},i=Object.keys(Lu),e=Object.keys(Nu),n,s,o,r,a;for(n=0;n<i.length;n++){for(r=a=i[n],s=0;s<e.length;s++)o=e[s],a=a.replace(o,Nu[o]);o=parseInt(Lu[r],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}var Js;function tx(t){Js||(Js=ex(),Js.transparent=[0,0,0,0]);let i=Js[t.toLowerCase()];return i&&{r:i[0],g:i[1],b:i[2],a:i.length===4?i[3]:255}}var ix=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function nx(t){let i=ix.exec(t),e=255,n,s,o;if(i){if(i[7]!==n){let r=+i[7];e=i[8]?En(r):Tt(r*255,0,255)}return n=+i[1],s=+i[3],o=+i[5],n=255&(i[2]?En(n):Tt(n,0,255)),s=255&(i[4]?En(s):Tt(s,0,255)),o=255&(i[6]?En(o):Tt(o,0,255)),{r:n,g:s,b:o,a:e}}}function sx(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${gt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var ea=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Oi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function ox(t,i,e){let n=Oi(gt(t.r)),s=Oi(gt(t.g)),o=Oi(gt(t.b));return{r:Pt(ea(n+e*(Oi(gt(i.r))-n))),g:Pt(ea(s+e*(Oi(gt(i.g))-s))),b:Pt(ea(o+e*(Oi(gt(i.b))-o))),a:t.a+e*(i.a-t.a)}}function Zs(t,i,e){if(t){let n=ia(t);n[i]=Math.max(0,Math.min(n[i]+n[i]*e,i===0?360:1)),n=sa(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function zu(t,i){return t&&Object.assign(i||{},t)}function Vu(t){var i={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(i={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(i.a=Pt(t[3]))):(i=zu(t,{r:0,g:0,b:0,a:1}),i.a=Pt(i.a)),i}function rx(t){return t.charAt(0)==="r"?nx(t):Qb(t)}var Tn=class t{constructor(i){if(i instanceof t)return i;let e=typeof i,n;e==="object"?n=Vu(i):e==="string"&&(n=jb(i)||tx(i)||rx(i)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var i=zu(this._rgb);return i&&(i.a=gt(i.a)),i}set rgb(i){this._rgb=Vu(i)}rgbString(){return this._valid?sx(this._rgb):void 0}hexString(){return this._valid?Ub(this._rgb):void 0}hslString(){return this._valid?Zb(this._rgb):void 0}mix(i,e){if(i){let n=this.rgb,s=i.rgb,o,r=e===o?.5:e,a=2*r-1,l=n.a-s.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,n.r=255&c*n.r+o*s.r+.5,n.g=255&c*n.g+o*s.g+.5,n.b=255&c*n.b+o*s.b+.5,n.a=r*n.a+(1-r)*s.a,this.rgb=n}return this}interpolate(i,e){return i&&(this._rgb=ox(this._rgb,i._rgb,e)),this}clone(){return new t(this.rgb)}alpha(i){return this._rgb.a=Pt(i),this}clearer(i){let e=this._rgb;return e.a*=1-i,this}greyscale(){let i=this._rgb,e=Pn(i.r*.3+i.g*.59+i.b*.11);return i.r=i.g=i.b=e,this}opaquer(i){let e=this._rgb;return e.a*=1+i,this}negate(){let i=this._rgb;return i.r=255-i.r,i.g=255-i.g,i.b=255-i.b,this}lighten(i){return Zs(this._rgb,2,i),this}darken(i){return Zs(this._rgb,2,-i),this}saturate(i){return Zs(this._rgb,1,i),this}desaturate(i){return Zs(this._rgb,1,-i),this}rotate(i){return Jb(this._rgb,i),this}};function lt(){}function Q(t){return t===null||typeof t>"u"}function he(t){if(Array.isArray&&Array.isArray(t))return!0;let i=Object.prototype.toString.call(t);return i.slice(0,7)==="[object"&&i.slice(-6)==="Array]"}function J(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function fe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ve(t,i){return fe(t)?t:i}function H(t,i){return typeof t>"u"?i:t}var Xu=(t,i)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/i,la=(t,i)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*i:+t;function ve(t,i,e){if(t&&typeof t.call=="function")return t.apply(e,i)}function Te(t,i,e,n){let s,o,r;if(he(t))if(o=t.length,n)for(s=o-1;s>=0;s--)i.call(e,t[s],s);else for(s=0;s<o;s++)i.call(e,t[s],s);else if(J(t))for(r=Object.keys(t),o=r.length,s=0;s<o;s++)i.call(e,t[r[s]],r[s])}function ca(t,i){let e,n,s,o;if(!t||!i||t.length!==i.length)return!1;for(e=0,n=t.length;e<n;++e)if(s=t[e],o=i[e],s.datasetIndex!==o.datasetIndex||s.index!==o.index)return!1;return!0}function io(t){if(he(t))return t.map(io);if(J(t)){let i=Object.create(null),e=Object.keys(t),n=e.length,s=0;for(;s<n;++s)i[e[s]]=io(t[e[s]]);return i}return t}function Qu(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function ax(t,i,e,n){if(!Qu(t))return;let s=i[t],o=e[t];J(s)&&J(o)?In(s,o,n):i[t]=io(o)}function In(t,i,e){let n=he(i)?i:[i],s=n.length;if(!J(t))return t;e=e||{};let o=e.merger||ax,r;for(let a=0;a<s;++a){if(r=n[a],!J(r))continue;let l=Object.keys(r);for(let c=0,d=l.length;c<d;++c)o(l[c],t,r,e)}return t}function da(t,i){return In(t,i,{merger:lx})}function lx(t,i,e){if(!Qu(t))return;let n=i[t],s=e[t];J(n)&&J(s)?da(n,s):Object.prototype.hasOwnProperty.call(i,t)||(i[t]=io(s))}var ju={"":t=>t,x:t=>t.x,y:t=>t.y};function cx(t){let i=t.split("."),e=[],n="";for(let s of i)n+=s,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function dx(t){let i=cx(t);return e=>{for(let n of i){if(n==="")break;e=e&&e[n]}return e}}function Zt(t,i){return(ju[i]||(ju[i]=dx(i)))(t)}function Ju(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Dn=t=>typeof t<"u";var se=Math.PI,oe=2*se,ux=oe+se,rP=Number.POSITIVE_INFINITY,hx=se/180,pe=se/2,Jt=se/4,Hu=se*2/3,bt=Math.log10,nt=Math.sign;function Ri(t,i,e){return Math.abs(t-i)<e}function ua(t){let i=Math.round(t);t=Ri(t,i,t/1e3)?i:t;let e=Math.pow(10,Math.floor(bt(t))),n=t/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function Zu(t){let i=[],e=Math.sqrt(t),n;for(n=1;n<e;n++)t%n===0&&(i.push(n),i.push(t/n));return e===(e|0)&&i.push(e),i.sort((s,o)=>s-o).pop(),i}function ei(t){return!isNaN(parseFloat(t))&&isFinite(t)}function eh(t,i){let e=Math.round(t);return e-i<=t&&e+i>=t}function ha(t,i,e){let n,s,o;for(n=0,s=t.length;n<s;n++)o=t[n][e],isNaN(o)||(i.min=Math.min(i.min,o),i.max=Math.max(i.max,o))}function Xe(t){return t*(se/180)}function so(t){return t*(180/se)}function fa(t){if(!fe(t))return;let i=1,e=0;for(;Math.round(t*i)/i!==t;)i*=10,e++;return e}function th(t,i){let e=i.x-t.x,n=i.y-t.y,s=Math.sqrt(e*e+n*n),o=Math.atan2(n,e);return o<-.5*se&&(o+=oe),{angle:o,distance:s}}function no(t,i){return Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2))}function fx(t,i){return(t-i+ux)%oe-se}function Le(t){return(t%oe+oe)%oe}function An(t,i,e,n){let s=Le(t),o=Le(i),r=Le(e),a=Le(o-s),l=Le(r-s),c=Le(s-o),d=Le(s-r);return s===o||s===r||n&&o===r||a>l&&c<d}function xe(t,i,e){return Math.max(i,Math.min(e,t))}function ih(t){return xe(t,-32768,32767)}function ct(t,i,e,n=1e-6){return t>=Math.min(i,e)-n&&t<=Math.max(i,e)+n}function pa(t,i,e){e=e||(r=>t[r]<i);let n=t.length-1,s=0,o;for(;n-s>1;)o=s+n>>1,e(o)?s=o:n=o;return{lo:s,hi:n}}var _t=(t,i,e,n)=>pa(t,e,n?s=>{let o=t[s][i];return o<e||o===e&&t[s+1][i]===e}:s=>t[s][i]<e);function nh(t,i,e){let n=0,s=t.length;for(;n<s&&t[n]<i;)n++;for(;s>n&&t[s-1]>e;)s--;return n>0||s<t.length?t.slice(n,s):t}var sh=["push","pop","shift","splice","unshift"];function oh(t,i){if(t._chartjs){t._chartjs.listeners.push(i);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),sh.forEach(e=>{let n="_onData"+Ju(e),s=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...o){let r=s.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...o)}),r}})})}function ma(t,i){let e=t._chartjs;if(!e)return;let n=e.listeners,s=n.indexOf(i);s!==-1&&n.splice(s,1),!(n.length>0)&&(sh.forEach(o=>{delete t[o]}),delete t._chartjs)}function ga(t){let i=new Set(t);return i.size===t.length?t:Array.from(i)}var rh=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();var oo=t=>t==="start"?"left":t==="end"?"right":"center",Pe=(t,i,e)=>t==="start"?i:t==="end"?e:(i+e)/2,ah=(t,i,e,n)=>t===(n?"left":"right")?e:t==="center"?(i+e)/2:i;function _a(t,i,e){let n=i.length,s=0,o=n;if(t._sorted){let{iScale:r,_parsed:a}=t,l=r.axis,{min:c,max:d,minDefined:u,maxDefined:h}=r.getUserBounds();u&&(s=xe(Math.min(_t(a,l,c).lo,e?n:_t(i,l,r.getPixelForValue(c)).lo),0,n-1)),h?o=xe(Math.max(_t(a,r.axis,d,!0).hi+1,e?0:_t(i,l,r.getPixelForValue(d),!0).hi+1),s,n)-s:o=n-s}return{start:s,count:o}}function ba(t){let{xScale:i,yScale:e,_scaleRanges:n}=t,s={xmin:i.min,xmax:i.max,ymin:e.min,ymax:e.max};if(!n)return t._scaleRanges=s,!0;let o=n.xmin!==i.min||n.xmax!==i.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,s),o}var eo=t=>t===0||t===1,Uu=(t,i,e)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-i)*oe/e)),Yu=(t,i,e)=>Math.pow(2,-10*t)*Math.sin((t-i)*oe/e)+1,Di={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*pe)+1,easeOutSine:t=>Math.sin(t*pe),easeInOutSine:t=>-.5*(Math.cos(se*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>eo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>eo(t)?t:Uu(t,.075,.3),easeOutElastic:t=>eo(t)?t:Yu(t,.075,.3),easeInOutElastic(t){return eo(t)?t:t<.5?.5*Uu(t*2,.1125,.45):.5+.5*Yu(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let i=1.70158;return(t/=.5)<1?.5*(t*t*(((i*=1.525)+1)*t-i)):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},easeInBounce:t=>1-Di.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Di.easeInBounce(t*2)*.5:Di.easeOutBounce(t*2-1)*.5+.5};function xa(t){if(t&&typeof t=="object"){let i=t.toString();return i==="[object CanvasPattern]"||i==="[object CanvasGradient]"}return!1}function va(t){return xa(t)?t:new Tn(t)}function oa(t){return xa(t)?t:new Tn(t).saturate(.5).darken(.1).hexString()}var px=["x","y","borderWidth","radius","tension"],mx=["color","borderColor","backgroundColor"];function gx(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:i=>i!=="onProgress"&&i!=="onComplete"&&i!=="fn"}),t.set("animations",{colors:{type:"color",properties:mx},numbers:{type:"number",properties:px}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:i=>i|0}}}})}function _x(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var qu=new Map;function bx(t,i){i=i||{};let e=t+JSON.stringify(i),n=qu.get(e);return n||(n=new Intl.NumberFormat(t,i),qu.set(e,n)),n}function Fi(t,i,e){return bx(i,e).format(t)}var lh={values(t){return he(t)?t:""+t},numeric(t,i,e){if(t===0)return"0";let n=this.chart.options.locale,s,o=t;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(s="scientific"),o=xx(t,e)}let r=bt(Math.abs(o)),a=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),l={notation:s,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fi(t,n,l)},logarithmic(t,i,e){if(t===0)return"0";let n=e[i].significand||t/Math.pow(10,Math.floor(bt(t)));return[1,2,3,5,10,15].includes(n)||i>.8*e.length?lh.numeric.call(this,t,i,e):""}};function xx(t,i){let e=i.length>3?i[2].value-i[1].value:i[1].value-i[0].value;return Math.abs(e)>=1&&t!==Math.floor(t)&&(e=t-Math.floor(t)),e}var Rn={formatters:lh};function vx(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(i,e)=>e.lineWidth,tickColor:(i,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Rn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:i=>!i.startsWith("before")&&!i.startsWith("after")&&i!=="callback"&&i!=="parser",_indexable:i=>i!=="borderDash"&&i!=="tickBorderDash"&&i!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:i=>i!=="backdropPadding"&&i!=="callback",_indexable:i=>i!=="backdropPadding"})}var ch=Object.create(null),dh=Object.create(null);function kn(t,i){if(!i)return t;let e=i.split(".");for(let n=0,s=e.length;n<s;++n){let o=e[n];t=t[o]||(t[o]=Object.create(null))}return t}function ra(t,i,e){return typeof i=="string"?In(kn(t,i),e):In(kn(t,""),i)}var aa=class{constructor(i,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,s)=>oa(s.backgroundColor),this.hoverBorderColor=(n,s)=>oa(s.borderColor),this.hoverColor=(n,s)=>oa(s.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(i),this.apply(e)}set(i,e){return ra(this,i,e)}get(i){return kn(this,i)}describe(i,e){return ra(dh,i,e)}override(i,e){return ra(ch,i,e)}route(i,e,n,s){let o=kn(this,i),r=kn(this,n),a="_"+e;Object.defineProperties(o,{[a]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=r[s];return J(l)?Object.assign({},c,l):H(l,c)},set(l){this[a]=l}}})}apply(i){i.forEach(e=>e(this))}},ti=new aa({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[gx,_x,vx]);function yx(t){return!t||Q(t.size)||Q(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function On(t,i,e,n,s){let o=i[s];return o||(o=i[s]=t.measureText(s).width,e.push(s)),o>n&&(n=o),n}function uh(t,i,e,n){n=n||{};let s=n.data=n.data||{},o=n.garbageCollect=n.garbageCollect||[];n.font!==i&&(s=n.data={},o=n.garbageCollect=[],n.font=i),t.save(),t.font=i;let r=0,a=e.length,l,c,d,u,h;for(l=0;l<a;l++)if(u=e[l],u!=null&&!he(u))r=On(t,s,o,r,u);else if(he(u))for(c=0,d=u.length;c<d;c++)h=u[c],h!=null&&!he(h)&&(r=On(t,s,o,r,h));t.restore();let m=o.length/2;if(m>e.length){for(l=0;l<m;l++)delete s[o[l]];o.splice(0,m)}return r}function Ot(t,i,e){let n=t.currentDevicePixelRatio,s=e!==0?Math.max(e/2,.5):0;return Math.round((i-s)*n)/n+s}function ro(t,i,e,n){ya(t,i,e,n,null)}function ya(t,i,e,n,s){let o,r,a,l,c,d,u,h,m=i.pointStyle,g=i.rotation,b=i.radius,v=(g||0)*hx;if(m&&typeof m=="object"&&(o=m.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(e,n),t.rotate(v),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(b)||b<=0)){switch(t.beginPath(),m){default:s?t.ellipse(e,n,s/2,b,0,0,oe):t.arc(e,n,b,0,oe),t.closePath();break;case"triangle":d=s?s/2:b,t.moveTo(e+Math.sin(v)*d,n-Math.cos(v)*b),v+=Hu,t.lineTo(e+Math.sin(v)*d,n-Math.cos(v)*b),v+=Hu,t.lineTo(e+Math.sin(v)*d,n-Math.cos(v)*b),t.closePath();break;case"rectRounded":c=b*.516,l=b-c,r=Math.cos(v+Jt)*l,u=Math.cos(v+Jt)*(s?s/2-c:l),a=Math.sin(v+Jt)*l,h=Math.sin(v+Jt)*(s?s/2-c:l),t.arc(e-u,n-a,c,v-se,v-pe),t.arc(e+h,n-r,c,v-pe,v),t.arc(e+u,n+a,c,v,v+pe),t.arc(e-h,n+r,c,v+pe,v+se),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*b,d=s?s/2:l,t.rect(e-d,n-l,2*d,2*l);break}v+=Jt;case"rectRot":u=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(s?s/2:b),t.moveTo(e-u,n-a),t.lineTo(e+h,n-r),t.lineTo(e+u,n+a),t.lineTo(e-h,n+r),t.closePath();break;case"crossRot":v+=Jt;case"cross":u=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(s?s/2:b),t.moveTo(e-u,n-a),t.lineTo(e+u,n+a),t.moveTo(e+h,n-r),t.lineTo(e-h,n+r);break;case"star":u=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(s?s/2:b),t.moveTo(e-u,n-a),t.lineTo(e+u,n+a),t.moveTo(e+h,n-r),t.lineTo(e-h,n+r),v+=Jt,u=Math.cos(v)*(s?s/2:b),r=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(s?s/2:b),t.moveTo(e-u,n-a),t.lineTo(e+u,n+a),t.moveTo(e+h,n-r),t.lineTo(e-h,n+r);break;case"line":r=s?s/2:Math.cos(v)*b,a=Math.sin(v)*b,t.moveTo(e-r,n-a),t.lineTo(e+r,n+a);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(v)*(s?s/2:b),n+Math.sin(v)*b);break;case!1:t.closePath();break}t.fill(),i.borderWidth>0&&t.stroke()}}function It(t,i,e){return e=e||.5,!i||t&&t.x>i.left-e&&t.x<i.right+e&&t.y>i.top-e&&t.y<i.bottom+e}function ao(t,i){t.save(),t.beginPath(),t.rect(i.left,i.top,i.right-i.left,i.bottom-i.top),t.clip()}function lo(t){t.restore()}function hh(t,i,e,n,s){if(!i)return t.lineTo(e.x,e.y);if(s==="middle"){let o=(i.x+e.x)/2;t.lineTo(o,i.y),t.lineTo(o,e.y)}else s==="after"!=!!n?t.lineTo(i.x,e.y):t.lineTo(e.x,i.y);t.lineTo(e.x,e.y)}function fh(t,i,e,n){if(!i)return t.lineTo(e.x,e.y);t.bezierCurveTo(n?i.cp1x:i.cp2x,n?i.cp1y:i.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function Cx(t,i){i.translation&&t.translate(i.translation[0],i.translation[1]),Q(i.rotation)||t.rotate(i.rotation),i.color&&(t.fillStyle=i.color),i.textAlign&&(t.textAlign=i.textAlign),i.textBaseline&&(t.textBaseline=i.textBaseline)}function wx(t,i,e,n,s){if(s.strikethrough||s.underline){let o=t.measureText(n),r=i-o.actualBoundingBoxLeft,a=i+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,d=s.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=s.decorationWidth||2,t.moveTo(r,d),t.lineTo(a,d),t.stroke()}}function Sx(t,i){let e=t.fillStyle;t.fillStyle=i.color,t.fillRect(i.left,i.top,i.width,i.height),t.fillStyle=e}function Dt(t,i,e,n,s,o={}){let r=he(i)?i:[i],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(t.save(),t.font=s.string,Cx(t,o),l=0;l<r.length;++l)c=r[l],o.backdrop&&Sx(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),Q(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,e,n,o.maxWidth)),t.fillText(c,e,n,o.maxWidth),wx(t,e,n,c,o),n+=Number(s.lineHeight);t.restore()}function Ni(t,i){let{x:e,y:n,w:s,h:o,radius:r}=i;t.arc(e+r.topLeft,n+r.topLeft,r.topLeft,1.5*se,se,!0),t.lineTo(e,n+o-r.bottomLeft),t.arc(e+r.bottomLeft,n+o-r.bottomLeft,r.bottomLeft,se,pe,!0),t.lineTo(e+s-r.bottomRight,n+o),t.arc(e+s-r.bottomRight,n+o-r.bottomRight,r.bottomRight,pe,0,!0),t.lineTo(e+s,n+r.topRight),t.arc(e+s-r.topRight,n+r.topRight,r.topRight,0,-pe,!0),t.lineTo(e+r.topLeft,n)}var Mx=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Ex=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tx(t,i){let e=(""+t).match(Mx);if(!e||e[1]==="normal")return i*1.2;switch(t=+e[2],e[3]){case"px":return t;case"%":t/=100;break}return i*t}var Px=t=>+t||0;function co(t,i){let e={},n=J(i),s=n?Object.keys(i):i,o=J(t)?n?r=>H(t[r],t[i[r]]):r=>t[r]:()=>t;for(let r of s)e[r]=Px(o(r));return e}function Ca(t){return co(t,{top:"y",right:"x",bottom:"y",left:"x"})}function At(t){return co(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ke(t){let i=Ca(t);return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function _e(t,i){t=t||{},i=i||ti.font;let e=H(t.size,i.size);typeof e=="string"&&(e=parseInt(e,10));let n=H(t.style,i.style);n&&!(""+n).match(Ex)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let s={family:H(t.family,i.family),lineHeight:Tx(H(t.lineHeight,i.lineHeight),e),size:e,style:n,weight:H(t.weight,i.weight),string:""};return s.string=yx(s),s}function Li(t,i,e,n){let s=!0,o,r,a;for(o=0,r=t.length;o<r;++o)if(a=t[o],a!==void 0&&(i!==void 0&&typeof a=="function"&&(a=a(i),s=!1),e!==void 0&&he(a)&&(a=a[e%a.length],s=!1),a!==void 0))return n&&!s&&(n.cacheable=!1),a}function ph(t,i,e){let{min:n,max:s}=t,o=la(i,(s-n)/2),r=(a,l)=>e&&a===0?0:a+l;return{min:r(n,-Math.abs(o)),max:r(s,o)}}function Rt(t,i){return Object.assign(Object.create(t),i)}function wa(t,i,e,n){let{iScale:s}=t,{key:o="r"}=this._parsing,r=new Array(n),a,l,c,d;for(a=0,l=n;a<l;++a)c=a+e,d=i[c],r[a]={r:s.parse(Zt(d,o),c)};return r}var kx=Number.EPSILON||1e-14,Ai=(t,i)=>i<t.length&&!t[i].skip&&t[i],mh=t=>t==="x"?"y":"x";function Ix(t,i,e,n){let s=t.skip?i:t,o=i,r=e.skip?i:e,a=no(o,s),l=no(r,o),c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let u=n*c,h=n*d;return{previous:{x:o.x-u*(r.x-s.x),y:o.y-u*(r.y-s.y)},next:{x:o.x+h*(r.x-s.x),y:o.y+h*(r.y-s.y)}}}function Ox(t,i,e){let n=t.length,s,o,r,a,l,c=Ai(t,0);for(let d=0;d<n-1;++d)if(l=c,c=Ai(t,d+1),!(!l||!c)){if(Ri(i[d],0,kx)){e[d]=e[d+1]=0;continue}s=e[d]/i[d],o=e[d+1]/i[d],a=Math.pow(s,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[d]=s*r*i[d],e[d+1]=o*r*i[d])}}function Dx(t,i,e="x"){let n=mh(e),s=t.length,o,r,a,l=Ai(t,0);for(let c=0;c<s;++c){if(r=a,a=l,l=Ai(t,c+1),!a)continue;let d=a[e],u=a[n];r&&(o=(d-r[e])/3,a[`cp1${e}`]=d-o,a[`cp1${n}`]=u-o*i[c]),l&&(o=(l[e]-d)/3,a[`cp2${e}`]=d+o,a[`cp2${n}`]=u+o*i[c])}}function Ax(t,i="x"){let e=mh(i),n=t.length,s=Array(n).fill(0),o=Array(n),r,a,l,c=Ai(t,0);for(r=0;r<n;++r)if(a=l,l=c,c=Ai(t,r+1),!!l){if(c){let d=c[i]-l[i];s[r]=d!==0?(c[e]-l[e])/d:0}o[r]=a?c?nt(s[r-1])!==nt(s[r])?0:(s[r-1]+s[r])/2:s[r-1]:s[r]}Ox(t,s,o),Dx(t,o,i)}function to(t,i,e){return Math.max(Math.min(t,e),i)}function Rx(t,i){let e,n,s,o,r,a=It(t[0],i);for(e=0,n=t.length;e<n;++e)r=o,o=a,a=e<n-1&&It(t[e+1],i),o&&(s=t[e],r&&(s.cp1x=to(s.cp1x,i.left,i.right),s.cp1y=to(s.cp1y,i.top,i.bottom)),a&&(s.cp2x=to(s.cp2x,i.left,i.right),s.cp2y=to(s.cp2y,i.top,i.bottom)))}function gh(t,i,e,n,s){let o,r,a,l;if(i.spanGaps&&(t=t.filter(c=>!c.skip)),i.cubicInterpolationMode==="monotone")Ax(t,s);else{let c=n?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)a=t[o],l=Ix(c,a,t[Math.min(o+1,r-(n?0:1))%r],i.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}i.capBezierPoints&&Rx(t,e)}function _h(){return typeof window<"u"&&typeof document<"u"}var Fx=function(){let t=!1;try{let i={get passive(){return t=!0,!1}};_h()&&(window.addEventListener("test",null,i),window.removeEventListener("test",null,i))}catch{}return t}();function kt(t,i,e,n){return{x:t.x+e*(i.x-t.x),y:t.y+e*(i.y-t.y)}}function bh(t,i,e,n){return{x:t.x+e*(i.x-t.x),y:n==="middle"?e<.5?t.y:i.y:n==="after"?e<1?t.y:i.y:e>0?i.y:t.y}}function xh(t,i,e,n){let s={x:t.cp2x,y:t.cp2y},o={x:i.cp1x,y:i.cp1y},r=kt(t,s,e),a=kt(s,o,e),l=kt(o,i,e),c=kt(r,a,e),d=kt(a,l,e);return kt(c,d,e)}var Nx=function(t,i){return{x(e){return t+t+i-e},setWidth(e){i=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},Lx=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,i){return t+i},leftForLtr(t,i){return t}}};function ii(t,i,e){return t?Nx(i,e):Lx()}function Sa(t,i){let e,n;(i==="ltr"||i==="rtl")&&(e=t.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",i,"important"),t.prevTextDirection=n)}function Ma(t,i){i!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",i[0],i[1]))}function vh(t){return t==="angle"?{between:An,compare:fx,normalize:Le}:{between:ct,compare:(i,e)=>i-e,normalize:i=>i}}function Gu({start:t,end:i,count:e,loop:n,style:s}){return{start:t%e,end:i%e,loop:n&&(i-t+1)%e===0,style:s}}function Vx(t,i,e){let{property:n,start:s,end:o}=e,{between:r,normalize:a}=vh(n),l=i.length,{start:c,end:d,loop:u}=t,h,m;if(u){for(c+=l,d+=l,h=0,m=l;h<m&&r(a(i[c%l][n]),s,o);++h)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:u,style:t.style}}function Ea(t,i,e){if(!e)return[t];let{property:n,start:s,end:o}=e,r=i.length,{compare:a,between:l,normalize:c}=vh(n),{start:d,end:u,loop:h,style:m}=Vx(t,i,e),g=[],b=!1,v=null,S,w,E,I=()=>l(s,E,S)&&a(s,E)!==0,M=()=>a(o,S)===0||l(o,E,S),T=()=>b||I(),N=()=>!b||M();for(let D=d,L=d;D<=u;++D)w=i[D%r],!w.skip&&(S=c(w[n]),S!==E&&(b=l(S,s,o),v===null&&T()&&(v=a(S,s)===0?D:L),v!==null&&N()&&(g.push(Gu({start:v,end:D,loop:h,count:r,style:m})),v=null),L=D,E=S));return v!==null&&g.push(Gu({start:v,end:u,loop:h,count:r,style:m})),g}function Ta(t,i){let e=[],n=t.segments;for(let s=0;s<n.length;s++){let o=Ea(n[s],t.points,i);o.length&&e.push(...o)}return e}function Wx(t,i,e,n){let s=0,o=i-1;if(e&&!n)for(;s<i&&!t[s].skip;)s++;for(;s<i&&t[s].skip;)s++;for(s%=i,e&&(o+=s);o>s&&t[o%i].skip;)o--;return o%=i,{start:s,end:o}}function Bx(t,i,e,n){let s=t.length,o=[],r=i,a=t[i],l;for(l=i+1;l<=e;++l){let c=t[l%s];c.skip||c.stop?a.skip||(n=!1,o.push({start:i%s,end:(l-1)%s,loop:n}),i=r=c.stop?l:null):(r=l,a.skip&&(i=l)),a=c}return r!==null&&o.push({start:i%s,end:r%s,loop:n}),o}function yh(t,i){let e=t.points,n=t.options.spanGaps,s=e.length;if(!s)return[];let o=!!t._loop,{start:r,end:a}=Wx(e,s,o,n);if(n===!0)return $u(t,[{start:r,end:a,loop:o}],e,i);let l=a<r?a+s:a,c=!!t._fullLoop&&r===0&&a===s-1;return $u(t,Bx(e,r,l,c),e,i)}function $u(t,i,e,n){return!n||!n.setContext||!e?i:zx(t,i,e,n)}function zx(t,i,e,n){let s=t._chart.getContext(),o=Ku(t.options),{_datasetIndex:r,options:{spanGaps:a}}=t,l=e.length,c=[],d=o,u=i[0].start,h=u;function m(g,b,v,S){let w=a?-1:1;if(g!==b){for(g+=l;e[g%l].skip;)g-=w;for(;e[b%l].skip;)b+=w;g%l!==b%l&&(c.push({start:g%l,end:b%l,loop:v,style:S}),d=S,u=b%l)}}for(let g of i){u=a?u:g.start;let b=e[u%l],v;for(h=u+1;h<=g.end;h++){let S=e[h%l];v=Ku(n.setContext(Rt(s,{type:"segment",p0:b,p1:S,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:r}))),jx(v,d)&&m(u,h-1,g.loop,d),b=S,d=v}u<h-1&&m(u,h-1,g.loop,d)}return c}function Ku(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function jx(t,i){if(!i)return!1;let e=[],n=function(s,o){return xa(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(t,n)!==JSON.stringify(i,n)}var Ra=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(i,e,n,s){let o=e.listeners[s],r=e.duration;o.forEach(a=>a({chart:i,initial:e.initial,numSteps:r,currentStep:Math.min(n-e.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=rh.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(i=Date.now()){let e=0;this._charts.forEach((n,s)=>{if(!n.running||!n.items.length)return;let o=n.items,r=o.length-1,a=!1,l;for(;r>=0;--r)l=o[r],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(i),a=!0):(o[r]=o[o.length-1],o.pop());a&&(s.draw(),this._notify(s,n,i,"progress")),o.length||(n.running=!1,this._notify(s,n,i,"complete"),n.initial=!1),e+=o.length}),this._lastDate=i,e===0&&(this._running=!1)}_getAnims(i){let e=this._charts,n=e.get(i);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(i,n)),n}listen(i,e,n){this._getAnims(i).listeners[e].push(n)}add(i,e){!e||!e.length||this._getAnims(i).items.push(...e)}has(i){return this._getAnims(i).items.length>0}start(i){let e=this._charts.get(i);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,s)=>Math.max(n,s._duration),0),this._refresh())}running(i){if(!this._running)return!1;let e=this._charts.get(i);return!(!e||!e.running||!e.items.length)}stop(i){let e=this._charts.get(i);if(!e||!e.items.length)return;let n=e.items,s=n.length-1;for(;s>=0;--s)n[s].cancel();e.items=[],this._notify(i,e,Date.now(),"complete")}remove(i){return this._charts.delete(i)}},Hx=new Ra,Ch="transparent",Ux={boolean(t,i,e){return e>.5?i:t},color(t,i,e){let n=va(t||Ch),s=n.valid&&va(i||Ch);return s&&s.valid?s.mix(n,e).hexString():i},number(t,i,e){return t+(i-t)*e}},Fa=class{constructor(i,e,n,s){let o=e[n];s=Li([i.to,s,o,i.from]);let r=Li([i.from,o,s]);this._active=!0,this._fn=i.fn||Ux[i.type||typeof r],this._easing=Di[i.easing]||Di.linear,this._start=Math.floor(Date.now()+(i.delay||0)),this._duration=this._total=Math.floor(i.duration),this._loop=!!i.loop,this._target=e,this._prop=n,this._from=r,this._to=s,this._promises=void 0}active(){return this._active}update(i,e,n){if(this._active){this._notify(!1);let s=this._target[this._prop],o=n-this._start,r=this._duration-o;this._start=n,this._duration=Math.floor(Math.max(r,i.duration)),this._total+=o,this._loop=!!i.loop,this._to=Li([i.to,e,s,i.from]),this._from=Li([i.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(i){let e=i-this._start,n=this._duration,s=this._prop,o=this._from,r=this._loop,a=this._to,l;if(this._active=o!==a&&(r||e<n),!this._active){this._target[s]=a,this._notify(!0);return}if(e<0){this._target[s]=o;return}l=e/n%2,l=r&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[s]=this._fn(o,a,l)}wait(){let i=this._promises||(this._promises=[]);return new Promise((e,n)=>{i.push({res:e,rej:n})})}_notify(i){let e=i?"res":"rej",n=this._promises||[];for(let s=0;s<n.length;s++)n[s][e]()}},go=class{constructor(i,e){this._chart=i,this._properties=new Map,this.configure(e)}configure(i){if(!J(i))return;let e=Object.keys(ti.animation),n=this._properties;Object.getOwnPropertyNames(i).forEach(s=>{let o=i[s];if(!J(o))return;let r={};for(let a of e)r[a]=o[a];(he(o.properties)&&o.properties||[s]).forEach(a=>{(a===s||!n.has(a))&&n.set(a,r)})})}_animateOptions(i,e){let n=e.options,s=qx(i,n);if(!s)return[];let o=this._createAnimations(s,n);return n.$shared&&Yx(i.options.$animations,n).then(()=>{i.options=n},()=>{}),o}_createAnimations(i,e){let n=this._properties,s=[],o=i.$animations||(i.$animations={}),r=Object.keys(e),a=Date.now(),l;for(l=r.length-1;l>=0;--l){let c=r[l];if(c.charAt(0)==="$")continue;if(c==="options"){s.push(...this._animateOptions(i,e));continue}let d=e[c],u=o[c],h=n.get(c);if(u)if(h&&u.active()){u.update(h,d,a);continue}else u.cancel();if(!h||!h.duration){i[c]=d;continue}o[c]=u=new Fa(h,i,c,d),s.push(u)}return s}update(i,e){if(this._properties.size===0){Object.assign(i,e);return}let n=this._createAnimations(i,e);if(n.length)return Hx.add(this._chart,n),!0}};function Yx(t,i){let e=[],n=Object.keys(i);for(let s=0;s<n.length;s++){let o=t[n[s]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function qx(t,i){if(!i)return;let e=t.options;if(!e){t.options=i;return}return e.$shared&&(t.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function wh(t,i){let e=t&&t.options||{},n=e.reverse,s=e.min===void 0?i:0,o=e.max===void 0?i:0;return{start:n?o:s,end:n?s:o}}function Gx(t,i,e){if(e===!1)return!1;let n=wh(t,e),s=wh(i,e);return{top:s.end,right:n.end,bottom:s.start,left:n.start}}function $x(t){let i,e,n,s;return J(t)?(i=t.top,e=t.right,n=t.bottom,s=t.left):i=e=n=s=t,{top:i,right:e,bottom:n,left:s,disabled:t===!1}}function hf(t,i){let e=[],n=t._getSortedDatasetMetas(i),s,o;for(s=0,o=n.length;s<o;++s)e.push(n[s].index);return e}function Sh(t,i,e,n={}){let s=t.keys,o=n.mode==="single",r,a,l,c;if(i!==null){for(r=0,a=s.length;r<a;++r){if(l=+s[r],l===e){if(n.all)continue;break}c=t.values[l],fe(c)&&(o||i===0||nt(i)===nt(c))&&(i+=c)}return i}}function Kx(t,i){let{iScale:e,vScale:n}=i,s=e.axis==="x"?"x":"y",o=n.axis==="x"?"x":"y",r=Object.keys(t),a=new Array(r.length),l,c,d;for(l=0,c=r.length;l<c;++l)d=r[l],a[l]={[s]:d,[o]:t[d]};return a}function Mh(t,i){let e=t&&t.options.stacked;return e||e===void 0&&i.stack!==void 0}function Xx(t,i,e){return`${t.id}.${i.id}.${e.stack||e.type}`}function Qx(t){let{min:i,max:e,minDefined:n,maxDefined:s}=t.getUserBounds();return{min:n?i:Number.NEGATIVE_INFINITY,max:s?e:Number.POSITIVE_INFINITY}}function Jx(t,i,e){let n=t[i]||(t[i]={});return n[e]||(n[e]={})}function Eh(t,i,e,n){for(let s of i.getMatchingVisibleMetas(n).reverse()){let o=t[s.index];if(e&&o>0||!e&&o<0)return s.index}return null}function Th(t,i){let{chart:e,_cachedMeta:n}=t,s=e._stacks||(e._stacks={}),{iScale:o,vScale:r,index:a}=n,l=o.axis,c=r.axis,d=Xx(o,r,n),u=i.length,h;for(let m=0;m<u;++m){let g=i[m],{[l]:b,[c]:v}=g,S=g._stacks||(g._stacks={});h=S[c]=Jx(s,d,b),h[a]=v,h._top=Eh(h,r,!0,n.type),h._bottom=Eh(h,r,!1,n.type);let w=h._visualValues||(h._visualValues={});w[a]=v}}function Pa(t,i){let e=t.scales;return Object.keys(e).filter(n=>e[n].axis===i).shift()}function Zx(t,i){return Rt(t,{active:!1,dataset:void 0,datasetIndex:i,index:i,mode:"default",type:"dataset"})}function ev(t,i,e){return Rt(t,{active:!1,dataIndex:i,parsed:void 0,raw:void 0,element:e,index:i,mode:"default",type:"data"})}function Fn(t,i){let e=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){i=i||t._parsed;for(let s of i){let o=s._stacks;if(!o||o[n]===void 0||o[n][e]===void 0)return;delete o[n][e],o[n]._visualValues!==void 0&&o[n]._visualValues[e]!==void 0&&delete o[n]._visualValues[e]}}}var ka=t=>t==="reset"||t==="none",Ph=(t,i)=>i?t:Object.assign({},t),tv=(t,i,e)=>t&&!i.hidden&&i._stacked&&{keys:hf(e,!0),values:null},oi=(()=>{class t{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Mh(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Fn(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,n=this._cachedMeta,s=this.getDataset(),o=(h,m,g,b)=>h==="x"?m:h==="r"?b:g,r=n.xAxisID=H(s.xAxisID,Pa(e,"x")),a=n.yAxisID=H(s.yAxisID,Pa(e,"y")),l=n.rAxisID=H(s.rAxisID,Pa(e,"r")),c=n.indexAxis,d=n.iAxisID=o(c,r,a,l),u=n.vAxisID=o(c,a,r,l);n.xScale=this.getScaleForId(r),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&ma(this._data,this),e._stacked&&Fn(e)}_dataCheck(){let e=this.getDataset(),n=e.data||(e.data=[]),s=this._data;if(J(n)){let o=this._cachedMeta;this._data=Kx(n,o)}else if(s!==n){if(s){ma(s,this);let o=this._cachedMeta;Fn(o),o._parsed=[]}n&&Object.isExtensible(n)&&oh(n,this),this._syncList=[],this._data=n}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let n=this._cachedMeta,s=this.getDataset(),o=!1;this._dataCheck();let r=n._stacked;n._stacked=Mh(n.vScale,n),n.stack!==s.stack&&(o=!0,Fn(n),n.stack=s.stack),this._resyncElements(e),(o||r!==n._stacked)&&Th(this,n._parsed)}configure(){let e=this.chart.config,n=e.datasetScopeKeys(this._type),s=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){let{_cachedMeta:s,_data:o}=this,{iScale:r,_stacked:a}=s,l=r.axis,c=e===0&&n===o.length?!0:s._sorted,d=e>0&&s._parsed[e-1],u,h,m;if(this._parsing===!1)s._parsed=o,s._sorted=!0,m=o;else{he(o[e])?m=this.parseArrayData(s,o,e,n):J(o[e])?m=this.parseObjectData(s,o,e,n):m=this.parsePrimitiveData(s,o,e,n);let g=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<n;++u)s._parsed[u+e]=h=m[u],c&&(g()&&(c=!1),d=h);s._sorted=c}a&&Th(this,m)}parsePrimitiveData(e,n,s,o){let{iScale:r,vScale:a}=e,l=r.axis,c=a.axis,d=r.getLabels(),u=r===a,h=new Array(o),m,g,b;for(m=0,g=o;m<g;++m)b=m+s,h[m]={[l]:u||r.parse(d[b],b),[c]:a.parse(n[b],b)};return h}parseArrayData(e,n,s,o){let{xScale:r,yScale:a}=e,l=new Array(o),c,d,u,h;for(c=0,d=o;c<d;++c)u=c+s,h=n[u],l[c]={x:r.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,n,s,o){let{xScale:r,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(o),u,h,m,g;for(u=0,h=o;u<h;++u)m=u+s,g=n[m],d[u]={x:r.parse(Zt(g,l),m),y:a.parse(Zt(g,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,s){let o=this.chart,r=this._cachedMeta,a=n[e.axis],l={keys:hf(o,!0),values:n._stacks[e.axis]._visualValues};return Sh(l,a,r.index,{mode:s})}updateRangeFromParsed(e,n,s,o){let r=s[n.axis],a=r===null?NaN:r,l=o&&s._stacks[n.axis];o&&l&&(o.values=l,a=Sh(o,r,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){let s=this._cachedMeta,o=s._parsed,r=s._sorted&&e===s.iScale,a=o.length,l=this._getOtherScale(e),c=tv(n,s,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Qx(l),m,g;function b(){g=o[m];let v=g[l.axis];return!fe(g[e.axis])||u>v||h<v}for(m=0;m<a&&!(!b()&&(this.updateRangeFromParsed(d,e,g,c),r));++m);if(r){for(m=a-1;m>=0;--m)if(!b()){this.updateRangeFromParsed(d,e,g,c);break}}return d}getAllParsedValues(e){let n=this._cachedMeta._parsed,s=[],o,r,a;for(o=0,r=n.length;o<r;++o)a=n[o][e.axis],fe(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(e){let n=this._cachedMeta,s=n.iScale,o=n.vScale,r=this.getParsed(e);return{label:s?""+s.getLabelForValue(r[s.axis]):"",value:o?""+o.getLabelForValue(r[o.axis]):""}}_update(e){let n=this._cachedMeta;this.update(e||"default"),n._clip=$x(H(this.options.clip,Gx(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,n=this.chart,s=this._cachedMeta,o=s.data||[],r=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||o.length-l,d=this.options.drawActiveElementsOnTop,u;for(s.dataset&&s.dataset.draw(e,r,l,c),u=l;u<l+c;++u){let h=o[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,r))}for(u=0;u<a.length;++u)a[u].draw(e,r)}getStyle(e,n){let s=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(e||0,s)}getContext(e,n,s){let o=this.getDataset(),r;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];r=a.$context||(a.$context=ev(this.getContext(),e,a)),r.parsed=this.getParsed(e),r.raw=o.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=Zx(this.chart.getContext(),this.index)),r.dataset=o,r.index=r.datasetIndex=this.index;return r.active=!!n,r.mode=s,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",s){let o=n==="active",r=this._cachedDataOpts,a=e+"-"+n,l=r[a],c=this.enableOptionSharing&&Dn(s);if(l)return Ph(l,c);let d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=o?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),g=Object.keys(ti.elements[e]),b=()=>this.getContext(s,o,n),v=d.resolveNamedOptions(m,g,b,h);return v.$shared&&(v.$shared=c,r[a]=Object.freeze(Ph(v,c))),v}_resolveAnimations(e,n,s){let o=this.chart,r=this._cachedDataOpts,a=`animation-${n}`,l=r[a];if(l)return l;let c;if(o.options.animation!==!1){let u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,s,n))}let d=new go(o,c&&c.animations);return c&&c._cacheable&&(r[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||ka(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){let s=this.resolveDataElementOptions(e,n),o=this._sharedOptions,r=this.getSharedOptions(s),a=this.includeOptions(n,r)||r!==o;return this.updateSharedOptions(r,n,s),{sharedOptions:r,includeOptions:a}}updateElement(e,n,s,o){ka(o)?Object.assign(e,s):this._resolveAnimations(n,o).update(e,s)}updateSharedOptions(e,n,s){e&&!ka(n)&&this._resolveAnimations(void 0,n).update(e,s)}_setStyle(e,n,s,o){e.active=o;let r=this.getStyle(n,o);this._resolveAnimations(n,s,o).update(e,{options:!o&&this.getSharedOptions(r)||r})}removeHoverStyle(e,n,s){this._setStyle(e,s,"active",!1)}setHoverStyle(e,n,s){this._setStyle(e,s,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let n=this._data,s=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let o=s.length,r=n.length,a=Math.min(r,o);a&&this.parse(0,a),r>o?this._insertElements(o,r-o,e):r<o&&this._removeElements(r,o-r)}_insertElements(e,n,s=!0){let o=this._cachedMeta,r=o.data,a=e+n,l,c=d=>{for(d.length+=n,l=d.length-1;l>=a;l--)d[l]=d[l-n]};for(c(r),l=e;l<a;++l)r[l]=new this.dataElementType;this._parsing&&c(o._parsed),this.parse(e,n),s&&this.updateElements(r,e,n,"reset")}updateElements(e,n,s,o){}_removeElements(e,n){let s=this._cachedMeta;if(this._parsing){let o=s._parsed.splice(e,n);s._stacked&&Fn(s,o)}s.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[n,s,o]=e;this[n](s,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);let s=arguments.length-2;s&&this._sync(["_insertElements",e,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t})();function iv(t,i){if(!t._cache.$bar){let e=t.getMatchingVisibleMetas(i),n=[];for(let s=0,o=e.length;s<o;s++)n=n.concat(e[s].controller.getAllParsedValues(t));t._cache.$bar=ga(n.sort((s,o)=>s-o))}return t._cache.$bar}function nv(t){let i=t.iScale,e=iv(i,t.type),n=i._length,s,o,r,a,l=()=>{r===32767||r===-32768||(Dn(a)&&(n=Math.min(n,Math.abs(r-a)||n)),a=r)};for(s=0,o=e.length;s<o;++s)r=i.getPixelForValue(e[s]),l();for(a=void 0,s=0,o=i.ticks.length;s<o;++s)r=i.getPixelForTick(s),l();return n}function sv(t,i,e,n){let s=e.barThickness,o,r;return Q(s)?(o=i.min*e.categoryPercentage,r=e.barPercentage):(o=s*n,r=1),{chunk:o/n,ratio:r,start:i.pixels[t]-o/2}}function ov(t,i,e,n){let s=i.pixels,o=s[t],r=t>0?s[t-1]:null,a=t<s.length-1?s[t+1]:null,l=e.categoryPercentage;r===null&&(r=o-(a===null?i.end-i.start:a-o)),a===null&&(a=o+o-r);let c=o-(o-Math.min(r,a))/2*l;return{chunk:Math.abs(a-r)/2*l/n,ratio:e.barPercentage,start:c}}function rv(t,i,e,n){let s=e.parse(t[0],n),o=e.parse(t[1],n),r=Math.min(s,o),a=Math.max(s,o),l=r,c=a;Math.abs(r)>Math.abs(a)&&(l=a,c=r),i[e.axis]=c,i._custom={barStart:l,barEnd:c,start:s,end:o,min:r,max:a}}function ff(t,i,e,n){return he(t)?rv(t,i,e,n):i[e.axis]=e.parse(t,n),i}function kh(t,i,e,n){let s=t.iScale,o=t.vScale,r=s.getLabels(),a=s===o,l=[],c,d,u,h;for(c=e,d=e+n;c<d;++c)h=i[c],u={},u[s.axis]=a||s.parse(r[c],c),l.push(ff(h,u,o,c));return l}function Ia(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function av(t,i,e){return t!==0?nt(t):(i.isHorizontal()?1:-1)*(i.min>=e?1:-1)}function lv(t){let i,e,n,s,o;return t.horizontal?(i=t.base>t.x,e="left",n="right"):(i=t.base<t.y,e="bottom",n="top"),i?(s="end",o="start"):(s="start",o="end"),{start:e,end:n,reverse:i,top:s,bottom:o}}function cv(t,i,e,n){let s=i.borderSkipped,o={};if(!s){t.borderSkipped=o;return}if(s===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:r,end:a,reverse:l,top:c,bottom:d}=lv(t);s==="middle"&&e&&(t.enableBorderRadius=!0,(e._top||0)===n?s=c:(e._bottom||0)===n?s=d:(o[Ih(d,r,a,l)]=!0,s=c)),o[Ih(s,r,a,l)]=!0,t.borderSkipped=o}function Ih(t,i,e,n){return n?(t=dv(t,i,e),t=Oh(t,e,i)):t=Oh(t,i,e),t}function dv(t,i,e){return t===i?e:t===e?i:t}function Oh(t,i,e){return t==="start"?i:t==="end"?e:t}function uv(t,{inflateAmount:i},e){t.inflateAmount=i==="auto"?e===1?.33:0:i}var hv=(()=>{class t extends oi{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,s,o){return kh(e,n,s,o)}parseArrayData(e,n,s,o){return kh(e,n,s,o)}parseObjectData(e,n,s,o){let{iScale:r,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=r.axis==="x"?l:c,u=a.axis==="x"?l:c,h=[],m,g,b,v;for(m=s,g=s+o;m<g;++m)v=n[m],b={},b[r.axis]=r.parse(Zt(v,d),m),h.push(ff(Zt(v,u),b,a,m));return h}updateRangeFromParsed(e,n,s,o){super.updateRangeFromParsed(e,n,s,o);let r=s._custom;r&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let n=this._cachedMeta,{iScale:s,vScale:o}=n,r=this.getParsed(e),a=r._custom,l=Ia(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(r[o.axis]);return{label:""+s.getLabelForValue(r[s.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,s,o){let r=o==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(n,o);for(let g=n;g<n+s;g++){let b=this.getParsed(g),v=r||Q(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(g),S=this._calculateBarIndexPixels(g,u),w=(b._stacks||{})[l.axis],E={horizontal:d,base:v.base,enableBorderRadius:!w||Ia(b._custom)||a===w._top||a===w._bottom,x:d?v.head:S.center,y:d?S.center:v.head,height:d?S.size:Math.abs(v.size),width:d?Math.abs(v.size):S.size};m&&(E.options=h||this.resolveDataElementOptions(g,e[g].active?"active":o));let I=E.options||e[g].options;cv(E,I,w,a),uv(E,I,u.ratio),this.updateElement(e[g],g,E,o)}}_getStacks(e,n){let{iScale:s}=this._cachedMeta,o=s.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),r=s.options.stacked,a=[],l=c=>{let d=c.controller.getParsed(n),u=d&&d[c.vScale.axis];if(Q(u)||isNaN(u))return!0};for(let c of o)if(!(n!==void 0&&l(c))&&((r===!1||a.indexOf(c.stack)===-1||r===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,s){let o=this._getStacks(e,s),r=n!==void 0?o.indexOf(n):-1;return r===-1?o.length-1:r}_getRuler(){let e=this.options,n=this._cachedMeta,s=n.iScale,o=[],r,a;for(r=0,a=n.data.length;r<a;++r)o.push(s.getPixelForValue(this.getParsed(r)[s.axis],r));let l=e.barThickness;return{min:l||nv(n),pixels:o,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:n,_stacked:s,index:o},options:{base:r,minBarLength:a}}=this,l=r||0,c=this.getParsed(e),d=c._custom,u=Ia(d),h=c[n.axis],m=0,g=s?this.applyStack(n,c,s):h,b,v;g!==h&&(m=g-h,g=h),u&&(h=d.barStart,g=d.barEnd-d.barStart,h!==0&&nt(h)!==nt(d.barEnd)&&(m=0),m+=h);let S=!Q(r)&&!u?r:m,w=n.getPixelForValue(S);if(this.chart.getDataVisibility(e)?b=n.getPixelForValue(m+g):b=w,v=b-w,Math.abs(v)<a){v=av(v,n,l)*a,h===l&&(w-=v/2);let E=n.getPixelForDecimal(0),I=n.getPixelForDecimal(1),M=Math.min(E,I),T=Math.max(E,I);w=Math.max(Math.min(w,T),M),b=w+v,s&&!u&&(c._stacks[n.axis]._visualValues[o]=n.getValueForPixel(b)-n.getValueForPixel(w))}if(w===n.getPixelForValue(l)){let E=nt(v)*n.getLineWidthForValue(l)/2;w+=E,v-=E}return{size:v,base:w,head:b,center:b+v/2}}_calculateBarIndexPixels(e,n){let s=n.scale,o=this.options,r=o.skipNull,a=H(o.maxBarThickness,1/0),l,c;if(n.grouped){let d=r?this._getStackCount(e):n.stackCount,u=o.barThickness==="flex"?ov(e,n,o,d):sv(e,n,o,d),h=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);l=u.start+u.chunk*h+u.chunk/2,c=Math.min(a,u.chunk*u.ratio)}else l=s.getPixelForValue(this.getParsed(e)[s.axis],e),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,n=e.vScale,s=e.data,o=s.length,r=0;for(;r<o;++r)this.getParsed(r)[n.axis]!==null&&!s[r].hidden&&s[r].draw(this._ctx)}}return t})(),fv=(()=>{class t extends oi{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,s,o){let r=super.parsePrimitiveData(e,n,s,o);for(let a=0;a<r.length;a++)r[a]._custom=this.resolveDataElementOptions(a+s).radius;return r}parseArrayData(e,n,s,o){let r=super.parseArrayData(e,n,s,o);for(let a=0;a<r.length;a++){let l=n[s+a];r[a]._custom=H(l[2],this.resolveDataElementOptions(a+s).radius)}return r}parseObjectData(e,n,s,o){let r=super.parseObjectData(e,n,s,o);for(let a=0;a<r.length;a++){let l=n[s+a];r[a]._custom=H(l&&l.r&&+l.r,this.resolveDataElementOptions(a+s).radius)}return r}getMaxOverflow(){let e=this._cachedMeta.data,n=0;for(let s=e.length-1;s>=0;--s)n=Math.max(n,e[s].size(this.resolveDataElementOptions(s))/2);return n>0&&n}getLabelAndValue(e){let n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:r}=n,a=this.getParsed(e),l=o.getLabelForValue(a.x),c=r.getLabelForValue(a.y),d=a._custom;return{label:s[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,s,o){let r=o==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(n,o),u=a.axis,h=l.axis;for(let m=n;m<n+s;m++){let g=e[m],b=!r&&this.getParsed(m),v={},S=v[u]=r?a.getPixelForDecimal(.5):a.getPixelForValue(b[u]),w=v[h]=r?l.getBasePixel():l.getPixelForValue(b[h]);v.skip=isNaN(S)||isNaN(w),d&&(v.options=c||this.resolveDataElementOptions(m,g.active?"active":o),r&&(v.options.radius=0)),this.updateElement(g,m,v,o)}}resolveDataElementOptions(e,n){let s=this.getParsed(e),o=super.resolveDataElementOptions(e,n);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let r=o.radius;return n!=="active"&&(o.radius=0),o.radius+=H(s&&s._custom,r),o}}return t})();function pv(t,i,e){let n=1,s=1,o=0,r=0;if(i<oe){let a=t,l=a+i,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),m=(E,I,M)=>An(E,a,l,!0)?1:Math.max(I,I*e,M,M*e),g=(E,I,M)=>An(E,a,l,!0)?-1:Math.min(I,I*e,M,M*e),b=m(0,c,u),v=m(pe,d,h),S=g(se,c,u),w=g(se+pe,d,h);n=(b-S)/2,s=(v-w)/2,o=-(b+S)/2,r=-(v+w)/2}return{ratioX:n,ratioY:s,offsetX:o,offsetY:r}}var $a=(()=>{class t extends oi{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:s,color:o}}=e.legend.options;return n.labels.map((r,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){let s=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=s;else{let r=c=>+s[c];if(J(s[e])){let{key:c="value"}=this._parsing;r=d=>+Zt(s[d],c)}let a,l;for(a=e,l=e+n;a<l;++a)o._parsed[a]=r(a)}}_getRotation(){return Xe(this.options.rotation-90)}_getCircumference(){return Xe(this.options.circumference)}_getRotationExtents(){let e=oe,n=-oe;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){let o=this.chart.getDatasetMeta(s).controller,r=o._getRotation(),a=o._getCircumference();e=Math.min(e,r),n=Math.max(n,r+a)}return{rotation:e,circumference:n-e}}update(e){let n=this.chart,{chartArea:s}=n,o=this._cachedMeta,r=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,l=Math.max((Math.min(s.width,s.height)-a)/2,0),c=Math.min(Xu(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:g,offsetX:b,offsetY:v}=pv(h,u,c),S=(s.width-a)/m,w=(s.height-a)/g,E=Math.max(Math.min(S,w)/2,0),I=la(this.options.radius,E),M=Math.max(I*c,0),T=(I-M)/this._getVisibleDatasetWeightTotal();this.offsetX=b*I,this.offsetY=v*I,o.total=this.calculateTotal(),this.outerRadius=I-T*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-T*d,0),this.updateElements(r,0,r.length,e)}_circumference(e,n){let s=this.options,o=this._cachedMeta,r=this._getCircumference();return n&&s.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*r/oe)}updateElements(e,n,s,o){let r=o==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=r&&d.animateScale,g=m?0:this.innerRadius,b=m?0:this.outerRadius,{sharedOptions:v,includeOptions:S}=this._getSharedOptions(n,o),w=this._getRotation(),E;for(E=0;E<n;++E)w+=this._circumference(E,r);for(E=n;E<n+s;++E){let I=this._circumference(E,r),M=e[E],T={x:u+this.offsetX,y:h+this.offsetY,startAngle:w,endAngle:w+I,circumference:I,outerRadius:b,innerRadius:g};S&&(T.options=v||this.resolveDataElementOptions(E,M.active?"active":o)),w+=I,this.updateElement(M,E,T,o)}}calculateTotal(){let e=this._cachedMeta,n=e.data,s=0,o;for(o=0;o<n.length;o++){let r=e._parsed[o];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(o)&&!n[o].hidden&&(s+=Math.abs(r))}return s}calculateCircumference(e){let n=this._cachedMeta.total;return n>0&&!isNaN(e)?oe*(Math.abs(e)/n):0}getLabelAndValue(e){let n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=Fi(n._parsed[e],s.options.locale);return{label:o[e]||"",value:r}}getMaxBorderWidth(e){let n=0,s=this.chart,o,r,a,l,c;if(!e){for(o=0,r=s.data.datasets.length;o<r;++o)if(s.isDatasetVisible(o)){a=s.getDatasetMeta(o),e=a.data,l=a.controller;break}}if(!e)return 0;for(o=0,r=e.length;o<r;++o)c=l.resolveDataElementOptions(o),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let s=0,o=e.length;s<o;++s){let r=this.resolveDataElementOptions(s);n=Math.max(n,r.offset||0,r.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let s=0;s<e;++s)this.chart.isDatasetVisible(s)&&(n+=this._getRingWeight(s));return n}_getRingWeight(e){return Math.max(H(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t})(),mv=(()=>{class t extends oi{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let n=this._cachedMeta,{dataset:s,data:o=[],_dataset:r}=n,a=this.chart._animationsDisabled,{start:l,count:c}=_a(n,o,a);this._drawStart=l,this._drawCount=c,ba(n)&&(l=0,c=o.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!r._decimated,s.points=o;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:d},e),this.updateElements(o,l,c,e)}updateElements(e,n,s,o){let r=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,o),m=a.axis,g=l.axis,{spanGaps:b,segment:v}=this.options,S=ei(b)?b:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||r||o==="none",E=n+s,I=e.length,M=n>0&&this.getParsed(n-1);for(let T=0;T<I;++T){let N=e[T],D=w?N:{};if(T<n||T>=E){D.skip=!0;continue}let L=this.getParsed(T),z=Q(L[g]),B=D[m]=a.getPixelForValue(L[m],T),G=D[g]=r||z?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,L,c):L[g],T);D.skip=isNaN(B)||isNaN(G)||z,D.stop=T>0&&Math.abs(L[m]-M[m])>S,v&&(D.parsed=L,D.raw=d.data[T]),h&&(D.options=u||this.resolveDataElementOptions(T,N.active?"active":o)),w||this.updateElement(N,T,D,o),M=L}}getMaxOverflow(){let e=this._cachedMeta,n=e.dataset,s=n.options&&n.options.borderWidth||0,o=e.data||[];if(!o.length)return s;let r=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(s,r,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return t})(),pf=(()=>{class t extends oi{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:s,color:o}}=e.legend.options;return n.labels.map((r,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:r,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:s,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,s){s.chart.toggleDataVisibility(n.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let n=this._cachedMeta,s=this.chart,o=s.data.labels||[],r=Fi(n._parsed[e].r,s.options.locale);return{label:o[e]||"",value:r}}parseObjectData(e,n,s,o){return wa.bind(this)(e,n,s,o)}update(e){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){let e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((s,o)=>{let r=this.getParsed(o).r;!isNaN(r)&&this.chart.getDataVisibility(o)&&(r<n.min&&(n.min=r),r>n.max&&(n.max=r))}),n}_updateRadius(){let e=this.chart,n=e.chartArea,s=e.options,o=Math.min(n.right-n.left,n.bottom-n.top),r=Math.max(o/2,0),a=Math.max(s.cutoutPercentage?r/100*s.cutoutPercentage:1,0),l=(r-a)/e.getVisibleDatasetCount();this.outerRadius=r-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,n,s,o){let r=o==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,m=d.getIndexAngle(0)-.5*se,g=m,b,v=360/this.countVisibleElements();for(b=0;b<n;++b)g+=this._computeAngle(b,o,v);for(b=n;b<n+s;b++){let S=e[b],w=g,E=g+this._computeAngle(b,o,v),I=a.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;g=E,r&&(c.animateScale&&(I=0),c.animateRotate&&(w=E=m));let M={x:u,y:h,innerRadius:0,outerRadius:I,startAngle:w,endAngle:E,options:this.resolveDataElementOptions(b,S.active?"active":o)};this.updateElement(S,b,M,o)}}countVisibleElements(){let e=this._cachedMeta,n=0;return e.data.forEach((s,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&n++}),n}_computeAngle(e,n,s){return this.chart.getDataVisibility(e)?Xe(this.resolveDataElementOptions(e,n).angle||s):0}}return t})(),gv=(()=>{class t extends $a{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return t})(),_v=(()=>{class t extends oi{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let n=this._cachedMeta.vScale,s=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(s[n.axis])}}parseObjectData(e,n,s,o){return wa.bind(this)(e,n,s,o)}update(e){let n=this._cachedMeta,s=n.dataset,o=n.data||[],r=n.iScale.getLabels();if(s.points=o,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:r.length===o.length,options:a};this.updateElement(s,void 0,l,e)}this.updateElements(o,0,o.length,e)}updateElements(e,n,s,o){let r=this._cachedMeta.rScale,a=o==="reset";for(let l=n;l<n+s;l++){let c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":o),u=r.getPointPositionForValue(l,this.getParsed(l).r),h=a?r.xCenter:u.x,m=a?r.yCenter:u.y,g={x:h,y:m,angle:u.angle,skip:isNaN(h)||isNaN(m),options:d};this.updateElement(c,l,g,o)}}}return t})(),bv=(()=>{class t extends oi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let n=this._cachedMeta,s=this.chart.data.labels||[],{xScale:o,yScale:r}=n,a=this.getParsed(e),l=o.getLabelForValue(a.x),c=r.getLabelForValue(a.y);return{label:s[e]||"",value:"("+l+", "+c+")"}}update(e){let n=this._cachedMeta,{data:s=[]}=n,o=this.chart._animationsDisabled,{start:r,count:a}=_a(n,s,o);if(this._drawStart=r,this._drawCount=a,ba(n)&&(r=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=s;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!o,options:d},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(s,r,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,s,o){let r=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(n,o),h=this.getSharedOptions(u),m=this.includeOptions(o,h),g=a.axis,b=l.axis,{spanGaps:v,segment:S}=this.options,w=ei(v)?v:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||r||o==="none",I=n>0&&this.getParsed(n-1);for(let M=n;M<n+s;++M){let T=e[M],N=this.getParsed(M),D=E?T:{},L=Q(N[b]),z=D[g]=a.getPixelForValue(N[g],M),B=D[b]=r||L?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,N,c):N[b],M);D.skip=isNaN(z)||isNaN(B)||L,D.stop=M>0&&Math.abs(N[g]-I[g])>w,S&&(D.parsed=N,D.raw=d.data[M]),m&&(D.options=h||this.resolveDataElementOptions(M,T.active?"active":o)),E||this.updateElement(T,M,D,o),I=N}this.updateSharedOptions(h,o,u)}getMaxOverflow(){let e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let l=0;for(let c=n.length-1;c>=0;--c)l=Math.max(l,n[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let s=e.dataset,o=s.options&&s.options.borderWidth||0;if(!n.length)return o;let r=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(o,r,a)/2}}return t})(),xv=Object.freeze({__proto__:null,BarController:hv,BubbleController:fv,DoughnutController:$a,LineController:mv,PieController:gv,PolarAreaController:pf,RadarController:_v,ScatterController:bv});function ni(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Na=class t{static override(i){Object.assign(t.prototype,i)}options;constructor(i){this.options=i||{}}init(){}formats(){return ni()}parse(){return ni()}format(){return ni()}add(){return ni()}diff(){return ni()}startOf(){return ni()}endOf(){return ni()}},vv={_date:Na};var mf=["left","top","right","bottom"];function Nn(t,i){return t.filter(e=>e.pos===i)}function Dh(t,i){return t.filter(e=>mf.indexOf(e.pos)===-1&&e.box.axis===i)}function Ln(t,i){return t.sort((e,n)=>{let s=i?n:e,o=i?e:n;return s.weight===o.weight?s.index-o.index:s.weight-o.weight})}function yv(t){let i=[],e,n,s,o,r,a;for(e=0,n=(t||[]).length;e<n;++e)s=t[e],{position:o,options:{stack:r,stackWeight:a=1}}=s,i.push({index:e,box:s,pos:o,horizontal:s.isHorizontal(),weight:s.weight,stack:r&&o+r,stackWeight:a});return i}function Cv(t){let i={};for(let e of t){let{stack:n,pos:s,stackWeight:o}=e;if(!n||!mf.includes(s))continue;let r=i[n]||(i[n]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return i}function wv(t,i){let e=Cv(t),{vBoxMaxWidth:n,hBoxMaxHeight:s}=i,o,r,a;for(o=0,r=t.length;o<r;++o){a=t[o];let{fullSize:l}=a.box,c=e[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*n:l&&i.availableWidth,a.height=s):(a.width=n,a.height=d?d*s:l&&i.availableHeight)}return e}function Sv(t){let i=yv(t),e=Ln(i.filter(c=>c.box.fullSize),!0),n=Ln(Nn(i,"left"),!0),s=Ln(Nn(i,"right")),o=Ln(Nn(i,"top"),!0),r=Ln(Nn(i,"bottom")),a=Dh(i,"x"),l=Dh(i,"y");return{fullSize:e,leftAndTop:n.concat(o),rightAndBottom:s.concat(l).concat(r).concat(a),chartArea:Nn(i,"chartArea"),vertical:n.concat(s).concat(l),horizontal:o.concat(r).concat(a)}}function Ah(t,i,e,n){return Math.max(t[e],i[e])+Math.max(t[n],i[n])}function gf(t,i){t.top=Math.max(t.top,i.top),t.left=Math.max(t.left,i.left),t.bottom=Math.max(t.bottom,i.bottom),t.right=Math.max(t.right,i.right)}function Mv(t,i,e,n){let{pos:s,box:o}=e,r=t.maxPadding;if(!J(s)){e.size&&(t[s]-=e.size);let u=n[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?o.height:o.width),e.size=u.size/u.count,t[s]+=e.size}o.getPadding&&gf(r,o.getPadding());let a=Math.max(0,i.outerWidth-Ah(r,t,"left","right")),l=Math.max(0,i.outerHeight-Ah(r,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function Ev(t){let i=t.maxPadding;function e(n){let s=Math.max(i[n]-t[n],0);return t[n]+=s,s}t.y+=e("top"),t.x+=e("left"),e("right"),e("bottom")}function Tv(t,i){let e=i.maxPadding;function n(s){let o={left:0,top:0,right:0,bottom:0};return s.forEach(r=>{o[r]=Math.max(i[r],e[r])}),o}return n(t?["left","right"]:["top","bottom"])}function Wn(t,i,e,n){let s=[],o,r,a,l,c,d;for(o=0,r=t.length,c=0;o<r;++o){a=t[o],l=a.box,l.update(a.width||i.w,a.height||i.h,Tv(a.horizontal,i));let{same:u,other:h}=Mv(i,e,a,n);c|=u&&s.length,d=d||h,l.fullSize||s.push(a)}return c&&Wn(s,i,e,n)||d}function uo(t,i,e,n,s){t.top=e,t.left=i,t.right=i+n,t.bottom=e+s,t.width=n,t.height=s}function Rh(t,i,e,n){let s=e.padding,{x:o,y:r}=i;for(let a of t){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){let u=i.w*d,h=c.size||l.height;Dn(c.start)&&(r=c.start),l.fullSize?uo(l,s.left,r,e.outerWidth-s.right-s.left,h):uo(l,i.left+c.placed,r,u,h),c.start=r,c.placed+=u,r=l.bottom}else{let u=i.h*d,h=c.size||l.width;Dn(c.start)&&(o=c.start),l.fullSize?uo(l,o,s.top,h,e.outerHeight-s.bottom-s.top):uo(l,o,i.top+c.placed,h,u),c.start=o,c.placed+=u,o=l.right}}i.x=o,i.y=r}var Qe={addBox(t,i){t.boxes||(t.boxes=[]),i.fullSize=i.fullSize||!1,i.position=i.position||"top",i.weight=i.weight||0,i._layers=i._layers||function(){return[{z:0,draw(e){i.draw(e)}}]},t.boxes.push(i)},removeBox(t,i){let e=t.boxes?t.boxes.indexOf(i):-1;e!==-1&&t.boxes.splice(e,1)},configure(t,i,e){i.fullSize=e.fullSize,i.position=e.position,i.weight=e.weight},update(t,i,e,n){if(!t)return;let s=ke(t.options.layout.padding),o=Math.max(i-s.width,0),r=Math.max(e-s.height,0),a=Sv(t.boxes),l=a.vertical,c=a.horizontal;Te(t.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,u=Object.freeze({outerWidth:i,outerHeight:e,padding:s,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/d,hBoxMaxHeight:r/2}),h=Object.assign({},s);gf(h,ke(n));let m=Object.assign({maxPadding:h,w:o,h:r,x:s.left,y:s.top},s),g=wv(l.concat(c),u);Wn(a.fullSize,m,u,g),Wn(l,m,u,g),Wn(c,m,u,g)&&Wn(l,m,u,g),Ev(m),Rh(a.leftAndTop,m,u,g),m.x+=m.w,m.y+=m.h,Rh(a.rightAndBottom,m,u,g),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Te(a.chartArea,b=>{let v=b.box;Object.assign(v,t.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};var ut=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(i){let{x:e,y:n}=this.getProps(["x","y"],i);return{x:e,y:n}}hasValue(){return ei(this.x)&&ei(this.y)}getProps(i,e){let n=this.$animations;if(!e||!n)return this;let s={};return i.forEach(o=>{s[o]=n[o]&&n[o].active()?n[o]._to:this[o]}),s}};function Pv(t,i){let e=t.options.ticks,n=kv(t),s=Math.min(e.maxTicksLimit||n,n),o=e.major.enabled?Ov(i):[],r=o.length,a=o[0],l=o[r-1],c=[];if(r>s)return Dv(i,c,o,r/s),c;let d=Iv(o,i,s);if(r>0){let u,h,m=r>1?Math.round((l-a)/(r-1)):null;for(ho(i,c,d,Q(m)?0:a-m,a),u=0,h=r-1;u<h;u++)ho(i,c,d,o[u],o[u+1]);return ho(i,c,d,l,Q(m)?i.length:l+m),c}return ho(i,c,d),c}function kv(t){let i=t.options.offset,e=t._tickSize(),n=t._length/e+(i?0:1),s=t._maxLength/e;return Math.floor(Math.min(n,s))}function Iv(t,i,e){let n=Av(t),s=i.length/e;if(!n)return Math.max(s,1);let o=Zu(n);for(let r=0,a=o.length-1;r<a;r++){let l=o[r];if(l>s)return l}return Math.max(s,1)}function Ov(t){let i=[],e,n;for(e=0,n=t.length;e<n;e++)t[e].major&&i.push(e);return i}function Dv(t,i,e,n){let s=0,o=e[0],r;for(n=Math.ceil(n),r=0;r<t.length;r++)r===o&&(i.push(t[r]),s++,o=e[s*n])}function ho(t,i,e,n,s){let o=H(n,0),r=Math.min(H(s,t.length),t.length),a=0,l,c,d;for(e=Math.ceil(e),s&&(l=s-n,e=l/Math.floor(l/e)),d=o;d<0;)a++,d=Math.round(o+a*e);for(c=Math.max(o,0);c<r;c++)c===d&&(i.push(t[c]),a++,d=Math.round(o+a*e))}function Av(t){let i=t.length,e,n;if(i<2)return!1;for(n=t[0],e=1;e<i;++e)if(t[e]-t[e-1]!==n)return!1;return n}var Rv=t=>t==="left"?"right":t==="right"?"left":t,Fh=(t,i,e)=>i==="top"||i==="left"?t[i]+e:t[i]-e,Nh=(t,i)=>Math.min(i||t,t);function Lh(t,i){let e=[],n=t.length/i,s=t.length,o=0;for(;o<s;o+=n)e.push(t[Math.floor(o)]);return e}function Fv(t,i,e){let n=t.ticks.length,s=Math.min(i,n-1),o=t._startPixel,r=t._endPixel,a=1e-6,l=t.getPixelForTick(s),c;if(!(e&&(n===1?c=Math.max(l-o,r-l):i===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(s-1))/2,l+=s<i?c:-c,l<o-a||l>r+a)))return l}function Nv(t,i){Te(t,e=>{let n=e.gc,s=n.length/2,o;if(s>i){for(o=0;o<s;++o)delete e.data[n[o]];n.splice(0,s)}})}function Vn(t){return t.drawTicks?t.tickLength:0}function Vh(t,i){if(!t.display)return 0;let e=_e(t.font,i),n=ke(t.padding);return(he(t.text)?t.text.length:1)*e.lineHeight+n.height}function Lv(t,i){return Rt(t,{scale:i,type:"scale"})}function Vv(t,i,e){return Rt(t,{tick:e,index:i,type:"tick"})}function Wv(t,i,e){let n=oo(t);return(e&&i!=="right"||!e&&i==="right")&&(n=Rv(n)),n}function Bv(t,i,e,n){let{top:s,left:o,bottom:r,right:a,chart:l}=t,{chartArea:c,scales:d}=l,u=0,h,m,g,b=r-s,v=a-o;if(t.isHorizontal()){if(m=Pe(n,o,a),J(e)){let S=Object.keys(e)[0],w=e[S];g=d[S].getPixelForValue(w)+b-i}else e==="center"?g=(c.bottom+c.top)/2+b-i:g=Fh(t,e,i);h=a-o}else{if(J(e)){let S=Object.keys(e)[0],w=e[S];m=d[S].getPixelForValue(w)-v+i}else e==="center"?m=(c.left+c.right)/2-v+i:m=Fh(t,e,i);g=Pe(n,r,s),u=e==="left"?-pe:pe}return{titleX:m,titleY:g,maxWidth:h,rotation:u}}var Wi=class t extends ut{constructor(i){super(),this.id=i.id,this.type=i.type,this.options=void 0,this.ctx=i.ctx,this.chart=i.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(i){this.options=i.setContext(this.getContext()),this.axis=i.axis,this._userMin=this.parse(i.min),this._userMax=this.parse(i.max),this._suggestedMin=this.parse(i.suggestedMin),this._suggestedMax=this.parse(i.suggestedMax)}parse(i,e){return i}getUserBounds(){let{_userMin:i,_userMax:e,_suggestedMin:n,_suggestedMax:s}=this;return i=Ve(i,Number.POSITIVE_INFINITY),e=Ve(e,Number.NEGATIVE_INFINITY),n=Ve(n,Number.POSITIVE_INFINITY),s=Ve(s,Number.NEGATIVE_INFINITY),{min:Ve(i,n),max:Ve(e,s),minDefined:fe(i),maxDefined:fe(e)}}getMinMax(i){let{min:e,max:n,minDefined:s,maxDefined:o}=this.getUserBounds(),r;if(s&&o)return{min:e,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)r=a[l].controller.getMinMax(this,i),s||(e=Math.min(e,r.min)),o||(n=Math.max(n,r.max));return e=o&&e>n?n:e,n=s&&e>n?e:n,{min:Ve(e,Ve(n,e)),max:Ve(n,Ve(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let i=this.chart.data;return this.options.labels||(this.isHorizontal()?i.xLabels:i.yLabels)||i.labels||[]}getLabelItems(i=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(i))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ve(this.options.beforeUpdate,[this])}update(i,e,n){let{beginAtZero:s,grace:o,ticks:r}=this.options,a=r.sampleSize;this.beforeUpdate(),this.maxWidth=i,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=ph(this,o,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?Lh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=Pv(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let i=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,i=!i),this._startPixel=e,this._endPixel=n,this._reversePixels=i,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ve(this.options.afterUpdate,[this])}beforeSetDimensions(){ve(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ve(this.options.afterSetDimensions,[this])}_callHooks(i){this.chart.notifyPlugins(i,this.getContext()),ve(this.options[i],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ve(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(i){let e=this.options.ticks,n,s,o;for(n=0,s=i.length;n<s;n++)o=i[n],o.label=ve(e.callback,[o.value,n,i],this)}afterTickToLabelConversion(){ve(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ve(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let i=this.options,e=i.ticks,n=Nh(this.ticks.length,i.ticks.maxTicksLimit),s=e.minRotation||0,o=e.maxRotation,r=s,a,l,c;if(!this._isVisible()||!e.display||s>=o||n<=1||!this.isHorizontal()){this.labelRotation=s;return}let d=this._getLabelSizes(),u=d.widest.width,h=d.highest.height,m=xe(this.chart.width-u,0,this.maxWidth);a=i.offset?this.maxWidth/n:m/(n-1),u+6>a&&(a=m/(n-(i.offset?.5:1)),l=this.maxHeight-Vn(i.grid)-e.padding-Vh(i.title,this.chart.options.font),c=Math.sqrt(u*u+h*h),r=so(Math.min(Math.asin(xe((d.highest.height+6)/a,-1,1)),Math.asin(xe(l/c,-1,1))-Math.asin(xe(h/c,-1,1)))),r=Math.max(s,Math.min(o,r))),this.labelRotation=r}afterCalculateLabelRotation(){ve(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ve(this.options.beforeFit,[this])}fit(){let i={width:0,height:0},{chart:e,options:{ticks:n,title:s,grid:o}}=this,r=this._isVisible(),a=this.isHorizontal();if(r){let l=Vh(s,e.options.font);if(a?(i.width=this.maxWidth,i.height=Vn(o)+l):(i.height=this.maxHeight,i.width=Vn(o)+l),n.display&&this.ticks.length){let{first:c,last:d,widest:u,highest:h}=this._getLabelSizes(),m=n.padding*2,g=Xe(this.labelRotation),b=Math.cos(g),v=Math.sin(g);if(a){let S=n.mirror?0:v*u.width+b*h.height;i.height=Math.min(this.maxHeight,i.height+S+m)}else{let S=n.mirror?0:b*u.width+v*h.height;i.width=Math.min(this.maxWidth,i.width+S+m)}this._calculatePadding(c,d,v,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=i.height):(this.width=i.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(i,e,n,s){let{ticks:{align:o,padding:r},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),h=0,m=0;l?c?(h=s*i.width,m=n*e.height):(h=n*i.height,m=s*e.width):o==="start"?m=e.width:o==="end"?h=i.width:o!=="inner"&&(h=i.width/2,m=e.width/2),this.paddingLeft=Math.max((h-d+r)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-u+r)*this.width/(this.width-u),0)}else{let d=e.height/2,u=i.height/2;o==="start"?(d=0,u=i.height):o==="end"&&(d=e.height,u=0),this.paddingTop=d+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ve(this.options.afterFit,[this])}isHorizontal(){let{axis:i,position:e}=this.options;return e==="top"||e==="bottom"||i==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(i){this.beforeTickToLabelConversion(),this.generateTickLabels(i);let e,n;for(e=0,n=i.length;e<n;e++)Q(i[e].label)&&(i.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let i=this._labelSizes;if(!i){let e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=Lh(n,e)),this._labelSizes=i=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return i}_computeLabelSizes(i,e,n){let{ctx:s,_longestTextCache:o}=this,r=[],a=[],l=Math.floor(e/Nh(e,n)),c=0,d=0,u,h,m,g,b,v,S,w,E,I,M;for(u=0;u<e;u+=l){if(g=i[u].label,b=this._resolveTickFontOptions(u),s.font=v=b.string,S=o[v]=o[v]||{data:{},gc:[]},w=b.lineHeight,E=I=0,!Q(g)&&!he(g))E=On(s,S.data,S.gc,E,g),I=w;else if(he(g))for(h=0,m=g.length;h<m;++h)M=g[h],!Q(M)&&!he(M)&&(E=On(s,S.data,S.gc,E,M),I+=w);r.push(E),a.push(I),c=Math.max(E,c),d=Math.max(I,d)}Nv(o,e);let T=r.indexOf(c),N=a.indexOf(d),D=L=>({width:r[L]||0,height:a[L]||0});return{first:D(0),last:D(e-1),widest:D(T),highest:D(N),widths:r,heights:a}}getLabelForValue(i){return i}getPixelForValue(i,e){return NaN}getValueForPixel(i){}getPixelForTick(i){let e=this.ticks;return i<0||i>e.length-1?null:this.getPixelForValue(e[i].value)}getPixelForDecimal(i){this._reversePixels&&(i=1-i);let e=this._startPixel+i*this._length;return ih(this._alignToPixels?Ot(this.chart,e,0):e)}getDecimalForPixel(i){let e=(i-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:i,max:e}=this;return i<0&&e<0?e:i>0&&e>0?i:0}getContext(i){let e=this.ticks||[];if(i>=0&&i<e.length){let n=e[i];return n.$context||(n.$context=Vv(this.getContext(),i,n))}return this.$context||(this.$context=Lv(this.chart.getContext(),this))}_tickSize(){let i=this.options.ticks,e=Xe(this.labelRotation),n=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),o=this._getLabelSizes(),r=i.autoSkipPadding||0,a=o?o.widest.width+r:0,l=o?o.highest.height+r:0;return this.isHorizontal()?l*n>a*s?a/n:l/s:l*s<a*n?l/n:a/s}_isVisible(){let i=this.options.display;return i!=="auto"?!!i:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(i){let e=this.axis,n=this.chart,s=this.options,{grid:o,position:r,border:a}=s,l=o.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),h=Vn(o),m=[],g=a.setContext(this.getContext()),b=g.display?g.width:0,v=b/2,S=function(ce){return Ot(n,ce,b)},w,E,I,M,T,N,D,L,z,B,G,Ee;if(r==="top")w=S(this.bottom),N=this.bottom-h,L=w-v,B=S(i.top)+v,Ee=i.bottom;else if(r==="bottom")w=S(this.top),B=i.top,Ee=S(i.bottom)-v,N=w+v,L=this.top+h;else if(r==="left")w=S(this.right),T=this.right-h,D=w-v,z=S(i.left)+v,G=i.right;else if(r==="right")w=S(this.left),z=i.left,G=S(i.right)-v,T=w+v,D=this.left+h;else if(e==="x"){if(r==="center")w=S((i.top+i.bottom)/2+.5);else if(J(r)){let ce=Object.keys(r)[0],me=r[ce];w=S(this.chart.scales[ce].getPixelForValue(me))}B=i.top,Ee=i.bottom,N=w+v,L=N+h}else if(e==="y"){if(r==="center")w=S((i.left+i.right)/2);else if(J(r)){let ce=Object.keys(r)[0],me=r[ce];w=S(this.chart.scales[ce].getPixelForValue(me))}T=w-v,D=T-h,z=i.left,G=i.right}let je=H(s.ticks.maxTicksLimit,u),Z=Math.max(1,Math.ceil(u/je));for(E=0;E<u;E+=Z){let ce=this.getContext(E),me=o.setContext(ce),Ze=a.setContext(ce),Ie=me.lineWidth,ri=me.color,Kn=Ze.dash||[],ai=Ze.dashOffset,Qi=me.tickWidth,zt=me.tickColor,Ji=me.tickBorderDash||[],jt=me.tickBorderDashOffset;I=Fv(this,E,l),I!==void 0&&(M=Ot(n,I,Ie),c?T=D=z=G=M:N=L=B=Ee=M,m.push({tx1:T,ty1:N,tx2:D,ty2:L,x1:z,y1:B,x2:G,y2:Ee,width:Ie,color:ri,borderDash:Kn,borderDashOffset:ai,tickWidth:Qi,tickColor:zt,tickBorderDash:Ji,tickBorderDashOffset:jt}))}return this._ticksLength=u,this._borderValue=w,m}_computeLabelItems(i){let e=this.axis,n=this.options,{position:s,ticks:o}=n,r=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=o,h=Vn(n.grid),m=h+d,g=u?-d:m,b=-Xe(this.labelRotation),v=[],S,w,E,I,M,T,N,D,L,z,B,G,Ee="middle";if(s==="top")T=this.bottom-g,N=this._getXAxisLabelAlignment();else if(s==="bottom")T=this.top+g,N=this._getXAxisLabelAlignment();else if(s==="left"){let Z=this._getYAxisLabelAlignment(h);N=Z.textAlign,M=Z.x}else if(s==="right"){let Z=this._getYAxisLabelAlignment(h);N=Z.textAlign,M=Z.x}else if(e==="x"){if(s==="center")T=(i.top+i.bottom)/2+m;else if(J(s)){let Z=Object.keys(s)[0],ce=s[Z];T=this.chart.scales[Z].getPixelForValue(ce)+m}N=this._getXAxisLabelAlignment()}else if(e==="y"){if(s==="center")M=(i.left+i.right)/2-m;else if(J(s)){let Z=Object.keys(s)[0],ce=s[Z];M=this.chart.scales[Z].getPixelForValue(ce)}N=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?Ee="top":l==="end"&&(Ee="bottom"));let je=this._getLabelSizes();for(S=0,w=a.length;S<w;++S){E=a[S],I=E.label;let Z=o.setContext(this.getContext(S));D=this.getPixelForTick(S)+o.labelOffset,L=this._resolveTickFontOptions(S),z=L.lineHeight,B=he(I)?I.length:1;let ce=B/2,me=Z.color,Ze=Z.textStrokeColor,Ie=Z.textStrokeWidth,ri=N;r?(M=D,N==="inner"&&(S===w-1?ri=this.options.reverse?"left":"right":S===0?ri=this.options.reverse?"right":"left":ri="center"),s==="top"?c==="near"||b!==0?G=-B*z+z/2:c==="center"?G=-je.highest.height/2-ce*z+z:G=-je.highest.height+z/2:c==="near"||b!==0?G=z/2:c==="center"?G=je.highest.height/2-ce*z:G=je.highest.height-B*z,u&&(G*=-1),b!==0&&!Z.showLabelBackdrop&&(M+=z/2*Math.sin(b))):(T=D,G=(1-B)*z/2);let Kn;if(Z.showLabelBackdrop){let ai=ke(Z.backdropPadding),Qi=je.heights[S],zt=je.widths[S],Ji=G-ai.top,jt=0-ai.left;switch(Ee){case"middle":Ji-=Qi/2;break;case"bottom":Ji-=Qi;break}switch(N){case"center":jt-=zt/2;break;case"right":jt-=zt;break;case"inner":S===w-1?jt-=zt:S>0&&(jt-=zt/2);break}Kn={left:jt,top:Ji,width:zt+ai.width,height:Qi+ai.height,color:Z.backdropColor}}v.push({label:I,font:L,textOffset:G,options:{rotation:b,color:me,strokeColor:Ze,strokeWidth:Ie,textAlign:ri,textBaseline:Ee,translation:[M,T],backdrop:Kn}})}return v}_getXAxisLabelAlignment(){let{position:i,ticks:e}=this.options;if(-Xe(this.labelRotation))return i==="top"?"left":"right";let s="center";return e.align==="start"?s="left":e.align==="end"?s="right":e.align==="inner"&&(s="inner"),s}_getYAxisLabelAlignment(i){let{position:e,ticks:{crossAlign:n,mirror:s,padding:o}}=this.options,r=this._getLabelSizes(),a=i+o,l=r.widest.width,c,d;return e==="left"?s?(d=this.right+o,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?s?(d=this.left+o,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let i=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:i.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:i.width}}drawBackground(){let{ctx:i,options:{backgroundColor:e},left:n,top:s,width:o,height:r}=this;e&&(i.save(),i.fillStyle=e,i.fillRect(n,s,o,r),i.restore())}getLineWidthForValue(i){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let s=this.ticks.findIndex(o=>o.value===i);return s>=0?e.setContext(this.getContext(s)).lineWidth:0}drawGrid(i){let e=this.options.grid,n=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(i)),o,r,a=(l,c,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(e.display)for(o=0,r=s.length;o<r;++o){let l=s[o];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:i,ctx:e,options:{border:n,grid:s}}=this,o=n.setContext(this.getContext()),r=n.display?o.width:0;if(!r)return;let a=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,u,h;this.isHorizontal()?(c=Ot(i,this.left,r)-r/2,d=Ot(i,this.right,a)+a/2,u=h=l):(u=Ot(i,this.top,r)-r/2,h=Ot(i,this.bottom,a)+a/2,c=d=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,u),e.lineTo(d,h),e.stroke(),e.restore()}drawLabels(i){if(!this.options.ticks.display)return;let n=this.ctx,s=this._computeLabelArea();s&&ao(n,s);let o=this.getLabelItems(i);for(let r of o){let a=r.options,l=r.font,c=r.label,d=r.textOffset;Dt(n,c,0,d,l,a)}s&&lo(n)}drawTitle(){let{ctx:i,options:{position:e,title:n,reverse:s}}=this;if(!n.display)return;let o=_e(n.font),r=ke(n.padding),a=n.align,l=o.lineHeight/2;e==="bottom"||e==="center"||J(e)?(l+=r.bottom,he(n.text)&&(l+=o.lineHeight*(n.text.length-1))):l+=r.top;let{titleX:c,titleY:d,maxWidth:u,rotation:h}=Bv(this,l,e,a);Dt(i,n.text,0,0,o,{color:n.color,maxWidth:u,rotation:h,textAlign:Wv(a,e,s),textBaseline:"middle",translation:[c,d]})}draw(i){this._isVisible()&&(this.drawBackground(),this.drawGrid(i),this.drawBorder(),this.drawTitle(),this.drawLabels(i))}_layers(){let i=this.options,e=i.ticks&&i.ticks.z||0,n=H(i.grid&&i.grid.z,-1),s=H(i.border&&i.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:n,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(i){let e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",s=[],o,r;for(o=0,r=e.length;o<r;++o){let a=e[o];a[n]===this.id&&(!i||a.type===i)&&s.push(a)}return s}_resolveTickFontOptions(i){let e=this.options.ticks.setContext(this.getContext(i));return _e(e.font)}_maxDigits(){let i=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/i}};function zv(t,i,e){let{startAngle:n,pixelMargin:s,x:o,y:r,outerRadius:a,innerRadius:l}=i,c=s/a;t.beginPath(),t.arc(o,r,a,n-c,e+c),l>s?(c=s/l,t.arc(o,r,l,e+c,n-c,!0)):t.arc(o,r,s,e+pe,n-pe),t.closePath(),t.clip()}function jv(t){return co(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Hv(t,i,e,n){let s=jv(t.options.borderRadius),o=(e-i)/2,r=Math.min(o,n*i/2),a=l=>{let c=(e-Math.min(o,l))*n/2;return xe(l,0,Math.min(o,c))};return{outerStart:a(s.outerStart),outerEnd:a(s.outerEnd),innerStart:xe(s.innerStart,0,r),innerEnd:xe(s.innerEnd,0,r)}}function Vi(t,i,e,n){return{x:e+t*Math.cos(i),y:n+t*Math.sin(i)}}function _o(t,i,e,n,s,o){let{x:r,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=i,u=Math.max(i.outerRadius+n+e-c,0),h=d>0?d+n+e+c:0,m=0,g=s-l;if(n){let Z=d>0?d-n:0,ce=u>0?u-n:0,me=(Z+ce)/2,Ze=me!==0?g*me/(me+n):g;m=(g-Ze)/2}let b=Math.max(.001,g*u-e/se)/u,v=(g-b)/2,S=l+v+m,w=s-v-m,{outerStart:E,outerEnd:I,innerStart:M,innerEnd:T}=Hv(i,h,u,w-S),N=u-E,D=u-I,L=S+E/N,z=w-I/D,B=h+M,G=h+T,Ee=S+M/B,je=w-T/G;if(t.beginPath(),o){let Z=(L+z)/2;if(t.arc(r,a,u,L,Z),t.arc(r,a,u,Z,z),I>0){let Ie=Vi(D,z,r,a);t.arc(Ie.x,Ie.y,I,z,w+pe)}let ce=Vi(G,w,r,a);if(t.lineTo(ce.x,ce.y),T>0){let Ie=Vi(G,je,r,a);t.arc(Ie.x,Ie.y,T,w+pe,je+Math.PI)}let me=(w-T/h+(S+M/h))/2;if(t.arc(r,a,h,w-T/h,me,!0),t.arc(r,a,h,me,S+M/h,!0),M>0){let Ie=Vi(B,Ee,r,a);t.arc(Ie.x,Ie.y,M,Ee+Math.PI,S-pe)}let Ze=Vi(N,S,r,a);if(t.lineTo(Ze.x,Ze.y),E>0){let Ie=Vi(N,L,r,a);t.arc(Ie.x,Ie.y,E,S-pe,L)}}else{t.moveTo(r,a);let Z=Math.cos(L)*u+r,ce=Math.sin(L)*u+a;t.lineTo(Z,ce);let me=Math.cos(z)*u+r,Ze=Math.sin(z)*u+a;t.lineTo(me,Ze)}t.closePath()}function Uv(t,i,e,n,s){let{fullCircles:o,startAngle:r,circumference:a}=i,l=i.endAngle;if(o){_o(t,i,e,n,l,s);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=r+(a%oe||oe))}return _o(t,i,e,n,l,s),t.fill(),l}function Yv(t,i,e,n,s){let{fullCircles:o,startAngle:r,circumference:a,options:l}=i,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(u||[]),t.lineDashOffset=h,m?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let g=i.endAngle;if(o){_o(t,i,e,n,g,s);for(let b=0;b<o;++b)t.stroke();isNaN(a)||(g=r+(a%oe||oe))}m&&zv(t,i,g),o||(_o(t,i,e,n,g,s),t.stroke())}var La=class extends ut{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:i=>i!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(i){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,i&&Object.assign(this,i)}inRange(i,e,n){let s=this.getProps(["x","y"],n),{angle:o,distance:r}=th(s,{x:i,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,g=H(u,l-a)>=oe||An(o,a,l),b=ct(r,c+h,d+h);return g&&b}getCenterPoint(i){let{x:e,y:n,startAngle:s,endAngle:o,innerRadius:r,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],i),{offset:l,spacing:c}=this.options,d=(s+o)/2,u=(r+a+c+l)/2;return{x:e+Math.cos(d)*u,y:n+Math.sin(d)*u}}tooltipPosition(i){return this.getCenterPoint(i)}draw(i){let{options:e,circumference:n}=this,s=(e.offset||0)/4,o=(e.spacing||0)/2,r=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>oe?Math.floor(n/oe):0,n===0||this.innerRadius<0||this.outerRadius<0)return;i.save();let a=(this.startAngle+this.endAngle)/2;i.translate(Math.cos(a)*s,Math.sin(a)*s);let l=1-Math.sin(Math.min(se,n||0)),c=s*l;i.fillStyle=e.backgroundColor,i.strokeStyle=e.borderColor,Uv(i,this,c,o,r),Yv(i,this,c,o,r),i.restore()}};function _f(t,i,e=i){t.lineCap=H(e.borderCapStyle,i.borderCapStyle),t.setLineDash(H(e.borderDash,i.borderDash)),t.lineDashOffset=H(e.borderDashOffset,i.borderDashOffset),t.lineJoin=H(e.borderJoinStyle,i.borderJoinStyle),t.lineWidth=H(e.borderWidth,i.borderWidth),t.strokeStyle=H(e.borderColor,i.borderColor)}function qv(t,i,e){t.lineTo(e.x,e.y)}function Gv(t){return t.stepped?hh:t.tension||t.cubicInterpolationMode==="monotone"?fh:qv}function bf(t,i,e={}){let n=t.length,{start:s=0,end:o=n-1}=e,{start:r,end:a}=i,l=Math.max(s,r),c=Math.min(o,a),d=s<r&&o<r||s>a&&o>a;return{count:n,start:l,loop:i.loop,ilen:c<l&&!d?n+c-l:c-l}}function $v(t,i,e,n){let{points:s,options:o}=i,{count:r,start:a,loop:l,ilen:c}=bf(s,e,n),d=Gv(o),{move:u=!0,reverse:h}=n||{},m,g,b;for(m=0;m<=c;++m)g=s[(a+(h?c-m:m))%r],!g.skip&&(u?(t.moveTo(g.x,g.y),u=!1):d(t,b,g,h,o.stepped),b=g);return l&&(g=s[(a+(h?c:0))%r],d(t,b,g,h,o.stepped)),!!l}function Kv(t,i,e,n){let s=i.points,{count:o,start:r,ilen:a}=bf(s,e,n),{move:l=!0,reverse:c}=n||{},d=0,u=0,h,m,g,b,v,S,w=I=>(r+(c?a-I:I))%o,E=()=>{b!==v&&(t.lineTo(d,v),t.lineTo(d,b),t.lineTo(d,S))};for(l&&(m=s[w(0)],t.moveTo(m.x,m.y)),h=0;h<=a;++h){if(m=s[w(h)],m.skip)continue;let I=m.x,M=m.y,T=I|0;T===g?(M<b?b=M:M>v&&(v=M),d=(u*d+I)/++u):(E(),t.lineTo(I,M),g=T,u=0,b=v=M),S=M}E()}function Va(t){let i=t.options,e=i.borderDash&&i.borderDash.length;return!t._decimated&&!t._loop&&!i.tension&&i.cubicInterpolationMode!=="monotone"&&!i.stepped&&!e?Kv:$v}function Xv(t){return t.stepped?bh:t.tension||t.cubicInterpolationMode==="monotone"?xh:kt}function Qv(t,i,e,n){let s=i._path;s||(s=i._path=new Path2D,i.path(s,e,n)&&s.closePath()),_f(t,i.options),t.stroke(s)}function Jv(t,i,e,n){let{segments:s,options:o}=i,r=Va(i);for(let a of s)_f(t,o,a.style),t.beginPath(),r(t,i,a,{start:e,end:e+n-1})&&t.closePath(),t.stroke()}var Zv=typeof Path2D=="function";function ey(t,i,e,n){Zv&&!i.options.segment?Qv(t,i,e,n):Jv(t,i,e,n)}var vo=(()=>{class t extends ut{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){let s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){let o=s.spanGaps?this._loop:this._fullLoop;gh(this._points,s,e,o,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=yh(this,this.options.segment))}first(){let e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){let e=this.segments,n=this.points,s=e.length;return s&&n[e[s-1].end]}interpolate(e,n){let s=this.options,o=e[n],r=this.points,a=Ta(this,{property:n,start:o,end:o});if(!a.length)return;let l=[],c=Xv(s),d,u;for(d=0,u=a.length;d<u;++d){let{start:h,end:m}=a[d],g=r[h],b=r[m];if(g===b){l.push(g);continue}let v=Math.abs((o-g[n])/(b[n]-g[n])),S=c(g,b,v,s.stepped);S[n]=e[n],l.push(S)}return l.length===1?l[0]:l}pathSegment(e,n,s){return Va(this)(e,this,n,s)}path(e,n,s){let o=this.segments,r=Va(this),a=this._loop;n=n||0,s=s||this.points.length-n;for(let l of o)a&=r(e,this,l,{start:n,end:n+s-1});return!!a}draw(e,n,s,o){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),ey(e,this,s,o),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t})();function Wh(t,i,e,n){let s=t.options,{[e]:o}=t.getProps([e],n);return Math.abs(i-o)<s.radius+s.hitRadius}var ty=(()=>{class t extends ut{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,s){let o=this.options,{x:r,y:a}=this.getProps(["x","y"],s);return Math.pow(e-r,2)+Math.pow(n-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,n){return Wh(this,e,"x",n)}inYRange(e,n){return Wh(this,e,"y",n)}getCenterPoint(e){let{x:n,y:s}=this.getProps(["x","y"],e);return{x:n,y:s}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);let s=n&&e.borderWidth||0;return(n+s)*2}draw(e,n){let s=this.options;this.skip||s.radius<.1||!It(this,n,this.size(s)/2)||(e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.fillStyle=s.backgroundColor,ro(e,s,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return t})();function xf(t,i){let{x:e,y:n,base:s,width:o,height:r}=t.getProps(["x","y","base","width","height"],i),a,l,c,d,u;return t.horizontal?(u=r/2,a=Math.min(e,s),l=Math.max(e,s),c=n-u,d=n+u):(u=o/2,a=e-u,l=e+u,c=Math.min(n,s),d=Math.max(n,s)),{left:a,top:c,right:l,bottom:d}}function Ft(t,i,e,n){return t?0:xe(i,e,n)}function iy(t,i,e){let n=t.options.borderWidth,s=t.borderSkipped,o=Ca(n);return{t:Ft(s.top,o.top,0,e),r:Ft(s.right,o.right,0,i),b:Ft(s.bottom,o.bottom,0,e),l:Ft(s.left,o.left,0,i)}}function ny(t,i,e){let{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),s=t.options.borderRadius,o=At(s),r=Math.min(i,e),a=t.borderSkipped,l=n||J(s);return{topLeft:Ft(!l||a.top||a.left,o.topLeft,0,r),topRight:Ft(!l||a.top||a.right,o.topRight,0,r),bottomLeft:Ft(!l||a.bottom||a.left,o.bottomLeft,0,r),bottomRight:Ft(!l||a.bottom||a.right,o.bottomRight,0,r)}}function sy(t){let i=xf(t),e=i.right-i.left,n=i.bottom-i.top,s=iy(t,e/2,n/2),o=ny(t,e/2,n/2);return{outer:{x:i.left,y:i.top,w:e,h:n,radius:o},inner:{x:i.left+s.l,y:i.top+s.t,w:e-s.l-s.r,h:n-s.t-s.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(s.t,s.l)),topRight:Math.max(0,o.topRight-Math.max(s.t,s.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(s.b,s.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(s.b,s.r))}}}}function Oa(t,i,e,n){let s=i===null,o=e===null,a=t&&!(s&&o)&&xf(t,n);return a&&(s||ct(i,a.left,a.right))&&(o||ct(e,a.top,a.bottom))}function oy(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function ry(t,i){t.rect(i.x,i.y,i.w,i.h)}function Da(t,i,e={}){let n=t.x!==e.x?-i:0,s=t.y!==e.y?-i:0,o=(t.x+t.w!==e.x+e.w?i:0)-n,r=(t.y+t.h!==e.y+e.h?i:0)-s;return{x:t.x+n,y:t.y+s,w:t.w+o,h:t.h+r,radius:t.radius}}var Wa=class extends ut{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(i){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,i&&Object.assign(this,i)}draw(i){let{inflateAmount:e,options:{borderColor:n,backgroundColor:s}}=this,{inner:o,outer:r}=sy(this),a=oy(r.radius)?Ni:ry;i.save(),(r.w!==o.w||r.h!==o.h)&&(i.beginPath(),a(i,Da(r,e,o)),i.clip(),a(i,Da(o,-e,r)),i.fillStyle=n,i.fill("evenodd")),i.beginPath(),a(i,Da(o,e)),i.fillStyle=s,i.fill(),i.restore()}inRange(i,e,n){return Oa(this,i,e,n)}inXRange(i,e){return Oa(this,i,null,e)}inYRange(i,e){return Oa(this,null,i,e)}getCenterPoint(i){let{x:e,y:n,base:s,horizontal:o}=this.getProps(["x","y","base","horizontal"],i);return{x:o?(e+s)/2:e,y:o?n:(n+s)/2}}getRange(i){return i==="x"?this.width/2:this.height/2}},ay=Object.freeze({__proto__:null,ArcElement:La,BarElement:Wa,LineElement:vo,PointElement:ty}),Ba=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Bh=Ba.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function vf(t){return Ba[t%Ba.length]}function yf(t){return Bh[t%Bh.length]}function ly(t,i){return t.borderColor=vf(i),t.backgroundColor=yf(i),++i}function cy(t,i){return t.backgroundColor=t.data.map(()=>vf(i++)),i}function dy(t,i){return t.backgroundColor=t.data.map(()=>yf(i++)),i}function uy(t){let i=0;return(e,n)=>{let s=t.getDatasetMeta(n).controller;s instanceof $a?i=cy(e,i):s instanceof pf?i=dy(e,i):s&&(i=ly(e,i))}}function zh(t){let i;for(i in t)if(t[i].borderColor||t[i].backgroundColor)return!0;return!1}function hy(t){return t&&(t.borderColor||t.backgroundColor)}var fy={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,i,e){if(!e.enabled)return;let{data:{datasets:n},options:s}=t.config,{elements:o}=s;if(!e.forceOverride&&(zh(n)||hy(s)||o&&zh(o)))return;let r=uy(t);n.forEach(r)}};function py(t,i,e,n,s){let o=s.samples||n;if(o>=e)return t.slice(i,i+e);let r=[],a=(e-2)/(o-2),l=0,c=i+e-1,d=i,u,h,m,g,b;for(r[l++]=t[d],u=0;u<o-2;u++){let v=0,S=0,w,E=Math.floor((u+1)*a)+1+i,I=Math.min(Math.floor((u+2)*a)+1,e)+i,M=I-E;for(w=E;w<I;w++)v+=t[w].x,S+=t[w].y;v/=M,S/=M;let T=Math.floor(u*a)+1+i,N=Math.min(Math.floor((u+1)*a)+1,e)+i,{x:D,y:L}=t[d];for(m=g=-1,w=T;w<N;w++)g=.5*Math.abs((D-v)*(t[w].y-L)-(D-t[w].x)*(S-L)),g>m&&(m=g,h=t[w],b=w);r[l++]=h,d=b}return r[l++]=t[c],r}function my(t,i,e,n){let s=0,o=0,r,a,l,c,d,u,h,m,g,b,v=[],S=i+e-1,w=t[i].x,I=t[S].x-w;for(r=i;r<i+e;++r){a=t[r],l=(a.x-w)/I*n,c=a.y;let M=l|0;if(M===d)c<g?(g=c,u=r):c>b&&(b=c,h=r),s=(o*s+a.x)/++o;else{let T=r-1;if(!Q(u)&&!Q(h)){let N=Math.min(u,h),D=Math.max(u,h);N!==m&&N!==T&&v.push(Qn(Xn({},t[N]),{x:s})),D!==m&&D!==T&&v.push(Qn(Xn({},t[D]),{x:s}))}r>0&&T!==m&&v.push(t[T]),v.push(a),d=M,o=0,g=b=c,u=h=m=r}}return v}function Cf(t){if(t._decimated){let i=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:i})}}function jh(t){t.data.datasets.forEach(i=>{Cf(i)})}function gy(t,i){let e=i.length,n=0,s,{iScale:o}=t,{min:r,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(n=xe(_t(i,o.axis,r).lo,0,e-1)),c?s=xe(_t(i,o.axis,a).hi+1,n,e)-n:s=e-n,{start:n,count:s}}var _y={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,i,e)=>{if(!e.enabled){jh(t);return}let n=t.width;t.data.datasets.forEach((s,o)=>{let{_data:r,indexAxis:a}=s,l=t.getDatasetMeta(o),c=r||s.data;if(Li([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:u,count:h}=gy(l,c),m=e.threshold||4*n;if(h<=m){Cf(s);return}Q(r)&&(s._data=c,delete s.data,Object.defineProperty(s,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(e.algorithm){case"lttb":g=py(c,u,h,n,e);break;case"min-max":g=my(c,u,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}s._decimated=g})},destroy(t){jh(t)}};function by(t,i,e){let n=t.segments,s=t.points,o=i.points,r=[];for(let a of n){let{start:l,end:c}=a;c=Ka(l,c,s);let d=za(e,s[l],s[c],a.loop);if(!i.segments){r.push({source:a,target:d,start:s[l],end:s[c]});continue}let u=Ta(i,d);for(let h of u){let m=za(e,o[h.start],o[h.end],h.loop),g=Ea(a,s,m);for(let b of g)r.push({source:b,target:h,start:{[e]:Hh(d,m,"start",Math.max)},end:{[e]:Hh(d,m,"end",Math.min)}})}}return r}function za(t,i,e,n){if(n)return;let s=i[t],o=e[t];return t==="angle"&&(s=Le(s),o=Le(o)),{property:t,start:s,end:o}}function xy(t,i){let{x:e=null,y:n=null}=t||{},s=i.points,o=[];return i.segments.forEach(({start:r,end:a})=>{a=Ka(r,a,s);let l=s[r],c=s[a];n!==null?(o.push({x:l.x,y:n}),o.push({x:c.x,y:n})):e!==null&&(o.push({x:e,y:l.y}),o.push({x:e,y:c.y}))}),o}function Ka(t,i,e){for(;i>t;i--){let n=e[i];if(!isNaN(n.x)&&!isNaN(n.y))break}return i}function Hh(t,i,e,n){return t&&i?n(t[e],i[e]):t?t[e]:i?i[e]:0}function wf(t,i){let e=[],n=!1;return he(t)?(n=!0,e=t):e=xy(t,i),e.length?new vo({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function Uh(t){return t&&t.fill!==!1}function vy(t,i,e){let s=t[i].fill,o=[i],r;if(!e)return s;for(;s!==!1&&o.indexOf(s)===-1;){if(!fe(s))return s;if(r=t[s],!r)return!1;if(r.visible)return s;o.push(s),s=r.fill}return!1}function yy(t,i,e){let n=My(t);if(J(n))return isNaN(n.value)?!1:n;let s=parseFloat(n);return fe(s)&&Math.floor(s)===s?Cy(n[0],i,s,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function Cy(t,i,e,n){return(t==="-"||t==="+")&&(e=i+e),e===i||e<0||e>=n?!1:e}function wy(t,i){let e=null;return t==="start"?e=i.bottom:t==="end"?e=i.top:J(t)?e=i.getPixelForValue(t.value):i.getBasePixel&&(e=i.getBasePixel()),e}function Sy(t,i,e){let n;return t==="start"?n=e:t==="end"?n=i.options.reverse?i.min:i.max:J(t)?n=t.value:n=i.getBaseValue(),n}function My(t){let i=t.options,e=i.fill,n=H(e&&e.target,e);return n===void 0&&(n=!!i.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function Ey(t){let{scale:i,index:e,line:n}=t,s=[],o=n.segments,r=n.points,a=Ty(i,e);a.push(wf({x:null,y:i.bottom},n));for(let l=0;l<o.length;l++){let c=o[l];for(let d=c.start;d<=c.end;d++)Py(s,r[d],a)}return new vo({points:s,options:{}})}function Ty(t,i){let e=[],n=t.getMatchingVisibleMetas("line");for(let s=0;s<n.length;s++){let o=n[s];if(o.index===i)break;o.hidden||e.unshift(o.dataset)}return e}function Py(t,i,e){let n=[];for(let s=0;s<e.length;s++){let o=e[s],{first:r,last:a,point:l}=ky(o,i,"x");if(!(!l||r&&a)){if(r)n.unshift(l);else if(t.push(l),!a)break}}t.push(...n)}function ky(t,i,e){let n=t.interpolate(i,e);if(!n)return{};let s=n[e],o=t.segments,r=t.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let d=o[c],u=r[d.start][e],h=r[d.end][e];if(ct(s,u,h)){a=s===u,l=s===h;break}}return{first:a,last:l,point:n}}var bo=class{constructor(i){this.x=i.x,this.y=i.y,this.radius=i.radius}pathSegment(i,e,n){let{x:s,y:o,radius:r}=this;return e=e||{start:0,end:oe},i.arc(s,o,r,e.end,e.start,!0),!n.bounds}interpolate(i){let{x:e,y:n,radius:s}=this,o=i.angle;return{x:e+Math.cos(o)*s,y:n+Math.sin(o)*s,angle:o}}};function Iy(t){let{chart:i,fill:e,line:n}=t;if(fe(e))return Oy(i,e);if(e==="stack")return Ey(t);if(e==="shape")return!0;let s=Dy(t);return s instanceof bo?s:wf(s,n)}function Oy(t,i){let e=t.getDatasetMeta(i);return e&&t.isDatasetVisible(i)?e.dataset:null}function Dy(t){return(t.scale||{}).getPointPositionForValue?Ry(t):Ay(t)}function Ay(t){let{scale:i={},fill:e}=t,n=wy(e,i);if(fe(n)){let s=i.isHorizontal();return{x:s?n:null,y:s?null:n}}return null}function Ry(t){let{scale:i,fill:e}=t,n=i.options,s=i.getLabels().length,o=n.reverse?i.max:i.min,r=Sy(e,i,o),a=[];if(n.grid.circular){let l=i.getPointPositionForValue(0,o);return new bo({x:l.x,y:l.y,radius:i.getDistanceFromCenterForValue(r)})}for(let l=0;l<s;++l)a.push(i.getPointPositionForValue(l,r));return a}function Aa(t,i,e){let n=Iy(i),{line:s,scale:o,axis:r}=i,a=s.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:u=c}=l||{};n&&s.points.length&&(ao(t,e),Fy(t,{line:s,target:n,above:d,below:u,area:e,scale:o,axis:r}),lo(t))}function Fy(t,i){let{line:e,target:n,above:s,below:o,area:r,scale:a}=i,l=e._loop?"angle":i.axis;t.save(),l==="x"&&o!==s&&(Yh(t,n,r.top),qh(t,{line:e,target:n,color:s,scale:a,property:l}),t.restore(),t.save(),Yh(t,n,r.bottom)),qh(t,{line:e,target:n,color:o,scale:a,property:l}),t.restore()}function Yh(t,i,e){let{segments:n,points:s}=i,o=!0,r=!1;t.beginPath();for(let a of n){let{start:l,end:c}=a,d=s[l],u=s[Ka(l,c,s)];o?(t.moveTo(d.x,d.y),o=!1):(t.lineTo(d.x,e),t.lineTo(d.x,d.y)),r=!!i.pathSegment(t,a,{move:r}),r?t.closePath():t.lineTo(u.x,e)}t.lineTo(i.first().x,e),t.closePath(),t.clip()}function qh(t,i){let{line:e,target:n,property:s,color:o,scale:r}=i,a=by(e,n,s);for(let{source:l,target:c,start:d,end:u}of a){let{style:{backgroundColor:h=o}={}}=l,m=n!==!0;t.save(),t.fillStyle=h,Ny(t,r,m&&za(s,d,u)),t.beginPath();let g=!!e.pathSegment(t,l),b;if(m){g?t.closePath():Gh(t,n,u,s);let v=!!n.pathSegment(t,c,{move:g,reverse:!0});b=g&&v,b||Gh(t,n,d,s)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function Ny(t,i,e){let{top:n,bottom:s}=i.chart.chartArea,{property:o,start:r,end:a}=e||{};o==="x"&&(t.beginPath(),t.rect(r,n,a-r,s-n),t.clip())}function Gh(t,i,e,n){let s=i.interpolate(e,n);s&&t.lineTo(s.x,s.y)}var Ly={id:"filler",afterDatasetsUpdate(t,i,e){let n=(t.data.datasets||[]).length,s=[],o,r,a,l;for(r=0;r<n;++r)o=t.getDatasetMeta(r),a=o.dataset,l=null,a&&a.options&&a instanceof vo&&(l={visible:t.isDatasetVisible(r),index:r,fill:yy(a,r,n),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,s.push(l);for(r=0;r<n;++r)l=s[r],!(!l||l.fill===!1)&&(l.fill=vy(s,r,e.propagate))},beforeDraw(t,i,e){let n=e.drawTime==="beforeDraw",s=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let r=s.length-1;r>=0;--r){let a=s[r].$filler;a&&(a.line.updateControlPoints(o,a.axis),n&&a.fill&&Aa(t.ctx,a,o))}},beforeDatasetsDraw(t,i,e){if(e.drawTime!=="beforeDatasetsDraw")return;let n=t.getSortedVisibleDatasetMetas();for(let s=n.length-1;s>=0;--s){let o=n[s].$filler;Uh(o)&&Aa(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,i,e){let n=i.meta.$filler;!Uh(n)||e.drawTime!=="beforeDatasetDraw"||Aa(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},$h=(t,i)=>{let{boxHeight:e=i,boxWidth:n=i}=t;return t.usePointStyle&&(e=Math.min(e,i),n=t.pointStyleWidth||Math.min(n,i)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(i,e)}},Vy=(t,i)=>t!==null&&i!==null&&t.datasetIndex===i.datasetIndex&&t.index===i.index,xo=class extends ut{constructor(i){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e,n){this.maxWidth=i,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let i=this.options.labels||{},e=ve(i.generateLabels,[this.chart],this)||[];i.filter&&(e=e.filter(n=>i.filter(n,this.chart.data))),i.sort&&(e=e.sort((n,s)=>i.sort(n,s,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:i,ctx:e}=this;if(!i.display){this.width=this.height=0;return}let n=i.labels,s=_e(n.font),o=s.size,r=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=$h(n,o),c,d;e.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(r,o,a,l)+10):(d=this.maxHeight,c=this._fitCols(r,s,a,l)+10),this.width=Math.min(c,i.maxWidth||this.maxWidth),this.height=Math.min(d,i.maxHeight||this.maxHeight)}_fitRows(i,e,n,s){let{ctx:o,maxWidth:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=s+a,u=i;o.textAlign="left",o.textBaseline="middle";let h=-1,m=-d;return this.legendItems.forEach((g,b)=>{let v=n+e/2+o.measureText(g.text).width;(b===0||c[c.length-1]+v+2*a>r)&&(u+=d,c[c.length-(b>0?0:1)]=0,m+=d,h++),l[b]={left:0,top:m,row:h,width:v,height:s},c[c.length-1]+=v+a}),u}_fitCols(i,e,n,s){let{ctx:o,maxHeight:r,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=r-i,u=a,h=0,m=0,g=0,b=0;return this.legendItems.forEach((v,S)=>{let{itemWidth:w,itemHeight:E}=Wy(n,e,o,v,s);S>0&&m+E+2*a>d&&(u+=h+a,c.push({width:h,height:m}),g+=h+a,b++,h=m=0),l[S]={left:g,top:m,col:b,width:w,height:E},h=Math.max(h,w),m+=E+a}),u+=h,c.push({width:h,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;let i=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:s},rtl:o}}=this,r=ii(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Pe(n,this.left+s,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=Pe(n,this.left+s,this.right-this.lineWidths[a])),c.top+=this.top+i+s,c.left=r.leftForLtr(r.x(l),c.width),l+=c.width+s}else{let a=0,l=Pe(n,this.top+i+s,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=Pe(n,this.top+i+s,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+s,c.left=r.leftForLtr(r.x(c.left),c.width),l+=c.height+s}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let i=this.ctx;ao(i,this),this._draw(),lo(i)}}_draw(){let{options:i,columnSizes:e,lineWidths:n,ctx:s}=this,{align:o,labels:r}=i,a=ti.color,l=ii(i.rtl,this.left,this.width),c=_e(r.font),{padding:d}=r,u=c.size,h=u/2,m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;let{boxWidth:g,boxHeight:b,itemHeight:v}=$h(r,u),S=function(T,N,D){if(isNaN(g)||g<=0||isNaN(b)||b<0)return;s.save();let L=H(D.lineWidth,1);if(s.fillStyle=H(D.fillStyle,a),s.lineCap=H(D.lineCap,"butt"),s.lineDashOffset=H(D.lineDashOffset,0),s.lineJoin=H(D.lineJoin,"miter"),s.lineWidth=L,s.strokeStyle=H(D.strokeStyle,a),s.setLineDash(H(D.lineDash,[])),r.usePointStyle){let z={radius:b*Math.SQRT2/2,pointStyle:D.pointStyle,rotation:D.rotation,borderWidth:L},B=l.xPlus(T,g/2),G=N+h;ya(s,z,B,G,r.pointStyleWidth&&g)}else{let z=N+Math.max((u-b)/2,0),B=l.leftForLtr(T,g),G=At(D.borderRadius);s.beginPath(),Object.values(G).some(Ee=>Ee!==0)?Ni(s,{x:B,y:z,w:g,h:b,radius:G}):s.rect(B,z,g,b),s.fill(),L!==0&&s.stroke()}s.restore()},w=function(T,N,D){Dt(s,D.text,T,N+v/2,c,{strikethrough:D.hidden,textAlign:l.textAlign(D.textAlign)})},E=this.isHorizontal(),I=this._computeTitleHeight();E?m={x:Pe(o,this.left+d,this.right-n[0]),y:this.top+d+I,line:0}:m={x:this.left+d,y:Pe(o,this.top+I+d,this.bottom-e[0].height),line:0},Sa(this.ctx,i.textDirection);let M=v+d;this.legendItems.forEach((T,N)=>{s.strokeStyle=T.fontColor,s.fillStyle=T.fontColor;let D=s.measureText(T.text).width,L=l.textAlign(T.textAlign||(T.textAlign=r.textAlign)),z=g+h+D,B=m.x,G=m.y;l.setWidth(this.width),E?N>0&&B+z+d>this.right&&(G=m.y+=M,m.line++,B=m.x=Pe(o,this.left+d,this.right-n[m.line])):N>0&&G+M>this.bottom&&(B=m.x=B+e[m.line].width+d,m.line++,G=m.y=Pe(o,this.top+I+d,this.bottom-e[m.line].height));let Ee=l.x(B);if(S(Ee,G,T),B=ah(L,B+g+h,E?B+z:this.right,i.rtl),w(l.x(B),G,T),E)m.x+=z+d;else if(typeof T.text!="string"){let je=c.lineHeight;m.y+=Sf(T,je)+d}else m.y+=M}),Ma(this.ctx,i.textDirection)}drawTitle(){let i=this.options,e=i.title,n=_e(e.font),s=ke(e.padding);if(!e.display)return;let o=ii(i.rtl,this.left,this.width),r=this.ctx,a=e.position,l=n.size/2,c=s.top+l,d,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+c,u=Pe(i.align,u,this.right-h);else{let g=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);d=c+Pe(i.align,this.top,this.bottom-g-i.labels.padding-this._computeTitleHeight())}let m=Pe(a,u,u+h);r.textAlign=o.textAlign(oo(a)),r.textBaseline="middle",r.strokeStyle=e.color,r.fillStyle=e.color,r.font=n.string,Dt(r,e.text,m,d,n)}_computeTitleHeight(){let i=this.options.title,e=_e(i.font),n=ke(i.padding);return i.display?e.lineHeight+n.height:0}_getLegendItemAt(i,e){let n,s,o;if(ct(i,this.left,this.right)&&ct(e,this.top,this.bottom)){for(o=this.legendHitBoxes,n=0;n<o.length;++n)if(s=o[n],ct(i,s.left,s.left+s.width)&&ct(e,s.top,s.top+s.height))return this.legendItems[n]}return null}handleEvent(i){let e=this.options;if(!jy(i.type,e))return;let n=this._getLegendItemAt(i.x,i.y);if(i.type==="mousemove"||i.type==="mouseout"){let s=this._hoveredItem,o=Vy(s,n);s&&!o&&ve(e.onLeave,[i,s,this],this),this._hoveredItem=n,n&&!o&&ve(e.onHover,[i,n,this],this)}else n&&ve(e.onClick,[i,n,this],this)}};function Wy(t,i,e,n,s){let o=By(n,t,i,e),r=zy(s,n,i.lineHeight);return{itemWidth:o,itemHeight:r}}function By(t,i,e,n){let s=t.text;return s&&typeof s!="string"&&(s=s.reduce((o,r)=>o.length>r.length?o:r)),i+e.size/2+n.measureText(s).width}function zy(t,i,e){let n=t;return typeof i.text!="string"&&(n=Sf(i,e)),n}function Sf(t,i){let e=t.text?t.text.length:0;return i*e}function jy(t,i){return!!((t==="mousemove"||t==="mouseout")&&(i.onHover||i.onLeave)||i.onClick&&(t==="click"||t==="mouseup"))}var Hy={id:"legend",_element:xo,start(t,i,e){let n=t.legend=new xo({ctx:t.ctx,options:e,chart:t});Qe.configure(t,n,e),Qe.addBox(t,n)},stop(t){Qe.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,i,e){let n=t.legend;Qe.configure(t,n,e),n.options=e},afterUpdate(t){let i=t.legend;i.buildLabels(),i.adjustHitBoxes()},afterEvent(t,i){i.replay||t.legend.handleEvent(i.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,i,e){let n=i.datasetIndex,s=e.chart;s.isDatasetVisible(n)?(s.hide(n),i.hidden=!0):(s.show(n),i.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let i=t.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:s,color:o,useBorderRadius:r,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),d=ke(c.borderWidth);return{text:i[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:s||c.textAlign,borderRadius:r&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},zn=class extends ut{constructor(i){super(),this.chart=i.chart,this.options=i.options,this.ctx=i.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(i,e){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=i,this.height=this.bottom=e;let s=he(n.text)?n.text.length:1;this._padding=ke(n.padding);let o=s*_e(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let i=this.options.position;return i==="top"||i==="bottom"}_drawArgs(i){let{top:e,left:n,bottom:s,right:o,options:r}=this,a=r.align,l=0,c,d,u;return this.isHorizontal()?(d=Pe(a,n,o),u=e+i,c=o-n):(r.position==="left"?(d=n+i,u=Pe(a,s,e),l=se*-.5):(d=o-i,u=Pe(a,e,s),l=se*.5),c=s-e),{titleX:d,titleY:u,maxWidth:c,rotation:l}}draw(){let i=this.ctx,e=this.options;if(!e.display)return;let n=_e(e.font),o=n.lineHeight/2+this._padding.top,{titleX:r,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Dt(i,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:c,textAlign:oo(e.align),textBaseline:"middle",translation:[r,a]})}};function Uy(t,i){let e=new zn({ctx:t.ctx,options:i,chart:t});Qe.configure(t,e,i),Qe.addBox(t,e),t.titleBlock=e}var Yy={id:"title",_element:zn,start(t,i,e){Uy(t,e)},stop(t){let i=t.titleBlock;Qe.removeBox(t,i),delete t.titleBlock},beforeUpdate(t,i,e){let n=t.titleBlock;Qe.configure(t,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},fo=new WeakMap,qy={id:"subtitle",start(t,i,e){let n=new zn({ctx:t.ctx,options:e,chart:t});Qe.configure(t,n,e),Qe.addBox(t,n),fo.set(t,n)},stop(t){Qe.removeBox(t,fo.get(t)),fo.delete(t)},beforeUpdate(t,i,e){let n=fo.get(t);Qe.configure(t,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Bn={average(t){if(!t.length)return!1;let i,e,n=new Set,s=0,o=0;for(i=0,e=t.length;i<e;++i){let a=t[i].element;if(a&&a.hasValue()){let l=a.tooltipPosition();n.add(l.x),s+=l.y,++o}}return{x:[...n].reduce((a,l)=>a+l)/n.size,y:s/o}},nearest(t,i){if(!t.length)return!1;let e=i.x,n=i.y,s=Number.POSITIVE_INFINITY,o,r,a;for(o=0,r=t.length;o<r;++o){let l=t[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=no(i,c);d<s&&(s=d,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function dt(t,i){return i&&(he(i)?Array.prototype.push.apply(t,i):t.push(i)),t}function xt(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Gy(t,i){let{element:e,datasetIndex:n,index:s}=i,o=t.getDatasetMeta(n).controller,{label:r,value:a}=o.getLabelAndValue(s);return{chart:t,label:r,parsed:o.getParsed(s),raw:t.data.datasets[n].data[s],formattedValue:a,dataset:o.getDataset(),dataIndex:s,datasetIndex:n,element:e}}function Kh(t,i){let e=t.chart.ctx,{body:n,footer:s,title:o}=t,{boxWidth:r,boxHeight:a}=i,l=_e(i.bodyFont),c=_e(i.titleFont),d=_e(i.footerFont),u=o.length,h=s.length,m=n.length,g=ke(i.padding),b=g.height,v=0,S=n.reduce((I,M)=>I+M.before.length+M.lines.length+M.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,u&&(b+=u*c.lineHeight+(u-1)*i.titleSpacing+i.titleMarginBottom),S){let I=i.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*I+(S-m)*l.lineHeight+(S-1)*i.bodySpacing}h&&(b+=i.footerMarginTop+h*d.lineHeight+(h-1)*i.footerSpacing);let w=0,E=function(I){v=Math.max(v,e.measureText(I).width+w)};return e.save(),e.font=c.string,Te(t.title,E),e.font=l.string,Te(t.beforeBody.concat(t.afterBody),E),w=i.displayColors?r+2+i.boxPadding:0,Te(n,I=>{Te(I.before,E),Te(I.lines,E),Te(I.after,E)}),w=0,e.font=d.string,Te(t.footer,E),e.restore(),v+=g.width,{width:v,height:b}}function $y(t,i){let{y:e,height:n}=i;return e<n/2?"top":e>t.height-n/2?"bottom":"center"}function Ky(t,i,e,n){let{x:s,width:o}=n,r=e.caretSize+e.caretPadding;if(t==="left"&&s+o+r>i.width||t==="right"&&s-o-r<0)return!0}function Xy(t,i,e,n){let{x:s,width:o}=e,{width:r,chartArea:{left:a,right:l}}=t,c="center";return n==="center"?c=s<=(a+l)/2?"left":"right":s<=o/2?c="left":s>=r-o/2&&(c="right"),Ky(c,t,i,e)&&(c="center"),c}function Xh(t,i,e){let n=e.yAlign||i.yAlign||$y(t,e);return{xAlign:e.xAlign||i.xAlign||Xy(t,i,e,n),yAlign:n}}function Qy(t,i){let{x:e,width:n}=t;return i==="right"?e-=n:i==="center"&&(e-=n/2),e}function Jy(t,i,e){let{y:n,height:s}=t;return i==="top"?n+=e:i==="bottom"?n-=s+e:n-=s/2,n}function Qh(t,i,e,n){let{caretSize:s,caretPadding:o,cornerRadius:r}=t,{xAlign:a,yAlign:l}=e,c=s+o,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=At(r),g=Qy(i,a),b=Jy(i,l,c);return l==="center"?a==="left"?g+=c:a==="right"&&(g-=c):a==="left"?g-=Math.max(d,h)+s:a==="right"&&(g+=Math.max(u,m)+s),{x:xe(g,0,n.width-i.width),y:xe(b,0,n.height-i.height)}}function po(t,i,e){let n=ke(e.padding);return i==="center"?t.x+t.width/2:i==="right"?t.x+t.width-n.right:t.x+n.left}function Jh(t){return dt([],xt(t))}function Zy(t,i,e){return Rt(t,{tooltip:i,tooltipItems:e,type:"tooltip"})}function Zh(t,i){let e=i&&i.dataset&&i.dataset.tooltip&&i.dataset.tooltip.callbacks;return e?t.override(e):t}var Mf={beforeTitle:lt,title(t){if(t.length>0){let i=t[0],e=i.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return i.dataset.label||"";if(i.label)return i.label;if(n>0&&i.dataIndex<n)return e[i.dataIndex]}return""},afterTitle:lt,beforeBody:lt,beforeLabel:lt,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let i=t.dataset.label||"";i&&(i+=": ");let e=t.formattedValue;return Q(e)||(i+=e),i},labelColor(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:lt,afterBody:lt,beforeFooter:lt,footer:lt,afterFooter:lt};function We(t,i,e,n){let s=t[i].call(e,n);return typeof s>"u"?Mf[i].call(e,n):s}var ef=(()=>{class t extends ut{static positioners=Bn;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let n=this.chart,s=this.options.setContext(this.getContext()),o=s.enabled&&n.options.animation&&s.animations,r=new go(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=Zy(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){let{callbacks:s}=n,o=We(s,"beforeTitle",this,e),r=We(s,"title",this,e),a=We(s,"afterTitle",this,e),l=[];return l=dt(l,xt(o)),l=dt(l,xt(r)),l=dt(l,xt(a)),l}getBeforeBody(e,n){return Jh(We(n.callbacks,"beforeBody",this,e))}getBody(e,n){let{callbacks:s}=n,o=[];return Te(e,r=>{let a={before:[],lines:[],after:[]},l=Zh(s,r);dt(a.before,xt(We(l,"beforeLabel",this,r))),dt(a.lines,We(l,"label",this,r)),dt(a.after,xt(We(l,"afterLabel",this,r))),o.push(a)}),o}getAfterBody(e,n){return Jh(We(n.callbacks,"afterBody",this,e))}getFooter(e,n){let{callbacks:s}=n,o=We(s,"beforeFooter",this,e),r=We(s,"footer",this,e),a=We(s,"afterFooter",this,e),l=[];return l=dt(l,xt(o)),l=dt(l,xt(r)),l=dt(l,xt(a)),l}_createItems(e){let n=this._active,s=this.chart.data,o=[],r=[],a=[],l=[],c,d;for(c=0,d=n.length;c<d;++c)l.push(Gy(this.chart,n[c]));return e.filter&&(l=l.filter((u,h,m)=>e.filter(u,h,m,s))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,s))),Te(l,u=>{let h=Zh(e.callbacks,u);o.push(We(h,"labelColor",this,u)),r.push(We(h,"labelPointStyle",this,u)),a.push(We(h,"labelTextColor",this,u))}),this.labelColors=o,this.labelPointStyles=r,this.labelTextColors=a,this.dataPoints=l,l}update(e,n){let s=this.options.setContext(this.getContext()),o=this._active,r,a=[];if(!o.length)this.opacity!==0&&(r={opacity:0});else{let l=Bn[s.position].call(this,o,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);let c=this._size=Kh(this,s),d=Object.assign({},l,c),u=Xh(this.chart,s,d),h=Qh(s,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,s,o){let r=this.getCaretPosition(e,s,o);n.lineTo(r.x1,r.y1),n.lineTo(r.x2,r.y2),n.lineTo(r.x3,r.y3)}getCaretPosition(e,n,s){let{xAlign:o,yAlign:r}=this,{caretSize:a,cornerRadius:l}=s,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=At(l),{x:m,y:g}=e,{width:b,height:v}=n,S,w,E,I,M,T;return r==="center"?(M=g+v/2,o==="left"?(S=m,w=S-a,I=M+a,T=M-a):(S=m+b,w=S+a,I=M-a,T=M+a),E=S):(o==="left"?w=m+Math.max(c,u)+a:o==="right"?w=m+b-Math.max(d,h)-a:w=this.caretX,r==="top"?(I=g,M=I-a,S=w-a,E=w+a):(I=g+v,M=I+a,S=w+a,E=w-a),T=I),{x1:S,x2:w,x3:E,y1:I,y2:M,y3:T}}drawTitle(e,n,s){let o=this.title,r=o.length,a,l,c;if(r){let d=ii(s.rtl,this.x,this.width);for(e.x=po(this,s.titleAlign,s),n.textAlign=d.textAlign(s.titleAlign),n.textBaseline="middle",a=_e(s.titleFont),l=s.titleSpacing,n.fillStyle=s.titleColor,n.font=a.string,c=0;c<r;++c)n.fillText(o[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===r&&(e.y+=s.titleMarginBottom-l)}}_drawColorBox(e,n,s,o,r){let a=this.labelColors[s],l=this.labelPointStyles[s],{boxHeight:c,boxWidth:d}=r,u=_e(r.bodyFont),h=po(this,"left",r),m=o.x(h),g=c<u.lineHeight?(u.lineHeight-c)/2:0,b=n.y+g;if(r.usePointStyle){let v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},S=o.leftForLtr(m,d)+d/2,w=b+c/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,ro(e,v,S,w),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ro(e,v,S,w)}else{e.lineWidth=J(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let v=o.leftForLtr(m,d),S=o.leftForLtr(o.xPlus(m,1),d-2),w=At(a.borderRadius);Object.values(w).some(E=>E!==0)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,Ni(e,{x:v,y:b,w:d,h:c,radius:w}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Ni(e,{x:S,y:b+1,w:d-2,h:c-2,radius:w}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(v,b,d,c),e.strokeRect(v,b,d,c),e.fillStyle=a.backgroundColor,e.fillRect(S,b+1,d-2,c-2))}e.fillStyle=this.labelTextColors[s]}drawBody(e,n,s){let{body:o}=this,{bodySpacing:r,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=s,h=_e(s.bodyFont),m=h.lineHeight,g=0,b=ii(s.rtl,this.x,this.width),v=function(L){n.fillText(L,b.x(e.x+g),e.y+m/2),e.y+=m+r},S=b.textAlign(a),w,E,I,M,T,N,D;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,e.x=po(this,S,s),n.fillStyle=s.bodyColor,Te(this.beforeBody,v),g=l&&S!=="right"?a==="center"?d/2+u:d+2+u:0,M=0,N=o.length;M<N;++M){for(w=o[M],E=this.labelTextColors[M],n.fillStyle=E,Te(w.before,v),I=w.lines,l&&I.length&&(this._drawColorBox(n,e,M,b,s),m=Math.max(h.lineHeight,c)),T=0,D=I.length;T<D;++T)v(I[T]),m=h.lineHeight;Te(w.after,v)}g=0,m=h.lineHeight,Te(this.afterBody,v),e.y-=r}drawFooter(e,n,s){let o=this.footer,r=o.length,a,l;if(r){let c=ii(s.rtl,this.x,this.width);for(e.x=po(this,s.footerAlign,s),e.y+=s.footerMarginTop,n.textAlign=c.textAlign(s.footerAlign),n.textBaseline="middle",a=_e(s.footerFont),n.fillStyle=s.footerColor,n.font=a.string,l=0;l<r;++l)n.fillText(o[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+s.footerSpacing}}drawBackground(e,n,s,o){let{xAlign:r,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=s,{topLeft:h,topRight:m,bottomLeft:g,bottomRight:b}=At(o.cornerRadius);n.fillStyle=o.backgroundColor,n.strokeStyle=o.borderColor,n.lineWidth=o.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(e,n,s,o),n.lineTo(l+d-m,c),n.quadraticCurveTo(l+d,c,l+d,c+m),a==="center"&&r==="right"&&this.drawCaret(e,n,s,o),n.lineTo(l+d,c+u-b),n.quadraticCurveTo(l+d,c+u,l+d-b,c+u),a==="bottom"&&this.drawCaret(e,n,s,o),n.lineTo(l+g,c+u),n.quadraticCurveTo(l,c+u,l,c+u-g),a==="center"&&r==="left"&&this.drawCaret(e,n,s,o),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),o.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){let n=this.chart,s=this.$animations,o=s&&s.x,r=s&&s.y;if(o||r){let a=Bn[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=Kh(this,e),c=Object.assign({},a,this._size),d=Xh(n,e,c),u=Qh(e,c,d,n);(o._to!==u.x||r._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let n=this.options.setContext(this.getContext()),s=this.opacity;if(!s)return;this._updateAnimationTarget(n);let o={width:this.width,height:this.height},r={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;let a=ke(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=s,this.drawBackground(r,e,o,n),Sa(e,n.textDirection),r.y+=a.top,this.drawTitle(r,e,n),this.drawBody(r,e,n),this.drawFooter(r,e,n),Ma(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){let s=this._active,o=e.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),r=!ca(s,o),a=this._positionChanged(o,n);(r||a)&&(this._active=o,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,s=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,r=this._active||[],a=this._getActiveElements(e,r,n,s),l=this._positionChanged(a,e),c=n||!ca(a,r)||l;return c&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,s,o){let r=this.options;if(e.type==="mouseout")return[];if(!o)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,r.mode,r,s);return r.reverse&&a.reverse(),a}_positionChanged(e,n){let{caretX:s,caretY:o,options:r}=this,a=Bn[r.position].call(this,e,n);return a!==!1&&(s!==a.x||o!==a.y)}}return t})(),eC={id:"tooltip",_element:ef,positioners:Bn,afterInit(t,i,e){e&&(t.tooltip=new ef({chart:t,options:e}))},beforeUpdate(t,i,e){t.tooltip&&t.tooltip.initialize(e)},reset(t,i,e){t.tooltip&&t.tooltip.initialize(e)},afterDraw(t){let i=t.tooltip;if(i&&i._willRender()){let e={tooltip:i};if(t.notifyPlugins("beforeTooltipDraw",Qn(Xn({},e),{cancelable:!0}))===!1)return;i.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",e)}},afterEvent(t,i){if(t.tooltip){let e=i.replay;t.tooltip.handleEvent(i.event,e,i.inChartArea)&&(i.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,i)=>i.bodyFont.size,boxWidth:(t,i)=>i.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Mf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},tC=Object.freeze({__proto__:null,Colors:fy,Decimation:_y,Filler:Ly,Legend:Hy,SubTitle:qy,Title:Yy,Tooltip:eC}),iC=(t,i,e,n)=>(typeof i=="string"?(e=t.push(i)-1,n.unshift({index:e,label:i})):isNaN(i)&&(e=null),e);function nC(t,i,e,n){let s=t.indexOf(i);if(s===-1)return iC(t,i,e,n);let o=t.lastIndexOf(i);return s!==o?e:s}var sC=(t,i)=>t===null?null:xe(Math.round(t),0,i);function tf(t){let i=this.getLabels();return t>=0&&t<i.length?i[t]:t}var oC=(()=>{class t extends Wi{static id="category";static defaults={ticks:{callback:tf}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let n=this._addedLabels;if(n.length){let s=this.getLabels();for(let{index:o,label:r}of n)s[o]===r&&s.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Q(e))return null;let s=this.getLabels();return n=isFinite(n)&&s[n]===e?n:nC(s,e,H(n,e),this._addedLabels),sC(n,s.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:s,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(s=0),n||(o=this.getLabels().length-1)),this.min=s,this.max=o}buildTicks(){let e=this.min,n=this.max,s=this.options.offset,o=[],r=this.getLabels();r=e===0&&n===r.length-1?r:r.slice(e,n+1),this._valueRange=Math.max(r.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=e;a<=n;a++)o.push({value:a});return o}getLabelForValue(e){return tf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return t})();function rC(t,i){let e=[],{bounds:s,step:o,min:r,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=t,m=o||1,g=d-1,{min:b,max:v}=i,S=!Q(r),w=!Q(a),E=!Q(c),I=(v-b)/(u+1),M=ua((v-b)/g/m)*m,T,N,D,L;if(M<1e-14&&!S&&!w)return[{value:b},{value:v}];L=Math.ceil(v/M)-Math.floor(b/M),L>g&&(M=ua(L*M/g/m)*m),Q(l)||(T=Math.pow(10,l),M=Math.ceil(M*T)/T),s==="ticks"?(N=Math.floor(b/M)*M,D=Math.ceil(v/M)*M):(N=b,D=v),S&&w&&o&&eh((a-r)/o,M/1e3)?(L=Math.round(Math.min((a-r)/M,d)),M=(a-r)/L,N=r,D=a):E?(N=S?r:N,D=w?a:D,L=c-1,M=(D-N)/L):(L=(D-N)/M,Ri(L,Math.round(L),M/1e3)?L=Math.round(L):L=Math.ceil(L));let z=Math.max(fa(M),fa(N));T=Math.pow(10,Q(l)?z:l),N=Math.round(N*T)/T,D=Math.round(D*T)/T;let B=0;for(S&&(h&&N!==r?(e.push({value:r}),N<r&&B++,Ri(Math.round((N+B*M)*T)/T,r,nf(r,I,t))&&B++):N<r&&B++);B<L;++B){let G=Math.round((N+B*M)*T)/T;if(w&&G>a)break;e.push({value:G})}return w&&h&&D!==a?e.length&&Ri(e[e.length-1].value,a,nf(a,I,t))?e[e.length-1].value=a:e.push({value:a}):(!w||D===a)&&e.push({value:D}),e}function nf(t,i,{horizontal:e,minRotation:n}){let s=Xe(n),o=(e?Math.sin(s):Math.cos(s))||.001,r=.75*i*(""+t).length;return Math.min(i/o,r)}var Bi=class extends Wi{constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(i,e){return Q(i)||(typeof i=="number"||i instanceof Number)&&!isFinite(+i)?null:+i}handleTickRangeOptions(){let{beginAtZero:i}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:s,max:o}=this,r=l=>s=e?s:l,a=l=>o=n?o:l;if(i){let l=nt(s),c=nt(o);l<0&&c<0?a(0):l>0&&c>0&&r(0)}if(s===o){let l=o===0?1:Math.abs(o*.05);a(o+l),i||r(s-l)}this.min=s,this.max=o}getTickLimit(){let i=this.options.ticks,{maxTicksLimit:e,stepSize:n}=i,s;return n?(s=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,s>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${s} ticks. Limiting to 1000.`),s=1e3)):(s=this.computeTickLimit(),e=e||11),e&&(s=Math.min(e,s)),s}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let i=this.options,e=i.ticks,n=this.getTickLimit();n=Math.max(2,n);let s={maxTicks:n,bounds:i.bounds,min:i.min,max:i.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,r=rC(s,o);return i.bounds==="ticks"&&ha(r,this,"value"),i.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let i=this.ticks,e=this.min,n=this.max;if(super.configure(),this.options.offset&&i.length){let s=(n-e)/Math.max(i.length-1,1)/2;e-=s,n+=s}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(i){return Fi(i,this.chart.options.locale,this.options.ticks.format)}},ja=class extends Bi{static id="linear";static defaults={ticks:{callback:Rn.formatters.numeric}};determineDataLimits(){let{min:i,max:e}=this.getMinMax(!0);this.min=fe(i)?i:0,this.max=fe(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let i=this.isHorizontal(),e=i?this.width:this.height,n=Xe(this.options.ticks.minRotation),s=(i?Math.sin(n):Math.cos(n))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/s))}getPixelForValue(i){return i===null?NaN:this.getPixelForDecimal((i-this._startValue)/this._valueRange)}getValueForPixel(i){return this._startValue+this.getDecimalForPixel(i)*this._valueRange}},jn=t=>Math.floor(bt(t)),si=(t,i)=>Math.pow(10,jn(t)+i);function sf(t){return t/Math.pow(10,jn(t))===1}function of(t,i,e){let n=Math.pow(10,e),s=Math.floor(t/n);return Math.ceil(i/n)-s}function aC(t,i){let e=i-t,n=jn(e);for(;of(t,i,n)>10;)n++;for(;of(t,i,n)<10;)n--;return Math.min(n,jn(t))}function lC(t,{min:i,max:e}){i=Ve(t.min,i);let n=[],s=jn(i),o=aC(i,e),r=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=s>o?Math.pow(10,s):0,c=Math.round((i-l)*r)/r,d=Math.floor((i-l)/a/10)*a*10,u=Math.floor((c-d)/Math.pow(10,o)),h=Ve(t.min,Math.round((l+d+u*Math.pow(10,o))*r)/r);for(;h<e;)n.push({value:h,major:sf(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,r=o>=0?1:r),h=Math.round((l+d+u*Math.pow(10,o))*r)/r;let m=Ve(t.max,h);return n.push({value:m,major:sf(m),significand:u}),n}var Ha=class extends Wi{static id="logarithmic";static defaults={ticks:{callback:Rn.formatters.logarithmic,major:{enabled:!0}}};constructor(i){super(i),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(i,e){let n=Bi.prototype.parse.apply(this,[i,e]);if(n===0){this._zero=!0;return}return fe(n)&&n>0?n:null}determineDataLimits(){let{min:i,max:e}=this.getMinMax(!0);this.min=fe(i)?Math.max(0,i):null,this.max=fe(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!fe(this._userMin)&&(this.min=i===si(this.min,0)?si(this.min,-1):si(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:i,maxDefined:e}=this.getUserBounds(),n=this.min,s=this.max,o=a=>n=i?n:a,r=a=>s=e?s:a;n===s&&(n<=0?(o(1),r(10)):(o(si(n,-1)),r(si(s,1)))),n<=0&&o(si(s,-1)),s<=0&&r(si(n,1)),this.min=n,this.max=s}buildTicks(){let i=this.options,e={min:this._userMin,max:this._userMax},n=lC(e,this);return i.bounds==="ticks"&&ha(n,this,"value"),i.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(i){return i===void 0?"0":Fi(i,this.chart.options.locale,this.options.ticks.format)}configure(){let i=this.min;super.configure(),this._startValue=bt(i),this._valueRange=bt(this.max)-bt(i)}getPixelForValue(i){return(i===void 0||i===0)&&(i=this.min),i===null||isNaN(i)?NaN:this.getPixelForDecimal(i===this.min?0:(bt(i)-this._startValue)/this._valueRange)}getValueForPixel(i){let e=this.getDecimalForPixel(i);return Math.pow(10,this._startValue+e*this._valueRange)}};function Ua(t){let i=t.ticks;if(i.display&&t.display){let e=ke(i.backdropPadding);return H(i.font&&i.font.size,ti.font.size)+e.height}return 0}function cC(t,i,e){return e=he(e)?e:[e],{w:uh(t,i.string,e),h:e.length*i.lineHeight}}function rf(t,i,e,n,s){return t===n||t===s?{start:i-e/2,end:i+e/2}:t<n||t>s?{start:i-e,end:i}:{start:i,end:i+e}}function dC(t){let i={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},e=Object.assign({},i),n=[],s=[],o=t._pointLabels.length,r=t.options.pointLabels,a=r.centerPointLabels?se/o:0;for(let l=0;l<o;l++){let c=r.setContext(t.getPointLabelContext(l));s[l]=c.padding;let d=t.getPointPosition(l,t.drawingArea+s[l],a),u=_e(c.font),h=cC(t.ctx,u,t._pointLabels[l]);n[l]=h;let m=Le(t.getIndexAngle(l)+a),g=Math.round(so(m)),b=rf(g,d.x,h.w,0,180),v=rf(g,d.y,h.h,90,270);uC(e,i,m,b,v)}t.setCenterPoint(i.l-e.l,e.r-i.r,i.t-e.t,e.b-i.b),t._pointLabelItems=pC(t,n,s)}function uC(t,i,e,n,s){let o=Math.abs(Math.sin(e)),r=Math.abs(Math.cos(e)),a=0,l=0;n.start<i.l?(a=(i.l-n.start)/o,t.l=Math.min(t.l,i.l-a)):n.end>i.r&&(a=(n.end-i.r)/o,t.r=Math.max(t.r,i.r+a)),s.start<i.t?(l=(i.t-s.start)/r,t.t=Math.min(t.t,i.t-l)):s.end>i.b&&(l=(s.end-i.b)/r,t.b=Math.max(t.b,i.b+l))}function hC(t,i,e){let n=t.drawingArea,{extra:s,additionalAngle:o,padding:r,size:a}=e,l=t.getPointPosition(i,n+s+r,o),c=Math.round(so(Le(l.angle+pe))),d=_C(l.y,a.h,c),u=mC(c),h=gC(l.x,a.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function fC(t,i){if(!i)return!0;let{left:e,top:n,right:s,bottom:o}=t;return!(It({x:e,y:n},i)||It({x:e,y:o},i)||It({x:s,y:n},i)||It({x:s,y:o},i))}function pC(t,i,e){let n=[],s=t._pointLabels.length,o=t.options,{centerPointLabels:r,display:a}=o.pointLabels,l={extra:Ua(o)/2,additionalAngle:r?se/s:0},c;for(let d=0;d<s;d++){l.padding=e[d],l.size=i[d];let u=hC(t,d,l);n.push(u),a==="auto"&&(u.visible=fC(u,c),u.visible&&(c=u))}return n}function mC(t){return t===0||t===180?"center":t<180?"left":"right"}function gC(t,i,e){return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function _C(t,i,e){return e===90||e===270?t-=i/2:(e>270||e<90)&&(t-=i),t}function bC(t,i,e){let{left:n,top:s,right:o,bottom:r}=e,{backdropColor:a}=i;if(!Q(a)){let l=At(i.borderRadius),c=ke(i.backdropPadding);t.fillStyle=a;let d=n-c.left,u=s-c.top,h=o-n+c.width,m=r-s+c.height;Object.values(l).some(g=>g!==0)?(t.beginPath(),Ni(t,{x:d,y:u,w:h,h:m,radius:l}),t.fill()):t.fillRect(d,u,h,m)}}function xC(t,i){let{ctx:e,options:{pointLabels:n}}=t;for(let s=i-1;s>=0;s--){let o=t._pointLabelItems[s];if(!o.visible)continue;let r=n.setContext(t.getPointLabelContext(s));bC(e,r,o);let a=_e(r.font),{x:l,y:c,textAlign:d}=o;Dt(e,t._pointLabels[s],l,c+a.lineHeight/2,a,{color:r.color,textAlign:d,textBaseline:"middle"})}}function Ef(t,i,e,n){let{ctx:s}=t;if(e)s.arc(t.xCenter,t.yCenter,i,0,oe);else{let o=t.getPointPosition(0,i);s.moveTo(o.x,o.y);for(let r=1;r<n;r++)o=t.getPointPosition(r,i),s.lineTo(o.x,o.y)}}function vC(t,i,e,n,s){let o=t.ctx,r=i.circular,{color:a,lineWidth:l}=i;!r&&!n||!a||!l||e<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(s.dash),o.lineDashOffset=s.dashOffset,o.beginPath(),Ef(t,e,r,n),o.closePath(),o.stroke(),o.restore())}function yC(t,i,e){return Rt(t,{label:e,index:i,type:"pointLabel"})}var Ya=class extends Bi{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Rn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(i){return i},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(i){super(i),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let i=this._padding=ke(Ua(this.options)/2),e=this.width=this.maxWidth-i.width,n=this.height=this.maxHeight-i.height;this.xCenter=Math.floor(this.left+e/2+i.left),this.yCenter=Math.floor(this.top+n/2+i.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){let{min:i,max:e}=this.getMinMax(!1);this.min=fe(i)&&!isNaN(i)?i:0,this.max=fe(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Ua(this.options))}generateTickLabels(i){Bi.prototype.generateTickLabels.call(this,i),this._pointLabels=this.getLabels().map((e,n)=>{let s=ve(this.options.pointLabels.callback,[e,n],this);return s||s===0?s:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){let i=this.options;i.display&&i.pointLabels.display?dC(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(i,e,n,s){this.xCenter+=Math.floor((i-e)/2),this.yCenter+=Math.floor((n-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(i,e,n,s))}getIndexAngle(i){let e=oe/(this._pointLabels.length||1),n=this.options.startAngle||0;return Le(i*e+Xe(n))}getDistanceFromCenterForValue(i){if(Q(i))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-i)*e:(i-this.min)*e}getValueForDistanceFromCenter(i){if(Q(i))return NaN;let e=i/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(i){let e=this._pointLabels||[];if(i>=0&&i<e.length){let n=e[i];return yC(this.getContext(),i,n)}}getPointPosition(i,e,n=0){let s=this.getIndexAngle(i)-pe+n;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(i,e){return this.getPointPosition(i,this.getDistanceFromCenterForValue(e))}getBasePosition(i){return this.getPointPositionForValue(i||0,this.getBaseValue())}getPointLabelPosition(i){let{left:e,top:n,right:s,bottom:o}=this._pointLabelItems[i];return{left:e,top:n,right:s,bottom:o}}drawBackground(){let{backgroundColor:i,grid:{circular:e}}=this.options;if(i){let n=this.ctx;n.save(),n.beginPath(),Ef(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=i,n.fill(),n.restore()}}drawGrid(){let i=this.ctx,e=this.options,{angleLines:n,grid:s,border:o}=e,r=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&xC(this,r),s.display&&this.ticks.forEach((d,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let h=this.getContext(u),m=s.setContext(h),g=o.setContext(h);vC(this,m,l,r,g)}}),n.display){for(i.save(),a=r-1;a>=0;a--){let d=n.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:h}=d;!h||!u||(i.lineWidth=h,i.strokeStyle=u,i.setLineDash(d.borderDash),i.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),i.beginPath(),i.moveTo(this.xCenter,this.yCenter),i.lineTo(c.x,c.y),i.stroke())}i.restore()}}drawBorder(){}drawLabels(){let i=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;let s=this.getIndexAngle(0),o,r;i.save(),i.translate(this.xCenter,this.yCenter),i.rotate(s),i.textAlign="center",i.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=n.setContext(this.getContext(l)),d=_e(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){i.font=d.string,r=i.measureText(a.label).width,i.fillStyle=c.backdropColor;let u=ke(c.backdropPadding);i.fillRect(-r/2-u.left,-o-d.size/2-u.top,r+u.width,d.size+u.height)}Dt(i,a.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),i.restore()}drawTitle(){}},yo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Be=Object.keys(yo);function af(t,i){return t-i}function lf(t,i){if(Q(i))return null;let e=t._adapter,{parser:n,round:s,isoWeekday:o}=t._parseOpts,r=i;return typeof n=="function"&&(r=n(r)),fe(r)||(r=typeof n=="string"?e.parse(r,n):e.parse(r)),r===null?null:(s&&(r=s==="week"&&(ei(o)||o===!0)?e.startOf(r,"isoWeek",o):e.startOf(r,s)),+r)}function cf(t,i,e,n){let s=Be.length;for(let o=Be.indexOf(t);o<s-1;++o){let r=yo[Be[o]],a=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((e-i)/(a*r.size))<=n)return Be[o]}return Be[s-1]}function CC(t,i,e,n,s){for(let o=Be.length-1;o>=Be.indexOf(e);o--){let r=Be[o];if(yo[r].common&&t._adapter.diff(s,n,r)>=i-1)return r}return Be[e?Be.indexOf(e):0]}function wC(t){for(let i=Be.indexOf(t)+1,e=Be.length;i<e;++i)if(yo[Be[i]].common)return Be[i]}function df(t,i,e){if(!e)t[i]=!0;else if(e.length){let{lo:n,hi:s}=pa(e,i),o=e[n]>=i?e[n]:e[s];t[o]=!0}}function SC(t,i,e,n){let s=t._adapter,o=+s.startOf(i[0].value,n),r=i[i.length-1].value,a,l;for(a=o;a<=r;a=+s.add(a,1,n))l=e[a],l>=0&&(i[l].major=!0);return i}function uf(t,i,e){let n=[],s={},o=i.length,r,a;for(r=0;r<o;++r)a=i[r],s[a]=r,n.push({value:a,major:!1});return o===0||!e?n:SC(t,n,s,e)}var qa=(()=>{class t extends Wi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){let s=e.time||(e.time={}),o=this._adapter=new vv._date(e.adapters.date);o.init(n),da(s.displayFormats,o.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:lf(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,n=this._adapter,s=e.time.unit||"day",{min:o,max:r,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(o=Math.min(o,d.min)),!l&&!isNaN(d.max)&&(r=Math.max(r,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),o=fe(o)&&!isNaN(o)?o:+n.startOf(Date.now(),s),r=fe(r)&&!isNaN(r)?r:+n.endOf(Date.now(),s)+1,this.min=Math.min(o,r-1),this.max=Math.max(o+1,r)}_getLabelBounds(){let e=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],s=e[e.length-1]),{min:n,max:s}}buildTicks(){let e=this.options,n=e.time,s=e.ticks,o=s.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let r=this.min,a=this.max,l=nh(o,r,a);return this._unit=n.unit||(s.autoSkip?cf(n.minUnit,this.min,this.max,this._getLabelCapacity(r)):CC(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:wC(this._unit),this.initOffsets(o),e.reverse&&l.reverse(),uf(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,s=0,o,r;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?n=1-o:n=(this.getDecimalForValue(e[1])-o)/2,r=this.getDecimalForValue(e[e.length-1]),e.length===1?s=r:s=(r-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;n=xe(n,0,a),s=xe(s,0,a),this._offsets={start:n,end:s,factor:1/(n+1+s)}}_generate(){let e=this._adapter,n=this.min,s=this.max,o=this.options,r=o.time,a=r.unit||cf(r.minUnit,n,s,this._getLabelCapacity(n)),l=H(o.ticks.stepSize,1),c=a==="week"?r.isoWeekday:!1,d=ei(c)||c===!0,u={},h=n,m,g;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(s,n,a)>1e5*l)throw new Error(n+" and "+s+" are too far apart with stepSize of "+l+" "+a);let b=o.ticks.source==="data"&&this.getDataTimestamps();for(m=h,g=0;m<s;m=+e.add(m,l,a),g++)df(u,m,b);return(m===s||o.bounds==="ticks"||g===1)&&df(u,m,b),Object.keys(u).sort(af).map(v=>+v)}getLabelForValue(e){let n=this._adapter,s=this.options.time;return s.tooltipFormat?n.format(e,s.tooltipFormat):n.format(e,s.displayFormats.datetime)}format(e,n){let o=this.options.time.displayFormats,r=this._unit,a=n||o[r];return this._adapter.format(e,a)}_tickFormatFunction(e,n,s,o){let r=this.options,a=r.ticks.callback;if(a)return ve(a,[e,n,s],this);let l=r.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],m=s[n],g=d&&h&&m&&m.major;return this._adapter.format(e,o||(g?h:u))}generateTickLabels(e){let n,s,o;for(n=0,s=e.length;n<s;++n)o=e[n],o.label=this._tickFormatFunction(o.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let n=this._offsets,s=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+s)*n.factor)}getValueForPixel(e){let n=this._offsets,s=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+s*(this.max-this.min)}_getLabelSize(e){let n=this.options.ticks,s=this.ctx.measureText(e).width,o=Xe(this.isHorizontal()?n.maxRotation:n.minRotation),r=Math.cos(o),a=Math.sin(o),l=this._resolveTickFontOptions(0).size;return{w:s*r+l*a,h:s*a+l*r}}_getLabelCapacity(e){let n=this.options.time,s=n.displayFormats,o=s[n.unit]||s.millisecond,r=this._tickFormatFunction(e,0,uf(this,[e],this._majorUnit),o),a=this._getLabelSize(r),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,s;if(e.length)return e;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(n=0,s=o.length;n<s;++n)e=e.concat(o[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],n,s;if(e.length)return e;let o=this.getLabels();for(n=0,s=o.length;n<s;++n)e.push(lf(this,o[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return ga(e.sort(af))}}return t})();function mo(t,i,e){let n=0,s=t.length-1,o,r,a,l;e?(i>=t[n].pos&&i<=t[s].pos&&({lo:n,hi:s}=_t(t,"pos",i)),{pos:o,time:a}=t[n],{pos:r,time:l}=t[s]):(i>=t[n].time&&i<=t[s].time&&({lo:n,hi:s}=_t(t,"time",i)),{time:o,pos:a}=t[n],{time:r,pos:l}=t[s]);let c=r-o;return c?a+(l-a)*(i-o)/c:a}var Ga=class extends qa{static id="timeseries";static defaults=qa.defaults;constructor(i){super(i),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let i=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(i);this._minPos=mo(e,this.min),this._tableRange=mo(e,this.max)-this._minPos,super.initOffsets(i)}buildLookupTable(i){let{min:e,max:n}=this,s=[],o=[],r,a,l,c,d;for(r=0,a=i.length;r<a;++r)c=i[r],c>=e&&c<=n&&s.push(c);if(s.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(r=0,a=s.length;r<a;++r)d=s[r+1],l=s[r-1],c=s[r],Math.round((d+l)/2)!==c&&o.push({time:c,pos:r/(a-1)});return o}_generate(){let i=this.min,e=this.max,n=super.getDataTimestamps();return(!n.includes(i)||!n.length)&&n.splice(0,0,i),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((s,o)=>s-o)}_getTimestampsForTable(){let i=this._cache.all||[];if(i.length)return i;let e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?i=this.normalize(e.concat(n)):i=e.length?e:n,i=this._cache.all=i,i}getDecimalForValue(i){return(mo(this._table,i)-this._minPos)/this._tableRange}getValueForPixel(i){let e=this._offsets,n=this.getDecimalForPixel(i)/e.factor-e.end;return mo(this._table,n*this._tableRange+this._minPos,!0)}},MC=Object.freeze({__proto__:null,CategoryScale:oC,LinearScale:ja,LogarithmicScale:Ha,RadialLinearScale:Ya,TimeScale:qa,TimeSeriesScale:Ga}),Tf=[xv,ay,tC,MC];var EC=typeof global=="object"&&global&&global.Object===Object&&global,Co=EC;var TC=typeof self=="object"&&self&&self.Object===Object&&self,PC=Co||TC||Function("return this")(),Je=PC;var kC=Je.Symbol,zi=kC;var Pf=Object.prototype,IC=Pf.hasOwnProperty,OC=Pf.toString,Hn=zi?zi.toStringTag:void 0;function DC(t){var i=IC.call(t,Hn),e=t[Hn];try{t[Hn]=void 0;var n=!0}catch{}var s=OC.call(t);return n&&(i?t[Hn]=e:delete t[Hn]),s}var kf=DC;var AC=Object.prototype,RC=AC.toString;function FC(t){return RC.call(t)}var If=FC;var NC="[object Null]",LC="[object Undefined]",Of=zi?zi.toStringTag:void 0;function VC(t){return t==null?t===void 0?LC:NC:Of&&Of in Object(t)?kf(t):If(t)}var Nt=VC;function WC(t){return t!=null&&typeof t=="object"}var ht=WC;var BC=Array.isArray,Un=BC;function zC(t){var i=typeof t;return t!=null&&(i=="object"||i=="function")}var ze=zC;function jC(t){return t}var wo=jC;var HC="[object AsyncFunction]",UC="[object Function]",YC="[object GeneratorFunction]",qC="[object Proxy]";function GC(t){if(!ze(t))return!1;var i=Nt(t);return i==UC||i==YC||i==HC||i==qC}var ji=GC;var $C=Je["__core-js_shared__"],So=$C;var Df=function(){var t=/[^.]+$/.exec(So&&So.keys&&So.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function KC(t){return!!Df&&Df in t}var Af=KC;var XC=Function.prototype,QC=XC.toString;function JC(t){if(t!=null){try{return QC.call(t)}catch{}try{return t+""}catch{}}return""}var Rf=JC;var ZC=/[\\^$.*+?()[\]{}|]/g,e1=/^\[object .+?Constructor\]$/,t1=Function.prototype,i1=Object.prototype,n1=t1.toString,s1=i1.hasOwnProperty,o1=RegExp("^"+n1.call(s1).replace(ZC,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function r1(t){if(!ze(t)||Af(t))return!1;var i=ji(t)?o1:e1;return i.test(Rf(t))}var Ff=r1;function a1(t,i){return t?.[i]}var Nf=a1;function l1(t,i){var e=Nf(t,i);return Ff(e)?e:void 0}var Hi=l1;var Lf=Object.create,c1=function(){function t(){}return function(i){if(!ze(i))return{};if(Lf)return Lf(i);t.prototype=i;var e=new t;return t.prototype=void 0,e}}(),Vf=c1;function d1(t,i,e){switch(e.length){case 0:return t.call(i);case 1:return t.call(i,e[0]);case 2:return t.call(i,e[0],e[1]);case 3:return t.call(i,e[0],e[1],e[2])}return t.apply(i,e)}var Wf=d1;function u1(t,i){var e=-1,n=t.length;for(i||(i=Array(n));++e<n;)i[e]=t[e];return i}var Bf=u1;var h1=800,f1=16,p1=Date.now;function m1(t){var i=0,e=0;return function(){var n=p1(),s=f1-(n-e);if(e=n,s>0){if(++i>=h1)return arguments[0]}else i=0;return t.apply(void 0,arguments)}}var zf=m1;function g1(t){return function(){return t}}var jf=g1;var _1=function(){try{var t=Hi(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Ui=_1;var b1=Ui?function(t,i){return Ui(t,"toString",{configurable:!0,enumerable:!1,value:jf(i),writable:!0})}:wo,Hf=b1;var x1=zf(Hf),Uf=x1;var v1=9007199254740991,y1=/^(?:0|[1-9]\d*)$/;function C1(t,i){var e=typeof t;return i=i??v1,!!i&&(e=="number"||e!="symbol"&&y1.test(t))&&t>-1&&t%1==0&&t<i}var Mo=C1;function w1(t,i,e){i=="__proto__"&&Ui?Ui(t,i,{configurable:!0,enumerable:!0,value:e,writable:!0}):t[i]=e}var Yi=w1;function S1(t,i){return t===i||t!==t&&i!==i}var Lt=S1;var M1=Object.prototype,E1=M1.hasOwnProperty;function T1(t,i,e){var n=t[i];(!(E1.call(t,i)&&Lt(n,e))||e===void 0&&!(i in t))&&Yi(t,i,e)}var Yf=T1;function P1(t,i,e,n){var s=!e;e||(e={});for(var o=-1,r=i.length;++o<r;){var a=i[o],l=n?n(e[a],t[a],a,e,t):void 0;l===void 0&&(l=t[a]),s?Yi(e,a,l):Yf(e,a,l)}return e}var qf=P1;var Gf=Math.max;function k1(t,i,e){return i=Gf(i===void 0?t.length-1:i,0),function(){for(var n=arguments,s=-1,o=Gf(n.length-i,0),r=Array(o);++s<o;)r[s]=n[i+s];s=-1;for(var a=Array(i+1);++s<i;)a[s]=n[s];return a[i]=e(r),Wf(t,this,a)}}var $f=k1;function I1(t,i){return Uf($f(t,i,wo),t+"")}var Kf=I1;var O1=9007199254740991;function D1(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=O1}var Eo=D1;function A1(t){return t!=null&&Eo(t.length)&&!ji(t)}var qi=A1;function R1(t,i,e){if(!ze(e))return!1;var n=typeof i;return(n=="number"?qi(e)&&Mo(i,e.length):n=="string"&&i in e)?Lt(e[i],t):!1}var Xf=R1;function F1(t){return Kf(function(i,e){var n=-1,s=e.length,o=s>1?e[s-1]:void 0,r=s>2?e[2]:void 0;for(o=t.length>3&&typeof o=="function"?(s--,o):void 0,r&&Xf(e[0],e[1],r)&&(o=s<3?void 0:o,s=1),i=Object(i);++n<s;){var a=e[n];a&&t(i,a,n,o)}return i})}var Qf=F1;var N1=Object.prototype;function L1(t){var i=t&&t.constructor,e=typeof i=="function"&&i.prototype||N1;return t===e}var To=L1;function V1(t,i){for(var e=-1,n=Array(t);++e<t;)n[e]=i(e);return n}var Jf=V1;var W1="[object Arguments]";function B1(t){return ht(t)&&Nt(t)==W1}var Xa=B1;var Zf=Object.prototype,z1=Zf.hasOwnProperty,j1=Zf.propertyIsEnumerable,H1=Xa(function(){return arguments}())?Xa:function(t){return ht(t)&&z1.call(t,"callee")&&!j1.call(t,"callee")},Yn=H1;function U1(){return!1}var ep=U1;var np=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tp=np&&typeof module=="object"&&module&&!module.nodeType&&module,Y1=tp&&tp.exports===np,ip=Y1?Je.Buffer:void 0,q1=ip?ip.isBuffer:void 0,G1=q1||ep,Po=G1;var $1="[object Arguments]",K1="[object Array]",X1="[object Boolean]",Q1="[object Date]",J1="[object Error]",Z1="[object Function]",ew="[object Map]",tw="[object Number]",iw="[object Object]",nw="[object RegExp]",sw="[object Set]",ow="[object String]",rw="[object WeakMap]",aw="[object ArrayBuffer]",lw="[object DataView]",cw="[object Float32Array]",dw="[object Float64Array]",uw="[object Int8Array]",hw="[object Int16Array]",fw="[object Int32Array]",pw="[object Uint8Array]",mw="[object Uint8ClampedArray]",gw="[object Uint16Array]",_w="[object Uint32Array]",le={};le[cw]=le[dw]=le[uw]=le[hw]=le[fw]=le[pw]=le[mw]=le[gw]=le[_w]=!0;le[$1]=le[K1]=le[aw]=le[X1]=le[lw]=le[Q1]=le[J1]=le[Z1]=le[ew]=le[tw]=le[iw]=le[nw]=le[sw]=le[ow]=le[rw]=!1;function bw(t){return ht(t)&&Eo(t.length)&&!!le[Nt(t)]}var sp=bw;function xw(t){return function(i){return t(i)}}var op=xw;var rp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,qn=rp&&typeof module=="object"&&module&&!module.nodeType&&module,vw=qn&&qn.exports===rp,Qa=vw&&Co.process,yw=function(){try{var t=qn&&qn.require&&qn.require("util").types;return t||Qa&&Qa.binding&&Qa.binding("util")}catch{}}(),Ja=yw;var ap=Ja&&Ja.isTypedArray,Cw=ap?op(ap):sp,ko=Cw;var ww=Object.prototype,Sw=ww.hasOwnProperty;function Mw(t,i){var e=Un(t),n=!e&&Yn(t),s=!e&&!n&&Po(t),o=!e&&!n&&!s&&ko(t),r=e||n||s||o,a=r?Jf(t.length,String):[],l=a.length;for(var c in t)(i||Sw.call(t,c))&&!(r&&(c=="length"||s&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Mo(c,l)))&&a.push(c);return a}var lp=Mw;function Ew(t,i){return function(e){return t(i(e))}}var cp=Ew;function Tw(t){var i=[];if(t!=null)for(var e in Object(t))i.push(e);return i}var dp=Tw;var Pw=Object.prototype,kw=Pw.hasOwnProperty;function Iw(t){if(!ze(t))return dp(t);var i=To(t),e=[];for(var n in t)n=="constructor"&&(i||!kw.call(t,n))||e.push(n);return e}var up=Iw;function Ow(t){return qi(t)?lp(t,!0):up(t)}var Io=Ow;var Dw=Hi(Object,"create"),vt=Dw;function Aw(){this.__data__=vt?vt(null):{},this.size=0}var hp=Aw;function Rw(t){var i=this.has(t)&&delete this.__data__[t];return this.size-=i?1:0,i}var fp=Rw;var Fw="__lodash_hash_undefined__",Nw=Object.prototype,Lw=Nw.hasOwnProperty;function Vw(t){var i=this.__data__;if(vt){var e=i[t];return e===Fw?void 0:e}return Lw.call(i,t)?i[t]:void 0}var pp=Vw;var Ww=Object.prototype,Bw=Ww.hasOwnProperty;function zw(t){var i=this.__data__;return vt?i[t]!==void 0:Bw.call(i,t)}var mp=zw;var jw="__lodash_hash_undefined__";function Hw(t,i){var e=this.__data__;return this.size+=this.has(t)?0:1,e[t]=vt&&i===void 0?jw:i,this}var gp=Hw;function Gi(t){var i=-1,e=t==null?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}Gi.prototype.clear=hp;Gi.prototype.delete=fp;Gi.prototype.get=pp;Gi.prototype.has=mp;Gi.prototype.set=gp;var Za=Gi;function Uw(){this.__data__=[],this.size=0}var _p=Uw;function Yw(t,i){for(var e=t.length;e--;)if(Lt(t[e][0],i))return e;return-1}var Vt=Yw;var qw=Array.prototype,Gw=qw.splice;function $w(t){var i=this.__data__,e=Vt(i,t);if(e<0)return!1;var n=i.length-1;return e==n?i.pop():Gw.call(i,e,1),--this.size,!0}var bp=$w;function Kw(t){var i=this.__data__,e=Vt(i,t);return e<0?void 0:i[e][1]}var xp=Kw;function Xw(t){return Vt(this.__data__,t)>-1}var vp=Xw;function Qw(t,i){var e=this.__data__,n=Vt(e,t);return n<0?(++this.size,e.push([t,i])):e[n][1]=i,this}var yp=Qw;function $i(t){var i=-1,e=t==null?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}$i.prototype.clear=_p;$i.prototype.delete=bp;$i.prototype.get=xp;$i.prototype.has=vp;$i.prototype.set=yp;var Wt=$i;var Jw=Hi(Je,"Map"),Oo=Jw;function Zw(){this.size=0,this.__data__={hash:new Za,map:new(Oo||Wt),string:new Za}}var Cp=Zw;function eS(t){var i=typeof t;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?t!=="__proto__":t===null}var wp=eS;function tS(t,i){var e=t.__data__;return wp(i)?e[typeof i=="string"?"string":"hash"]:e.map}var Bt=tS;function iS(t){var i=Bt(this,t).delete(t);return this.size-=i?1:0,i}var Sp=iS;function nS(t){return Bt(this,t).get(t)}var Mp=nS;function sS(t){return Bt(this,t).has(t)}var Ep=sS;function oS(t,i){var e=Bt(this,t),n=e.size;return e.set(t,i),this.size+=e.size==n?0:1,this}var Tp=oS;function Ki(t){var i=-1,e=t==null?0:t.length;for(this.clear();++i<e;){var n=t[i];this.set(n[0],n[1])}}Ki.prototype.clear=Cp;Ki.prototype.delete=Sp;Ki.prototype.get=Mp;Ki.prototype.has=Ep;Ki.prototype.set=Tp;var Pp=Ki;var rS=cp(Object.getPrototypeOf,Object),Do=rS;var aS="[object Object]",lS=Function.prototype,cS=Object.prototype,kp=lS.toString,dS=cS.hasOwnProperty,uS=kp.call(Object);function hS(t){if(!ht(t)||Nt(t)!=aS)return!1;var i=Do(t);if(i===null)return!0;var e=dS.call(i,"constructor")&&i.constructor;return typeof e=="function"&&e instanceof e&&kp.call(e)==uS}var Ip=hS;function fS(){this.__data__=new Wt,this.size=0}var Op=fS;function pS(t){var i=this.__data__,e=i.delete(t);return this.size=i.size,e}var Dp=pS;function mS(t){return this.__data__.get(t)}var Ap=mS;function gS(t){return this.__data__.has(t)}var Rp=gS;var _S=200;function bS(t,i){var e=this.__data__;if(e instanceof Wt){var n=e.__data__;if(!Oo||n.length<_S-1)return n.push([t,i]),this.size=++e.size,this;e=this.__data__=new Pp(n)}return e.set(t,i),this.size=e.size,this}var Fp=bS;function Xi(t){var i=this.__data__=new Wt(t);this.size=i.size}Xi.prototype.clear=Op;Xi.prototype.delete=Dp;Xi.prototype.get=Ap;Xi.prototype.has=Rp;Xi.prototype.set=Fp;var Np=Xi;var Bp=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Lp=Bp&&typeof module=="object"&&module&&!module.nodeType&&module,xS=Lp&&Lp.exports===Bp,Vp=xS?Je.Buffer:void 0,Wp=Vp?Vp.allocUnsafe:void 0;function vS(t,i){if(i)return t.slice();var e=t.length,n=Wp?Wp(e):new t.constructor(e);return t.copy(n),n}var zp=vS;var yS=Je.Uint8Array,el=yS;function CS(t){var i=new t.constructor(t.byteLength);return new el(i).set(new el(t)),i}var jp=CS;function wS(t,i){var e=i?jp(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}var Hp=wS;function SS(t){return typeof t.constructor=="function"&&!To(t)?Vf(Do(t)):{}}var Up=SS;function MS(t){return function(i,e,n){for(var s=-1,o=Object(i),r=n(i),a=r.length;a--;){var l=r[t?a:++s];if(e(o[l],l,o)===!1)break}return i}}var Yp=MS;var ES=Yp(),qp=ES;function TS(t,i,e){(e!==void 0&&!Lt(t[i],e)||e===void 0&&!(i in t))&&Yi(t,i,e)}var Gn=TS;function PS(t){return ht(t)&&qi(t)}var Gp=PS;function kS(t,i){if(!(i==="constructor"&&typeof t[i]=="function")&&i!="__proto__")return t[i]}var $n=kS;function IS(t){return qf(t,Io(t))}var $p=IS;function OS(t,i,e,n,s,o,r){var a=$n(t,e),l=$n(i,e),c=r.get(l);if(c){Gn(t,e,c);return}var d=o?o(a,l,e+"",t,i,r):void 0,u=d===void 0;if(u){var h=Un(l),m=!h&&Po(l),g=!h&&!m&&ko(l);d=l,h||m||g?Un(a)?d=a:Gp(a)?d=Bf(a):m?(u=!1,d=zp(l,!0)):g?(u=!1,d=Hp(l,!0)):d=[]:Ip(l)||Yn(l)?(d=a,Yn(a)?d=$p(a):(!ze(a)||ji(a))&&(d=Up(l))):u=!1}u&&(r.set(l,d),s(d,l,n,o,r),r.delete(l)),Gn(t,e,d)}var Kp=OS;function Xp(t,i,e,n,s){t!==i&&qp(i,function(o,r){if(s||(s=new Np),ze(o))Kp(t,i,r,e,Xp,n,s);else{var a=n?n($n(t,r),o,r+"",t,i,s):void 0;a===void 0&&(a=o),Gn(t,r,a)}},Io)}var Qp=Xp;var DS=Qf(function(t,i,e){Qp(t,i,e)}),tl=DS;var AS=new es("Configuration for ngCharts");function Ao(...t){return{registerables:[...Tf,...t]}}function Ro(...t){let i=tl({},...t);return{provide:AS,useValue:i}}var Jp={providers:[_l({eventCoalescing:!0}),vl(Bc),Xl(()=>Ql({projectId:"clinica-22442",appId:"1:235357332503:web:e03014e1b1fcb0af3b6852",storageBucket:"clinica-22442.appspot.com",apiKey:"AIzaSyCYJNO1mUpzxRzCSi7jWwwquq2q-8KAETU",authDomain:"clinica-22442.firebaseapp.com",messagingSenderId:"235357332503"})),Zl(()=>ec()),tc(()=>sc()),Iu(()=>Ou()),Au(),Ru(),Ro(Ao()),Ro(Ao()),Ro(Ao())]};var Zp=(()=>{class t{title="tpclinica2024";prepareRoute(e){return e&&e.activatedRouteData&&e.activatedRouteData.animation}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=ee({type:t,selectors:[["app-root"]],standalone:!0,features:[te],decls:4,vars:1,consts:[["outlet","outlet"],[1,"fondo"]],template:function(n,s){if(n&1&&(O(0,"app-cabecera"),p(1,"div",1),O(2,"router-outlet",null,0),f()),n&2){let o=ul(3);_(),C("@routeAnimations",s.prepareRoute(o))}},dependencies:[xl,oc],styles:['.fondo[_ngcontent-%COMP%]{background:url("./media/slider-bg-2-7UI2L5W4.jpg");background-size:cover;min-height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0}'],data:{animation:[mc("routeAnimations",[St("BienvenidoPage <=> LoginPage",[we({opacity:0}),ft("600ms",we({opacity:1}))]),St("RegistroPage <=> UsuariosPage",[we({transform:"translateX(-100%)"}),ft("600ms",we({transform:"translateX(0)"}))]),St("PerfilPage <=> TurnosPage",[we({transform:"translateY(-100%)"}),ft("600ms",we({transform:"translateY(0)"}))]),St("CrearTurnoPage <=> HistorialPage",[we({opacity:0,transform:"scale(0.5)"}),ft("600ms",we({opacity:1,transform:"scale(1)"}))]),St("PacientesPage <=> EstadisticasPage",[we({opacity:0,transform:"rotate(-360deg)"}),ft("600ms",we({opacity:1,transform:"rotate(0)"}))]),St("* <=> ErrorPage",[we({opacity:0,transform:"translateX(100%)"}),ft("600ms",we({opacity:1,transform:"translateX(0)"}))]),St("* <=> *",[Ss(":enter, :leave",we({position:"fixed",width:"100%"})),gc([Ss(":enter",[we({transform:"translateX(100%)"}),ft("600ms ease-out",we({transform:"translateX(0%)"}))]),Ss(":leave",[we({transform:"translateX(0%)"}),ft("600ms ease-out",we({transform:"translateX(-100%)"}))])])])])]}})}return t})();bl(Zp,Jp).catch(t=>console.error(t));
