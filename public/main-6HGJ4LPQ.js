var jP=Object.defineProperty,BP=Object.defineProperties;var $P=Object.getOwnPropertyDescriptors;var bC=Object.getOwnPropertySymbols,HP=Object.getPrototypeOf,qP=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable,GP=Reflect.get;var TC=(t,e,n)=>e in t?jP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,V=(t,e)=>{for(var n in e||={})qP.call(e,n)&&TC(t,n,e[n]);if(bC)for(var n of bC(e))zP.call(e,n)&&TC(t,n,e[n]);return t},Se=(t,e)=>BP(t,$P(e));var Xr=(t,e,n)=>GP(HP(t),n,e);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var DC=null;var Op=1,kp=Symbol("SIGNAL");function Te(t){let e=DC;return DC=t,e}var SC={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function WP(t){if(!(Vp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Op)){if(!t.producerMustRecompute(t)&&!Fp(t)){t.dirty=!1,t.lastCleanEpoch=Op;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Op}}function AC(t){return t&&(t.nextProducerIndex=0),Te(t)}function RC(t,e){if(Te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Vp(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Lp(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Fp(t){Cl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(WP(n),r!==n.version))return!0}return!1}function xC(t){if(Cl(t),Vp(t))for(let e=0;e<t.producerNode.length;e++)Lp(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Lp(t,e){if(KP(t),Cl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Lp(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Cl(i),i.producerIndexOfThis[r]=e}}function Vp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Cl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function KP(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function QP(){throw new Error}var YP=QP;function MC(t){YP=t}function re(t){return typeof t=="function"}function Hs(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var bl=Hs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ui(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ye=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof bl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{NC(s)}catch(o){e=e??[],o instanceof bl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new bl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)NC(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ui(n,e)}remove(e){let{_finalizers:n}=this;n&&Ui(n,e),e instanceof t&&e._removeParent(this)}};Ye.EMPTY=(()=>{let t=new Ye;return t.closed=!0,t})();var Up=Ye.EMPTY;function Tl(t){return t instanceof Ye||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function NC(t){re(t)?t():t.unsubscribe()}var Cn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qs={setTimeout(t,e,...n){let{delegate:r}=qs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=qs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Dl(t){qs.setTimeout(()=>{let{onUnhandledError:e}=Cn;if(e)e(t);else throw t})}function ec(){}var PC=jp("C",void 0,void 0);function OC(t){return jp("E",void 0,t)}function kC(t){return jp("N",t,void 0)}function jp(t,e,n){return{kind:t,value:e,error:n}}var ji=null;function zs(t){if(Cn.useDeprecatedSynchronousErrorHandling){let e=!ji;if(e&&(ji={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=ji;if(ji=null,n)throw r}}else t()}function FC(t){Cn.useDeprecatedSynchronousErrorHandling&&ji&&(ji.errorThrown=!0,ji.error=t)}var Bi=class extends Ye{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Tl(e)&&e.add(this)):this.destination=ZP}static create(e,n,r){return new Gs(e,n,r)}next(e){this.isStopped?$p(kC(e),this):this._next(e)}error(e){this.isStopped?$p(OC(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?$p(PC,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},JP=Function.prototype.bind;function Bp(t,e){return JP.call(t,e)}var Hp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Sl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Sl(r)}else Sl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Sl(n)}}},Gs=class extends Bi{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Cn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bp(e.next,s),error:e.error&&Bp(e.error,s),complete:e.complete&&Bp(e.complete,s)}):i=e}this.destination=new Hp(i)}};function Sl(t){Cn.useDeprecatedSynchronousErrorHandling?FC(t):Dl(t)}function XP(t){throw t}function $p(t,e){let{onStoppedNotification:n}=Cn;n&&qs.setTimeout(()=>n(t,e))}var ZP={closed:!0,next:ec,error:XP,complete:ec};var Ws=typeof Symbol=="function"&&Symbol.observable||"@@observable";function en(t){return t}function qp(...t){return zp(t)}function zp(t){return t.length===0?en:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=tO(n)?n:new Gs(n,r,i);return zs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=LC(r),new r((i,s)=>{let o=new Gs({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ws](){return this}pipe(...n){return zp(n)(this)}toPromise(n){return n=LC(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function LC(t){var e;return(e=t??Cn.Promise)!==null&&e!==void 0?e:Promise}function eO(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function tO(t){return t&&t instanceof Bi||eO(t)&&Tl(t)}function Gp(t){return re(t?.lift)}function we(t){return e=>{if(Gp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new Wp(t,e,n,r,i)}var Wp=class extends Bi{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ks(){return we((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Qs=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Gp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ye;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ye.EMPTY)}return e}refCount(){return Ks()(this)}};var VC=Hs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Rt=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Al(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new VC}next(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){zs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Up:(this.currentObservers=null,s.push(n),new Ye(()=>{this.currentObservers=null,Ui(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new Al(e,n),t})(),Al=class extends Rt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Up}};var Ct=class extends Rt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Kp={now(){return(Kp.delegate||Date).now()},delegate:void 0};var Rl=class extends Ye{constructor(e,n){super()}schedule(e,n=0){return this}};var tc={setInterval(t,e,...n){let{delegate:r}=tc;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=tc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ys=class extends Rl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return tc.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&tc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ui(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Js=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Js.now=Kp.now;var Xs=class extends Js{constructor(e,n=Js.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Zs=new Xs(Ys),Qp=Zs;var xl=class extends Ys{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ml=class extends Xs{};var Yp=new Ml(xl);var tn=new he(t=>t.complete());function Nl(t){return t&&re(t.schedule)}function UC(t){return t[t.length-1]}function Pl(t){return re(UC(t))?t.pop():void 0}function Zr(t){return Nl(UC(t))?t.pop():void 0}function Jp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function BC(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function jC(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $i(t){return this instanceof $i?(this.v=t,this):new $i(t)}function $C(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(I){return new Promise(function(D,x){s.push([m,I,D,x])>1||a(m,I)})})}function a(m,I){try{u(r[m](I))}catch(D){p(s[0][3],D)}}function u(m){m.value instanceof $i?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,I){m(I),s.shift(),s.length&&a(s[0][0],s[0][1])}}function HC(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jC=="function"?jC(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Ol=t=>t&&typeof t.length=="number"&&typeof t!="function";function kl(t){return re(t?.then)}function Fl(t){return re(t[Ws])}function Ll(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Vl(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function nO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ul=nO();function jl(t){return re(t?.[Ul])}function Bl(t){return $C(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield $i(n.read());if(i)return yield $i(void 0);yield yield $i(r)}}finally{n.releaseLock()}})}function $l(t){return re(t?.getReader)}function Ze(t){if(t instanceof he)return t;if(t!=null){if(Fl(t))return rO(t);if(Ol(t))return iO(t);if(kl(t))return sO(t);if(Ll(t))return qC(t);if(jl(t))return oO(t);if($l(t))return aO(t)}throw Vl(t)}function rO(t){return new he(e=>{let n=t[Ws]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iO(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sO(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Dl)})}function oO(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function qC(t){return new he(e=>{cO(t,e).catch(n=>e.error(n))})}function aO(t){return qC(Bl(t))}function cO(t,e){var n,r,i,s;return BC(this,void 0,void 0,function*(){try{for(n=HC(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function zt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ei(t,e=0){return we((n,r)=>{n.subscribe(fe(r,i=>zt(r,t,()=>r.next(i),e),()=>zt(r,t,()=>r.complete(),e),i=>zt(r,t,()=>r.error(i),e)))})}function ti(t,e=0){return we((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function zC(t,e){return Ze(t).pipe(ti(e),ei(e))}function GC(t,e){return Ze(t).pipe(ti(e),ei(e))}function WC(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function KC(t,e){return new he(n=>{let r;return zt(n,e,()=>{r=t[Ul](),zt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Hl(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{zt(n,e,()=>{let r=t[Symbol.asyncIterator]();zt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function QC(t,e){return Hl(Bl(t),e)}function YC(t,e){if(t!=null){if(Fl(t))return zC(t,e);if(Ol(t))return WC(t,e);if(kl(t))return GC(t,e);if(Ll(t))return Hl(t,e);if(jl(t))return KC(t,e);if($l(t))return QC(t,e)}throw Vl(t)}function qe(t,e){return e?YC(t,e):Ze(t)}function ee(...t){let e=Zr(t);return qe(t,e)}function eo(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function Xp(t){return!!t&&(t instanceof he||re(t.lift)&&re(t.subscribe))}var vr=Hs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function JC(t){return t instanceof Date&&!isNaN(t)}function pe(t,e){return we((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:uO}=Array;function lO(t,e){return uO(e)?t(...e):t(e)}function ql(t){return pe(e=>lO(t,e))}var{isArray:dO}=Array,{getPrototypeOf:hO,prototype:fO,keys:pO}=Object;function zl(t){if(t.length===1){let e=t[0];if(dO(e))return{args:e,keys:null};if(gO(e)){let n=pO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function gO(t){return t&&typeof t=="object"&&hO(t)===fO}function Gl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function nc(...t){let e=Zr(t),n=Pl(t),{args:r,keys:i}=zl(t);if(r.length===0)return qe([],e);let s=new he(mO(r,e,i?o=>Gl(i,o):en));return n?s.pipe(ql(n)):s}function mO(t,e,n=en){return r=>{XC(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)XC(e,()=>{let l=qe(t[u],e),h=!1;l.subscribe(fe(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function XC(t,e,n){t?zt(n,t,e):e()}function ZC(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},I=x=>l<r?D(x):u.push(x),D=x=>{s&&e.next(x),l++;let M=!1;Ze(n(x,h++)).subscribe(fe(e,U=>{i?.(U),s?I(U):e.next(U)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let U=u.shift();o?zt(e,o,()=>D(U)):D(U)}m()}catch(U){e.error(U)}}))};return t.subscribe(fe(e,I,()=>{p=!0,m()})),()=>{a?.()}}function et(t,e,n=1/0){return re(e)?et((r,i)=>pe((s,o)=>e(r,s,i,o))(Ze(t(r,i))),n):(typeof e=="number"&&(n=e),we((r,i)=>ZC(r,i,t,n)))}function to(t=1/0){return et(en,t)}function eb(){return to(1)}function no(...t){return eb()(qe(t,Zr(t)))}function Wl(t){return new he(e=>{Ze(t()).subscribe(e)})}function Zp(...t){let e=Pl(t),{args:n,keys:r}=zl(t),i=new he(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Ze(n[h]).subscribe(fe(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Gl(r,a):a),s.complete())}))}});return e?i.pipe(ql(e)):i}function tb(t=0,e,n=Qp){let r=-1;return e!=null&&(Nl(e)?n=e:r=e),new he(i=>{let s=JC(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}function Hi(t=0,e=Zs){return t<0&&(t=0),tb(t,t,e)}function ln(t,e){return we((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function ni(t){return we((e,n)=>{let r=null,i=!1,s;r=e.subscribe(fe(n,void 0,void 0,o=>{s=Ze(t(o,ni(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function nb(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(fe(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function qi(t,e){return re(e)?et(t,e,1):et(t,1)}function ri(t){return we((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function wr(t){return t<=0?()=>tn:we((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function eg(t){return pe(()=>t)}function Kl(t=_O){return we((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function _O(){return new vr}function rc(t){return we((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function jn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ln((i,s)=>t(i,s,r)):en,wr(1),n?ri(e):Kl(()=>new vr))}function ro(t){return t<=0?()=>tn:we((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function tg(t,e){let n=arguments.length>=2;return r=>r.pipe(t?ln((i,s)=>t(i,s,r)):en,ro(1),n?ri(e):Kl(()=>new vr))}function ng(t,e){return we(nb(t,e,arguments.length>=2,!0))}function rg(...t){let e=Zr(t);return we((n,r)=>{(e?no(t,n,e):no(t,n)).subscribe(r)})}function dn(t,e){return we((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(fe(r,u=>{i?.unsubscribe();let l=0,h=s++;Ze(t(u,h)).subscribe(i=fe(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function ig(t){return we((e,n)=>{Ze(t).subscribe(fe(n,()=>n.complete(),ec)),!n.closed&&e.subscribe(n)})}function ct(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?we((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):en}var Lb="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(sm(e,n)),this.code=e}};function sm(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gc(t){return{toString:t}.toString()}var Ql="__parameters__";function yO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Vb(t,e,n){return gc(()=>{let r=yO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Ql)?u[Ql]:Object.defineProperty(u,Ql,{value:[]})[Ql];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var zi=globalThis;function Me(t){for(let e in t)if(t[e]===Me)return e;throw Error("Could not find renamed property on target object.")}function vO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Bt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Bt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function wg(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var wO=Me({__forward_ref__:Me});function Cr(t){return t.__forward_ref__=Cr,t.toString=function(){return Bt(this())},t}function jt(t){return Ub(t)?t():t}function Ub(t){return typeof t=="function"&&t.hasOwnProperty(wO)&&t.__forward_ref__===Cr}function z(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function br(t){return{providers:t.providers||[],imports:t.imports||[]}}function bd(t){return rb(t,Bb)||rb(t,$b)}function jb(t){return bd(t)!==null}function rb(t,e){return t.hasOwnProperty(e)?t[e]:null}function IO(t){let e=t&&(t[Bb]||t[$b]);return e||null}function ib(t){return t&&(t.hasOwnProperty(sb)||t.hasOwnProperty(EO))?t[sb]:null}var Bb=Me({\u0275prov:Me}),sb=Me({\u0275inj:Me}),$b=Me({ngInjectableDef:Me}),EO=Me({ngInjectorDef:Me}),B=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=z({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hb(t){return t&&!!t.\u0275providers}var CO=Me({\u0275cmp:Me}),bO=Me({\u0275dir:Me}),TO=Me({\u0275pipe:Me}),DO=Me({\u0275mod:Me}),id=Me({\u0275fac:Me}),ic=Me({__NG_ELEMENT_ID__:Me}),ob=Me({__NG_ENV_ID__:Me});function lo(t){return typeof t=="string"?t:t==null?"":String(t)}function SO(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():lo(t)}function AO(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function om(t,e){throw new G(-201,!1)}var oe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(oe||{}),Ig;function qb(){return Ig}function hn(t){let e=Ig;return Ig=t,e}function zb(t,e,n){let r=bd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&oe.Optional)return null;if(e!==void 0)return e;om(t,"Injector")}var RO={},sc=RO,Eg="__NG_DI_FLAG__",sd="ngTempTokenPath",xO="ngTokenPath",MO=/\n/gm,NO="\u0275",ab="__source",co;function PO(){return co}function ii(t){let e=co;return co=t,e}function OO(t,e=oe.Default){if(co===void 0)throw new G(-203,!1);return co===null?zb(t,void 0,e):co.get(t,e&oe.Optional?null:void 0,e)}function J(t,e=oe.Default){return(qb()||OO)(jt(t),e)}function L(t,e=oe.Default){return J(t,Td(e))}function Td(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Cg(t){let e=[];for(let n=0;n<t.length;n++){let r=jt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=oe.Default;for(let o=0;o<r.length;o++){let a=r[o],u=kO(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(J(i,s))}else e.push(J(r))}return e}function Gb(t,e){return t[Eg]=e,t.prototype[Eg]=e,t}function kO(t){return t[Eg]}function FO(t,e,n,r){let i=t[sd];throw e[ab]&&i.unshift(e[ab]),t.message=LO(`
`+t.message,i,n,r),t[xO]=i,t[sd]=null,t}function LO(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==NO?t.slice(2):t;let i=Bt(e);if(Array.isArray(e))i=e.map(Bt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Bt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(MO,`
  `)}`}var Le=Gb(Vb("Optional"),8);var Wb=Gb(Vb("SkipSelf"),4);function ho(t,e){let n=t.hasOwnProperty(id);return n?t[id]:null}function am(t,e){t.forEach(n=>Array.isArray(n)?am(n,e):e(n))}function Kb(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function od(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function VO(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function cm(t,e,n){let r=mc(t,e);return r>=0?t[r|1]=n:(r=~r,VO(t,r,e,n)),r}function sg(t,e){let n=mc(t,e);if(n>=0)return t[n|1]}function mc(t,e){return UO(t,e,1)}function UO(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var fo={},Gt=[],po=new B(""),Qb=new B("",-1),Yb=new B(""),ad=class{get(e,n=sc){if(n===sc){let r=new Error(`NullInjectorError: No provider for ${Bt(e)}!`);throw r.name="NullInjectorError",r}return n}},Jb=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Jb||{}),Hn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Hn||{}),tt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(tt||{});function jO(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function bg(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];BO(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function Xb(t){return t===3||t===4||t===6}function BO(t){return t.charCodeAt(0)===64}function oc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cb(t,n,i,null,e[++r]):cb(t,n,i,null,null))}}return t}function cb(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var Zb="ng-template";function $O(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&jO(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(um(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function um(t){return t.type===4&&t.value!==Zb}function HO(t,e,n){let r=t.type===4&&!n?Zb:t.value;return e===r}function qO(t,e,n){let r=4,i=t.attrs,s=i!==null?WO(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!bn(r)&&!bn(u))return!1;if(o&&bn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!HO(t,u,n)||u===""&&e.length===1){if(bn(r))return!1;o=!0}}else if(r&8){if(i===null||!$O(t,i,u,n)){if(bn(r))return!1;o=!0}}else{let l=e[++a],h=zO(u,i,um(t),n);if(h===-1){if(bn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(bn(r))return!1;o=!0}}}}return bn(r)||o}function bn(t){return(t&1)===0}function zO(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return KO(e,t)}function GO(t,e,n=!1){for(let r=0;r<e.length;r++)if(qO(t,e[r],n))return!0;return!1}function WO(t){for(let e=0;e<t.length;e++){let n=t[e];if(Xb(n))return e}return t.length}function KO(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function ub(t,e){return t?":not("+e.trim()+")":e}function QO(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!bn(o)&&(e+=ub(s,i),i=""),r=o,s=s||!bn(r);n++}return i!==""&&(e+=ub(s,i)),e}function YO(t){return t.map(QO).join(",")}function JO(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!bn(i))break;i=s}r++}return{attrs:e,classes:n}}function rt(t){return gc(()=>{let e=i0(t),n=Se(V({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Jb.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Hn.Emulated,styles:t.styles||Gt,_:null,schemas:t.schemas||null,tView:null,id:""});s0(n);let r=t.dependencies;return n.directiveDefs=db(r,!1),n.pipeDefs=db(r,!0),n.id=ek(n),n})}function XO(t){return oi(t)||e0(t)}function ZO(t){return t!==null}function Tr(t){return gc(()=>({type:t.type,bootstrap:t.bootstrap||Gt,declarations:t.declarations||Gt,imports:t.imports||Gt,exports:t.exports||Gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function lb(t,e){if(t==null)return fo;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=tt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==tt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function pt(t){return gc(()=>{let e=i0(t);return s0(e),e})}function oi(t){return t[CO]||null}function e0(t){return t[bO]||null}function t0(t){return t[TO]||null}function n0(t){let e=oi(t)||e0(t)||t0(t);return e!==null?e.standalone:!1}function r0(t,e){let n=t[DO]||null;if(!n&&e===!0)throw new Error(`Type ${Bt(t)} does not have '\u0275mod' property.`);return n}function i0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||fo,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Gt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lb(t.inputs,e),outputs:lb(t.outputs),debugInfo:null}}function s0(t){t.features?.forEach(e=>e(t))}function db(t,e){if(!t)return null;let n=e?t0:XO;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(ZO)}function ek(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Kt(t){return{\u0275providers:t}}function tk(...t){return{\u0275providers:o0(!0,t),\u0275fromNgModule:!0}}function o0(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return am(e,o=>{let a=o;Tg(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&a0(i,s),n}function a0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];lm(i,s=>{e(s,r)})}}function Tg(t,e,n,r){if(t=jt(t),!t)return!1;let i=null,s=ib(t),o=!s&&oi(t);if(!s&&!o){let u=t.ngModule;if(s=ib(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Tg(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{am(s.imports,h=>{Tg(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&a0(l,e)}if(!a){let l=ho(i)||(()=>new i);e({provide:i,useFactory:l,deps:Gt},i),e({provide:Yb,useValue:i,multi:!0},i),e({provide:po,useValue:()=>J(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;lm(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function lm(t,e){for(let n of t)Hb(n)&&(n=n.\u0275providers),Array.isArray(n)?lm(n,e):e(n)}var nk=Me({provide:String,useValue:Me});function c0(t){return t!==null&&typeof t=="object"&&nk in t}function rk(t){return!!(t&&t.useExisting)}function ik(t){return!!(t&&t.useFactory)}function go(t){return typeof t=="function"}function sk(t){return!!t.useClass}var Dd=new B(""),Zl={},ok={},og;function dm(){return og===void 0&&(og=new ad),og}var Wt=class{},ac=class extends Wt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Sg(e,o=>this.processProvider(o)),this.records.set(Qb,io(void 0,this)),i.has("environment")&&this.records.set(Wt,io(void 0,this));let s=this.records.get(Dd);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Yb,Gt,oe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ii(this),r=hn(void 0),i;try{return e()}finally{ii(n),hn(r)}}get(e,n=sc,r=oe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(ob))return e[ob](this);r=Td(r);let i,s=ii(this),o=hn(void 0);try{if(!(r&oe.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=dk(e)&&bd(e);l&&this.injectableDefInScope(l)?u=io(Dg(e),Zl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&oe.Self?dm():this.parent;return n=r&oe.Optional&&n===sc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[sd]=a[sd]||[]).unshift(Bt(e)),s)throw a;return FO(a,e,"R3InjectorError",this.source)}else throw a}finally{hn(o),ii(s)}}resolveInjectorInitializers(){let e=Te(null),n=ii(this),r=hn(void 0),i;try{let s=this.get(po,Gt,oe.Self);for(let o of s)o()}finally{ii(n),hn(r),Te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Bt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=jt(e);let n=go(e)?e:jt(e&&e.provide),r=ck(e);if(!go(e)&&e.multi===!0){let i=this.records.get(n);i||(i=io(void 0,Zl,!0),i.factory=()=>Cg(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Te(null);try{return n.value===Zl&&(n.value=ok,n.value=n.factory()),typeof n.value=="object"&&n.value&&lk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=jt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Dg(t){let e=bd(t),n=e!==null?e.factory:ho(t);if(n!==null)return n;if(t instanceof B)throw new G(204,!1);if(t instanceof Function)return ak(t);throw new G(204,!1)}function ak(t){if(t.length>0)throw new G(204,!1);let n=IO(t);return n!==null?()=>n.factory(t):()=>new t}function ck(t){if(c0(t))return io(void 0,t.useValue);{let e=u0(t);return io(e,Zl)}}function u0(t,e,n){let r;if(go(t)){let i=jt(t);return ho(i)||Dg(i)}else if(c0(t))r=()=>jt(t.useValue);else if(ik(t))r=()=>t.useFactory(...Cg(t.deps||[]));else if(rk(t))r=()=>J(jt(t.useExisting));else{let i=jt(t&&(t.useClass||t.provide));if(uk(t))r=()=>new i(...Cg(t.deps));else return ho(i)||Dg(i)}return r}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uk(t){return!!t.deps}function lk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dk(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function Sg(t,e){for(let n of t)Array.isArray(n)?Sg(n,e):n&&Hb(n)?Sg(n.\u0275providers,e):e(n)}function Dr(t,e){t instanceof ac&&t.assertNotDestroyed();let n,r=ii(t),i=hn(void 0);try{return e()}finally{ii(r),hn(i)}}function l0(){return qb()!==void 0||PO()!=null}function hk(t){if(!l0())throw new G(-203,!1)}function fk(t){return typeof t=="function"}var Sr=0,me=1,te=2,xt=3,Dn=4,Rn=5,cd=6,cc=7,Sn=8,mo=9,An=10,nt=11,uc=12,hb=13,Io=14,qn=15,Sd=16,so=17,_o=18,Ad=19,d0=20,si=21,ag=22,Ki=23,ai=25,h0=1;var Qi=7,ud=8,ld=9,fn=10,hm=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(hm||{});function Gi(t){return Array.isArray(t)&&typeof t[h0]=="object"}function Ar(t){return Array.isArray(t)&&t[h0]===!0}function f0(t){return(t.flags&4)!==0}function Rd(t){return t.componentOffset>-1}function fm(t){return(t.flags&1)===1}function ci(t){return!!t.template}function pk(t){return(t[te]&512)!==0}var Ag=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function p0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Wn(){return g0}function g0(t){return t.type.prototype.ngOnChanges&&(t.setInput=mk),gk}Wn.ngInherit=!0;function gk(){let t=_0(this),e=t?.current;if(e){let n=t.previous;if(n===fo)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function mk(t,e,n,r,i){let s=this.declaredInputs[r],o=_0(t)||_k(t,{previous:fo,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Ag(l&&l.currentValue,n,u===fo),p0(t,e,i,n)}var m0="__ngSimpleChanges__";function _0(t){return t[m0]||null}function _k(t,e){return t[m0]=e}var fb=null;var Bn=function(t,e,n){fb?.(t,e,n)},yk="svg",vk="math",wk=!1;function Ik(){return wk}function zn(t){for(;Array.isArray(t);)t=t[Sr];return t}function y0(t,e){return zn(e[t])}function pn(t,e){return zn(e[t.index])}function v0(t,e){return t.data[e]}function di(t,e){let n=e[t];return Gi(n)?n:n[Sr]}function pm(t){return(t[te]&128)===128}function Ek(t){return Ar(t[xt])}function dd(t,e){return e==null?null:t[e]}function w0(t){t[so]=0}function Ck(t){t[te]&1024||(t[te]|=1024,pm(t)&&lc(t))}function bk(t,e){for(;t>0;)e=e[Io],t--;return e}function gm(t){return!!(t[te]&9216||t[Ki]?.dirty)}function Rg(t){t[An].changeDetectionScheduler?.notify(1),gm(t)?lc(t):t[te]&64&&(Ik()?(t[te]|=1024,lc(t)):t[An].changeDetectionScheduler?.notify())}function lc(t){t[An].changeDetectionScheduler?.notify();let e=dc(t);for(;e!==null&&!(e[te]&8192||(e[te]|=8192,!pm(e)));)e=dc(e)}function I0(t,e){if((t[te]&256)===256)throw new G(911,!1);t[si]===null&&(t[si]=[]),t[si].push(e)}function Tk(t,e){if(t[si]===null)return;let n=t[si].indexOf(e);n!==-1&&t[si].splice(n,1)}function dc(t){let e=t[xt];return Ar(e)?e[xt]:e}var de={lFrame:A0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Dk(){return de.lFrame.elementDepthCount}function Sk(){de.lFrame.elementDepthCount++}function Ak(){de.lFrame.elementDepthCount--}function E0(){return de.bindingsEnabled}function Rk(){return de.skipHydrationRootTNode!==null}function xk(t){return de.skipHydrationRootTNode===t}function Mk(){de.skipHydrationRootTNode=null}function Ne(){return de.lFrame.lView}function Qt(){return de.lFrame.tView}function ae(t){return de.lFrame.contextLView=t,t[Sn]}function ce(t){return de.lFrame.contextLView=null,t}function Yt(){let t=C0();for(;t!==null&&t.type===64;)t=t.parent;return t}function C0(){return de.lFrame.currentTNode}function Nk(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function _c(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function b0(){return de.lFrame.isParent}function Pk(){de.lFrame.isParent=!1}function Ok(){return de.lFrame.bindingIndex}function kk(t){return de.lFrame.bindingIndex=t}function xd(){return de.lFrame.bindingIndex++}function mm(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Fk(){return de.lFrame.inI18n}function Lk(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,xg(e)}function Vk(){return de.lFrame.currentDirectiveIndex}function xg(t){de.lFrame.currentDirectiveIndex=t}function Uk(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function T0(t){de.lFrame.currentQueryIndex=t}function jk(t){let e=t[me];return e.type===2?e.declTNode:e.type===1?t[Rn]:null}function D0(t,e,n){if(n&oe.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&oe.Host);)if(i=jk(s),i===null||(s=s[Io],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=de.lFrame=S0();return r.currentTNode=e,r.lView=t,!0}function _m(t){let e=S0(),n=t[me];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function S0(){let t=de.lFrame,e=t===null?null:t.child;return e===null?A0(t):e}function A0(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function R0(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var x0=R0;function ym(){let t=R0();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Bk(t){return(de.lFrame.contextLView=bk(t,de.lFrame.contextLView))[Sn]}function hi(){return de.lFrame.selectedIndex}function Yi(t){de.lFrame.selectedIndex=t}function vm(){let t=de.lFrame;return v0(t.tView,t.selectedIndex)}function $k(){return de.lFrame.currentNamespace}var M0=!0;function wm(){return M0}function Im(t){M0=t}function Hk(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=g0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Em(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function ed(t,e,n){N0(t,e,3,n)}function td(t,e,n,r){(t[te]&3)===n&&N0(t,e,n,r)}function cg(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function N0(t,e,n,r){let i=r!==void 0?t[so]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[so]+=65536),(a<s||s==-1)&&(qk(t,n,e,u),t[so]=(t[so]&4294901760)+u+2),u++}function pb(t,e){Bn(4,t,e);let n=Te(null);try{e.call(t)}finally{Te(n),Bn(5,t,e)}}function qk(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[te]>>14<t[so]>>16&&(t[te]&3)===e&&(t[te]+=16384,pb(a,s)):pb(a,s)}var uo=-1,Ji=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function zk(t){return t instanceof Ji}function Gk(t){return(t.flags&8)!==0}function Wk(t){return(t.flags&16)!==0}function P0(t){return t!==uo}function hd(t){return t&32767}function Kk(t){return t>>16}function fd(t,e){let n=Kk(t),r=e;for(;n>0;)r=r[Io],n--;return r}var Mg=!0;function gb(t){let e=Mg;return Mg=t,e}var Qk=256,O0=Qk-1,k0=5,Yk=0,$n={};function Jk(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ic)&&(r=n[ic]),r==null&&(r=n[ic]=Yk++);let i=r&O0,s=1<<i;e.data[t+(i>>k0)]|=s}function pd(t,e){let n=F0(t,e);if(n!==-1)return n;let r=e[me];r.firstCreatePass&&(t.injectorIndex=e.length,ug(r.data,t),ug(e,null),ug(r.blueprint,null));let i=Cm(t,e),s=t.injectorIndex;if(P0(i)){let o=hd(i),a=fd(i,e),u=a[me].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function ug(t,e){t.push(0,0,0,0,0,0,0,0,e)}function F0(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Cm(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=B0(i),r===null)return uo;if(n++,i=i[Io],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return uo}function Ng(t,e,n){Jk(t,e,n)}function Xk(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(Xb(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function L0(t,e,n){if(n&oe.Optional||t!==void 0)return t;om(e,"NodeInjector")}function V0(t,e,n,r){if(n&oe.Optional&&r===void 0&&(r=null),!(n&(oe.Self|oe.Host))){let i=t[mo],s=hn(void 0);try{return i?i.get(e,r,n&oe.Optional):zb(e,r,n&oe.Optional)}finally{hn(s)}}return L0(r,e,n)}function U0(t,e,n,r=oe.Default,i){if(t!==null){if(e[te]&2048&&!(r&oe.Self)){let o=r1(t,e,n,r,$n);if(o!==$n)return o}let s=j0(t,e,n,r,$n);if(s!==$n)return s}return V0(e,n,r,i)}function j0(t,e,n,r,i){let s=t1(n);if(typeof s=="function"){if(!D0(e,t,r))return r&oe.Host?L0(i,n,r):V0(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&oe.Optional))om(n);else return o}finally{x0()}}else if(typeof s=="number"){let o=null,a=F0(t,e),u=uo,l=r&oe.Host?e[qn][Rn]:null;for((a===-1||r&oe.SkipSelf)&&(u=a===-1?Cm(t,e):e[a+8],u===uo||!_b(r,!1)?a=-1:(o=e[me],a=hd(u),e=fd(u,e)));a!==-1;){let h=e[me];if(mb(s,a,h.data)){let p=Zk(a,e,n,o,r,l);if(p!==$n)return p}u=e[a+8],u!==uo&&_b(r,e[me].data[a+8]===l)&&mb(s,a,e)?(o=h,a=hd(u),e=fd(u,e)):a=-1}}return i}function Zk(t,e,n,r,i,s){let o=e[me],a=o.data[t+8],u=r==null?Rd(a)&&Mg:r!=o&&(a.type&3)!==0,l=i&oe.Host&&s===a,h=e1(a,o,n,u,l);return h!==null?yo(e,o,h,a):$n}function e1(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let I=p;I<m;I++){let D=o[I];if(I<u&&n===D||I>=u&&D.type===n)return I}if(i){let I=o[u];if(I&&ci(I)&&I.type===n)return u}return null}function yo(t,e,n,r){let i=t[n],s=e.data;if(zk(i)){let o=i;o.resolving&&AO(SO(s[n]));let a=gb(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?hn(o.injectImpl):null,h=D0(t,r,oe.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&Hk(n,s[n],e)}finally{l!==null&&hn(l),gb(a),o.resolving=!1,x0()}}return i}function t1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ic)?t[ic]:void 0;return typeof e=="number"?e>=0?e&O0:n1:e}function mb(t,e,n){let r=1<<t;return!!(n[e+(t>>k0)]&r)}function _b(t,e){return!(t&oe.Self)&&!(t&oe.Host&&e)}var Wi=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return U0(this._tNode,this._lView,e,Td(r),n)}};function n1(){return new Wi(Yt(),Ne())}function Eo(t){return gc(()=>{let e=t.prototype.constructor,n=e[id]||Pg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[id]||Pg(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Pg(t){return Ub(t)?()=>{let e=Pg(jt(t));return e&&e()}:ho(t)}function r1(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=j0(s,o,n,r|oe.Self,$n);if(a!==$n)return a;let u=s.parent;if(!u){let l=o[d0];if(l){let h=l.get(n,$n,r);if(h!==$n)return h}u=B0(o),o=o[Io]}s=u}return i}function B0(t){let e=t[me],n=e.type;return n===2?e.declTNode:n===1?t[Rn]:null}function bm(t){return Xk(Yt(),t)}function yb(t,e=null,n=null,r){let i=$0(t,e,n,r);return i.resolveInjectorInitializers(),i}function $0(t,e=null,n=null,r,i=new Set){let s=[n||Gt,tk(t)];return r=r||(typeof t=="object"?void 0:Bt(t)),new ac(s,e||dm(),r||null,i)}var ut=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return yb({name:""},i,r,"");{let s=r.name??"";return yb({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=sc,e.NULL=new ad,e.\u0275prov=z({token:e,providedIn:"any",factory:()=>J(Qb)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var i1="ngOriginalError";function lg(t){return t[i1]}var Gn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&lg(e);for(;n&&lg(n);)n=lg(n);return n||null}},H0=new B("",{providedIn:"root",factory:()=>L(Gn).handleError.bind(void 0)}),Tm=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s1,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),Og=class extends Tm{constructor(e){super(),this._lView=e}onDestroy(e){return I0(this._lView,e),()=>Tk(this._lView,e)}};function s1(){return new Og(Ne())}function o1(){return Md(Yt(),Ne())}function Md(t,e){return new fi(pn(t,e))}var fi=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=o1;let t=e;return t})();var kg=class extends Rt{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,l0()&&(this.destroyRef=L(Tm,{optional:!0})??void 0)}emit(e){let n=Te(null);try{super.next(e)}finally{Te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=dg(s),i&&(i=dg(i)),o&&(o=dg(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ye&&e.add(a),a}};function dg(t){return e=>{setTimeout(t,void 0,e)}}var ft=kg;function q0(t){return(t.flags&128)===128}var z0=new Map,a1=0;function c1(){return a1++}function u1(t){z0.set(t[Ad],t)}function l1(t){z0.delete(t[Ad])}var vb="__ngContext__";function Xi(t,e){Gi(e)?(t[vb]=e[Ad],u1(e)):t[vb]=e}function G0(t){return K0(t[uc])}function W0(t){return K0(t[Dn])}function K0(t){for(;t!==null&&!Ar(t);)t=t[Dn];return t}var Fg;function Q0(t){Fg=t}function d1(){if(Fg!==void 0)return Fg;if(typeof document<"u")return document;throw new G(210,!1)}var Dm=new B("",{providedIn:"root",factory:()=>h1}),h1="ng",Sm=new B(""),Kn=new B("",{providedIn:"platform",factory:()=>"unknown"});var Am=new B("",{providedIn:"root",factory:()=>d1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var f1="h",p1="b";var g1=()=>null;function Rm(t,e,n=!1){return g1(t,e,n)}var Y0=!1,m1=new B("",{providedIn:"root",factory:()=>Y0});var Yl;function _1(){if(Yl===void 0&&(Yl=null,zi.trustedTypes))try{Yl=zi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Yl}function wb(t){return _1()?.createScriptURL(t)||t}var gd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Lb})`}};function Co(t){return t instanceof gd?t.changingThisBreaksApplicationSecurity:t}function xm(t,e){let n=y1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Lb})`)}return n===e}function y1(t){return t instanceof gd&&t.getTypeName()||null}var v1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function J0(t){return t=String(t),t.match(v1)?t:"unsafe:"+t}var Nd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Nd||{});function w1(t){let e=Z0();return e?e.sanitize(Nd.URL,t)||"":xm(t,"URL")?Co(t):J0(lo(t))}function I1(t){let e=Z0();if(e)return wb(e.sanitize(Nd.RESOURCE_URL,t)||"");if(xm(t,"ResourceURL"))return wb(Co(t));throw new G(904,!1)}function E1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?I1:w1}function X0(t,e,n){return E1(e,n)(t)}function Z0(){let t=Ne();return t&&t[An].sanitizer}function eT(t){return t instanceof Function?t():t}function C1(t){return(t??L(ut)).get(Kn)==="browser"}var Ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ir||{}),b1;function Mm(t,e){return b1(t,e)}function oo(t,e,n,r,i){if(r!=null){let s,o=!1;Ar(r)?s=r:Gi(r)&&(o=!0,r=r[Sr]);let a=zn(r);t===0&&n!==null?i==null?sT(e,n,a):md(e,n,a,i||null,!0):t===1&&n!==null?md(e,n,a,i||null,!0):t===2?B1(e,a,o):t===3&&e.destroyNode(a),s!=null&&H1(e,t,s,n,i)}}function T1(t,e){return t.createText(e)}function D1(t,e,n){t.setValue(e,n)}function tT(t,e,n){return t.createElement(e,n)}function S1(t,e){nT(t,e),e[Sr]=null,e[Rn]=null}function A1(t,e,n,r,i,s){r[Sr]=i,r[Rn]=e,Pd(t,r,n,1,i,s)}function nT(t,e){e[An].changeDetectionScheduler?.notify(1),Pd(t,e,e[nt],2,null,null)}function R1(t){let e=t[uc];if(!e)return hg(t[me],t);for(;e;){let n=null;if(Gi(e))n=e[uc];else{let r=e[fn];r&&(n=r)}if(!n){for(;e&&!e[Dn]&&e!==t;)Gi(e)&&hg(e[me],e),e=e[xt];e===null&&(e=t),Gi(e)&&hg(e[me],e),n=e&&e[Dn]}e=n}}function x1(t,e,n,r){let i=fn+r,s=n.length;r>0&&(n[i-1][Dn]=e),r<s-fn?(e[Dn]=n[i],Kb(n,fn+r,e)):(n.push(e),e[Dn]=null),e[xt]=n;let o=e[Sd];o!==null&&n!==o&&M1(o,e);let a=e[_o];a!==null&&a.insertView(t),Rg(e),e[te]|=128}function M1(t,e){let n=t[ld],i=e[xt][xt][qn];e[qn]!==i&&(t[te]|=hm.HasTransplantedViews),n===null?t[ld]=[e]:n.push(e)}function rT(t,e){let n=t[ld],r=n.indexOf(e);n.splice(r,1)}function Lg(t,e){if(t.length<=fn)return;let n=fn+e,r=t[n];if(r){let i=r[Sd];i!==null&&i!==t&&rT(i,r),e>0&&(t[n-1][Dn]=r[Dn]);let s=od(t,fn+e);S1(r[me],r);let o=s[_o];o!==null&&o.detachView(s[me]),r[xt]=null,r[Dn]=null,r[te]&=-129}return r}function iT(t,e){if(!(e[te]&256)){let n=e[nt];n.destroyNode&&Pd(t,e,n,3,null,null),R1(e)}}function hg(t,e){if(e[te]&256)return;let n=Te(null);try{e[te]&=-129,e[te]|=256,e[Ki]&&xC(e[Ki]),P1(t,e),N1(t,e),e[me].type===1&&e[nt].destroy();let r=e[Sd];if(r!==null&&Ar(e[xt])){r!==e[xt]&&rT(r,e);let i=e[_o];i!==null&&i.detachView(t)}l1(e)}finally{Te(n)}}function N1(t,e){let n=t.cleanup,r=e[cc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[cc]=null);let i=e[si];if(i!==null){e[si]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function P1(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ji)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];Bn(4,a,u);try{u.call(a)}finally{Bn(5,a,u)}}else{Bn(4,i,s);try{s.call(i)}finally{Bn(5,i,s)}}}}}function O1(t,e,n){return k1(t,e.parent,n)}function k1(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Sr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Hn.None||s===Hn.Emulated)return null}return pn(r,n)}}function md(t,e,n,r,i){t.insertBefore(e,n,r,i)}function sT(t,e,n){t.appendChild(e,n)}function Ib(t,e,n,r,i){r!==null?md(t,e,n,r,i):sT(t,e,n)}function F1(t,e,n,r){t.removeChild(e,n,r)}function Nm(t,e){return t.parentNode(e)}function L1(t,e){return t.nextSibling(e)}function V1(t,e,n){return j1(t,e,n)}function U1(t,e,n){return t.type&40?pn(t,n):null}var j1=U1,Eb;function Pm(t,e,n,r){let i=O1(t,r,e),s=e[nt],o=r.parent||e[Rn],a=V1(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)Ib(s,i,n[u],a,!1);else Ib(s,i,n,a,!1);Eb!==void 0&&Eb(s,r,e,n,i)}function nd(t,e){if(e!==null){let n=e.type;if(n&3)return pn(e,t);if(n&4)return Vg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return nd(t,r);{let i=t[e.index];return Ar(i)?Vg(-1,i):zn(i)}}else{if(n&32)return Mm(e,t)()||zn(t[e.index]);{let r=oT(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=dc(t[qn]);return nd(i,r)}else return nd(t,e.next)}}}return null}function oT(t,e){if(e!==null){let r=t[qn][Rn],i=e.projection;return r.projection[i]}return null}function Vg(t,e){let n=fn+t+1;if(n<e.length){let r=e[n],i=r[me].firstChild;if(i!==null)return nd(r,i)}return e[Qi]}function B1(t,e,n){let r=Nm(t,e);r&&F1(t,r,e,n)}function Om(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Xi(zn(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Om(t,e,n.child,r,i,s,!1),oo(e,t,i,a,s);else if(u&32){let l=Mm(n,r),h;for(;h=l();)oo(e,t,i,h,s);oo(e,t,i,a,s)}else u&16?$1(t,e,r,n,i,s):oo(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Pd(t,e,n,r,i,s){Om(n,r,t.firstChild,e,i,s,!1)}function $1(t,e,n,r,i,s){let o=n[qn],u=o[Rn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];oo(e,t,i,h,s)}else{let l=u,h=o[xt];q0(r)&&(l.flags|=128),Om(t,e,l,h,i,s,!0)}}function H1(t,e,n,r,i){let s=n[Qi],o=zn(n);s!==o&&oo(e,t,r,s,i);for(let a=fn;a<n.length;a++){let u=n[a];Pd(u[me],u,t,e,r,s)}}function q1(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:Ir.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Ir.Important),t.setStyle(n,r,i,s))}}function z1(t,e,n){t.setAttribute(e,"style",n)}function aT(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function cT(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&bg(t,e,r),i!==null&&aT(t,e,i),s!==null&&z1(t,e,s)}var Qn={};function K(t=1){uT(Qt(),Ne(),hi()+t,!1)}function uT(t,e,n,r){if(!r)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&ed(e,s,n)}else{let s=t.preOrderHooks;s!==null&&td(e,s,0,n)}Yi(n)}function $(t,e=oe.Default){let n=Ne();if(n===null)return J(t,e);let r=Yt();return U0(r,n,jt(t),e)}function lT(){let t="invalid";throw new Error(t)}function dT(t,e,n,r,i,s){let o=Te(null);try{let a=null;i&tt.SignalBased&&(a=e[r][kp]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&tt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):p0(e,a,r,s)}finally{Te(o)}}function G1(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Yi(~i);else{let s=i,o=n[++r],a=n[++r];Lk(o,s);let u=e[s];a(2,u)}}}finally{Yi(-1)}}function Od(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[Sr]=i,p[te]=r|4|128|8|64,(l!==null||t&&t[te]&2048)&&(p[te]|=2048),w0(p),p[xt]=p[Io]=t,p[Sn]=n,p[An]=o||t&&t[An],p[nt]=a||t&&t[nt],p[mo]=u||t&&t[mo]||null,p[Rn]=s,p[Ad]=c1(),p[cd]=h,p[d0]=l,p[qn]=e.type==2?t[qn]:p,p}function kd(t,e,n,r,i){let s=t.data[e];if(s===null)s=W1(t,e,n,r,i),Fk()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=Nk();s.injectorIndex=o===null?-1:o.injectorIndex}return _c(s,!0),s}function W1(t,e,n,r,i){let s=C0(),o=b0(),a=o?s:s&&s.parent,u=t.data[e]=X1(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function hT(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function fT(t,e,n,r,i){let s=hi(),o=r&2;try{Yi(-1),o&&e.length>ai&&uT(t,e,ai,!1),Bn(o?2:0,i),n(r,i)}finally{Yi(s),Bn(o?3:1,i)}}function pT(t,e,n){if(f0(e)){let r=Te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{Te(r)}}}function gT(t,e,n){E0()&&(iF(t,e,n,pn(n,e)),(n.flags&64)===64&&IT(t,e,n))}function mT(t,e,n=pn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function _T(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=km(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function km(t,e,n,r,i,s,o,a,u,l,h){let p=ai+r,m=p+i,I=K1(p,m),D=typeof l=="function"?l():l;return I[me]={type:t,blueprint:I,template:n,queries:null,viewQuery:a,declTNode:e,data:I.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:D,incompleteFirstPass:!1,ssrId:h}}function K1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Qn);return n}function Q1(t,e,n,r){let s=r.get(m1,Y0)||n===Hn.ShadowDom,o=t.selectRootElement(e,s);return Y1(o),o}function Y1(t){J1(t)}var J1=()=>null;function X1(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return Rk()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Cb(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=tt.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?bb(r,n,l,a,u):bb(r,n,l,a)}return r}function bb(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function Z1(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,I=m?m.inputs:null,D=m?m.outputs:null;u=Cb(0,p.inputs,h,u,I),l=Cb(1,p.outputs,h,l,D);let x=u!==null&&o!==null&&!um(e)?gF(u,h,o):null;a.push(x)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function eF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yT(t,e,n,r,i,s,o,a){let u=pn(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(Fm(t,n,h,r,i),Rd(e)&&tF(n,e.index)):e.type&3?(r=eF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function tF(t,e){let n=di(e,t);n[te]&16||(n[te]|=64)}function vT(t,e,n,r){if(E0()){let i=r===null?null:{"":-1},s=oF(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&wT(t,e,n,o,i,a),i&&aF(n,r,i)}n.mergedAttrs=oc(n.mergedAttrs,n.attrs)}function wT(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Ng(pd(n,e),t,r[l].type);uF(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=hT(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=oc(n.mergedAttrs,h.hostAttrs),lF(t,n,e,u,h),cF(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}Z1(t,n,s)}function nF(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;rF(o)!=a&&o.push(a),o.push(n,r,s)}}function rF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function iF(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Rd(n)&&dF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||pd(n,e),Xi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=yo(e,t,a,n);if(Xi(l,e),o!==null&&pF(e,a-i,l,u,n,o),ci(u)){let h=di(n.index,e);h[Sn]=yo(e,t,a,n)}}}function IT(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=Vk();try{Yi(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];xg(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&sF(u,l)}}finally{Yi(-1),xg(o)}}function sF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function oF(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(GO(e,o.selectors,!1))if(r||(r=[]),ci(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;Ug(t,e,u)}else r.unshift(o),Ug(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Ug(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function aF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function cF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;ci(e)&&(n[""]=t)}}function uF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function lF(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ho(i.type,!0)),o=new Ji(s,ci(i),$);t.blueprint[r]=o,n[r]=o,nF(t,e,r,hT(t,n,i.hostVars,Qn),i)}function dF(t,e,n){let r=pn(e,t),i=_T(n),s=t[An].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Fd(t,Od(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function hF(t,e,n,r,i,s){let o=pn(t,e);fF(e[nt],o,s,t.value,n,r,i)}function fF(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?lo(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function pF(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];dT(r,n,u,l,h,p)}}function gF(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function ET(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function CT(t,e){let n=t.contentQueries;if(n!==null){let r=Te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];T0(s),a.contentQueries(2,e[o],o)}}}finally{Te(r)}}}function Fd(t,e){return t[uc]?t[hb][Dn]=e:t[uc]=e,t[hb]=e,e}function jg(t,e,n){T0(0);let r=Te(null);try{e(t,n)}finally{Te(r)}}function mF(t){return t[cc]||(t[cc]=[])}function _F(t){return t.cleanup||(t.cleanup=[])}function bT(t,e){let n=t[mo],r=n?n.get(Gn,null):null;r&&r.handleError(e)}function Fm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];dT(h,l,r,a,u,i)}}function TT(t,e,n){let r=y0(e,t);D1(t[nt],r,n)}function yF(t,e){let n=di(e,t),r=n[me];vF(r,n);let i=n[Sr];i!==null&&n[cd]===null&&(n[cd]=Rm(i,n[mo])),Lm(r,n,n[Sn])}function vF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Lm(t,e,n){_m(e);try{let r=t.viewQuery;r!==null&&jg(1,r,n);let i=t.template;i!==null&&fT(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[_o]?.finishViewCreation(t),t.staticContentQueries&&CT(t,e),t.staticViewQueries&&jg(2,t.viewQuery,n);let s=t.components;s!==null&&wF(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[te]&=-5,ym()}}function wF(t,e){for(let n=0;n<e.length;n++)yF(t,e[n])}function IF(t,e,n,r){let i=Te(null);try{let s=e.tView,a=t[te]&4096?4096:16,u=Od(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Sd]=l;let h=t[_o];return h!==null&&(u[_o]=h.createEmbeddedView(s)),Lm(s,u,n),u}finally{Te(i)}}function Tb(t,e){return!e||e.firstChild===null||q0(t)}function EF(t,e,n,r=!0){let i=e[me];if(x1(i,e,t,n),r){let o=Vg(n,t),a=e[nt],u=Nm(a,t[Qi]);u!==null&&A1(i,t[Rn],a,e,u,o)}let s=e[cd];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function _d(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(zn(s)),Ar(s)&&CF(s,r);let o=n.type;if(o&8)_d(t,e,n.child,r);else if(o&32){let a=Mm(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=oT(e,n);if(Array.isArray(a))r.push(...a);else{let u=dc(e[qn]);_d(u[me],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function CF(t,e){for(let n=fn;n<t.length;n++){let r=t[n],i=r[me].firstChild;i!==null&&_d(r[me],r,i,e)}t[Qi]!==t[Sr]&&e.push(t[Qi])}var DT=[];function bF(t){return t[Ki]??TF(t)}function TF(t){let e=DT.pop()??Object.create(SF);return e.lView=t,e}function DF(t){t.lView[Ki]!==t&&(t.lView=null,DT.push(t))}var SF=Se(V({},SC),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{lc(t.lView)},consumerOnSignalRead(){this.lView[Ki]=this}}),ST=100;function AT(t,e=!0,n=0){let r=t[An],i=r.rendererFactory,s=!1;s||i.begin?.();try{AF(t,n)}catch(o){throw e&&bT(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function AF(t,e){Bg(t,e);let n=0;for(;gm(t);){if(n===ST)throw new G(103,!1);n++,Bg(t,1)}}function RF(t,e,n,r){let i=e[te];if((i&256)===256)return;let s=!1;!s&&e[An].inlineEffectRunner?.flush(),_m(e);let o=null,a=null;!s&&xF(t)&&(a=bF(e),o=AC(a));try{w0(e),kk(t.bindingStartIndex),n!==null&&fT(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&ed(e,p,null)}else{let p=t.preOrderHooks;p!==null&&td(e,p,0,null),cg(e,0)}if(MF(e),RT(e,0),t.contentQueries!==null&&CT(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&ed(e,p)}else{let p=t.contentHooks;p!==null&&td(e,p,1),cg(e,1)}G1(t,e);let l=t.components;l!==null&&MT(e,l,0);let h=t.viewQuery;if(h!==null&&jg(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&ed(e,p)}else{let p=t.viewHooks;p!==null&&td(e,p,2),cg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ag]){for(let p of e[ag])p();e[ag]=null}s||(e[te]&=-73)}catch(u){throw lc(e),u}finally{a!==null&&(RC(a,o),DF(a)),ym()}}function xF(t){return t.type!==2}function RT(t,e){for(let n=G0(t);n!==null;n=W0(n))for(let r=fn;r<n.length;r++){let i=n[r];xT(i,e)}}function MF(t){for(let e=G0(t);e!==null;e=W0(e)){if(!(e[te]&hm.HasTransplantedViews))continue;let n=e[ld];for(let r=0;r<n.length;r++){let i=n[r],s=i[xt];Ck(i)}}}function NF(t,e,n){let r=di(e,t);xT(r,n)}function xT(t,e){pm(t)&&Bg(t,e)}function Bg(t,e){let r=t[me],i=t[te],s=t[Ki],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&Fp(s)),s&&(s.dirty=!1),t[te]&=-9217,o)RF(r,t,r.template,t[Sn]);else if(i&8192){RT(t,1);let a=r.components;a!==null&&MT(t,a,1)}}function MT(t,e,n){for(let r=0;r<e.length;r++)NF(t,e[r],n)}function Vm(t){for(t[An].changeDetectionScheduler?.notify();t;){t[te]|=64;let e=dc(t);if(pk(t)&&!e)return t;t=e}return null}var Zi=class{get rootNodes(){let e=this._lView,n=e[me];return _d(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Sn]}set context(e){this._lView[Sn]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[xt];if(Ar(e)){let n=e[ud],r=n?n.indexOf(this):-1;r>-1&&(Lg(e,r),od(n,r))}this._attachedToViewContainer=!1}iT(this._lView[me],this._lView)}onDestroy(e){I0(this._lView,e)}markForCheck(){Vm(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){Rg(this._lView),this._lView[te]|=128}detectChanges(){this._lView[te]|=1024,AT(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,nT(this._lView[me],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e,Rg(this._lView)}},Um=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=kF;let t=e;return t})(),PF=Um,OF=class extends PF{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=IF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Zi(i)}};function kF(){return FF(Yt(),Ne())}function FF(t,e){return t.type&4?new OF(e,t,Md(t,e)):null}var CQ=new RegExp(`^(\\d+)*(${p1}|${f1})*(.*)`);var LF=()=>null;function Db(t,e){return LF(t,e)}var yd=class{},$g=class{},vd=class{};function VF(t){let e=Error(`No component factory found for ${Bt(t)}.`);return e[UF]=t,e}var UF="ngComponent";var Hg=class{resolveComponentFactory(e){throw VF(e)}},Ld=(()=>{let e=class e{};e.NULL=new Hg;let t=e;return t})(),hc=class{},ts=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>jF();let t=e;return t})();function jF(){let t=Ne(),e=Yt(),n=di(e.index,t);return(Gi(n)?n:t)[nt]}var BF=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),fg={};var Sb=new Set;function jm(t){Sb.has(t)||(Sb.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Ab(...t){}function $F(){let t=typeof zi.requestAnimationFrame=="function",e=zi[t?"requestAnimationFrame":"setTimeout"],n=zi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var _e=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ft(!1),this.onMicrotaskEmpty=new ft(!1),this.onStable=new ft(!1),this.onError=new ft(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=$F().nativeRequestAnimationFrame,zF(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,HF,Ab,Ab);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HF={};function Bm(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function qF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(zi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qg(t),t.isCheckStableRunning=!0,Bm(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qg(t))}function zF(t){let e=()=>{qF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(GF(a))return n.invokeTask(i,s,o,a);try{return Rb(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),xb(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return Rb(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),xb(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,qg(t),Bm(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function qg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Rb(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xb(t){t._nesting--,Bm(t)}function GF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var ao=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ao||{}),WF={destroy(){}};function Vd(t,e){!e&&hk(Vd);let n=e?.injector??L(ut);if(!C1(n))return WF;jm("NgAfterNextRender");let r=n.get($m),i=r.handler??=new Gg,s=e?.phase??ao.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(Tm).onDestroy(o),u=Dr(n,()=>new zg(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var zg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=L(_e),this.errorHandler=L(Gn,{optional:!0}),L(yd,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Gg=class{constructor(){this.executingCallbacks=!1,this.buckets={[ao.EarlyRead]:new Set,[ao.Write]:new Set,[ao.MixedReadWrite]:new Set,[ao.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},$m=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function Wg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=wg(i,a);else if(s==2){let u=a,l=e[++o];r=wg(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var wd=class extends Ld{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=oi(e);return new vo(n,this.ngModule)}};function Mb(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function KF(t){let e=t.toLowerCase();return e==="svg"?yk:e==="math"?vk:null}var Kg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Td(r);let i=this.injector.get(e,fg,r);return i!==fg||n===fg?i:this.parentInjector.get(e,n,r)}},vo=class extends vd{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=Mb(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return Mb(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=YO(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Te(null);try{i=i||this.ngModule;let o=i instanceof Wt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Kg(e,o):e,u=a.get(hc,null);if(u===null)throw new G(407,!1);let l=a.get(BF,null),h=a.get($m,null),p=a.get(yd,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},I=u.createRenderer(null,this.componentDef),D=this.componentDef.selectors[0][0]||"div",x=r?Q1(I,r,this.componentDef.encapsulation,a):tT(I,D,KF(D)),M=512;this.componentDef.signals?M|=4096:this.componentDef.onPush||(M|=16);let U=null;x!==null&&(U=Rm(x,a,!0));let Q=km(0,null,null,1,0,null,null,null,null,null,null),j=Od(null,Q,null,M,null,null,m,I,a,null,U);_m(j);let Z,Ge;try{let ve=this.componentDef,C,_=null;ve.findHostDirectiveDefs?(C=[],_=new Map,ve.findHostDirectiveDefs(ve,C,_),C.push(ve)):C=[ve];let y=QF(j,x),E=YF(y,x,ve,C,j,m,I);Ge=v0(Q,ai),x&&ZF(I,ve,x,r),n!==void 0&&eL(Ge,this.ngContentSelectors,n),Z=XF(E,ve,C,_,j,[tL]),Lm(Q,j,null)}finally{ym()}return new Qg(this.componentType,Z,Md(Ge,j),j,Ge)}finally{Te(s)}}},Qg=class extends $g{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Zi(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Fm(s[me],s,i,e,n),this.previousInputValues.set(e,n);let o=di(this._tNode.index,s);Vm(o)}}get injector(){return new Wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function QF(t,e){let n=t[me],r=ai;return t[r]=e,kd(n,r,2,"#host",null)}function YF(t,e,n,r,i,s,o){let a=i[me];JF(r,t,e,o);let u=null;e!==null&&(u=Rm(e,i[mo]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=Od(i,_T(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&Ug(a,t,r.length-1),Fd(i,p),i[t.index]=p}function JF(t,e,n,r){for(let i of t)e.mergedAttrs=oc(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Wg(e,e.mergedAttrs,!0),n!==null&&cT(r,n,e))}function XF(t,e,n,r,i,s){let o=Yt(),a=i[me],u=pn(o,i);wT(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=yo(i,a,p,o);Xi(m,i)}IT(a,i,o),u&&Xi(u,i);let l=yo(i,a,o.directiveStart+o.componentOffset,o);if(t[Sn]=i[Sn]=l,s!==null)for(let h of s)h(l,e);return pT(a,o,i),l}function ZF(t,e,n,r){if(r)bg(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=JO(e.selectors[0]);i&&bg(t,n,i),s&&s.length>0&&aT(t,n,s.join(" "))}}function eL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function tL(){let t=Yt();Em(Ne()[me],t)}var yc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=nL;let t=e;return t})();function nL(){let t=Yt();return iL(t,Ne())}var rL=yc,NT=class extends rL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Md(this._hostTNode,this._hostLView)}get injector(){return new Wi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Cm(this._hostTNode,this._hostLView);if(P0(e)){let n=fd(e,this._hostLView),r=hd(e),i=n[me].data[r+8];return new Wi(i,n)}else return new Wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Nb(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-fn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=Db(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,Tb(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!fk(e),a;if(o)a=n;else{let D=n||{};a=D.index,r=D.injector,i=D.projectableNodes,s=D.environmentInjector||D.ngModuleRef}let u=o?e:new vo(oi(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let x=(o?l:this.parentInjector).get(Wt,null);x&&(s=x)}let h=oi(u.componentType??{}),p=Db(this._lContainer,h?.id??null),m=p?.firstChild??null,I=u.create(l,i,m,s);return this.insertImpl(I.hostView,a,Tb(this._hostTNode,p)),I}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Ek(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[xt],l=new NT(u,u[Rn],u[xt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return EF(o,i,s,r),e.attachToViewContainerRef(),Kb(pg(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Nb(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);r&&(od(pg(this._lContainer),n),iT(r[me],r))}detach(e){let n=this._adjustIndex(e,-1),r=Lg(this._lContainer,n);return r&&od(pg(this._lContainer),n)!=null?new Zi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function Nb(t){return t[ud]}function pg(t){return t[ud]||(t[ud]=[])}function iL(t,e){let n,r=e[t.index];return Ar(r)?n=r:(n=ET(r,e,null,t),e[t.index]=n,Fd(e,n)),oL(n,e,t,r),new NT(n,t,e)}function sL(t,e){let n=t[nt],r=n.createComment(""),i=pn(e,t),s=Nm(n,i);return md(n,s,r,L1(n,i),!1),r}var oL=uL,aL=()=>!1;function cL(t,e,n){return aL(t,e,n)}function uL(t,e,n,r){if(t[Qi])return;let i;n.type&8?i=zn(r):i=sL(e,n),t[Qi]=i}function lL(t){return typeof t=="function"&&t[kp]!==void 0}function PT(t){return lL(t)&&typeof t.set=="function"}function dL(t){return Object.getPrototypeOf(t.prototype).constructor}function xn(t){let e=dL(t.type),n=!0,r=[t];for(;e;){let i;if(ci(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=Jl(t.inputs),o.inputTransforms=Jl(t.inputTransforms),o.declaredInputs=Jl(t.declaredInputs),o.outputs=Jl(t.outputs);let a=i.hostBindings;a&&mL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&pL(t,u),l&&gL(t,l),hL(t,i),vO(t.outputs,i.outputs),ci(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===xn&&(n=!1)}}e=Object.getPrototypeOf(e)}fL(r)}function hL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function fL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=oc(i.hostAttrs,n=oc(n,i.hostAttrs))}}function Jl(t){return t===fo?{}:t===Gt?[]:t}function pL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function gL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function mL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function Hm(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var ui=class{},fc=class{};var Yg=class extends ui{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wd(this);let i=r0(e);this._bootstrapComponents=eT(i.bootstrap),this._r3Injector=$0(e,n,[{provide:ui,useValue:this},{provide:Ld,useValue:this.componentFactoryResolver},...r],Bt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jg=class extends fc{constructor(e){super(),this.moduleType=e}create(e){return new Yg(this.moduleType,e,[])}};var Id=class extends ui{constructor(e){super(),this.componentFactoryResolver=new wd(this),this.instance=null;let n=new ac([...e.providers,{provide:ui,useValue:this},{provide:Ld,useValue:this.componentFactoryResolver}],e.parent||dm(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ud(t,e,n=null){return new Id({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var jd=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ct(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function li(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function _L(t,e,n,r){let i=li(t,e,n);return li(t,e+1,r)||i}function yL(t){return(t.flags&32)===32}function vL(t,e,n,r,i,s,o,a,u){let l=e.consts,h=kd(e,t,4,o||null,dd(l,a));vT(e,n,h,dd(l,u)),Em(e,h);let p=h.tView=km(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function nn(t,e,n,r,i,s,o,a){let u=Ne(),l=Qt(),h=t+ai,p=l.firstCreatePass?vL(h,l,u,e,n,r,i,s,o):l.data[h];_c(p,!1);let m=wL(l,u,p,t);wm()&&Pm(l,u,m,p),Xi(m,u);let I=ET(m,u,m,p);return u[h]=I,Fd(u,I),cL(I,p,u),fm(p)&&gT(l,u,p),o!=null&&mT(u,p,a),nn}var wL=IL;function IL(t,e,n,r){return Im(!0),e[nt].createComment("")}function vc(t,e,n,r){let i=Ne(),s=xd();if(li(i,s,e)){let o=Qt(),a=vm();hF(a,i,t,e,n,r)}return vc}function EL(t,e,n,r){return li(t,xd(),n)?e+lo(n)+r:Qn}function CL(t,e,n,r,i,s){let o=Ok(),a=_L(t,o,n,i);return mm(2),a?e+lo(n)+r+lo(i)+s:Qn}function Xl(t,e){return t<<17|e<<2}function es(t){return t>>17&32767}function bL(t){return(t&2)==2}function TL(t,e){return t&131071|e<<17}function Xg(t){return t|2}function wo(t){return(t&131068)>>2}function gg(t,e){return t&-131069|e<<2}function DL(t){return(t&1)===1}function Zg(t){return t|1}function SL(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=es(o),u=wo(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||mc(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=es(t[a+1]);t[r+1]=Xl(m,a),m!==0&&(t[m+1]=gg(t[m+1],r)),t[a+1]=TL(t[a+1],r)}else t[r+1]=Xl(a,0),a!==0&&(t[a+1]=gg(t[a+1],r)),a=r;else t[r+1]=Xl(u,0),a===0?a=r:t[u+1]=gg(t[u+1],r),u=r;l&&(t[r+1]=Xg(t[r+1])),Pb(t,h,r,!0),Pb(t,h,r,!1),AL(e,h,t,r,s),o=Xl(a,u),s?e.classBindings=o:e.styleBindings=o}function AL(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&mc(s,e)>=0&&(n[r+1]=Zg(n[r+1]))}function Pb(t,e,n,r){let i=t[n+1],s=e===null,o=r?es(i):wo(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];RL(u,e)&&(a=!0,t[o+1]=r?Zg(l):Xg(l)),o=r?es(l):wo(l)}a&&(t[n+1]=r?Xg(i):Zg(i))}function RL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?mc(t,e)>=0:!1}var Tn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function xL(t){return t.substring(Tn.key,Tn.keyEnd)}function ML(t){return NL(t),OT(t,kT(t,0,Tn.textEnd))}function OT(t,e){let n=Tn.textEnd;return n===e?-1:(e=Tn.keyEnd=PL(t,Tn.key=e,n),kT(t,e,n))}function NL(t){Tn.key=0,Tn.keyEnd=0,Tn.value=0,Tn.valueEnd=0,Tn.textEnd=t.length}function kT(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function PL(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ke(t,e,n){let r=Ne(),i=xd();if(li(r,i,e)){let s=Qt(),o=vm();yT(s,o,r,t,e,r[nt],n,!1)}return Ke}function em(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Fm(t,n,s[o],o,r)}function pi(t,e,n){return FT(t,e,n,!1),pi}function Bd(t,e){return FT(t,e,null,!0),Bd}function bo(t){kL(BL,OL,t,!0)}function OL(t,e){for(let n=ML(e);n>=0;n=OT(e,n))cm(t,xL(e),!0)}function FT(t,e,n,r){let i=Ne(),s=Qt(),o=mm(2);if(s.firstUpdatePass&&VT(s,t,o,r),e!==Qn&&li(i,o,e)){let a=s.data[hi()];UT(s,a,i,i[nt],t,i[o+1]=HL(e,n),r,o)}}function kL(t,e,n,r){let i=Qt(),s=mm(2);i.firstUpdatePass&&VT(i,null,s,r);let o=Ne();if(n!==Qn&&li(o,s,n)){let a=i.data[hi()];if(jT(a,r)&&!LT(i,s)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;u!==null&&(n=wg(u,n||"")),em(i,a,o,n,r)}else $L(i,a,o,o[nt],o[s+1],o[s+1]=jL(t,e,n),r,s)}}function LT(t,e){return e>=t.expandoStartIndex}function VT(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[hi()],o=LT(t,n);jT(s,r)&&e===null&&!o&&(e=!1),e=FL(i,s,e,r),SL(i,s,e,n,o,r)}}function FL(t,e,n,r){let i=Uk(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=mg(null,t,e,n,r),n=pc(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=mg(i,t,e,n,r),s===null){let u=LL(t,e,r);u!==void 0&&Array.isArray(u)&&(u=mg(null,t,e,u[1],r),u=pc(u,e.attrs,r),VL(t,e,r,u))}else s=UL(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function LL(t,e,n){let r=n?e.classBindings:e.styleBindings;if(wo(r)!==0)return t[es(r)]}function VL(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[es(i)]=r}function UL(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=pc(r,o,n)}return pc(r,e.attrs,n)}function mg(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=pc(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function pc(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),cm(t,o,n?!0:e[++s]))}return t===void 0?null:t}function jL(t,e,n){if(n==null||n==="")return Gt;let r=[],i=Co(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)t(r,i[s],!0);else if(typeof i=="object")for(let s in i)i.hasOwnProperty(s)&&t(r,s,i[s]);else typeof i=="string"&&e(r,i);return r}function BL(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&cm(t,r,n)}function $L(t,e,n,r,i,s,o,a){i===Qn&&(i=Gt);let u=0,l=0,h=0<i.length?i[0]:null,p=0<s.length?s[0]:null;for(;h!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,I=l<s.length?s[l+1]:void 0,D=null,x;h===p?(u+=2,l+=2,m!==I&&(D=p,x=I)):p===null||h!==null&&h<p?(u+=2,D=h):(l+=2,D=p,x=I),D!==null&&UT(t,e,n,r,D,x,o,a),h=u<i.length?i[u]:null,p=l<s.length?s[l]:null}}function UT(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=DL(l)?Ob(u,e,n,i,wo(l),o):void 0;if(!Ed(h)){Ed(s)||bL(l)&&(s=Ob(u,null,n,i,a,o));let p=y0(hi(),n);q1(r,o,p,i,s)}}function Ob(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===Qn&&(m=p?Gt:void 0);let I=p?sg(m,r):h===r?m:void 0;if(l&&!Ed(I)&&(I=sg(u,r)),Ed(I)&&(a=I,o))return a;let D=t[i+1];i=o?es(D):wo(D)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=sg(u,r))}return a}function Ed(t){return t!==void 0}function HL(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Bt(Co(t)))),t}function jT(t,e){return(t.flags&(e?8:16))!==0}function qL(t,e,n,r,i,s){let o=e.consts,a=dd(o,i),u=kd(e,t,2,r,a);return vT(e,n,u,dd(o,s)),u.attrs!==null&&Wg(u,u.attrs,!1),u.mergedAttrs!==null&&Wg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function R(t,e,n,r){let i=Ne(),s=Qt(),o=ai+t,a=i[nt],u=s.firstCreatePass?qL(o,s,i,e,n,r):s.data[o],l=zL(s,i,u,a,e,t);i[o]=l;let h=fm(u);return _c(u,!0),cT(a,l,u),!yL(u)&&wm()&&Pm(s,i,l,u),Dk()===0&&Xi(l,i),Sk(),h&&(gT(s,i,u),pT(s,u,i)),r!==null&&mT(i,u),R}function N(){let t=Yt();b0()?Pk():(t=t.parent,_c(t,!1));let e=t;xk(e)&&Mk(),Ak();let n=Qt();return n.firstCreatePass&&(Em(n,t),f0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&Gk(e)&&em(n,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Wk(e)&&em(n,e,Ne(),e.stylesWithoutHost,!1),N}function ie(t,e,n,r){return R(t,e,n,r),N(),ie}var zL=(t,e,n,r,i,s)=>(Im(!0),tT(r,i,$k()));function gn(){return Ne()}var Cd="en-US";var GL=Cd;function WL(t){typeof t=="string"&&(GL=t.toLowerCase().replace(/_/g,"-"))}function Oe(t,e,n,r){let i=Ne(),s=Qt(),o=Yt();return BT(s,i,i[nt],o,t,e,r),Oe}function KL(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[cc],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function BT(t,e,n,r,i,s,o){let a=fm(r),l=t.firstCreatePass&&_F(t),h=e[Sn],p=mF(e),m=!0;if(r.type&3||o){let x=pn(r,e),M=o?o(x):x,U=p.length,Q=o?Z=>o(zn(Z[r.index])):r.index,j=null;if(!o&&a&&(j=KL(t,e,i,r.index)),j!==null){let Z=j.__ngLastListenerFn__||j;Z.__ngNextListenerFn__=s,j.__ngLastListenerFn__=s,m=!1}else{s=Fb(r,e,h,s,!1);let Z=n.listen(M,i,s);p.push(s,Z),l&&l.push(i,Q,U,U+1)}}else s=Fb(r,e,h,s,!1);let I=r.outputs,D;if(m&&I!==null&&(D=I[i])){let x=D.length;if(x)for(let M=0;M<x;M+=2){let U=D[M],Q=D[M+1],Ge=e[U][Q].subscribe(s),ve=p.length;p.push(s,Ge),l&&l.push(i,r.index,ve,-(ve+1))}}}function kb(t,e,n,r){let i=Te(null);try{return Bn(6,e,n),n(r)!==!1}catch(s){return bT(t,s),!1}finally{Bn(7,e,n),Te(i)}}function Fb(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?di(t.index,e):e;Vm(a);let u=kb(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=kb(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function ne(t=1){return Bk(t)}function q(t,e=""){let n=Ne(),r=Qt(),i=t+ai,s=r.firstCreatePass?kd(r,i,1,e,null):r.data[i],o=QL(r,n,s,e,t);n[i]=o,wm()&&Pm(r,n,o,s),_c(s,!1)}var QL=(t,e,n,r,i)=>(Im(!0),T1(e[nt],r));function ns(t){return $d("",t,""),ns}function $d(t,e,n){let r=Ne(),i=EL(r,t,e,n);return i!==Qn&&TT(r,hi(),i),$d}function rs(t,e,n,r,i){let s=Ne(),o=CL(s,t,e,n,r,i);return o!==Qn&&TT(s,hi(),o),rs}function Ve(t,e,n){PT(e)&&(e=e());let r=Ne(),i=xd();if(li(r,i,e)){let s=Qt(),o=vm();yT(s,o,r,t,e,r[nt],n,!1)}return Ve}function $e(t,e){let n=PT(t);return n&&t.set(e),n}function Ue(t,e){let n=Ne(),r=Qt(),i=Yt();return BT(r,n,n[nt],i,t,e),Ue}function YL(t,e,n){let r=Qt();if(r.firstCreatePass){let i=ci(t);tm(n,r.data,r.blueprint,i,!0),tm(e,r.data,r.blueprint,i,!1)}}function tm(t,e,n,r,i){if(t=jt(t),Array.isArray(t))for(let s=0;s<t.length;s++)tm(t[s],e,n,r,i);else{let s=Qt(),o=Ne(),a=Yt(),u=go(t)?t:jt(t.provide),l=u0(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(go(t)||!t.multi){let I=new Ji(l,i,$),D=yg(u,e,i?h:h+m,p);D===-1?(Ng(pd(a,o),s,u),_g(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(I),o.push(I)):(n[D]=I,o[D]=I)}else{let I=yg(u,e,h+m,p),D=yg(u,e,h,h+m),x=I>=0&&n[I],M=D>=0&&n[D];if(i&&!M||!i&&!x){Ng(pd(a,o),s,u);let U=ZL(i?XL:JL,n.length,i,r,l);!i&&M&&(n[D].providerFactory=U),_g(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(U),o.push(U)}else{let U=$T(n[i?D:I],l,!i&&r);_g(s,t,I>-1?I:D,U)}!i&&r&&M&&n[D].componentProviders++}}}function _g(t,e,n,r){let i=go(e),s=sk(e);if(i||s){let u=(s?jt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function $T(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function yg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function JL(t,e,n,r){return nm(this.multi,[])}function XL(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=yo(n,n[me],this.providerFactory.index,r);s=a.slice(0,o),nm(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],nm(i,s);return s}function nm(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function ZL(t,e,n,r,i){let s=new Ji(t,n,$);return s.multi=[],s.index=e,s.componentProviders=0,$T(s,i,r&&!n),s}function is(t,e=[]){return n=>{n.providersResolver=(r,i)=>YL(r,i?i(t):t,e)}}var eV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=o0(!1,r.type),s=i.length>0?Ud([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=z({token:e,providedIn:"environment",factory:()=>new e(J(Wt))});let t=e;return t})();function it(t){jm("NgStandalone"),t.getStandaloneInjector=e=>e.get(eV).getOrCreateStandaloneInjector(t)}var Er=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},HT=new Er("17.3.10"),Hd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var qT=new B("");function ss(t){return!!t&&typeof t.then=="function"}function zT(t){return!!t&&typeof t.subscribe=="function"}var qd=new B(""),GT=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=L(qd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(ss(o))r.push(o);else if(zT(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),zd=new B("");function tV(){MC(()=>{throw new G(600,!1)})}function nV(t){return t.isBoundToModule}function rV(t,e,n){try{let r=n();return ss(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var wc=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(H0),this.afterRenderEffectManager=L($m),this.externalTestViews=new Set,this.beforeRender=new Rt,this.afterTick=new Rt,this.componentTypes=[],this.components=[],this.isStable=L(jd).hasPendingTasks.pipe(pe(r=>!r)),this._injector=L(Wt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof vd;if(!this._injector.get(GT).done){let I=!s&&n0(r),D=!1;throw new G(405,D)}let a;s?a=r:a=this._injector.get(Ld).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=nV(a)?void 0:this._injector.get(ui),l=i||a.selector,h=a.create(ut.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(qT,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),vg(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new G(101,!1);let i=Te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Te(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===ST)throw new G(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)iV(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>rm(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>rm(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;vg(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(zd,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>vg(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new G(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function vg(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function iV(t,e,n){!e&&!rm(t)||sV(t,n,e)}function rm(t){return gm(t)}function sV(t,e,n){let r;n?(r=0,t[te]|=1024):t[te]&64?r=0:r=1,AT(t,e,r)}var im=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Gd=(()=>{let e=class e{compileModuleSync(r){return new Jg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=r0(r),o=eT(s.declarations).reduce((a,u)=>{let l=oi(u);return l&&a.push(new vo(l)),a},[]);return new im(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oV=(()=>{let e=class e{constructor(){this.zone=L(_e),this.applicationRef=L(wc)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function aV(t){return[{provide:_e,useFactory:t},{provide:po,multi:!0,useFactory:()=>{let e=L(oV,{optional:!0});return()=>e.initialize()}},{provide:po,multi:!0,useFactory:()=>{let e=L(dV);return()=>{e.initialize()}}},{provide:H0,useFactory:cV}]}function cV(){let t=L(_e),e=L(Gn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function uV(t){let e=aV(()=>new _e(lV(t)));return Kt([[],e])}function lV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var dV=(()=>{let e=class e{constructor(){this.subscription=new Ye,this.initialized=!1,this.zone=L(_e),this.pendingTasks=L(jd)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{_e.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{_e.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hV(){return typeof $localize<"u"&&$localize.locale||Cd}var qm=new B("",{providedIn:"root",factory:()=>L(qm,oe.Optional|oe.SkipSelf)||hV()});var WT=new B("");var rd=null;function fV(t=[],e){return ut.create({name:e,providers:[{provide:Dd,useValue:"platform"},{provide:WT,useValue:new Set([()=>rd=null])},...t]})}function pV(t=[]){if(rd)return rd;let e=fV(t);return rd=e,tV(),gV(e),e}function gV(t){t.get(Sm,null)?.forEach(n=>n())}var os=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mV;let t=e;return t})();function mV(t){return _V(Yt(),Ne(),(t&16)===16)}function _V(t,e,n){if(Rd(t)&&!n){let r=di(t.index,e);return new Zi(r,r)}else if(t.type&47){let r=e[qn];return new Zi(r,e)}return null}function KT(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=pV(r),s=[uV(),...n||[]],a=new Id({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(_e);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Gn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:I=>{l.handleError(I)}})});let p=()=>a.destroy(),m=i.get(WT);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),rV(l,u,()=>{let I=a.get(GT);return I.runInitializers(),I.donePromise.then(()=>{let D=a.get(qm,Cd);WL(D||Cd);let x=a.get(wc);return e!==void 0&&x.bootstrap(e),x})})})}catch(e){return Promise.reject(e)}}function gi(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function QT(t){let e=oi(t);if(!e)return null;let n=new vo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var ZT=null;function xr(){return ZT}function eD(t){ZT??=t}var Wd=class{};var Jt=new B(""),Km=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(yV),providedIn:"platform"});let t=e;return t})(),tD=new B(""),yV=(()=>{let e=class e extends Km{constructor(){super(),this._doc=L(Jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xr().getBaseHref(this._doc)}onPopState(r){let i=xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=xr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Qm(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function YT(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Rr(t){return t&&t[0]!=="?"?"?"+t:t}var Mr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(Ym),providedIn:"root"});let t=e;return t})(),nD=new B(""),Ym=(()=>{let e=class e extends Mr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??L(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Qm(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+Rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(J(Km),J(nD,8))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),rD=(()=>{let e=class e extends Mr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Qm(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(J(Km),J(nD,8))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),To=(()=>{let e=class e{constructor(r){this._subject=new ft,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=IV(YT(JT(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+Rr(i))}normalize(r){return e.stripTrailingSlash(wV(this._basePath,JT(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+Rr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=Rr,e.joinWithSlash=Qm,e.stripTrailingSlash=YT,e.\u0275fac=function(i){return new(i||e)(J(Mr))},e.\u0275prov=z({token:e,factory:()=>vV(),providedIn:"root"});let t=e;return t})();function vV(){return new To(J(Mr))}function wV(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JT(t){return t.replace(/\/index.html$/,"")}function IV(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function iD(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Yn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new zm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){XT("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){XT("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)($(yc),$(Um))},e.\u0275dir=pt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),zm=class{constructor(){this.$implicit=null,this.ngIf=null}};function XT(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Bt(e)}'.`)}var Mn=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tr({type:e}),e.\u0275inj=br({});let t=e;return t})(),Jm="browser",EV="server";function CV(t){return t===Jm}function Xm(t){return t===EV}var sD=(()=>{let e=class e{};e.\u0275prov=z({token:e,providedIn:"root",factory:()=>CV(L(Kn))?new Gm(L(Jt),window):new Wm});let t=e;return t})(),Gm=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=bV(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function bV(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Wm=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Kd=class{};var t_=class extends Wd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},n_=class t extends t_{static makeCurrent(){eD(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=TV();return n==null?null:DV(n)}resetBaseElement(){Ic=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return iD(document.cookie,e)}},Ic=null;function TV(){return Ic=Ic||document.querySelector("base"),Ic?Ic.getAttribute("href"):null}function DV(t){return new URL(t,document.baseURI).pathname}var SV=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),r_=new B(""),uD=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new G(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(J(r_),J(_e))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Qd=class{constructor(e){this._doc=e}},Zm="ng-app-id",lD=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Xm(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Zm}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Zm),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Zm,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(J(Jt),J(Dm),J(Am,8),J(Kn))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),e_={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},s_=/%COMP%/g,dD="%COMP%",AV=`_nghost-${dD}`,RV=`_ngcontent-${dD}`,xV=!0,MV=new B("",{providedIn:"root",factory:()=>xV});function NV(t){return RV.replace(s_,t)}function PV(t){return AV.replace(s_,t)}function hD(t,e){return e.map(n=>n.replace(s_,t))}var oD=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Xm(u),this.defaultRenderer=new Ec(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Hn.ShadowDom&&(i=Se(V({},i),{encapsulation:Hn.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Yd?s.applyToHost(r):s instanceof Cc&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case Hn.Emulated:o=new Yd(l,h,i,this.appId,p,a,u,m);break;case Hn.ShadowDom:return new i_(l,h,r,i,a,u,this.nonce,m);default:o=new Cc(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(J(uD),J(lD),J(Dm),J(MV),J(Jt),J(Kn),J(_e),J(Am))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),Ec=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(e_[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=e_[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=e_[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Ir.DashCase|Ir.Important)?e.style.setProperty(n,r,i&Ir.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=xr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function aD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var i_=class extends Ec{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=hD(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Cc=class extends Ec{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?hD(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Yd=class extends Cc{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=NV(l),this.hostAttr=PV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},OV=(()=>{let e=class e extends Qd{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(J(Jt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})(),cD=["alt","control","meta","shift"],kV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},LV=(()=>{let e=class e extends Qd{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),cD.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=kV[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),cD.forEach(a=>{if(a!==s){let u=FV[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(J(Jt))},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function fD(t,e){return KT(V({rootComponent:t},VV(e)))}function VV(t){return{appProviders:[...HV,...t?.providers??[]],platformProviders:$V}}function UV(){n_.makeCurrent()}function jV(){return new Gn}function BV(){return Q0(document),document}var $V=[{provide:Kn,useValue:Jm},{provide:Sm,useValue:UV,multi:!0},{provide:Jt,useFactory:BV,deps:[]}];var HV=[{provide:Dd,useValue:"root"},{provide:Gn,useFactory:jV,deps:[]},{provide:r_,useClass:OV,multi:!0,deps:[Jt,_e,Kn]},{provide:r_,useClass:LV,multi:!0,deps:[Jt]},oD,lD,uD,{provide:hc,useExisting:oD},{provide:Kd,useClass:SV,deps:[]},[]];var pD=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(J(Jt))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var se="primary",Uc=Symbol("RouteTitle"),l_=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Mo(t){return new l_(t)}function zV(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function GV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Jn(t[n],e[n]))return!1;return!0}function Jn(t,e){let n=t?d_(t):void 0,r=e?d_(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!CD(t[i],e[i]))return!1;return!0}function d_(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function CD(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function bD(t){return t.length>0?t[t.length-1]:null}function vi(t){return Xp(t)?t:ss(t)?qe(Promise.resolve(t)):ee(t)}var WV={exact:DD,subset:SD},TD={exact:KV,subset:QV,ignored:()=>!0};function gD(t,e,n){return WV[n.paths](t.root,e.root,n.matrixParams)&&TD[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function KV(t,e){return Jn(t,e)}function DD(t,e,n){if(!cs(t.segments,e.segments)||!Zd(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!DD(t.children[r],e.children[r],n))return!1;return!0}function QV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>CD(t[n],e[n]))}function SD(t,e,n){return AD(t,e,e.segments,n)}function AD(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!cs(i,n)||e.hasChildren()||!Zd(i,n,r))}else if(t.segments.length===n.length){if(!cs(t.segments,n)||!Zd(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!SD(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!cs(t.segments,i)||!Zd(t.segments,i,r)||!t.children[se]?!1:AD(t.children[se],e,s,r)}}function Zd(t,e,n){return e.every((r,i)=>TD[n](t[i].parameters,r.parameters))}var mi=class{constructor(e=new De([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Mo(this.queryParams),this._queryParamMap}toString(){return XV.serialize(this)}},De=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return eh(this)}},as=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Mo(this.parameters),this._parameterMap}toString(){return xD(this)}};function YV(t,e){return cs(t,e)&&t.every((n,r)=>Jn(n.parameters,e[r].parameters))}function cs(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function JV(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var jc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>new xc,providedIn:"root"});let t=e;return t})(),xc=class{parse(e){let n=new f_(e);return new mi(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${bc(e.root,!0)}`,r=tU(e.queryParams),i=typeof e.fragment=="string"?`#${ZV(e.fragment)}`:"";return`${n}${r}${i}`}},XV=new xc;function eh(t){return t.segments.map(e=>xD(e)).join("/")}function bc(t,e){if(!t.hasChildren())return eh(t);if(e){let n=t.children[se]?bc(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==se&&r.push(`${i}:${bc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=JV(t,(r,i)=>i===se?[bc(t.children[se],!1)]:[`${i}:${bc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${eh(t)}/${n[0]}`:`${eh(t)}/(${n.join("//")})`}}function RD(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jd(t){return RD(t).replace(/%3B/gi,";")}function ZV(t){return encodeURI(t)}function h_(t){return RD(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function th(t){return decodeURIComponent(t)}function mD(t){return th(t.replace(/\+/g,"%20"))}function xD(t){return`${h_(t.path)}${eU(t.parameters)}`}function eU(t){return Object.entries(t).map(([e,n])=>`;${h_(e)}=${h_(n)}`).join("")}function tU(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Jd(n)}=${Jd(i)}`).join("&"):`${Jd(n)}=${Jd(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var nU=/^[^\/()?;#]+/;function o_(t){let e=t.match(nU);return e?e[0]:""}var rU=/^[^\/()?;=#]+/;function iU(t){let e=t.match(rU);return e?e[0]:""}var sU=/^[^=?&#]+/;function oU(t){let e=t.match(sU);return e?e[0]:""}var aU=/^[^&#]+/;function cU(t){let e=t.match(aU);return e?e[0]:""}var f_=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new De([],{}):new De([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new De(e,n)),r}parseSegment(){let e=o_(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new as(th(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=iU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=o_(this.remaining);i&&(r=i,this.capture(r))}e[th(n)]=th(r)}parseQueryParam(e){let n=oU(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=cU(this.remaining);o&&(r=o,this.capture(r))}let i=mD(n),s=mD(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=o_(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=se);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[se]:new De([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function MD(t){return t.segments.length>0?new De([],{[se]:t}):t}function ND(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=ND(i);if(r===se&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new De(t.segments,e);return uU(n)}function uU(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new De(t.segments.concat(e.segments),e.children)}return t}function No(t){return t instanceof mi}function lU(t,e,n=null,r=null){let i=PD(t);return OD(i,e,n,r)}function PD(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new De(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=MD(r);return e??i}function OD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return a_(i,i,i,n,r);let s=dU(e);if(s.toRoot())return a_(i,i,new De([],{}),n,r);let o=hU(s,i,t),a=o.processChildren?Sc(o.segmentGroup,o.index,s.commands):FD(o.segmentGroup,o.index,s.commands);return a_(i,o.segmentGroup,a,n,r)}function nh(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Mc(t){return typeof t=="object"&&t!=null&&t.outlets}function a_(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=kD(t,e,n);let a=MD(ND(o));return new mi(a,s,i)}function kD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=kD(s,e,n)}),new De(t.segments,r)}var rh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&nh(r[0]))throw new G(4003,!1);let i=r.find(Mc);if(i&&i!==bD(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dU(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new rh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new rh(n,e,r)}var Ro=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function hU(t,e,n){if(t.isAbsolute)return new Ro(e,!0,0);if(!n)return new Ro(e,!1,NaN);if(n.parent===null)return new Ro(n,!0,0);let r=nh(t.commands[0])?0:1,i=n.segments.length-1+r;return fU(n,i,t.numberOfDoubleDots)}function fU(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new Ro(r,!1,i-s)}function pU(t){return Mc(t[0])?t[0].outlets:{[se]:t}}function FD(t,e,n){if(t??=new De([],{}),t.segments.length===0&&t.hasChildren())return Sc(t,e,n);let r=gU(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new De(t.segments.slice(0,r.pathIndex),{});return s.children[se]=new De(t.segments.slice(r.pathIndex),t.children),Sc(s,0,i)}else return r.match&&i.length===0?new De(t.segments,{}):r.match&&!t.hasChildren()?p_(t,e,n):r.match?Sc(t,0,i):p_(t,e,n)}function Sc(t,e,n){if(n.length===0)return new De(t.segments,{});{let r=pU(n),i={};if(Object.keys(r).some(s=>s!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let s=Sc(t.children[se],e,n);return new De(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=FD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new De(t.segments,i)}}function gU(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Mc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!yD(u,l,o))return s;r+=2}else{if(!yD(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function p_(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Mc(s)){let u=mU(s.outlets);return new De(r,u)}if(i===0&&nh(n[0])){let u=t.segments[e];r.push(new as(u.path,_D(n[0]))),i++;continue}let o=Mc(s)?s.outlets[se]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&nh(a)?(r.push(new as(o,_D(a))),i+=2):(r.push(new as(o,{})),i++)}return new De(r,{})}function mU(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=p_(new De([],{}),0,r))}),e}function _D(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function yD(t,e,n){return t==n.path&&Jn(e,n.parameters)}var Ac="imperative",gt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(gt||{}),mn=class{constructor(e,n){this.id=e,this.url=n}},Po=class extends mn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends mn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},sn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(sn||{}),ih=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ih||{}),_i=class extends mn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},yi=class extends mn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},Nc=class extends mn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},sh=class extends mn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},g_=class extends mn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},m_=class extends mn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},__=class extends mn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},y_=class extends mn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},v_=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},w_=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},I_=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},E_=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},C_=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},b_=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},oh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Pc=class{},Oc=class{constructor(e){this.url=e}};var T_=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Bc,this.attachRef=null}},Bc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new T_,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ah=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=D_(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=D_(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=S_(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return S_(e,this._root).map(n=>n.value)}};function D_(t,e){if(t===e.value)return e;for(let n of e.children){let r=D_(t,n);if(r)return r}return null}function S_(t,e){if(t===e.value)return[e];for(let n of e.children){let r=S_(t,n);if(r.length)return r.unshift(e),r}return[]}var rn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ao(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ch=class extends ah{constructor(e,n){super(e),this.snapshot=n,L_(this,e)}toString(){return this.snapshot.toString()}};function LD(t){let e=_U(t),n=new Ct([new as("",{})]),r=new Ct({}),i=new Ct({}),s=new Ct({}),o=new Ct(""),a=new Zn(n,r,s,o,i,se,t,e.root);return a.snapshot=e.root,new ch(new rn(a,[]),e)}function _U(t){let e={},n={},r={},i="",s=new kc([],e,r,i,n,se,t,null,{});return new uh("",new rn(s,[]))}var Zn=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(pe(l=>l[Uc]))??ee(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(pe(e=>Mo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(pe(e=>Mo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function F_(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:V(V({},e.params),t.params),data:V(V({},e.data),t.data),resolve:V(V(V(V({},t.data),e.data),i?.data),t._resolvedData)}:r={params:V({},t.params),data:V({},t.data),resolve:V(V({},t.data),t._resolvedData??{})},i&&UD(i)&&(r.resolve[Uc]=i.title),r}var kc=class{get title(){return this.data?.[Uc]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},uh=class extends ah{constructor(e,n){super(n),this.url=e,L_(this,n)}toString(){return VD(this._root)}};function L_(t,e){e.value._routerState=t,e.children.forEach(n=>L_(t,n))}function VD(t){let e=t.children.length>0?` { ${t.children.map(VD).join(", ")} } `:"";return`${t.value}${e}`}function c_(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Jn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Jn(e.params,n.params)||t.paramsSubject.next(n.params),GV(e.url,n.url)||t.urlSubject.next(n.url),Jn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function A_(t,e){let n=Jn(t.params,e.params)&&YV(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||A_(t.parent,e.parent))}function UD(t){return typeof t.title=="string"||t.title===null}var V_=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=se,this.activateEvents=new ft,this.deactivateEvents=new ft,this.attachEvents=new ft,this.detachEvents=new ft,this.parentContexts=L(Bc),this.location=L(yc),this.changeDetector=L(os),this.environmentInjector=L(Wt),this.inputBinder=L(fh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new R_(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wn]});let t=e;return t})(),R_=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Zn?this.route:e===Bc?this.childContexts:this.parent.get(e,n)}},fh=new B(""),vD=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=nc([i.queryParams,i.params,i.data]).pipe(dn(([o,a,u],l)=>(u=V(V(V({},o),a),u),l===0?ee(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=QT(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function yU(t,e,n){let r=Fc(t,e._root,n?n._root:void 0);return new ch(r,e)}function Fc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=vU(t,e,n);return new rn(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Fc(t,a)),o}}let r=wU(e.value),i=e.children.map(s=>Fc(t,s));return new rn(r,i)}}function vU(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Fc(t,r,i);return Fc(t,r)})}function wU(t){return new Zn(new Ct(t.url),new Ct(t.params),new Ct(t.queryParams),new Ct(t.fragment),new Ct(t.data),t.outlet,t.component,t)}var jD="ngNavigationCancelingError";function BD(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=No(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=$D(!1,sn.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function $D(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[jD]=!0,n.cancellationCode=e,n}function IU(t){return HD(t)&&No(t.url)}function HD(t){return!!t&&t[jD]}var EU=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(i,s){i&1&&ie(0,"router-outlet")},dependencies:[V_],encapsulation:2});let t=e;return t})();function CU(t,e){return t.providers&&!t._injector&&(t._injector=Ud(t.providers,e,`Route: ${t.path}`)),t._injector??e}function U_(t){let e=t.children&&t.children.map(U_),n=e?Se(V({},t),{children:e}):V({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=EU),n}function er(t){return t.outlet||se}function bU(t,e){let n=t.filter(r=>er(r)===e);return n.push(...t.filter(r=>er(r)!==e)),n}function $c(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var TU=(t,e,n,r)=>pe(i=>(new x_(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),x_=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),c_(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Ao(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Ao(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new b_(s.value.snapshot))}),e.children.length&&this.forwardEvent(new E_(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(c_(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),c_(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=$c(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},lh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xo=class{constructor(e,n){this.component=e,this.route=n}};function DU(t,e,n){let r=t._root,i=e?e._root:null;return Tc(r,i,n,[r.value])}function SU(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!jb(t)?t:e.get(t):r}function Tc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ao(e);return t.children.forEach(o=>{AU(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Rc(a,n.getContext(o),i)),i}function AU(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=RU(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new lh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Tc(t,e,a?a.children:null,r,i):Tc(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new xo(a.outlet.component,o))}else o&&Rc(e,a,i),i.canActivateChecks.push(new lh(r)),s.component?Tc(t,null,a?a.children:null,r,i):Tc(t,null,n,r,i);return i}function RU(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!cs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!cs(t.url,e.url)||!Jn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!A_(t,e)||!Jn(t.queryParams,e.queryParams);case"paramsChange":default:return!A_(t,e)}}function Rc(t,e,n){let r=Ao(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Rc(o,e.children.getContext(s),n):Rc(o,null,n):Rc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new xo(e.outlet.component,i)):n.canDeactivateChecks.push(new xo(null,i)):n.canDeactivateChecks.push(new xo(null,i))}function Hc(t){return typeof t=="function"}function xU(t){return typeof t=="boolean"}function MU(t){return t&&Hc(t.canLoad)}function NU(t){return t&&Hc(t.canActivate)}function PU(t){return t&&Hc(t.canActivateChild)}function OU(t){return t&&Hc(t.canDeactivate)}function kU(t){return t&&Hc(t.canMatch)}function qD(t){return t instanceof vr||t?.name==="EmptyError"}var Xd=Symbol("INITIAL_VALUE");function Oo(){return dn(t=>nc(t.map(e=>e.pipe(wr(1),rg(Xd)))).pipe(pe(e=>{for(let n of e)if(n!==!0){if(n===Xd)return Xd;if(n===!1||n instanceof mi)return n}return!0}),ln(e=>e!==Xd),wr(1)))}function FU(t,e){return et(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ee(Se(V({},n),{guardsResult:!0})):LU(o,r,i,t).pipe(et(a=>a&&xU(a)?VU(r,s,t,e):ee(a)),pe(a=>Se(V({},n),{guardsResult:a})))})}function LU(t,e,n,r){return qe(t).pipe(et(i=>HU(i.component,i.route,n,e,r)),jn(i=>i!==!0,!0))}function VU(t,e,n,r){return qe(e).pipe(qi(i=>no(jU(i.route.parent,r),UU(i.route,r),$U(t,i.path,n),BU(t,i.route,n))),jn(i=>i!==!0,!0))}function UU(t,e){return t!==null&&e&&e(new C_(t)),ee(!0)}function jU(t,e){return t!==null&&e&&e(new I_(t)),ee(!0)}function BU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ee(!0);let i=r.map(s=>Wl(()=>{let o=$c(e)??n,a=ko(s,o),u=NU(a)?a.canActivate(e,t):Dr(o,()=>a(e,t));return vi(u).pipe(jn())}));return ee(i).pipe(Oo())}function $U(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>SU(o)).filter(o=>o!==null).map(o=>Wl(()=>{let a=o.guards.map(u=>{let l=$c(o.node)??n,h=ko(u,l),p=PU(h)?h.canActivateChild(r,t):Dr(l,()=>h(r,t));return vi(p).pipe(jn())});return ee(a).pipe(Oo())}));return ee(s).pipe(Oo())}function HU(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ee(!0);let o=s.map(a=>{let u=$c(e)??i,l=ko(a,u),h=OU(l)?l.canDeactivate(t,e,n,r):Dr(u,()=>l(t,e,n,r));return vi(h).pipe(jn())});return ee(o).pipe(Oo())}function qU(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return ee(!0);let s=i.map(o=>{let a=ko(o,t),u=MU(a)?a.canLoad(e,n):Dr(t,()=>a(e,n));return vi(u)});return ee(s).pipe(Oo(),zD(r))}function zD(t){return qp(ct(e=>{if(No(e))throw BD(t,e)}),pe(e=>e===!0))}function zU(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return ee(!0);let s=i.map(o=>{let a=ko(o,t),u=kU(a)?a.canMatch(e,n):Dr(t,()=>a(e,n));return vi(u)});return ee(s).pipe(Oo(),zD(r))}var Lc=class{constructor(e){this.segmentGroup=e||null}},dh=class extends Error{constructor(e){super(),this.urlTree=e}};function So(t){return eo(new Lc(t))}function GU(t){return eo(new G(4e3,!1))}function WU(t){return eo($D(!1,sn.GuardRejected))}var M_=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return ee(r);if(i.numberOfChildren>1||!i.children[se])return GU(e.redirectTo);i=i.children[se]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new dh(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new mi(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new De(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},N_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KU(t,e,n,r,i){let s=j_(t,e,n);return s.matched?(r=CU(e,r),zU(r,e,n,i).pipe(pe(o=>o===!0?s:V({},N_)))):ee(s)}function j_(t,e,n){if(e.path==="**")return QU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?V({},N_):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||zV)(n,t,e);if(!i)return V({},N_);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?V(V({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function QU(t){return{matched:!0,parameters:t.length>0?bD(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function wD(t,e,n,r){return n.length>0&&XU(t,n,r)?{segmentGroup:new De(e,JU(r,new De(n,t.children))),slicedSegments:[]}:n.length===0&&ZU(t,n,r)?{segmentGroup:new De(t.segments,YU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new De(t.segments,t.children),slicedSegments:n}}function YU(t,e,n,r){let i={};for(let s of n)if(ph(t,e,s)&&!r[er(s)]){let o=new De([],{});i[er(s)]=o}return V(V({},r),i)}function JU(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&er(r)!==se){let i=new De([],{});n[er(r)]=i}return n}function XU(t,e,n){return n.some(r=>ph(t,e,r)&&er(r)!==se)}function ZU(t,e,n){return n.some(r=>ph(t,e,r))}function ph(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function e2(t,e,n,r){return er(t)!==r&&(r===se||!ph(e,n,t))?!1:j_(e,t,n).matched}function t2(t,e,n){return e.length===0&&!t.children[n]}var P_=class{};function n2(t,e,n,r,i,s,o="emptyOnly"){return new O_(t,e,n,r,i,o,s).recognize()}var r2=31,O_=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new M_(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=wD(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(pe(n=>{let r=new kc([],Object.freeze({}),Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,{},se,this.rootComponentType,null,{}),i=new rn(r,n),s=new uh("",i),o=lU(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,se).pipe(ni(r=>{if(r instanceof dh)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Lc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=F_(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(pe(s=>s instanceof rn?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return qe(i).pipe(qi(s=>{let o=r.children[s],a=bU(n,s);return this.processSegmentGroup(e,a,o,s)}),ng((s,o)=>(s.push(...o),s)),ri(null),tg(),et(s=>{if(s===null)return So(r);let o=GD(s);return i2(o),ee(o)}))}processSegment(e,n,r,i,s,o){return qe(n).pipe(qi(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(ni(u=>{if(u instanceof Lc)return ee(null);throw u}))),jn(a=>!!a),ni(a=>{if(qD(a))return t2(r,i,s)?ee(new P_):So(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return e2(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):So(i):So(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=j_(n,i,s);if(!a)return So(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>r2&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(et(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=KU(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(dn(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(dn(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,I=new kc(h,m,Object.freeze(V({},this.urlTree.queryParams)),this.urlTree.fragment,o2(r),er(r),r.component??r._loadedComponent??null,r,a2(r)),{segmentGroup:D,slicedSegments:x}=wD(n,h,p,u);if(x.length===0&&D.hasChildren())return this.processChildren(l,u,D).pipe(pe(U=>U===null?null:new rn(I,U)));if(u.length===0&&x.length===0)return ee(new rn(I,[]));let M=er(r)===s;return this.processSegment(l,u,D,x,M?se:s,!0).pipe(pe(U=>new rn(I,U instanceof rn?[U]:[])))}))):So(n)))}getChildConfig(e,n,r){return n.children?ee({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ee({routes:n._loadedRoutes,injector:n._loadedInjector}):qU(e,n,r,this.urlSerializer).pipe(et(i=>i?this.configLoader.loadChildren(e,n).pipe(ct(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):WU(n))):ee({routes:[],injector:e})}};function i2(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function s2(t){let e=t.value.routeConfig;return e&&e.path===""}function GD(t){let e=[],n=new Set;for(let r of t){if(!s2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=GD(r.children);e.push(new rn(r.value,i))}return e.filter(r=>!n.has(r))}function o2(t){return t.data||{}}function a2(t){return t.resolve||{}}function c2(t,e,n,r,i,s){return et(o=>n2(t,e,n,r,o.extractedUrl,i,s).pipe(pe(({state:a,tree:u})=>Se(V({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function u2(t,e){return et(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ee(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of WD(u))o.add(l);let a=0;return qe(o).pipe(qi(u=>s.has(u)?l2(u,r,t,e):(u.data=F_(u,u.parent,t).resolve,ee(void 0))),ct(()=>a++),ro(1),et(u=>a===o.size?ee(n):tn))})}function WD(t){let e=t.children.map(n=>WD(n)).flat();return[t,...e]}function l2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!UD(i)&&(s[Uc]=i.title),d2(s,t,e,r).pipe(pe(o=>(t._resolvedData=o,t.data=F_(t,t.parent,n).resolve,null)))}function d2(t,e,n,r){let i=d_(t);if(i.length===0)return ee({});let s={};return qe(i).pipe(et(o=>h2(t[o],e,n,r).pipe(jn(),ct(a=>{s[o]=a}))),ro(1),eg(s),ni(o=>qD(o)?tn:eo(o)))}function h2(t,e,n,r){let i=$c(e)??r,s=ko(t,i),o=s.resolve?s.resolve(e,n):Dr(i,()=>s(e,n));return vi(o)}function u_(t){return dn(e=>{let n=t(e);return n?qe(n).pipe(pe(()=>e)):ee(e)})}var KD=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===se);return i}getResolvedTitleForRoute(r){return r.data[Uc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(f2),providedIn:"root"});let t=e;return t})(),f2=(()=>{let e=class e extends KD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(J(pD))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),qc=new B("",{providedIn:"root",factory:()=>({})}),Vc=new B(""),B_=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(Gd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return ee(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=vi(r.loadComponent()).pipe(pe(QD),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),rc(()=>{this.componentLoaders.delete(r)})),s=new Qs(i,()=>new Rt).pipe(Ks());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return ee({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=p2(i,this.compiler,r,this.onLoadEndListener).pipe(rc(()=>{this.childrenLoaders.delete(i)})),a=new Qs(o,()=>new Rt).pipe(Ks());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function p2(t,e,n,r){return vi(t.loadChildren()).pipe(pe(QD),et(i=>i instanceof fc||Array.isArray(i)?ee(i):qe(e.compileModuleAsync(i))),pe(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Vc,[],{optional:!0,self:!0}).flat()),{routes:o.map(U_),injector:s}}))}function g2(t){return t&&typeof t=="object"&&"default"in t}function QD(t){return g2(t)?t.default:t}var $_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(m2),providedIn:"root"});let t=e;return t})(),m2=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),YD=new B(""),JD=new B("");function _2(t,e,n){let r=t.get(JD),i=t.get(Jt);return t.get(_e).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),y2(t))),{onViewTransitionCreated:u}=r;return u&&Dr(t,()=>u({transition:a,from:e,to:n})),o})}function y2(t){return new Promise(e=>{Vd(e,{injector:t})})}var H_=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Rt,this.transitionAbortSubject=new Rt,this.configLoader=L(B_),this.environmentInjector=L(Wt),this.urlSerializer=L(jc),this.rootContexts=L(Bc),this.location=L(To),this.inputBindingEnabled=L(fh,{optional:!0})!==null,this.titleStrategy=L(KD),this.options=L(qc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L($_),this.createViewTransition=L(YD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ee(void 0),this.rootComponentType=null;let r=s=>this.events.next(new v_(s)),i=s=>this.events.next(new w_(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Se(V(V({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Ct({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ac,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ln(o=>o.id!==0),pe(o=>Se(V({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),dn(o=>{let a=!1,u=!1;return ee(o).pipe(dn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",sn.SupersededByNewNavigation),tn;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Se(V({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new yi(l.id,this.urlSerializer.serialize(l.rawUrl),m,ih.IgnoredSameUrlNavigation)),l.resolve(null),tn}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ee(l).pipe(dn(m=>{let I=this.transitions?.getValue();return this.events.next(new Po(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),I!==this.transitions?.getValue()?tn:Promise.resolve(m)}),c2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Se(V({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let I=new sh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(I)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:I,source:D,restoredState:x,extras:M}=l,U=new Po(m,this.urlSerializer.serialize(I),D,x);this.events.next(U);let Q=LD(this.rootComponentType).snapshot;return this.currentTransition=o=Se(V({},l),{targetSnapshot:Q,urlAfterRedirects:I,extras:Se(V({},M),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=I,ee(o)}else{let m="";return this.events.next(new yi(l.id,this.urlSerializer.serialize(l.extractedUrl),m,ih.IgnoredByUrlHandlingStrategy)),l.resolve(null),tn}}),ct(l=>{let h=new g_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),pe(l=>(this.currentTransition=o=Se(V({},l),{guards:DU(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),FU(this.environmentInjector,l=>this.events.next(l)),ct(l=>{if(o.guardsResult=l.guardsResult,No(l.guardsResult))throw BD(this.urlSerializer,l.guardsResult);let h=new m_(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),ln(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",sn.GuardRejected),!1)),u_(l=>{if(l.guards.canActivateChecks.length)return ee(l).pipe(ct(h=>{let p=new __(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),dn(h=>{let p=!1;return ee(h).pipe(u2(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",sn.NoDataFromResolver)}}))}),ct(h=>{let p=new y_(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),u_(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(ct(I=>{p.component=I}),pe(()=>{})));for(let I of p.children)m.push(...h(I));return m};return nc(h(l.targetSnapshot.root)).pipe(ri(null),wr(1))}),u_(()=>this.afterPreactivation()),dn(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?qe(p).pipe(pe(()=>o)):ee(o)}),pe(l=>{let h=yU(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Se(V({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),ct(()=>{this.events.next(new Pc)}),TU(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),wr(1),ct({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),ig(this.transitionAbortSubject.pipe(ct(l=>{throw l}))),rc(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",sn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ni(l=>{if(u=!0,HD(l))this.events.next(new _i(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),IU(l)?this.events.next(new Oc(l.url)):o.resolve(!1);else{this.events.next(new Nc(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return tn}))}))}cancelNavigationTransition(r,i,s){let o=new _i(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function v2(t){return t!==Ac}var w2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(I2),providedIn:"root"});let t=e;return t})(),k_=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},I2=(()=>{let e=class e extends k_{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),XD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:()=>L(E2),providedIn:"root"});let t=e;return t})(),E2=(()=>{let e=class e extends XD{constructor(){super(...arguments),this.location=L(To),this.urlSerializer=L(jc),this.options=L(qc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L($_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new mi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=LD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Po)this.stateMemento=this.createStateMemento();else if(r instanceof yi)this.rawUrlTree=i.initialUrl;else if(r instanceof sh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Pc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof _i&&(r.code===sn.GuardRejected||r.code===sn.NoDataFromResolver)?this.restoreHistory(i):r instanceof Nc?this.restoreHistory(i,!0):r instanceof Xn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=V(V({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=V(V({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Dc=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Dc||{});function ZD(t,e){t.events.pipe(ln(n=>n instanceof Xn||n instanceof _i||n instanceof Nc||n instanceof yi),pe(n=>n instanceof Xn||n instanceof yi?Dc.COMPLETE:(n instanceof _i?n.code===sn.Redirect||n.code===sn.SupersededByNewNavigation:!1)?Dc.REDIRECTING:Dc.FAILED),ln(n=>n!==Dc.REDIRECTING),wr(1)).subscribe(()=>{e()})}function C2(t){throw t}var b2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},lt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=L(Hd),this.stateManager=L(XD),this.options=L(qc,{optional:!0})||{},this.pendingTasks=L(jd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(H_),this.urlSerializer=L(jc),this.location=L(To),this.urlHandlingStrategy=L($_),this._events=new Rt,this.errorHandler=this.options.errorHandler||C2,this.navigated=!1,this.routeReuseStrategy=L(w2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Vc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(fh,{optional:!0}),this.eventsSubscription=new Ye,this.isNgZoneEnabled=L(_e)instanceof _e&&_e.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof _i&&i.code!==sn.Redirect&&i.code!==sn.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Xn)this.navigated=!0;else if(i instanceof Oc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||v2(s.source)};this.scheduleNavigation(a,Ac,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}S2(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ac,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=V({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(U_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=V(V({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let I=s?s.snapshot:this.routerState.snapshot.root;m=PD(I)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return OD(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=No(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ac,null,i)}navigate(r,i={skipLocationChange:!1}){return D2(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=V({},b2):i===!1?s=V({},T2):s=i,No(r))return gD(this.currentUrlTree,r,s);let o=this.parseUrl(r);return gD(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,I)=>{u=m,l=I});let p=this.pendingTasks.add();return ZD(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function D2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function S2(t){return!(t instanceof Pc)&&!(t instanceof Oc)}var gh=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new Rt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof Xn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:X0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)($(lt),$(Zn),bm("tabindex"),$(ts),$(fi),$(Mr))},e.\u0275dir=pt({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Oe("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&vc("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[tt.HasDecoratorInputTransform,"preserveFragment","preserveFragment",gi],skipLocationChange:[tt.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",gi],replaceUrl:[tt.HasDecoratorInputTransform,"replaceUrl","replaceUrl",gi],routerLink:"routerLink"},standalone:!0,features:[Hm,Wn]});let t=e;return t})();var hh=class{};var A2=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(ln(r=>r instanceof Xn),qi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Ud(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return qe(s).pipe(to())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=ee(null);let o=s.pipe(et(a=>a===null?ee(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return qe([o,a]).pipe(to())}else return o})}};e.\u0275fac=function(i){return new(i||e)(J(lt),J(Gd),J(Wt),J(hh),J(B_))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eS=new B(""),R2=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=L(Wt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Po?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Xn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof yi&&r.code===ih.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof oh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>w(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Vd(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new oh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){lT()},e.\u0275prov=z({token:e,factory:e.\u0275fac});let t=e;return t})();function tS(t,...e){return Kt([{provide:Vc,multi:!0,useValue:t},[],{provide:Zn,useFactory:nS,deps:[lt]},{provide:zd,multi:!0,useFactory:rS},e.map(n=>n.\u0275providers)])}function nS(t){return t.routerState.root}function zc(t,e){return{\u0275kind:t,\u0275providers:e}}function rS(){let t=L(ut);return e=>{let n=t.get(wc);if(e!==n.components[0])return;let r=t.get(lt),i=t.get(iS);t.get(q_)===1&&r.initialNavigation(),t.get(sS,null,oe.Optional)?.setUpPreloading(),t.get(eS,null,oe.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var iS=new B("",{factory:()=>new Rt}),q_=new B("",{providedIn:"root",factory:()=>1});function x2(){return zc(2,[{provide:q_,useValue:0},{provide:qd,multi:!0,deps:[ut],useFactory:e=>{let n=e.get(tD,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(lt),s=e.get(iS);ZD(i,()=>{r(!0)}),e.get(H_).afterPreactivation=()=>(r(!0),s.closed?ee(void 0):s),i.initialNavigation()}))}}])}function M2(){return zc(3,[{provide:qd,multi:!0,useFactory:()=>{let e=L(lt);return()=>{e.setUpLocationChangeListener()}}},{provide:q_,useValue:2}])}var sS=new B("");function N2(t){return zc(0,[{provide:sS,useExisting:A2},{provide:hh,useExisting:t}])}function P2(){return zc(8,[vD,{provide:fh,useExisting:vD}])}function O2(t){let e=[{provide:YD,useValue:_2},{provide:JD,useValue:V({skipNextTransition:!!t?.skipInitialTransition},t)}];return zc(9,e)}var ID=new B("ROUTER_FORROOT_GUARD"),k2=[To,{provide:jc,useClass:xc},lt,Bc,{provide:Zn,useFactory:nS,deps:[lt]},B_,[]],oS=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[k2,[],{provide:Vc,multi:!0,useValue:r},{provide:ID,useFactory:U2,deps:[[lt,new Le,new Wb]]},{provide:qc,useValue:i||{}},i?.useHash?L2():V2(),F2(),i?.preloadingStrategy?N2(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?j2(i):[],i?.bindToComponentInputs?P2().\u0275providers:[],i?.enableViewTransitions?O2().\u0275providers:[],B2()]}}static forChild(r){return{ngModule:e,providers:[{provide:Vc,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(J(ID,8))},e.\u0275mod=Tr({type:e}),e.\u0275inj=br({});let t=e;return t})();function F2(){return{provide:eS,useFactory:()=>{let t=L(sD),e=L(_e),n=L(qc),r=L(H_),i=L(jc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new R2(i,r,t,e,n)}}}function L2(){return{provide:Mr,useClass:rD}}function V2(){return{provide:Mr,useClass:Ym}}function U2(t){return"guarded"}function j2(t){return[t.initialNavigation==="disabled"?M2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?x2().\u0275providers:[]]}var ED=new B("");function B2(){return[{provide:ED,useFactory:rS},{provide:zd,multi:!0,useExisting:ED}]}var z_=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-bienvenido"]],standalone:!0,features:[it],decls:20,vars:0,consts:[[1,"fondo"],[1,"row",2,"margin-left","285px"],[1,"col-lg-6"],["_ngcontent-c3","","alt","Generic placeholder image","height","235","src","./assets/imagenes/login.png","width","243",1,"rounded-circle"],["href","#","role","button","routerLink","/login",1,"btn","btn-primary","btn-lg"],["_ngcontent-c3","","alt","Generic placeholder image","height","235","src","./assets/imagenes/registro.jpg","width","243",1,"rounded-circle"],["href","#","role","button","routerLink","/registro",1,"btn","btn-primary","btn-lg"]],template:function(i,s){i&1&&(R(0,"div",0)(1,"div",1)(2,"div",2),ie(3,"img",3),R(4,"h2"),q(5,"Iniciar Sesi\xF3n"),N(),R(6,"p"),q(7,"Para poder comenzar con las gestiones, deber\xE1 ingresar con su usuario y contrase\xF1a."),N(),R(8,"p")(9,"a",4),q(10,"Ingresar"),N()()(),R(11,"div",2),ie(12,"img",5),R(13,"h2"),q(14,"Registrarse"),N(),R(15,"p"),q(16,"En caso de no contar con un usuario creado, podr\xE1 generarlo aqu\xED"),N(),R(17,"p")(18,"a",6),q(19,"Registrarse"),N()()()()())},dependencies:[gh],styles:['.fondo[_ngcontent-%COMP%]{display:inline-flex;background:url("./media/slider-bg-2-7UI2L5W4.jpg");margin-block-start:101px;margin-top:-60px;padding:43px;width:100vw;height:100vh}.marketing[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}.fondo[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10.75rem;margin-left:-7.25rem}p[_ngcontent-%COMP%]{text-align:center;color:#00096b;font-size:20px}h2[_ngcontent-%COMP%]{color:#27c82a;text-align:left}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}']});let t=e;return t})();var gS=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)($(ts),$(fi))},e.\u0275dir=pt({type:e});let t=e;return t})(),$2=(()=>{let e=class e extends gS{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275dir=pt({type:e,features:[xn]});let t=e;return t})(),Q_=new B("");var H2={provide:Q_,useExisting:Cr(()=>Ii),multi:!0};function q2(){let t=xr()?xr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var z2=new B(""),Ii=(()=>{let e=class e extends gS{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!q2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)($(ts),$(fi),$(z2,8))},e.\u0275dir=pt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Oe("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[is([H2]),xn]});let t=e;return t})();function wi(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function mS(t){return t!=null&&typeof t.length=="number"}var Jc=new B(""),bh=new B(""),G2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,X=class{static min(e){return W2(e)}static max(e){return K2(e)}static required(e){return _S(e)}static requiredTrue(e){return Q2(e)}static email(e){return Y2(e)}static minLength(e){return J2(e)}static maxLength(e){return X2(e)}static pattern(e){return Z2(e)}static nullValidator(e){return _h(e)}static compose(e){return CS(e)}static composeAsync(e){return bS(e)}};function W2(t){return e=>{if(wi(e.value)||wi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function K2(t){return e=>{if(wi(e.value)||wi(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function _S(t){return wi(t.value)?{required:!0}:null}function Q2(t){return t.value===!0?null:{required:!0}}function Y2(t){return wi(t.value)||G2.test(t.value)?null:{email:!0}}function J2(t){return e=>wi(e.value)||!mS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function X2(t){return e=>mS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function Z2(t){if(!t)return _h;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(wi(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function _h(t){return null}function yS(t){return t!=null}function vS(t){return ss(t)?qe(t):t}function wS(t){let e={};return t.forEach(n=>{e=n!=null?V(V({},e),n):e}),Object.keys(e).length===0?null:e}function IS(t,e){return e.map(n=>n(t))}function ej(t){return!t.validate}function ES(t){return t.map(e=>ej(e)?e:n=>e.validate(n))}function CS(t){if(!t)return null;let e=t.filter(yS);return e.length==0?null:function(n){return wS(IS(n,e))}}function Y_(t){return t!=null?CS(ES(t)):null}function bS(t){if(!t)return null;let e=t.filter(yS);return e.length==0?null:function(n){let r=IS(n,e).map(vS);return Zp(r).pipe(pe(wS))}}function J_(t){return t!=null?bS(ES(t)):null}function aS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function TS(t){return t._rawValidators}function DS(t){return t._rawAsyncValidators}function G_(t){return t?Array.isArray(t)?t:[t]:[]}function yh(t,e){return Array.isArray(t)?t.includes(e):t===e}function cS(t,e){let n=G_(e);return G_(t).forEach(i=>{yh(n,i)||n.push(i)}),n}function uS(t,e){return G_(e).filter(n=>!yh(t,n))}var vh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Y_(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=J_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Nr=class extends vh{get formDirective(){return null}get path(){return null}},us=class extends vh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},wh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},tj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},sJ=Se(V({},tj),{"[class.ng-submitted]":"isSubmitted"}),Uo=(()=>{let e=class e extends wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(us,2))},e.\u0275dir=pt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Bd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[xn]});let t=e;return t})(),jo=(()=>{let e=class e extends wh{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)($(Nr,10))},e.\u0275dir=pt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Bd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[xn]});let t=e;return t})();var Wc="VALID",mh="INVALID",Fo="PENDING",Kc="DISABLED";function X_(t){return(Th(t)?t.validators:t)||null}function nj(t){return Array.isArray(t)?Y_(t):t||null}function Z_(t,e){return(Th(e)?e.asyncValidators:t)||null}function rj(t){return Array.isArray(t)?J_(t):t||null}function Th(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function SS(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function AS(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var Lo=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Wc}get invalid(){return this.status===mh}get pending(){return this.status==Fo}get disabled(){return this.status===Kc}get enabled(){return this.status!==Kc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(cS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(cS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(uS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(uS(e,this._rawAsyncValidators))}hasValidator(e){return yh(this._rawValidators,e)}hasAsyncValidator(e){return yh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fo,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Kc,this.errors=null,this._forEachChild(r=>{r.disable(Se(V({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Se(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Wc,this._forEachChild(r=>{r.enable(Se(V({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Se(V({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wc||this.status===Fo)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Kc:Wc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fo,this._hasOwnPendingAsyncValidator=!0;let n=vS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ft,this.statusChanges=new ft}_calculateStatus(){return this._allControlsDisabled()?Kc:this.errors?mh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fo)?Fo:this._anyControlsHaveStatus(mh)?mh:Wc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Th(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=nj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rj(this._rawAsyncValidators)}},Vo=class extends Lo{constructor(e,n,r){super(X_(n),Z_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){AS(this,!0,e),Object.keys(e).forEach(r=>{SS(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var W_=class extends Vo{};var Xc=new B("CallSetDisabledState",{providedIn:"root",factory:()=>Dh}),Dh="always";function RS(t,e){return[...e.path,t]}function Ih(t,e,n=Dh){ey(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),sj(t,e),aj(t,e),oj(t,e),ij(t,e)}function lS(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Ch(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Eh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function ij(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function ey(t,e){let n=TS(t);e.validator!==null?t.setValidators(aS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=DS(t);e.asyncValidator!==null?t.setAsyncValidators(aS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Eh(e._rawValidators,i),Eh(e._rawAsyncValidators,i)}function Ch(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=TS(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=DS(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return Eh(e._rawValidators,r),Eh(e._rawAsyncValidators,r),n}function sj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&xS(t,e)})}function oj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&xS(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function xS(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function aj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function MS(t,e){t==null,ey(t,e)}function cj(t,e){return Ch(t,e)}function NS(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function uj(t){return Object.getPrototypeOf(t.constructor)===$2}function PS(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function OS(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Ii?n=s:uj(s)?r=s:i=s}),i||r||n||null}function lj(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var dj={provide:Nr,useExisting:Cr(()=>ty)},Qc=Promise.resolve(),ty=(()=>{let e=class e extends Nr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ft,this.form=new Vo({},Y_(r),J_(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Qc.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Ih(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Qc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Qc.then(()=>{let i=this._findContainer(r.path),s=new Vo({});MS(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Qc.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Qc.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,PS(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)($(Jc,10),$(bh,10),$(Xc,8))},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&Oe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[tt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[is([dj]),xn]});let t=e;return t})();function dS(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function hS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Yc=class extends Lo{constructor(e=null,n,r){super(X_(n),Z_(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Th(n)&&(n.nonNullable||n.initialValueIsDefault)&&(hS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){dS(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){dS(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){hS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var hj=t=>t instanceof Yc;var fj={provide:us,useExisting:Cr(()=>ny)},fS=Promise.resolve(),ny=(()=>{let e=class e extends us{constructor(r,i,s,o,a,u){super(),this._changeDetectorRef=a,this.callSetDisabledState=u,this.control=new Yc,this._registered=!1,this.name="",this.update=new ft,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=OS(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),NS(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ih(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){fS.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&gi(i);fS.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?RS(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)($(Nr,9),$(Jc,10),$(bh,10),$(Q_,10),$(os,8),$(Xc,8))},e.\u0275dir=pt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[tt.None,"disabled","isDisabled"],model:[tt.None,"ngModel","model"],options:[tt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[is([fj]),xn,Wn]});let t=e;return t})(),Bo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var kS=new B("");var pj={provide:Nr,useExisting:Cr(()=>Zc)},Zc=(()=>{let e=class e extends Nr{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ft,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ch(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return Ih(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){lS(r.control||null,r,!1),lj(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,PS(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(lS(i||null,r),hj(s)&&(Ih(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);MS(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&cj(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ey(this.form,this),this._oldForm&&Ch(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)($(Jc,10),$(bh,10),$(Xc,8))},e.\u0275dir=pt({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Oe("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[tt.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[is([pj]),xn,Wn]});let t=e;return t})();var gj={provide:us,useExisting:Cr(()=>eu)},eu=(()=>{let e=class e extends us{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ft,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=OS(this,o)}ngOnChanges(r){this._added||this._setUpControl(),NS(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return RS(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)($(Nr,13),$(Jc,10),$(bh,10),$(Q_,10),$(kS,8))},e.\u0275dir=pt({type:e,selectors:[["","formControlName",""]],inputs:{name:[tt.None,"formControlName","name"],isDisabled:[tt.None,"disabled","isDisabled"],model:[tt.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[is([gj]),xn,Wn]});let t=e;return t})();var mj=(()=>{let e=class e{constructor(){this._validator=_h}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_h,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=pt({type:e,features:[Wn]});let t=e;return t})();var _j={provide:Jc,useExisting:Cr(()=>ry),multi:!0};var ry=(()=>{let e=class e extends mj{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=gi,this.createValidator=r=>_S}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Eo(e)))(s||e)}})(),e.\u0275dir=pt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&vc("required",s._enabled?"":null)},inputs:{required:"required"},features:[is([_j]),xn]});let t=e;return t})();var FS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tr({type:e}),e.\u0275inj=br({});let t=e;return t})(),K_=class extends Lo{constructor(e,n,r){super(X_(n),Z_(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){AS(this,!1,e),e.forEach((r,i)=>{SS(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function pS(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Sh=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return pS(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Vo(s,o)}record(r,i=null){let s=this._reduceControls(r);return new W_(s,i)}control(r,i,s){let o={};return this.useNonNullable?(pS(i)?o=i:(o.validators=i,o.asyncValidators=s),new Yc(r,Se(V({},o),{nonNullable:!0}))):new Yc(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new K_(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Yc)return r;if(r instanceof Lo)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $o=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Xc,useValue:r.callSetDisabledState??Dh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tr({type:e}),e.\u0275inj=br({imports:[FS]});let t=e;return t})(),Ah=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:kS,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Xc,useValue:r.callSetDisabledState??Dh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Tr({type:e}),e.\u0275inj=br({imports:[FS]});let t=e;return t})();var oy={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var F=function(t,e){if(!t)throw ds(e)},ds=function(t){return new Error("Firebase Database ("+oy.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var VS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},yj=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},xh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,I=l&63;u||(I=64,o||(m=64)),r.push(n[h],n[p],n[m],n[I])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new ay;let m=s<<2|a>>4;if(r.push(m),l!==64){let I=a<<4&240|l>>2;if(r.push(I),p!==64){let D=l<<6&192|p;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ay=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},uy=function(t){let e=VS(t);return xh.encodeByteArray(e,!0)},tu=function(t){return uy(t).replace(/\./g,"")},nu=function(t){try{return xh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function US(t){return jS(void 0,t)}function jS(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!vj(n)||(t[n]=jS(t[n],e[n]));return t}function vj(t){return t!=="__proto__"}function wj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ij=()=>wj().__FIREBASE_DEFAULTS__,Ej=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Cj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&nu(t[1]);return e&&JSON.parse(e)},Mh=()=>{try{return Ij()||Ej()||Cj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ly=t=>{var e,n;return(n=(e=Mh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},qo=t=>{let e=ly(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dy=()=>{var t;return(t=Mh())===null||t===void 0?void 0:t.config},hy=t=>{var e;return(e=Mh())===null||e===void 0?void 0:e[`_${t}`]};var ls=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function zo(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tu(JSON.stringify(n)),tu(JSON.stringify(o)),""].join(".")}function dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ru(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(dt())}function bj(){var t;let e=(t=Mh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function BS(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Nh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $S(){let t=dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tr(){return oy.NODE_CLIENT===!0||oy.NODE_ADMIN===!0}function HS(){return!bj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fy(){try{return typeof indexedDB=="object"}catch{return!1}}function qS(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var Tj="FirebaseError",Ht=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Tj,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pr.prototype.create)}},Pr=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Dj(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ht(i,a,r)}};function Dj(t,e){return t.replace(Sj,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Sj=/\{\$([^}]+)}/g;function Ho(t){return JSON.parse(t)}function mt(t){return JSON.stringify(t)}var zS=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Ho(nu(s[0])||""),n=Ho(nu(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var GS=function(t){let e=zS(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},WS=function(t){let e=zS(t).claims;return typeof e=="object"&&e.admin===!0};function nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function hs(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function iu(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function su(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function fs(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(LS(s)&&LS(o)){if(!fs(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function LS(t){return t!==null&&typeof t=="object"}function ps(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Go(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Wo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Rh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):p<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function KS(t,e){let n=new cy(t,e);return n.subscribe.bind(n)}var cy=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Aj(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=sy),i.error===void 0&&(i.error=sy),i.complete===void 0&&(i.complete=sy);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Aj(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function sy(){}function QS(t,e){return`${t} failed: ${e} argument `}var YS=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,F(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ou=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var cJ=4*60*60*1e3;function He(t){return t&&t._delegate?t._delegate:t}var Mt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var gs="[DEFAULT]";var Ph=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ls;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xj(e))try{this.getOrInitializeService({instanceIdentifier:gs})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=gs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return w(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=gs){return this.instances.has(e)}getOptions(e=gs){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=gs){return this.component?this.component.multipleInstances?e:gs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Rj(t){return t===gs?void 0:t}function xj(t){return t.instantiationMode==="EAGER"}var au=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Ph(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Mj=[],ue=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(ue||{}),Nj={debug:ue.DEBUG,verbose:ue.VERBOSE,info:ue.INFO,warn:ue.WARN,error:ue.ERROR,silent:ue.SILENT},Pj=ue.INFO,Oj={[ue.DEBUG]:"log",[ue.VERBOSE]:"log",[ue.INFO]:"info",[ue.WARN]:"warn",[ue.ERROR]:"error"},kj=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Oj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},rr=class{constructor(e){this.name=e,this._logLevel=Pj,this._logHandler=kj,this._userLogHandler=null,Mj.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Nj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ue.DEBUG,...e),this._logHandler(this,ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ue.VERBOSE,...e),this._logHandler(this,ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ue.INFO,...e),this._logHandler(this,ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ue.WARN,...e),this._logHandler(this,ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ue.ERROR,...e),this._logHandler(this,ue.ERROR,...e)}};var Fj=(t,e)=>e.some(n=>t instanceof n),JS,XS;function Lj(){return JS||(JS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Vj(){return XS||(XS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ZS=new WeakMap,gy=new WeakMap,eA=new WeakMap,py=new WeakMap,_y=new WeakMap;function Uj(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(ir(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ZS.set(n,t)}).catch(()=>{}),_y.set(e,t),e}function jj(t){if(gy.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});gy.set(t,e)}var my={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ir(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function tA(t){my=t(my)}function Bj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Oh(this),e,...n);return eA.set(r,e.sort?e.sort():[e]),ir(r)}:Vj().includes(t)?function(...e){return t.apply(Oh(this),e),ir(ZS.get(this))}:function(...e){return ir(t.apply(Oh(this),e))}}function $j(t){return typeof t=="function"?Bj(t):(t instanceof IDBTransaction&&jj(t),Fj(t,Lj())?new Proxy(t,my):t)}function ir(t){if(t instanceof IDBRequest)return Uj(t);if(py.has(t))return py.get(t);let e=$j(t);return e!==t&&(py.set(t,e),_y.set(e,t)),e}var Oh=t=>_y.get(t);function rA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=ir(o);return r&&o.addEventListener("upgradeneeded",u=>{r(ir(o.result),u.oldVersion,u.newVersion,ir(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Hj=["get","getKey","getAll","getAllKeys","count"],qj=["put","add","delete","clear"],yy=new Map;function nA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(yy.get(e))return yy.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=qj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hj.includes(n)))return;let s=function(o,...a){return w(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return yy.set(e,s),s}tA(t=>Se(V({},t),{get:(e,n,r)=>nA(e,n)||t.get(e,n,r),has:(e,n)=>!!nA(e,n)||t.has(e,n)}));var wy=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(zj(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function zj(t){let e=t.getComponent();return e?.type==="VERSION"}var Iy="@firebase/app",iA="0.10.5";var ms=new rr("@firebase/app"),Gj="@firebase/app-compat",Wj="@firebase/analytics-compat",Kj="@firebase/analytics",Qj="@firebase/app-check-compat",Yj="@firebase/app-check",Jj="@firebase/auth",Xj="@firebase/auth-compat",Zj="@firebase/database",eB="@firebase/database-compat",tB="@firebase/functions",nB="@firebase/functions-compat",rB="@firebase/installations",iB="@firebase/installations-compat",sB="@firebase/messaging",oB="@firebase/messaging-compat",aB="@firebase/performance",cB="@firebase/performance-compat",uB="@firebase/remote-config",lB="@firebase/remote-config-compat",dB="@firebase/storage",hB="@firebase/storage-compat",fB="@firebase/firestore",pB="@firebase/vertexai-preview",gB="@firebase/firestore-compat",mB="firebase",_B="10.12.2";var Ey="[DEFAULT]",yB={[Iy]:"fire-core",[Gj]:"fire-core-compat",[Kj]:"fire-analytics",[Wj]:"fire-analytics-compat",[Yj]:"fire-app-check",[Qj]:"fire-app-check-compat",[Jj]:"fire-auth",[Xj]:"fire-auth-compat",[Zj]:"fire-rtdb",[eB]:"fire-rtdb-compat",[tB]:"fire-fn",[nB]:"fire-fn-compat",[rB]:"fire-iid",[iB]:"fire-iid-compat",[sB]:"fire-fcm",[oB]:"fire-fcm-compat",[aB]:"fire-perf",[cB]:"fire-perf-compat",[uB]:"fire-rc",[lB]:"fire-rc-compat",[dB]:"fire-gcs",[hB]:"fire-gcs-compat",[fB]:"fire-fst",[gB]:"fire-fst-compat",[pB]:"fire-vertex","fire-js":"fire-js",[mB]:"fire-js-all"};var cu=new Map,vB=new Map,Cy=new Map;function sA(t,e){try{t.container.addComponent(e)}catch(n){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _n(t){let e=t.name;if(Cy.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;Cy.set(e,t);for(let n of cu.values())sA(n,t);for(let n of vB.values())sA(n,t);return!0}function Or(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Nn(t){return t.settings!==void 0}var wB={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ei=new Pr("app","Firebase",wB);var by=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ei.create("app-deleted",{appName:this._name})}};var yn=_B;function Sy(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Ey,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ei.create("bad-app-name",{appName:String(i)});if(n||(n=dy()),!n)throw Ei.create("no-options");let s=cu.get(i);if(s){if(fs(n,s.options)&&fs(r,s.config))return s;throw Ei.create("duplicate-app",{appName:i})}let o=new au(i);for(let u of Cy.values())o.addComponent(u);let a=new by(n,r,o);return cu.set(i,a),a}function sr(t=Ey){let e=cu.get(t);if(!e&&t===Ey&&dy())return Sy();if(!e)throw Ei.create("no-app",{appName:t});return e}function kh(){return Array.from(cu.values())}function Ae(t,e,n){var r;let i=(r=yB[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(a.join(" "));return}_n(new Mt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var IB="firebase-heartbeat-database",EB=1,uu="firebase-heartbeat-store",vy=null;function uA(){return vy||(vy=rA(IB,EB,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ei.create("idb-open",{originalErrorMessage:t.message})})),vy}function CB(t){return w(this,null,function*(){try{let n=(yield uA()).transaction(uu),r=yield n.objectStore(uu).get(lA(t));return yield n.done,r}catch(e){if(e instanceof Ht)ms.warn(e.message);else{let n=Ei.create("idb-get",{originalErrorMessage:e?.message});ms.warn(n.message)}}})}function oA(t,e){return w(this,null,function*(){try{let r=(yield uA()).transaction(uu,"readwrite");yield r.objectStore(uu).put(e,lA(t)),yield r.done}catch(n){if(n instanceof Ht)ms.warn(n.message);else{let r=Ei.create("idb-set",{originalErrorMessage:n?.message});ms.warn(r.message)}}})}function lA(t){return`${t.name}!${t.options.appId}`}var bB=1024,TB=30*24*60*60*1e3,Ty=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Dy(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return w(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aA();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=TB}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return w(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=aA(),{heartbeatsToSend:r,unsentEntries:i}=DB(this._heartbeatsCache.heartbeats),s=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function aA(){return new Date().toISOString().substring(0,10)}function DB(t,e=bB){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),cA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Dy=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return w(this,null,function*(){return fy()?qS().then(()=>!0).catch(()=>!1):!1})}read(){return w(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield CB(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return w(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return oA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function cA(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}function SB(t){_n(new Mt("platform-logger",e=>new wy(e),"PRIVATE")),_n(new Mt("heartbeat",e=>new Ty(e),"PRIVATE")),Ae(Iy,iA,t),Ae(Iy,iA,"esm2017"),Ae("fire-js","")}SB("");var AB="firebase",RB="10.12.2";Ae(AB,RB,"app");var Pn=new Er("ANGULARFIRE2_VERSION");function Ci(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var kr=(t,e)=>{let n=e?[e]:kh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},or=class{constructor(){return kr(xB)}},xB="app-check";function Ko(){}var Fh=class{zone;delegate;constructor(e,n=Yp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ay=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko)),n.pipe(ct({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ar=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Fh(Zone.current)),this.insideAngular=n.run(()=>new Fh(Zone.current,Zs)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(J(_e))};static \u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lh(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function MB(t){return Lh().ngZone.runOutsideAngular(()=>t())}function _s(t){return Lh().ngZone.run(()=>t())}function NB(t){return PB(Lh())(t)}function PB(t){return function(n){return n=n.lift(new Ay(t.ngZone)),n.pipe(ti(t.outsideAngular),ei(t.insideAngular))}}var OB=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),_s(()=>t.apply(void 0,r))},_t=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=_s(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ko,{},Ko,Ko))),r[s]=OB(r[s],n));let i=MB(()=>t.apply(this,r));if(!e)if(i instanceof he){let s=Lh();return i.pipe(ti(s.outsideAngular),ei(s.insideAngular))}else return _s(()=>i);return i instanceof he?i.pipe(NB):i instanceof Promise?_s(()=>new Promise((s,o)=>i.then(a=>_s(()=>s(a)),a=>_s(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:_s(()=>i)};var on=class{constructor(e){return e}},On=class{constructor(){return kh()}};function kB(t){return t&&t.length===1?t[0]:new on(sr())}var Ry=new B("angularfire2._apps"),FB={provide:on,useFactory:kB,deps:[[new Le,Ry]]},LB={provide:On,deps:[[new Le,Ry]]};function VB(t){return(e,n)=>{let r=n.get(Kn);Ae("angularfire",Pn.full,"core"),Ae("angularfire",Pn.full,"app"),Ae("angular",HT.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new on(i)}}function dA(t,...e){return Kt([FB,LB,{provide:Ry,useFactory:VB(t),multi:!0,deps:[_e,ut,ar,...e]}])}var hA=_t(Sy,!0);function RA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xA=RA,MA=new Pr("auth","Firebase",RA());var Hh=new rr("@firebase/auth");function UB(t,...e){Hh.logLevel<=ue.WARN&&Hh.warn(`Auth (${yn}): ${t}`,...e)}function Uh(t,...e){Hh.logLevel<=ue.ERROR&&Hh.error(`Auth (${yn}): ${t}`,...e)}function ur(t,...e){throw Xy(t,...e)}function ys(t,...e){return Xy(t,...e)}function NA(t,e,n){let r=Object.assign(Object.assign({},xA()),{[e]:n});return new Pr("auth","Firebase",r).create(e,{appName:t.name})}function Vr(t){return NA(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xy(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return MA.create(t,...e)}function W(t,e,...n){if(!t)throw Xy(e,...n)}function Fr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Uh(e),new Error(e)}function Ti(t,e){t||Fr(e)}function Py(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jB(){return fA()==="http:"||fA()==="https:"}function fA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function BB(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jB()||BS()||"connection"in navigator)?navigator.onLine:!0}function $B(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var vs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ti(n>e,"Short delay should be less than long delay!"),this.isMobile=ru()||Nh()}get(){return BB()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zy(t,e){Ti(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var qh=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var HB={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var qB=new vs(3e4,6e4);function Ur(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function jr(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){return PA(t,i,()=>w(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ps(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),qh.fetch()(OA(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function PA(t,e,n){return w(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},HB),e);try{let i=new Oy(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Vh(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Vh(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Vh(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Vh(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw NA(t,h,l);ur(t,h)}}catch(i){if(i instanceof Ht)throw i;ur(t,"network-request-failed",{message:String(i)})}})}function _u(s,o,a,u){return w(this,arguments,function*(t,e,n,r,i={}){let l=yield jr(t,e,n,r,i);return"mfaPendingCredential"in l&&ur(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function OA(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?Zy(t.config,i):`${t.config.apiScheme}://${i}`}function zB(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Oy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(ys(this.auth,"network-request-failed")),qB.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Vh(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=ys(t,e,r);return i.customData._tokenResponse=n,i}function pA(t){return t!==void 0&&t.enterprise!==void 0}var ky=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return zB(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function GB(t,e){return w(this,null,function*(){return jr(t,"GET","/v2/recaptchaConfig",Ur(t,e))})}function WB(t,e){return w(this,null,function*(){return jr(t,"POST","/v1/accounts:delete",e)})}function kA(t,e){return w(this,null,function*(){return jr(t,"POST","/v1/accounts:lookup",e)})}function lu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ev(t,e=!1){return w(this,null,function*(){let n=He(t),r=yield n.getIdToken(e),i=tv(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:lu(xy(i.auth_time)),issuedAtTime:lu(xy(i.iat)),expirationTime:lu(xy(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function xy(t){return Number(t)*1e3}function tv(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uh("JWT malformed, contained fewer than 3 sections"),null;try{let i=nu(n);return i?JSON.parse(i):(Uh("Failed to decode base64 JWT payload"),null)}catch(i){return Uh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function gA(t){let e=tv(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function hu(t,e,n=!1){return w(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Ht&&KB(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function KB({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var Fy=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>w(this,null,function*(){yield this.iteration()}),n)}iteration(){return w(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var fu=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lu(this.lastLoginAt),this.creationTime=lu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function zh(t){return w(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield hu(t,kA(n,{idToken:r}));W(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?FA(s.providerUserInfo):[],a=QB(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new fu(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function nv(t){return w(this,null,function*(){let e=He(t);yield zh(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function QB(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function FA(t){return t.map(e=>{var{providerId:n}=e,r=Jp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function YB(t,e){return w(this,null,function*(){let n=yield PA(t,{},()=>w(this,null,function*(){let r=ps({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=OA(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qh.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JB(t,e){return w(this,null,function*(){return jr(t,"POST","/v2/accounts:revokeToken",Ur(t,e))})}var du=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");let n=gA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return w(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return w(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield YB(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Fr("not implemented")}};function bi(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Qo=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Jp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fy(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fu(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return w(this,null,function*(){let n=yield hu(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return ev(this,e)}reload(){return nv(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return w(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield zh(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return w(this,null,function*(){if(Nn(this.auth.app))return Promise.reject(Vr(this.auth));let e=yield this.getIdToken();return yield hu(this,WB(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,I=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,D=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,M=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,U=(l=n.createdAt)!==null&&l!==void 0?l:void 0,Q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:j,emailVerified:Z,isAnonymous:Ge,providerData:ve,stsTokenManager:C}=n;W(j&&C,e,"internal-error");let _=du.fromJSON(this.name,C);W(typeof j=="string",e,"internal-error"),bi(p,e.name),bi(m,e.name),W(typeof Z=="boolean",e,"internal-error"),W(typeof Ge=="boolean",e,"internal-error"),bi(I,e.name),bi(D,e.name),bi(x,e.name),bi(M,e.name),bi(U,e.name),bi(Q,e.name);let y=new t({uid:j,auth:e,email:m,emailVerified:Z,displayName:p,isAnonymous:Ge,photoURL:D,phoneNumber:I,tenantId:x,stsTokenManager:_,createdAt:U,lastLoginAt:Q});return ve&&Array.isArray(ve)&&(y.providerData=ve.map(E=>Object.assign({},E))),M&&(y._redirectEventId=M),y}static _fromIdTokenResponse(e,n,r=!1){return w(this,null,function*(){let i=new du;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield zh(s),s})}static _fromGetAccountInfoResponse(e,n,r){return w(this,null,function*(){let i=n.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?FA(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new du;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new fu(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var mA=new Map;function Lr(t){Ti(t instanceof Function,"Expected a class definition");let e=mA.get(t);return e?(Ti(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,mA.set(t,e),e)}var XB=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return w(this,null,function*(){return!0})}_set(n,r){return w(this,null,function*(){this.storage[n]=r})}_get(n){return w(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return w(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),Ly=XB;function jh(t,e,n){return`firebase:${t}:${e}:${n}`}var Gh=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=jh(this.userKey,i.apiKey,s),this.fullPersistenceKey=jh("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return w(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Qo._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return w(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return w(this,null,function*(){if(!n.length)return new t(Lr(Ly),e,r);let i=(yield Promise.all(n.map(l=>w(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||Lr(Ly),o=jh(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=Qo._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>w(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function _A(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(UA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(LA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(BA(e))return"Blackberry";if($A(e))return"Webos";if(rv(e))return"Safari";if((e.includes("chrome/")||VA(e))&&!e.includes("edge/"))return"Chrome";if(jA(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function LA(t=dt()){return/firefox\//i.test(t)}function rv(t=dt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VA(t=dt()){return/crios\//i.test(t)}function UA(t=dt()){return/iemobile/i.test(t)}function jA(t=dt()){return/android/i.test(t)}function BA(t=dt()){return/blackberry/i.test(t)}function $A(t=dt()){return/webos/i.test(t)}function ef(t=dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZB(t=dt()){var e;return ef(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e$(){return $S()&&document.documentMode===10}function HA(t=dt()){return ef(t)||jA(t)||$A(t)||BA(t)||/windows phone/i.test(t)||UA(t)}function t$(){try{return!!(window&&window!==window.top)}catch{return!1}}function qA(t,e=[]){let n;switch(t){case"Browser":n=_A(dt());break;case"Worker":n=`${_A(dt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yn}/${r}`}var Vy=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return w(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function n$(n){return w(this,arguments,function*(t,e={}){return jr(t,"GET","/v2/passwordPolicy",Ur(t,e))})}var r$=6,Uy=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:r$,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var jy=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wh(this),this.idTokenSubscription=new Wh(this),this.beforeStateQueue=new Vy(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Lr(n)),this._initializationPromise=this.queue(()=>w(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Gh.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return w(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return w(this,null,function*(){try{let n=yield kA(this,{idToken:e}),r=yield Qo._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return w(this,null,function*(){var n;if(Nn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return w(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return w(this,null,function*(){try{yield zh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$B()}_delete(){return w(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return w(this,null,function*(){if(Nn(this.app))return Promise.reject(Vr(this));let n=e?He(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return w(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>w(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return w(this,null,function*(){return Nn(this.app)?Promise.reject(Vr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Nn(this.app)?Promise.reject(Vr(this)):this.queue(()=>w(this,null,function*(){yield this.assertedPersistence.setPersistence(Lr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return w(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return w(this,null,function*(){let e=yield n$(this),n=new Uy(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Pr("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return w(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JB(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return w(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return w(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Lr(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=yield Gh.create(this,[Lr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return w(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>w(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return w(this,null,function*(){if(e===this.currentUser)return this.queue(()=>w(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return w(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return w(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return w(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&UB(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Is(t){return He(t)}var Wh=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=KS(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tf={loadJS(){return w(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function i$(t){tf=t}function zA(t){return tf.loadJS(t)}function s$(){return tf.recaptchaEnterpriseScript}function o$(){return tf.gapiScript}function GA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var a$="recaptcha-enterprise",c$="NO_RECAPTCHA",By=class{constructor(e){this.type=a$,this.auth=Is(e)}verify(e="verify",n=!1){return w(this,null,function*(){function r(s){return w(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>w(this,null,function*(){GB(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new ky(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;pA(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(c$)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&pA(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=s$();u.length!==0&&(u+=a),zA(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function yA(t,e,n,r=!1){return w(this,null,function*(){let i=new By(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function $y(t,e,n,r){return w(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield yA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>w(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield yA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function iv(t,e){let n=Or(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(fs(s,e??{}))return i;ur(i,"already-initialized")}return n.initialize({options:e})}function u$(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Lr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function sv(t,e,n){let r=Is(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=WA(e),{host:o,port:a}=l$(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||d$()}function WA(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l$(t){let e=WA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:vA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:vA(o)}}}function vA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function d$(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var pu=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fr("not implemented")}_getIdTokenResponse(e){return Fr("not implemented")}_linkToIdToken(e,n){return Fr("not implemented")}_getReauthenticationResolver(e){return Fr("not implemented")}};function h$(t,e){return w(this,null,function*(){return jr(t,"POST","/v1/accounts:signUp",e)})}function f$(t,e){return w(this,null,function*(){return _u(t,"POST","/v1/accounts:signInWithPassword",Ur(t,e))})}function p$(t,e){return w(this,null,function*(){return jr(t,"POST","/v1/accounts:sendOobCode",Ur(t,e))})}function g$(t,e){return w(this,null,function*(){return p$(t,e)})}function m$(t,e){return w(this,null,function*(){return _u(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))})}function _$(t,e){return w(this,null,function*(){return _u(t,"POST","/v1/accounts:signInWithEmailLink",Ur(t,e))})}var gu=class t extends pu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return w(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $y(e,n,"signInWithPassword",f$);case"emailLink":return m$(e,{email:this._email,oobCode:this._password});default:ur(e,"internal-error")}})}_linkToIdToken(e,n){return w(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $y(e,r,"signUpPassword",h$);case"emailLink":return _$(e,{idToken:n,email:this._email,oobCode:this._password});default:ur(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function My(t,e){return w(this,null,function*(){return _u(t,"POST","/v1/accounts:signInWithIdp",Ur(t,e))})}function y$(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function v$(t){let e=Go(Wo(t)).link,n=e?Go(Wo(e)).deep_link_id:null,r=Go(Wo(t)).deep_link_id;return(r?Go(Wo(r)).link:null)||r||n||e||t}var Kh=class t{constructor(e){var n,r,i,s,o,a;let u=Go(Wo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=y$((i=u.mode)!==null&&i!==void 0?i:null);W(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=v$(e);try{return new t(n)}catch{return null}}};var KA=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return gu._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=Kh.parseLink(r);return W(i,"argument-error"),gu._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),Qh=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Hy=class extends Qh{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function w$(t,e){return w(this,null,function*(){return _u(t,"POST","/v1/accounts:signUp",Ur(t,e))})}var Yo=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return w(this,null,function*(){let s=yield Qo._fromIdTokenResponse(e,r,i),o=wA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return w(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=wA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function wA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var qy=class t extends Ht{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function QA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?qy._fromErrorAndOperation(t,s,e,r):s})}function I$(t,e,n=!1){return w(this,null,function*(){let r=yield hu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Yo._forOperation(t,"link",r)})}function E$(t,e,n=!1){return w(this,null,function*(){let{auth:r}=t;if(Nn(r.app))return Promise.reject(Vr(r));let i="reauthenticate";try{let s=yield hu(t,QA(r,i,e,t),n);W(s.idToken,r,"internal-error");let o=tv(s.idToken);W(o,r,"internal-error");let{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),Yo._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&ur(r,"user-mismatch"),s}})}function YA(t,e,n=!1){return w(this,null,function*(){if(Nn(t.app))return Promise.reject(Vr(t));let r="signIn",i=yield QA(t,r,e),s=yield Yo._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function ov(t,e){return w(this,null,function*(){return YA(Is(t),e)})}function C$(t,e,n){var r;W(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}function JA(t){return w(this,null,function*(){let e=Is(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function av(t,e,n){return w(this,null,function*(){if(Nn(t.app))return Promise.reject(Vr(t));let r=Is(t),o=yield $y(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",w$).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&JA(t),u}),a=yield Yo._fromIdTokenResponse(r,"signIn",o);return yield r._updateCurrentUser(a.user),a})}function cv(t,e,n){return Nn(t.app)?Promise.reject(Vr(t)):ov(He(t),KA.credential(e,n)).catch(r=>w(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&JA(t),r}))}function nf(t,e){return w(this,null,function*(){let n=He(t),i={requestType:"VERIFY_EMAIL",idToken:yield t.getIdToken()};e&&C$(n.auth,i,e);let{email:s}=yield g$(n.auth,i);s!==t.email&&(yield t.reload())})}function uv(t,e,n,r){return He(t).onIdTokenChanged(e,n,r)}function lv(t,e,n){return He(t).beforeAuthStateChanged(e,n)}function dv(t){return He(t).signOut()}var Yh="__sak";var Jh=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function b$(){let t=dt();return rv(t)||ef(t)}var T$=1e3,D$=10,S$=(()=>{class t extends Jh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=b$()&&t$(),this.fallbackToPolling=HA(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);e$()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,D$):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},T$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return w(this,null,function*(){yield Xr(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return w(this,null,function*(){let r=yield Xr(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return w(this,null,function*(){yield Xr(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),XA=S$;var A$=(()=>{class t extends Jh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),hv=A$;function R$(t){return Promise.all(t.map(e=>w(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var x$=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return w(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>w(this,null,function*(){return h(r.origin,o)})),l=yield R$(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function ZA(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var zy=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return w(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=ZA("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function cr(){return window}function M$(t){cr().location.href=t}function eR(){return typeof cr().WorkerGlobalScope<"u"&&typeof cr().importScripts=="function"}function N$(){return w(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function P$(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O$(){return eR()?self:null}var tR="firebaseLocalStorageDb",k$=1,Xh="firebaseLocalStorage",nR="fbase_key",ws=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function rf(t,e){return t.transaction([Xh],e?"readwrite":"readonly").objectStore(Xh)}function F$(){let t=indexedDB.deleteDatabase(tR);return new ws(t).toPromise()}function Gy(){let t=indexedDB.open(tR,k$);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(Xh,{keyPath:nR})}catch(i){n(i)}}),t.addEventListener("success",()=>w(this,null,function*(){let r=t.result;r.objectStoreNames.contains(Xh)?e(r):(r.close(),yield F$(),e(yield Gy()))}))})}function IA(t,e,n){return w(this,null,function*(){let r=rf(t,!0).put({[nR]:e,value:n});return new ws(r).toPromise()})}function L$(t,e){return w(this,null,function*(){let n=rf(t,!1).get(e),r=yield new ws(n).toPromise();return r===void 0?null:r.value})}function EA(t,e){let n=rf(t,!0).delete(e);return new ws(n).toPromise()}var V$=800,U$=3,j$=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return w(this,null,function*(){return this.db?this.db:(this.db=yield Gy(),this.db)})}_withRetries(n){return w(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>U$)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return w(this,null,function*(){return eR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return w(this,null,function*(){this.receiver=x$._getInstance(O$()),this.receiver._subscribe("keyChanged",(n,r)=>w(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>w(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return w(this,null,function*(){var n,r;if(this.activeServiceWorker=yield N$(),!this.activeServiceWorker)return;this.sender=new zy(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return w(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||P$()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return w(this,null,function*(){try{if(!indexedDB)return!1;let n=yield Gy();return yield IA(n,Yh,"1"),yield EA(n,Yh),!0}catch{}return!1})}_withPendingWrite(n){return w(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(i=>IA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return w(this,null,function*(){let r=yield this._withRetries(i=>L$(i,n));return this.localCache[n]=r,r})}_remove(n){return w(this,null,function*(){return this._withPendingWrite(()=>w(this,null,function*(){return yield this._withRetries(r=>EA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return w(this,null,function*(){let n=yield this._withRetries(s=>{let o=rf(s,!1).getAll();return new ws(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>w(this,null,function*(){return this._poll()}),V$)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),rR=j$;var eX=GA("rcb"),tX=new vs(3e4,6e4);function B$(t,e){return e?Lr(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var mu=class extends pu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return My(e,this._buildIdpRequest())}_linkToIdToken(e,n){return My(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return My(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function $$(t){return YA(t.auth,new mu(t),t.bypassAuthState)}function H$(t){let{auth:e,user:n}=t;return W(n,e,"internal-error"),E$(n,new mu(t),t.bypassAuthState)}function q$(t){return w(this,null,function*(){let{auth:e,user:n}=t;return W(n,e,"internal-error"),I$(n,new mu(t),t.bypassAuthState)})}var Wy=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>w(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return w(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $$;case"linkViaPopup":case"linkViaRedirect":return q$;case"reauthViaPopup":case"reauthViaRedirect":return H$;default:ur(this.auth,"internal-error")}}resolve(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ti(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var nX=new vs(2e3,1e4);var z$="pendingRedirect",Bh=new Map,Ky=class t extends Wy{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return w(this,null,function*(){let e=Bh.get(this.auth._key());if(!e){try{let r=(yield G$(this.resolver,this.auth))?yield Xr(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return w(this,null,function*(){if(e.type==="signInViaRedirect")return Xr(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Xr(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return w(this,null,function*(){})}cleanUp(){}};function G$(t,e){return w(this,null,function*(){let n=Q$(e),r=K$(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function W$(t,e){Bh.set(t._key(),e)}function K$(t){return Lr(t._redirectPersistence)}function Q$(t){return jh(z$,t.config.apiKey,t.name)}function Y$(t,e,n=!1){return w(this,null,function*(){if(Nn(t.app))return Promise.reject(Vr(t));let r=Is(t),i=B$(r,e),o=yield new Ky(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var J$=10*60*1e3,Qy=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X$(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(ys(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J$&&this.cachedEventUids.clear(),this.cachedEventUids.has(CA(e))}saveEventToCache(e){this.cachedEventUids.add(CA(e)),this.lastProcessedEventTime=Date.now()}};function CA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function X$(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iR(t);default:return!1}}function Z$(n){return w(this,arguments,function*(t,e={}){return jr(t,"GET","/v1/projects",e)})}var eH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tH=/^https?/;function nH(t){return w(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Z$(t);for(let n of e)try{if(rH(n))return}catch{}ur(t,"unauthorized-domain")})}function rH(t){let e=Py(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tH.test(n))return!1;if(eH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var iH=new vs(3e4,6e4);function bA(){let t=cr().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sH(t){return new Promise((e,n)=>{var r,i,s;function o(){bA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bA(),n(ys(t,"network-request-failed"))},timeout:iH.get()})}if(!((i=(r=cr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=cr().gapi)===null||s===void 0)&&s.load)o();else{let a=GA("iframefcb");return cr()[a]=()=>{gapi.load?o():n(ys(t,"network-request-failed"))},zA(`${o$()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw $h=null,e})}var $h=null;function oH(t){return $h=$h||sH(t),$h}var aH=new vs(5e3,15e3),cH="__/auth/iframe",uH="emulator/auth/iframe",lH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hH(t){let e=t.config;W(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?Zy(e,uH):`https://${t.config.authDomain}/${cH}`,r={apiKey:e.apiKey,appName:t.name,v:yn},i=dH.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ps(r).slice(1)}`}function fH(t){return w(this,null,function*(){let e=yield oH(t),n=cr().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:hH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lH,dontclear:!0},r=>new Promise((i,s)=>w(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=ys(t,"network-request-failed"),a=cr().setTimeout(()=>{s(o)},aH.get());function u(){cr().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var pH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gH=500,mH=600,_H="_blank",yH="http://localhost",Zh=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vH(t,e,n,r=gH,i=mH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},pH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=dt().toLowerCase();n&&(a=VA(l)?_H:n),LA(l)&&(e=e||yH,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[I,D])=>`${m}${I}=${D},`,"");if(ZB(l)&&a!=="_self")return wH(e||"",a),new Zh(null);let p=window.open(e||"",a,h);W(p,t,"popup-blocked");try{p.focus()}catch{}return new Zh(p)}function wH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var IH="__/auth/handler",EH="emulator/auth/handler",CH=encodeURIComponent("fac");function TA(t,e,n,r,i,s){return w(this,null,function*(){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yn,eventId:i};if(e instanceof Qh){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iu(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof Hy){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${CH}=${encodeURIComponent(u)}`:"";return`${bH(t)}?${ps(a).slice(1)}${l}`})}function bH({config:t}){return t.emulator?Zy(t,EH):`https://${t.authDomain}/${IH}`}var Ny="webStorageSupport",Yy=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hv,this._completeRedirectFn=Y$,this._overrideRedirectResult=W$}_openPopup(e,n,r,i){return w(this,null,function*(){var s;Ti((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield TA(e,n,r,Py(),i);return vH(e,o,ZA())})}_openRedirect(e,n,r,i){return w(this,null,function*(){yield this._originValidation(e);let s=yield TA(e,n,r,Py(),i);return M$(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Ti(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return w(this,null,function*(){let n=yield fH(e),r=new Qy(e);return n.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ny,{type:Ny},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Ny];o!==void 0&&n(!!o),ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return HA()||rv()||ef()}},sR=Yy;var DA="@firebase/auth",SA="1.7.4";var Jy=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return w(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function TH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DH(t){_n(new Mt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qA(t)},l=new jy(r,i,s,u);return u$(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_n(new Mt("auth-internal",e=>{let n=Is(e.getProvider("auth").getImmediate());return(r=>new Jy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ae(DA,SA,TH(t)),Ae(DA,SA,"esm2017")}var SH=5*60,AH=hy("authIdTokenMaxAge")||SH,AA=null,RH=t=>e=>w(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AH)return;let i=n?.token;AA!==i&&(AA=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function fv(t=sr()){let e=Or(t,"auth");if(e.isInitialized())return e.getImmediate();let n=iv(t,{popupRedirectResolver:sR,persistence:[rR,XA,hv]}),r=hy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=RH(s.toString());lv(n,o,()=>o(n.currentUser)),uv(n,a=>o(a))}}let i=ly("auth");return i&&sv(n,`http://${i}`),n}function xH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}i$({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=ys("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DH("Browser");var oR="auth",Es=class{constructor(e){return e}},Br=class{constructor(){return kr(oR)}};var pv=new B("angularfire2.auth-instances");function vq(t,e){let n=Ci(oR,t,e);return n&&new Es(n)}function wq(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Es(r)}}var Iq={provide:Br,deps:[[new Le,pv]]},Eq={provide:Es,useFactory:vq,deps:[[new Le,pv],on]};function aR(t,...e){return Ae("angularfire",Pn.full,"auth"),Kt([Eq,Iq,{provide:pv,useFactory:wq(t),multi:!0,deps:[_e,ut,ar,On,[new Le,or],...e]}])}var cR=_t(av,!0);var uR=_t(fv,!0);var lR=_t(cv,!0);var dR=_t(dv,!0);var Di=(()=>{let e=class e{constructor(r,i){this.auth=r,this.router=i,this.user=""}login(r,i){return w(this,null,function*(){try{let s=yield lR(this.auth,r,i);return this.user=s,s.user.emailVerified?(alert("Login Exitoso"),this.router.navigate(["/bienvenido"]),s):(alert("email no chequeado"),this.router.navigate(["/login"]),null)}catch{return null}})}logout(){return w(this,null,function*(){return dR(this.auth)})}register(r,i){return w(this,null,function*(){try{let s=yield cR(this.auth,r,i);return nf(s.user).then(()=>{alert("Registration successful! Please check your email for verification."),this.router.navigate(["/login"]),this.user=s}),s}catch{return null}})}isAuth(){return this.user}};e.\u0275fac=function(i){return new(i||e)(J(Es),J(lt))},e.\u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fR={};var gv,pR;(function(){var t;function e(C,_){function y(){}y.prototype=_.prototype,C.D=_.prototype,C.prototype=new y,C.prototype.constructor=C,C.C=function(E,b,S){for(var v=Array(arguments.length-2),mr=2;mr<arguments.length;mr++)v[mr-2]=arguments[mr];return _.prototype[b].apply(E,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,_,y){y||(y=0);var E=Array(16);if(typeof _=="string")for(var b=0;16>b;++b)E[b]=_.charCodeAt(y++)|_.charCodeAt(y++)<<8|_.charCodeAt(y++)<<16|_.charCodeAt(y++)<<24;else for(b=0;16>b;++b)E[b]=_[y++]|_[y++]<<8|_[y++]<<16|_[y++]<<24;_=C.g[0],y=C.g[1],b=C.g[2];var S=C.g[3],v=_+(S^y&(b^S))+E[0]+3614090360&4294967295;_=y+(v<<7&4294967295|v>>>25),v=S+(b^_&(y^b))+E[1]+3905402710&4294967295,S=_+(v<<12&4294967295|v>>>20),v=b+(y^S&(_^y))+E[2]+606105819&4294967295,b=S+(v<<17&4294967295|v>>>15),v=y+(_^b&(S^_))+E[3]+3250441966&4294967295,y=b+(v<<22&4294967295|v>>>10),v=_+(S^y&(b^S))+E[4]+4118548399&4294967295,_=y+(v<<7&4294967295|v>>>25),v=S+(b^_&(y^b))+E[5]+1200080426&4294967295,S=_+(v<<12&4294967295|v>>>20),v=b+(y^S&(_^y))+E[6]+2821735955&4294967295,b=S+(v<<17&4294967295|v>>>15),v=y+(_^b&(S^_))+E[7]+4249261313&4294967295,y=b+(v<<22&4294967295|v>>>10),v=_+(S^y&(b^S))+E[8]+1770035416&4294967295,_=y+(v<<7&4294967295|v>>>25),v=S+(b^_&(y^b))+E[9]+2336552879&4294967295,S=_+(v<<12&4294967295|v>>>20),v=b+(y^S&(_^y))+E[10]+4294925233&4294967295,b=S+(v<<17&4294967295|v>>>15),v=y+(_^b&(S^_))+E[11]+2304563134&4294967295,y=b+(v<<22&4294967295|v>>>10),v=_+(S^y&(b^S))+E[12]+1804603682&4294967295,_=y+(v<<7&4294967295|v>>>25),v=S+(b^_&(y^b))+E[13]+4254626195&4294967295,S=_+(v<<12&4294967295|v>>>20),v=b+(y^S&(_^y))+E[14]+2792965006&4294967295,b=S+(v<<17&4294967295|v>>>15),v=y+(_^b&(S^_))+E[15]+1236535329&4294967295,y=b+(v<<22&4294967295|v>>>10),v=_+(b^S&(y^b))+E[1]+4129170786&4294967295,_=y+(v<<5&4294967295|v>>>27),v=S+(y^b&(_^y))+E[6]+3225465664&4294967295,S=_+(v<<9&4294967295|v>>>23),v=b+(_^y&(S^_))+E[11]+643717713&4294967295,b=S+(v<<14&4294967295|v>>>18),v=y+(S^_&(b^S))+E[0]+3921069994&4294967295,y=b+(v<<20&4294967295|v>>>12),v=_+(b^S&(y^b))+E[5]+3593408605&4294967295,_=y+(v<<5&4294967295|v>>>27),v=S+(y^b&(_^y))+E[10]+38016083&4294967295,S=_+(v<<9&4294967295|v>>>23),v=b+(_^y&(S^_))+E[15]+3634488961&4294967295,b=S+(v<<14&4294967295|v>>>18),v=y+(S^_&(b^S))+E[4]+3889429448&4294967295,y=b+(v<<20&4294967295|v>>>12),v=_+(b^S&(y^b))+E[9]+568446438&4294967295,_=y+(v<<5&4294967295|v>>>27),v=S+(y^b&(_^y))+E[14]+3275163606&4294967295,S=_+(v<<9&4294967295|v>>>23),v=b+(_^y&(S^_))+E[3]+4107603335&4294967295,b=S+(v<<14&4294967295|v>>>18),v=y+(S^_&(b^S))+E[8]+1163531501&4294967295,y=b+(v<<20&4294967295|v>>>12),v=_+(b^S&(y^b))+E[13]+2850285829&4294967295,_=y+(v<<5&4294967295|v>>>27),v=S+(y^b&(_^y))+E[2]+4243563512&4294967295,S=_+(v<<9&4294967295|v>>>23),v=b+(_^y&(S^_))+E[7]+1735328473&4294967295,b=S+(v<<14&4294967295|v>>>18),v=y+(S^_&(b^S))+E[12]+2368359562&4294967295,y=b+(v<<20&4294967295|v>>>12),v=_+(y^b^S)+E[5]+4294588738&4294967295,_=y+(v<<4&4294967295|v>>>28),v=S+(_^y^b)+E[8]+2272392833&4294967295,S=_+(v<<11&4294967295|v>>>21),v=b+(S^_^y)+E[11]+1839030562&4294967295,b=S+(v<<16&4294967295|v>>>16),v=y+(b^S^_)+E[14]+4259657740&4294967295,y=b+(v<<23&4294967295|v>>>9),v=_+(y^b^S)+E[1]+2763975236&4294967295,_=y+(v<<4&4294967295|v>>>28),v=S+(_^y^b)+E[4]+1272893353&4294967295,S=_+(v<<11&4294967295|v>>>21),v=b+(S^_^y)+E[7]+4139469664&4294967295,b=S+(v<<16&4294967295|v>>>16),v=y+(b^S^_)+E[10]+3200236656&4294967295,y=b+(v<<23&4294967295|v>>>9),v=_+(y^b^S)+E[13]+681279174&4294967295,_=y+(v<<4&4294967295|v>>>28),v=S+(_^y^b)+E[0]+3936430074&4294967295,S=_+(v<<11&4294967295|v>>>21),v=b+(S^_^y)+E[3]+3572445317&4294967295,b=S+(v<<16&4294967295|v>>>16),v=y+(b^S^_)+E[6]+76029189&4294967295,y=b+(v<<23&4294967295|v>>>9),v=_+(y^b^S)+E[9]+3654602809&4294967295,_=y+(v<<4&4294967295|v>>>28),v=S+(_^y^b)+E[12]+3873151461&4294967295,S=_+(v<<11&4294967295|v>>>21),v=b+(S^_^y)+E[15]+530742520&4294967295,b=S+(v<<16&4294967295|v>>>16),v=y+(b^S^_)+E[2]+3299628645&4294967295,y=b+(v<<23&4294967295|v>>>9),v=_+(b^(y|~S))+E[0]+4096336452&4294967295,_=y+(v<<6&4294967295|v>>>26),v=S+(y^(_|~b))+E[7]+1126891415&4294967295,S=_+(v<<10&4294967295|v>>>22),v=b+(_^(S|~y))+E[14]+2878612391&4294967295,b=S+(v<<15&4294967295|v>>>17),v=y+(S^(b|~_))+E[5]+4237533241&4294967295,y=b+(v<<21&4294967295|v>>>11),v=_+(b^(y|~S))+E[12]+1700485571&4294967295,_=y+(v<<6&4294967295|v>>>26),v=S+(y^(_|~b))+E[3]+2399980690&4294967295,S=_+(v<<10&4294967295|v>>>22),v=b+(_^(S|~y))+E[10]+4293915773&4294967295,b=S+(v<<15&4294967295|v>>>17),v=y+(S^(b|~_))+E[1]+2240044497&4294967295,y=b+(v<<21&4294967295|v>>>11),v=_+(b^(y|~S))+E[8]+1873313359&4294967295,_=y+(v<<6&4294967295|v>>>26),v=S+(y^(_|~b))+E[15]+4264355552&4294967295,S=_+(v<<10&4294967295|v>>>22),v=b+(_^(S|~y))+E[6]+2734768916&4294967295,b=S+(v<<15&4294967295|v>>>17),v=y+(S^(b|~_))+E[13]+1309151649&4294967295,y=b+(v<<21&4294967295|v>>>11),v=_+(b^(y|~S))+E[4]+4149444226&4294967295,_=y+(v<<6&4294967295|v>>>26),v=S+(y^(_|~b))+E[11]+3174756917&4294967295,S=_+(v<<10&4294967295|v>>>22),v=b+(_^(S|~y))+E[2]+718787259&4294967295,b=S+(v<<15&4294967295|v>>>17),v=y+(S^(b|~_))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+_&4294967295,C.g[1]=C.g[1]+(b+(v<<21&4294967295|v>>>11))&4294967295,C.g[2]=C.g[2]+b&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,_){_===void 0&&(_=C.length);for(var y=_-this.blockSize,E=this.B,b=this.h,S=0;S<_;){if(b==0)for(;S<=y;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<_;)if(E[b++]=C.charCodeAt(S++),b==this.blockSize){i(this,E),b=0;break}}else for(;S<_;)if(E[b++]=C[S++],b==this.blockSize){i(this,E),b=0;break}}this.h=b,this.o+=_},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var _=1;_<C.length-8;++_)C[_]=0;var y=8*this.o;for(_=C.length-8;_<C.length;++_)C[_]=y&255,y/=256;for(this.u(C),C=Array(16),_=y=0;4>_;++_)for(var E=0;32>E;E+=8)C[y++]=this.g[_]>>>E&255;return C};function s(C,_){var y=a;return Object.prototype.hasOwnProperty.call(y,C)?y[C]:y[C]=_(C)}function o(C,_){this.h=_;for(var y=[],E=!0,b=C.length-1;0<=b;b--){var S=C[b]|0;E&&S==_||(y[b]=S,E=!1)}this.g=y}var a={};function u(C){return-128<=C&&128>C?s(C,function(_){return new o([_|0],0>_?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return M(l(-C));for(var _=[],y=1,E=0;C>=y;E++)_[E]=C/y|0,y*=4294967296;return new o(_,0)}function h(C,_){if(C.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C.charAt(0)=="-")return M(h(C.substring(1),_));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=l(Math.pow(_,8)),E=p,b=0;b<C.length;b+=8){var S=Math.min(8,C.length-b),v=parseInt(C.substring(b,b+S),_);8>S?(S=l(Math.pow(_,S)),E=E.j(S).add(l(v))):(E=E.j(y),E=E.add(l(v)))}return E}var p=u(0),m=u(1),I=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-M(this).m();for(var C=0,_=1,y=0;y<this.g.length;y++){var E=this.i(y);C+=(0<=E?E:4294967296+E)*_,_*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(D(this))return"0";if(x(this))return"-"+M(this).toString(C);for(var _=l(Math.pow(C,6)),y=this,E="";;){var b=Z(y,_).g;y=U(y,b.j(_));var S=((0<y.g.length?y.g[0]:y.h)>>>0).toString(C);if(y=b,D(y))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function D(C){if(C.h!=0)return!1;for(var _=0;_<C.g.length;_++)if(C.g[_]!=0)return!1;return!0}function x(C){return C.h==-1}t.l=function(C){return C=U(this,C),x(C)?-1:D(C)?0:1};function M(C){for(var _=C.g.length,y=[],E=0;E<_;E++)y[E]=~C.g[E];return new o(y,~C.h).add(m)}t.abs=function(){return x(this)?M(this):this},t.add=function(C){for(var _=Math.max(this.g.length,C.g.length),y=[],E=0,b=0;b<=_;b++){var S=E+(this.i(b)&65535)+(C.i(b)&65535),v=(S>>>16)+(this.i(b)>>>16)+(C.i(b)>>>16);E=v>>>16,S&=65535,v&=65535,y[b]=v<<16|S}return new o(y,y[y.length-1]&-2147483648?-1:0)};function U(C,_){return C.add(M(_))}t.j=function(C){if(D(this)||D(C))return p;if(x(this))return x(C)?M(this).j(M(C)):M(M(this).j(C));if(x(C))return M(this.j(M(C)));if(0>this.l(I)&&0>C.l(I))return l(this.m()*C.m());for(var _=this.g.length+C.g.length,y=[],E=0;E<2*_;E++)y[E]=0;for(E=0;E<this.g.length;E++)for(var b=0;b<C.g.length;b++){var S=this.i(E)>>>16,v=this.i(E)&65535,mr=C.i(b)>>>16,ka=C.i(b)&65535;y[2*E+2*b]+=v*ka,Q(y,2*E+2*b),y[2*E+2*b+1]+=S*ka,Q(y,2*E+2*b+1),y[2*E+2*b+1]+=v*mr,Q(y,2*E+2*b+1),y[2*E+2*b+2]+=S*mr,Q(y,2*E+2*b+2)}for(E=0;E<_;E++)y[E]=y[2*E+1]<<16|y[2*E];for(E=_;E<2*_;E++)y[E]=0;return new o(y,0)};function Q(C,_){for(;(C[_]&65535)!=C[_];)C[_+1]+=C[_]>>>16,C[_]&=65535,_++}function j(C,_){this.g=C,this.h=_}function Z(C,_){if(D(_))throw Error("division by zero");if(D(C))return new j(p,p);if(x(C))return _=Z(M(C),_),new j(M(_.g),M(_.h));if(x(_))return _=Z(C,M(_)),new j(M(_.g),_.h);if(30<C.g.length){if(x(C)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var y=m,E=_;0>=E.l(C);)y=Ge(y),E=Ge(E);var b=ve(y,1),S=ve(E,1);for(E=ve(E,2),y=ve(y,2);!D(E);){var v=S.add(E);0>=v.l(C)&&(b=b.add(y),S=v),E=ve(E,1),y=ve(y,1)}return _=U(C,b.j(_)),new j(b,_)}for(b=p;0<=C.l(_);){for(y=Math.max(1,Math.floor(C.m()/_.m())),E=Math.ceil(Math.log(y)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(y),v=S.j(_);x(v)||0<v.l(C);)y-=E,S=l(y),v=S.j(_);D(S)&&(S=m),b=b.add(S),C=U(C,v)}return new j(b,C)}t.A=function(C){return Z(this,C).h},t.and=function(C){for(var _=Math.max(this.g.length,C.g.length),y=[],E=0;E<_;E++)y[E]=this.i(E)&C.i(E);return new o(y,this.h&C.h)},t.or=function(C){for(var _=Math.max(this.g.length,C.g.length),y=[],E=0;E<_;E++)y[E]=this.i(E)|C.i(E);return new o(y,this.h|C.h)},t.xor=function(C){for(var _=Math.max(this.g.length,C.g.length),y=[],E=0;E<_;E++)y[E]=this.i(E)^C.i(E);return new o(y,this.h^C.h)};function Ge(C){for(var _=C.g.length+1,y=[],E=0;E<_;E++)y[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(y,C.h)}function ve(C,_){var y=_>>5;_%=32;for(var E=C.g.length-y,b=[],S=0;S<E;S++)b[S]=0<_?C.i(S+y)>>>_|C.i(S+y+1)<<32-_:C.i(S+y);return new o(b,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,pR=fR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,gv=fR.Integer=o}).apply(typeof hR<"u"?hR:typeof self<"u"?self:typeof window<"u"?window:{});var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$r={};var mv,_v,Jo,yv,yu,af,vv,wv,Iv;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof of=="object"&&of];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in f))break e;f=f[T]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,T={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function I(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function D(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,T,A){for(var k=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)k[xe-2]=arguments[xe];return d.prototype[T].apply(g,k)}}function x(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let T=c.length||0,A=g.length||0;c.length=T+A;for(let k=0;k<A;k++)c[T+k]=g[k]}else c.push(g)}}class U{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Q(c){return/^[\s\xa0]*$/.test(c)}function j(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var Ge=j().indexOf("Gecko")!=-1&&!(j().toLowerCase().indexOf("webkit")!=-1&&j().indexOf("Edge")==-1)&&!(j().indexOf("Trident")!=-1||j().indexOf("MSIE")!=-1)&&j().indexOf("Edge")==-1;function ve(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function _(c){let d={};for(let f in c)d[f]=c[f];return d}let y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(f in g)c[f]=g[f];for(let A=0;A<y.length;A++)f=y[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function b(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function v(){var c=up;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class mr{constructor(){this.h=this.g=null}add(d,f){let g=ka.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var ka=new U(()=>new oP,c=>c.reset());class oP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Fa,La=!1,up=new mr,CE=()=>{let c=a.Promise.resolve(void 0);Fa=()=>{c.then(aP)}};var aP=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(f){S(f)}var d=ka;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}La=!1};function Kr(){this.s=this.s,this.C=this.C}Kr.prototype.s=!1,Kr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Kr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Tt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Tt.prototype.h=function(){this.defaultPrevented=!0};var cP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Va(c,d){if(Tt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(Ge){e:{try{Z(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:uP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Va.aa.h.call(this)}}D(Va,Tt);var uP={2:"touch",3:"pen",4:"mouse"};Va.prototype.h=function(){Va.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ua="closure_listenable_"+(1e6*Math.random()|0),lP=0;function dP(c,d,f,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=T,this.key=++lP,this.da=this.fa=!1}function ol(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function al(c){this.src=c,this.g={},this.h=0}al.prototype.add=function(c,d,f,g,T){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=dp(c,d,g,T);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new dP(d,this.src,A,!!g,T),d.fa=f,c.push(d)),d};function lp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],T=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=T)&&Array.prototype.splice.call(g,T,1),A&&(ol(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function dp(c,d,f,g){for(var T=0;T<c.length;++T){var A=c[T];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return T}return-1}var hp="closure_lm_"+(1e6*Math.random()|0),fp={};function bE(c,d,f,g,T){if(g&&g.once)return DE(c,d,f,g,T);if(Array.isArray(d)){for(var A=0;A<d.length;A++)bE(c,d[A],f,g,T);return null}return f=_p(f),c&&c[Ua]?c.K(d,f,l(g)?!!g.capture:!!g,T):TE(c,d,f,!1,g,T)}function TE(c,d,f,g,T,A){if(!d)throw Error("Invalid event type");var k=l(T)?!!T.capture:!!T,xe=gp(c);if(xe||(c[hp]=xe=new al(c)),f=xe.add(d,f,g,k,A),f.proxy)return f;if(g=hP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)cP||(T=k),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(AE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function hP(){function c(f){return d.call(c.src,c.listener,f)}let d=fP;return c}function DE(c,d,f,g,T){if(Array.isArray(d)){for(var A=0;A<d.length;A++)DE(c,d[A],f,g,T);return null}return f=_p(f),c&&c[Ua]?c.L(d,f,l(g)?!!g.capture:!!g,T):TE(c,d,f,!0,g,T)}function SE(c,d,f,g,T){if(Array.isArray(d))for(var A=0;A<d.length;A++)SE(c,d[A],f,g,T);else g=l(g)?!!g.capture:!!g,f=_p(f),c&&c[Ua]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=dp(A,f,g,T),-1<f&&(ol(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=gp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=dp(d,f,g,T)),(f=-1<c?d[c]:null)&&pp(f))}function pp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Ua])lp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(AE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=gp(d))?(lp(f,c),f.h==0&&(f.src=null,d[hp]=null)):ol(c)}}}function AE(c){return c in fp?fp[c]:fp[c]="on"+c}function fP(c,d){if(c.da)c=!0;else{d=new Va(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&pp(c),c=f.call(g,d)}return c}function gp(c){return c=c[hp],c instanceof al?c:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _p(c){return typeof c=="function"?c:(c[mp]||(c[mp]=function(d){return c.handleEvent(d)}),c[mp])}function Dt(){Kr.call(this),this.i=new al(this),this.M=this,this.F=null}D(Dt,Kr),Dt.prototype[Ua]=!0,Dt.prototype.removeEventListener=function(c,d,f,g){SE(this,c,d,f,g)};function Vt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Tt(d,c);else if(d instanceof Tt)d.target=d.target||c;else{var T=d;d=new Tt(g,c),E(d,T)}if(T=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];T=cl(k,g,!0,d)&&T}if(k=d.g=c,T=cl(k,g,!0,d)&&T,T=cl(k,g,!1,d)&&T,f)for(A=0;A<f.length;A++)k=d.g=f[A],T=cl(k,g,!1,d)&&T}Dt.prototype.N=function(){if(Dt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)ol(f[g]);delete c.g[d],c.h--}}this.F=null},Dt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},Dt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function cl(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var xe=k.listener,Et=k.ha||k.src;k.fa&&lp(c.i,k),T=xe.call(Et,g)!==!1&&T}}return T&&!g.defaultPrevented}function RE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function xE(c){c.g=RE(()=>{c.g=null,c.i&&(c.i=!1,xE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class pP extends Kr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:xE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ja(c){Kr.call(this),this.h=c,this.g={}}D(ja,Kr);var ME=[];function NE(c){ve(c.g,function(d,f){this.g.hasOwnProperty(f)&&pp(d)},c),c.g={}}ja.prototype.N=function(){ja.aa.N.call(this),NE(this)},ja.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yp=a.JSON.stringify,gP=a.JSON.parse,mP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function vp(){}vp.prototype.h=null;function PE(c){return c.h||(c.h=c.i())}function OE(){}var Ba={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function wp(){Tt.call(this,"d")}D(wp,Tt);function Ip(){Tt.call(this,"c")}D(Ip,Tt);var ki={},kE=null;function ul(){return kE=kE||new Dt}ki.La="serverreachability";function FE(c){Tt.call(this,ki.La,c)}D(FE,Tt);function $a(c){let d=ul();Vt(d,new FE(d))}ki.STAT_EVENT="statevent";function LE(c,d){Tt.call(this,ki.STAT_EVENT,c),this.stat=d}D(LE,Tt);function Ut(c){let d=ul();Vt(d,new LE(d,c))}ki.Ma="timingevent";function VE(c,d){Tt.call(this,ki.Ma,c),this.size=d}D(VE,Tt);function Ha(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function qa(){this.g=!0}qa.prototype.xa=function(){this.g=!1};function _P(c,d,f,g,T,A){c.info(function(){if(c.g)if(A)for(var k="",xe=A.split("&"),Et=0;Et<xe.length;Et++){var be=xe[Et].split("=");if(1<be.length){var St=be[0];be=be[1];var At=St.split("_");k=2<=At.length&&At[1]=="type"?k+(St+"="+be+"&"):k+(St+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+f+`
`+k})}function yP(c,d,f,g,T,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+f+`
`+A+" "+k})}function Us(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+wP(c,f)+(g?" "+g:"")})}function vP(c,d){c.info(function(){return"TIMEOUT: "+d})}qa.prototype.info=function(){};function wP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var A=T[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<T.length;k++)T[k]=""}}}}return yp(f)}catch{return d}}var ll={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},UE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ep;function dl(){}D(dl,vp),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},Ep=new dl;function Qr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new ja(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new jE}function jE(){this.i=null,this.g="",this.h=!1}var BE={},Cp={};function bp(c,d,f){c.L=1,c.v=gl(_r(d)),c.m=f,c.P=!0,$E(c,null)}function $E(c,d){c.F=Date.now(),hl(c),c.A=_r(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),nC(f.i,"t",g),c.C=0,f=c.j.J,c.h=new jE,c.g=wC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new pP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(ME[0]=T.toString()),T=ME);for(var A=0;A<T.length;A++){var k=bE(f,T[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),$a(),_P(c.i,c.u,c.A,c.l,c.R,c.m)}Qr.prototype.ca=function(c){c=c.target;let d=this.M;d&&yr(c)==3?d.j():this.Y(c)},Qr.prototype.Y=function(c){try{if(c==this.g)e:{let At=yr(this.g);var d=this.g.Ba();let $s=this.g.Z();if(!(3>At)&&(At!=3||this.g&&(this.h.h||this.g.oa()||uC(this.g)))){this.J||At!=4||d==7||(d==8||0>=$s?$a(3):$a(2)),Tp(this);var f=this.g.Z();this.X=f;t:if(HE(this)){var g=uC(this.g);c="";var T=g.length,A=yr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fi(this),za(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,yP(this.i,this.u,this.A,this.l,this.R,At,f),this.o){if(this.T&&!this.K){t:{if(this.g){var xe,Et=this.g;if((xe=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(xe)){var be=xe;break t}}be=null}if(f=be)Us(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Dp(this,f);else{this.o=!1,this.s=3,Ut(12),Fi(this),za(this);break e}}if(this.P){f=!0;let En;for(;!this.J&&this.C<k.length;)if(En=IP(this,k),En==Cp){At==4&&(this.s=4,Ut(14),f=!1),Us(this.i,this.l,null,"[Incomplete Response]");break}else if(En==BE){this.s=4,Ut(15),Us(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Us(this.i,this.l,En,null),Dp(this,En);if(HE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),At!=4||k.length!=0||this.h.h||(this.s=1,Ut(16),f=!1),this.o=this.o&&f,!f)Us(this.i,this.l,k,"[Invalid Chunked Response]"),Fi(this),za(this);else if(0<k.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),Np(St),St.M=!0,Ut(11))}}else Us(this.i,this.l,k,null),Dp(this,k);At==4&&Fi(this),this.o&&!this.J&&(At==4?mC(this.j,this):(this.o=!1,hl(this)))}else VP(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,Ut(12)):(this.s=0,Ut(13)),Fi(this),za(this)}}}catch{}finally{}};function HE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function IP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Cp:(f=Number(d.substring(f,g)),isNaN(f)?BE:(g+=1,g+f>d.length?Cp:(d=d.slice(g,g+f),c.C=g+f,d)))}Qr.prototype.cancel=function(){this.J=!0,Fi(this)};function hl(c){c.S=Date.now()+c.I,qE(c,c.I)}function qE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Ha(m(c.ba,c),d)}function Tp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Qr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(vP(this.i,this.A),this.L!=2&&($a(),Ut(17)),Fi(this),this.s=2,za(this)):qE(this,this.S-c)};function za(c){c.j.G==0||c.J||mC(c.j,c)}function Fi(c){Tp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,NE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Dp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Sp(f.h,c))){if(!c.K&&Sp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)wl(f),yl(f);else break e;Mp(f),Ut(18)}}else f.za=T[1],0<f.za-f.T&&37500>T[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ha(m(f.Za,f),6e3));if(1>=WE(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Vi(f,11)}else if((c.K||f.g==c)&&wl(f),!Q(d))for(T=f.Da.g.parse(d),d=0;d<T.length;d++){let be=T[d];if(f.T=be[0],be=be[1],f.G==2)if(be[0]=="c"){f.K=be[1],f.ia=be[2];let St=be[3];St!=null&&(f.la=St,f.j.info("VER="+f.la));let At=be[4];At!=null&&(f.Aa=At,f.j.info("SVER="+f.Aa));let $s=be[5];$s!=null&&typeof $s=="number"&&0<$s&&(g=1.5*$s,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let En=c.g;if(En){let El=En.g?En.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(El){var A=g.h;A.g||El.indexOf("spdy")==-1&&El.indexOf("quic")==-1&&El.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ap(A,A.h),A.h=null))}if(g.D){let Pp=En.g?En.g.getResponseHeader("X-HTTP-Session-Id"):null;Pp&&(g.ya=Pp,Fe(g.I,g.D,Pp))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=vC(g,g.J?g.ia:null,g.W),k.K){KE(g.h,k);var xe=k,Et=g.L;Et&&(xe.I=Et),xe.B&&(Tp(xe),hl(xe)),g.g=k}else pC(g);0<f.i.length&&vl(f)}else be[0]!="stop"&&be[0]!="close"||Vi(f,7);else f.G==3&&(be[0]=="stop"||be[0]=="close"?be[0]=="stop"?Vi(f,7):xp(f):be[0]!="noop"&&f.l&&f.l.ta(be),f.v=0)}}$a(4)}catch{}}var EP=class{constructor(c,d){this.g=c,this.map=d}};function zE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function GE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function WE(c){return c.h?1:c.g?c.g.size:0}function Sp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Ap(c,d){c.g?c.g.add(d):c.h=d}function KE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}zE.prototype.cancel=function(){if(this.i=QE(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function QE(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return x(c.i)}function CP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function bP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function YE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=bP(c),g=CP(c),T=g.length,A=0;A<T;A++)d.call(void 0,g[A],f&&f[A],c)}var JE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function TP(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),T=null;if(0<=g){var A=c[f].substring(0,g);T=c[f].substring(g+1)}else A=c[f];d(A,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function Li(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Li){this.h=c.h,fl(this,c.j),this.o=c.o,this.g=c.g,pl(this,c.s),this.l=c.l;var d=c.i,f=new Ka;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),XE(this,f),this.m=c.m}else c&&(d=String(c).match(JE))?(this.h=!1,fl(this,d[1]||"",!0),this.o=Ga(d[2]||""),this.g=Ga(d[3]||"",!0),pl(this,d[4]),this.l=Ga(d[5]||"",!0),XE(this,d[6]||"",!0),this.m=Ga(d[7]||"")):(this.h=!1,this.i=new Ka(null,this.h))}Li.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Wa(d,ZE,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Wa(d,ZE,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Wa(f,f.charAt(0)=="/"?AP:SP,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Wa(f,xP)),c.join("")};function _r(c){return new Li(c)}function fl(c,d,f){c.j=f?Ga(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function pl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function XE(c,d,f){d instanceof Ka?(c.i=d,MP(c.i,c.h)):(f||(d=Wa(d,RP)),c.i=new Ka(d,c.h))}function Fe(c,d,f){c.i.set(d,f)}function gl(c){return Fe(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ga(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Wa(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,DP),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ZE=/[#\/\?@]/g,SP=/[#\?:]/g,AP=/[#\?]/g,RP=/[#\?@]/g,xP=/#/g;function Ka(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Yr(c){c.g||(c.g=new Map,c.h=0,c.i&&TP(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=Ka.prototype,t.add=function(c,d){Yr(this),this.i=null,c=js(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function eC(c,d){Yr(c),d=js(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function tC(c,d){return Yr(c),d=js(c,d),c.g.has(d)}t.forEach=function(c,d){Yr(this),this.g.forEach(function(f,g){f.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){Yr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let T=c[g];for(let A=0;A<T.length;A++)f.push(d[g])}return f},t.V=function(c){Yr(this);let d=[];if(typeof c=="string")tC(this,c)&&(d=d.concat(this.g.get(js(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Yr(this),this.i=null,c=js(this,c),tC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function nC(c,d,f){eC(c,d),0<f.length&&(c.i=null,c.g.set(js(c,d),x(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var T=A;k[g]!==""&&(T+="="+encodeURIComponent(String(k[g]))),c.push(T)}}return this.i=c.join("&")};function js(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function MP(c,d){d&&!c.j&&(Yr(c),c.i=null,c.g.forEach(function(f,g){var T=g.toLowerCase();g!=T&&(eC(this,g),nC(this,T,f))},c)),c.j=d}function NP(c,d){let f=new qa;if(a.Image){let g=new Image;g.onload=I(Jr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=I(Jr,f,"TestLoadImage: error",!1,d,g),g.onabort=I(Jr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=I(Jr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function PP(c,d){let f=new qa,g=new AbortController,T=setTimeout(()=>{g.abort(),Jr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(T),A.ok?Jr(f,"TestPingServer: ok",!0,d):Jr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Jr(f,"TestPingServer: error",!1,d)})}function Jr(c,d,f,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(f)}catch{}}function OP(){this.g=new mP}function kP(c,d,f){let g=f||"";try{YE(c,function(T,A){let k=T;l(T)&&(k=yp(T)),d.push(g+A+"="+encodeURIComponent(k))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Qa(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Qa,vp),Qa.prototype.g=function(){return new ml(this.l,this.j)},Qa.prototype.i=function(c){return function(){return c}}({});function ml(c,d){Dt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(ml,Dt),t=ml.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ja(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ya(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ja(this)),this.g&&(this.readyState=3,Ja(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;rC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function rC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ya(this):Ja(this),this.readyState==3&&rC(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ya(this))},t.Qa=function(c){this.g&&(this.response=c,Ya(this))},t.ga=function(){this.g&&Ya(this)};function Ya(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ja(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ja(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function iC(c){let d="";return ve(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Rp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=iC(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Fe(c,d,f))}function We(c){Dt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(We,Dt);var FP=/^https?$/i,LP=["POST","PUT"];t=We.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ep.g(),this.v=this.o?PE(this.o):PE(Ep),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){sC(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)f.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(LP,d,void 0))||g||T||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cC(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){sC(this,A)}};function sC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,oC(c),_l(c)}function oC(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Vt(this,"complete"),Vt(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?aC(this):this.bb())},t.bb=function(){aC(this)};function aC(c){if(c.h&&typeof o<"u"&&(!c.v[1]||yr(c)!=4||c.Z()!=2)){if(c.u&&yr(c)==4)RE(c.Ea,0,c);else if(Vt(c,"readystatechange"),yr(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var T=String(c.D).match(JE)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!FP.test(T?T.toLowerCase():"")}f=g}if(f)Vt(c,"complete"),Vt(c,"success");else{c.m=6;try{var A=2<yr(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",oC(c)}}finally{_l(c)}}}}function _l(c,d){if(c.g){cC(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Vt(c,"ready");try{f.onreadystatechange=g}catch{}}}function cC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function yr(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<yr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),gP(d)}};function uC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function VP(c){let d={};c=(c.g&&2<=yr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Q(c[g]))continue;var f=b(c[g]);let T=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[T]||[];d[T]=A,A.push(f)}C(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xa(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function lC(c){this.Aa=0,this.i=[],this.j=new qa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xa("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xa("baseRetryDelayMs",5e3,c),this.cb=Xa("retryDelaySeedMs",1e4,c),this.Wa=Xa("forwardChannelMaxRetries",2,c),this.wa=Xa("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new zE(c&&c.concurrentRequestLimit),this.Da=new OP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lC.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){Ut(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=vC(this,null,this.W),vl(this)};function xp(c){if(dC(c),c.G==3){var d=c.U++,f=_r(c.I);if(Fe(f,"SID",c.K),Fe(f,"RID",d),Fe(f,"TYPE","terminate"),Za(c,f),d=new Qr(c,c.j,d),d.L=2,d.v=gl(_r(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=wC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),hl(d)}yC(c)}function yl(c){c.g&&(Np(c),c.g.cancel(),c.g=null)}function dC(c){yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),wl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function vl(c){if(!GE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Fa||CE(),La||(Fa(),La=!0),up.add(d,c),c.B=0}}function UP(c,d){return WE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Ha(m(c.Ga,c,d),_C(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new Qr(this,this.j,c),A=this.o;if(this.S&&(A?(A=_(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(T.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=fC(this,T,d),f=_r(this.I),Fe(f,"RID",c),Fe(f,"CVER",22),this.D&&Fe(f,"X-HTTP-Session-Id",this.D),Za(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(iC(A)))+"&"+d:this.m&&Rp(f,this.m,A)),Ap(this.h,T),this.Ua&&Fe(f,"TYPE","init"),this.P?(Fe(f,"$req",d),Fe(f,"SID","null"),T.T=!0,bp(T,f,null)):bp(T,f,d),this.G=2}}else this.G==3&&(c?hC(this,c):this.i.length==0||GE(this.h)||hC(this))};function hC(c,d){var f;d?f=d.l:f=c.U++;let g=_r(c.I);Fe(g,"SID",c.K),Fe(g,"RID",f),Fe(g,"AID",c.T),Za(c,g),c.m&&c.o&&Rp(g,c.m,c.o),f=new Qr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=fC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Ap(c.h,f),bp(f,g,d)}function Za(c,d){c.H&&ve(c.H,function(f,g){Fe(d,g,f)}),c.l&&YE({},function(f,g){Fe(d,g,f)})}function fC(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=T[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let xe=!0;for(let Et=0;Et<f;Et++){let be=T[Et].g,St=T[Et].map;if(be-=A,0>be)A=Math.max(0,T[Et].g-100),xe=!1;else try{kP(St,k,"req"+be+"_")}catch{g&&g(St)}}if(xe){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function pC(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Fa||CE(),La||(Fa(),La=!0),up.add(d,c),c.v=0}}function Mp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Ha(m(c.Fa,c),_C(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,gC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Ha(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ut(10),yl(this),gC(this))};function Np(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function gC(c){c.g=new Qr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=_r(c.qa);Fe(d,"RID","rpc"),Fe(d,"SID",c.K),Fe(d,"AID",c.T),Fe(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Fe(d,"TO",c.ja),Fe(d,"TYPE","xmlhttp"),Za(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=gl(_r(d)),f.m=null,f.P=!0,$E(f,c)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),Mp(this),Ut(19))};function wl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function mC(c,d){var f=null;if(c.g==d){wl(c),Np(c),c.g=null;var g=2}else if(Sp(c.h,d))f=d.D,KE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ul(),Vt(g,new VE(g,f)),vl(c)}else pC(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&UP(c,d)||g==2&&Mp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),T){case 1:Vi(c,5);break;case 4:Vi(c,10);break;case 3:Vi(c,6);break;default:Vi(c,2)}}}function _C(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Vi(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let T=!g;g=new Li(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fl(g,"https"),gl(g),T?NP(g.toString(),f):PP(g.toString(),f)}else Ut(2);c.G=0,c.l&&c.l.sa(d),yC(c),dC(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function yC(c){if(c.G=0,c.ka=[],c.l){let d=QE(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,x(c.i),c.i.length=0),c.l.ra()}}function vC(c,d,f){var g=f instanceof Li?_r(f):new Li(f);if(g.g!="")d&&(g.g=d+"."+g.g),pl(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var A=new Li(null);g&&fl(A,g),d&&(A.g=d),T&&pl(A,T),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&Fe(g,f,d),Fe(g,"VER",c.la),Za(c,g),g}function wC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new Qa({eb:f})):new We(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function IC(){}t=IC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Il(){}Il.prototype.g=function(c,d){return new Zt(c,d)};function Zt(c,d){Dt.call(this),this.g=new lC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Bs(this)}D(Zt,Dt),Zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){xp(this.g)},Zt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=yp(c),c=f);d.i.push(new EP(d.Ya++,c)),d.G==3&&vl(d)},Zt.prototype.N=function(){this.g.l=null,delete this.j,xp(this.g),delete this.g,Zt.aa.N.call(this)};function EC(c){wp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}D(EC,wp);function CC(){Ip.call(this),this.status=1}D(CC,Ip);function Bs(c){this.g=c}D(Bs,IC),Bs.prototype.ua=function(){Vt(this.g,"a")},Bs.prototype.ta=function(c){Vt(this.g,new EC(c))},Bs.prototype.sa=function(c){Vt(this.g,new CC)},Bs.prototype.ra=function(){Vt(this.g,"b")},Il.prototype.createWebChannel=Il.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Iv=$r.createWebChannelTransport=function(){return new Il},wv=$r.getStatEventTarget=function(){return ul()},vv=$r.Event=ki,af=$r.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ll.NO_ERROR=0,ll.TIMEOUT=8,ll.HTTP_ERROR=6,yu=$r.ErrorCode=ll,UE.COMPLETE="complete",yv=$r.EventType=UE,OE.EventType=Ba,Ba.OPEN="a",Ba.CLOSE="b",Ba.ERROR="c",Ba.MESSAGE="d",Dt.prototype.listen=Dt.prototype.K,Jo=$r.WebChannel=OE,_v=$r.FetchXmlHttpFactory=Qa,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,mv=$r.XhrIo=We}).apply(typeof of<"u"?of:typeof self<"u"?self:typeof window<"u"?window:{});var gR="@firebase/firestore";var yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");var ga="10.12.1";var Ds=new rr("@firebase/firestore");function vu(){return Ds.logLevel}function H(t,...e){if(Ds.logLevel<=ue.DEBUG){let n=e.map($w);Ds.debug(`Firestore (${ga}): ${t}`,...n)}}function Ss(t,...e){if(Ds.logLevel<=ue.ERROR){let n=e.map($w);Ds.error(`Firestore (${ga}): ${t}`,...n)}}function ff(t,...e){if(Ds.logLevel<=ue.WARN){let n=e.map($w);Ds.warn(`Firestore (${ga}): ${t}`,...n)}}function $w(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function ge(t="Unexpected state"){let e=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: `+t;throw Ss(e),new Error(e)}function wt(t,e){t||ge()}function je(t,e){return t}var P={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Y=class extends Ht{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hr=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var pf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Tv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}},Dv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Sv=class{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hr,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>w(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hr)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt(typeof r.accessToken=="string"),new pf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return wt(e===null||typeof e=="string"),new yt(e)}},Av=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Rv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Av(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Mv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(wt(typeof n.token=="string"),this.R=n.token,new xv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function bq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=bq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ke(t,e){return t<e?-1:t>e?1:0}function ta(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var Ot=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Y(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Y(P.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Y(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(P.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Je=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new Ot(0,0))}static max(){return new t(new Ot(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var mf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ge(),r===void 0?r=e.length-n:r>e.length-n&&ge(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},at=class t extends mf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new Y(P.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Tq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,an=class t extends mf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Tq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new Y(P.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new Y(P.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Y(P.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Y(P.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var le=class t{constructor(e){this.path=e}static fromPath(e){return new t(at.fromString(e))}static fromName(e){return new t(at.fromString(e).popFirst(5))}static empty(){return new t(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&at.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return at.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new at(e.slice()))}};var Nv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Nv.UNKNOWN_ID=-1;function Dq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Je.fromTimestamp(r===1e9?new Ot(n+1,0):new Ot(n,r));return new As(i,le.empty(),e)}function Sq(t){return new As(t.readTime,t.key,-1)}var As=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(Je.min(),le.empty(),-1)}static max(){return new t(Je.max(),le.empty(),-1)}};function Aq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=le.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}var Rq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pv=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function kR(t){return w(this,null,function*(){if(t.code!==P.FAILED_PRECONDITION||t.message!==Rq)throw t;H("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ge(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function xq(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Of(t){return t.name==="IndexedDbTransactionError"}var Mq=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Hw(t){return t==null}function Tu(t){return t===0&&1/t==-1/0}function Nq(t){return typeof t=="number"&&Number.isInteger(t)&&!Tu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Pq=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],eZ=[...Pq,"documentOverlays"],Oq=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kq=Oq,tZ=[...kq,"indexConfiguration","indexState","indexEntries"];function mR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ru(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var cn=class t{constructor(e,n){this.comparator=e,this.root=n||fr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zo(this.root,e,this.comparator,!0)}},Zo=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ge();let e=this.left.check();if(e!==this.right.check())throw ge();return e+(this.isRed()?0:1)}};fr.EMPTY=null,fr.RED=!0,fr.BLACK=!1;fr.EMPTY=new class{constructor(){this.size=0}get key(){throw ge()}get value(){throw ge()}get color(){throw ge()}get left(){throw ge()}get right(){throw ge()}copy(e,n,r,i,s){return this}insert(e,n,r){return new fr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var qt=class t{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _f(this.data.getIterator())}getIteratorFrom(e){return new _f(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},_f=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var hr=class t{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new t([])}unionWith(e){let n=new qt(an.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Ov=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ai=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Ov("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ai.EMPTY_BYTE_STRING=new Ai("");var Fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ri(t){if(wt(!!t),typeof t=="string"){let e=0,n=Fq.exec(t);if(wt(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ht(t.seconds),nanos:ht(t.nanos)}}function ht(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function na(t){return typeof t=="string"?Ai.fromBase64String(t):Ai.fromUint8Array(t)}function qw(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function LR(t){let e=t.mapValue.fields.__previous_value__;return qw(e)?LR(e):e}function yf(t){let e=Ri(t.mapValue.fields.__local_write_time__.timestampValue);return new Ot(e.seconds,e.nanos)}var kv=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Fv=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var cf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ra(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qw(t)?4:VR(t)?9007199254740991:10:ge()}function pr(t,e){if(t===e)return!0;let n=ra(t);if(n!==ra(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yf(t).isEqual(yf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Ri(i.timestampValue),a=Ri(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return na(i.bytesValue).isEqual(na(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ht(i.geoPointValue.latitude)===ht(s.geoPointValue.latitude)&&ht(i.geoPointValue.longitude)===ht(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ht(i.integerValue)===ht(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=ht(i.doubleValue),a=ht(s.doubleValue);return o===a?Tu(o)===Tu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return ta(t.arrayValue.values||[],e.arrayValue.values||[],pr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(mR(o)!==mR(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!pr(o[u],a[u])))return!1;return!0}(t,e);default:return ge()}}function Du(t,e){return(t.values||[]).find(n=>pr(n,e))!==void 0}function ia(t,e){if(t===e)return 0;let n=ra(t),r=ra(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ht(s.integerValue||s.doubleValue),u=ht(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return _R(t.timestampValue,e.timestampValue);case 4:return _R(yf(t),yf(e));case 5:return ke(t.stringValue,e.stringValue);case 6:return function(s,o){let a=na(s),u=na(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ke(a[l],u[l]);if(h!==0)return h}return ke(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ke(ht(s.latitude),ht(o.latitude));return a!==0?a:ke(ht(s.longitude),ht(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let h=ia(a[l],u[l]);if(h)return h}return ke(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cf.mapValue&&o===cf.mapValue)return 0;if(s===cf.mapValue)return 1;if(o===cf.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ke(u[p],h[p]);if(m!==0)return m;let I=ia(a[u[p]],l[h[p]]);if(I!==0)return I}return ke(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ge()}}function _R(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);let n=Ri(t),r=Ri(e),i=ke(n.seconds,r.seconds);return i!==0?i:ke(n.nanos,r.nanos)}function sa(t){return Lv(t)}function Lv(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Ri(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return na(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return le.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Lv(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Lv(n.fields[o])}`;return i+"}"}(t.mapValue):ge()}function Vv(t){return!!t&&"integerValue"in t}function zw(t){return!!t&&"arrayValue"in t}function df(t){return!!t&&"mapValue"in t}function Iu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Ru(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Iu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Iu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function VR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var dr=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!df(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Iu(n)}setAll(e){let n=an.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Iu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());df(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];df(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ru(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Iu(this.value))}};function UR(t){let e=[];return Ru(t.fields,(n,r)=>{let i=new an([n]);if(df(r)){let s=UR(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new hr(e)}var oa=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,Je.min(),Je.min(),Je.min(),dr.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,Je.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,Je.min(),Je.min(),dr.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,Je.min(),Je.min(),dr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var aa=class{constructor(e,n){this.position=e,this.inclusive=n}};function yR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=le.comparator(le.fromName(o.referenceValue),n.key):r=ia(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pr(t.position[n],e.position[n]))return!1;return!0}var ca=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function Lq(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vf=class{},vt=class t extends vf{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new jv(e,n,r):n==="array-contains"?new Hv(e,r):n==="in"?new qv(e,r):n==="not-in"?new zv(e,r):n==="array-contains-any"?new Gv(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Bv(e,r):new $v(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ia(n,this.value)):n!==null&&ra(this.value)===ra(n)&&this.matchesComparison(ia(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xi=class t extends vf{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return jR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function jR(t){return t.op==="and"}function BR(t){return Vq(t)&&jR(t)}function Vq(t){for(let e of t.filters)if(e instanceof xi)return!1;return!0}function Uv(t){if(t instanceof vt)return t.field.canonicalString()+t.op.toString()+sa(t.value);if(BR(t))return t.filters.map(e=>Uv(e)).join(",");{let e=t.filters.map(n=>Uv(n)).join(",");return`${t.op}(${e})`}}function $R(t,e){return t instanceof vt?function(r,i){return i instanceof vt&&r.op===i.op&&r.field.isEqual(i.field)&&pr(r.value,i.value)}(t,e):t instanceof xi?function(r,i){return i instanceof xi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&$R(o,i.filters[a]),!0):!1}(t,e):void ge()}function HR(t){return t instanceof vt?function(n){return`${n.field.canonicalString()} ${n.op} ${sa(n.value)}`}(t):t instanceof xi?function(n){return n.op.toString()+" {"+n.getFilters().map(HR).join(" ,")+"}"}(t):"Filter"}var jv=class extends vt{constructor(e,n,r){super(e,n,r),this.key=le.fromName(r.referenceValue)}matches(e){let n=le.comparator(e.key,this.key);return this.matchesComparison(n)}},Bv=class extends vt{constructor(e,n){super(e,"in",n),this.keys=qR("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},$v=class extends vt{constructor(e,n){super(e,"not-in",n),this.keys=qR("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function qR(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>le.fromName(r.referenceValue))}var Hv=class extends vt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return zw(n)&&Du(n.arrayValue,this.value)}},qv=class extends vt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Du(this.value.arrayValue,n)}},zv=class extends vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Du(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Du(this.value.arrayValue,n)}},Gv=class extends vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!zw(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Du(this.value.arrayValue,r))}};var Wv=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function wR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Wv(t,e,n,r,i,s,o)}function Gw(t){let e=je(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uv(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Hw(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>sa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>sa(r)).join(",")),e.ue=n}return e.ue}function Ww(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Lq(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$R(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vR(t.startAt,e.startAt)&&vR(t.endAt,e.endAt)}var ua=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Uq(t,e,n,r,i,s,o,a){return new ua(t,e,n,r,i,s,o,a)}function jq(t){return new ua(t)}function IR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Bq(t){return t.collectionGroup!==null}function Eu(t){let e=je(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qt(an.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ca(s,r))}),n.has(an.keyField().canonicalString())||e.ce.push(new ca(an.keyField(),r))}return e.ce}function bs(t){let e=je(t);return e.le||(e.le=$q(e,Eu(t))),e.le}function $q(t,e){if(t.limitType==="F")return wR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ca(i.field,s)});let n=t.endAt?new aa(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new aa(t.startAt.position,t.startAt.inclusive):null;return wR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Kv(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zR(t,e){return Ww(bs(t),bs(e))&&t.limitType===e.limitType}function GR(t){return`${Gw(bs(t))}|lt:${t.limitType}`}function wu(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>HR(i)).join(", ")}]`),Hw(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>sa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>sa(i)).join(",")),`Target(${r})`}(bs(t))}; limitType=${t.limitType})`}function Kw(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):le.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of Eu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=yR(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,Eu(r),i)||r.endAt&&!function(o,a,u){let l=yR(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,Eu(r),i))}(t,e)}function Hq(t){return(e,n)=>{let r=!1;for(let i of Eu(t)){let s=qq(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function qq(t,e,n){let r=t.field.isKeyField()?le.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?ia(u,l):ge()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ge()}}var Mi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return FR(this.inner)}size(){return this.innerSize}};var zq=new cn(le.comparator);function wf(){return zq}var WR=new cn(le.comparator);function uf(...t){let e=WR;for(let n of t)e=e.insert(n.key,n);return e}function KR(t){let e=WR;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Cs(){return Cu()}function QR(){return Cu()}function Cu(){return new Mi(t=>t.toString(),(t,e)=>t.isEqual(e))}var Gq=new cn(le.comparator),Wq=new qt(le.comparator);function Pt(...t){let e=Wq;for(let n of t)e=e.add(n);return e}var Kq=new qt(ke);function Qq(){return Kq}function YR(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Tu(e)?"-0":e}}function JR(t){return{integerValue:""+t}}function Yq(t,e){return Nq(e)?JR(e):YR(t,e)}var la=class{constructor(){this._=void 0}};function Jq(t,e,n){return t instanceof da?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qw(s)&&(s=LR(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Rs?ZR(t,e):t instanceof xs?ex(t,e):function(i,s){let o=XR(i,s),a=ER(o)+ER(i.Pe);return Vv(o)&&Vv(i.Pe)?JR(a):YR(i.serializer,a)}(t,e)}function Xq(t,e,n){return t instanceof Rs?ZR(t,e):t instanceof xs?ex(t,e):n}function XR(t,e){return t instanceof ha?function(r){return Vv(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var da=class extends la{},Rs=class extends la{constructor(e){super(),this.elements=e}};function ZR(t,e){let n=tx(e);for(let r of t.elements)n.some(i=>pr(i,r))||n.push(r);return{arrayValue:{values:n}}}var xs=class extends la{constructor(e){super(),this.elements=e}};function ex(t,e){let n=tx(e);for(let r of t.elements)n=n.filter(i=>!pr(i,r));return{arrayValue:{values:n}}}var ha=class extends la{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function ER(t){return ht(t.integerValue||t.doubleValue)}function tx(t){return zw(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Zq(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Rs&&i instanceof Rs||r instanceof xs&&i instanceof xs?ta(r.elements,i.elements,pr):r instanceof ha&&i instanceof ha?pr(r.Pe,i.Pe):r instanceof da&&i instanceof da}(t.transform,e.transform)}var Qv=class{constructor(e,n){this.version=e,this.transformResults=n}},Ts=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function hf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var fa=class{};function nx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new If(t.key,Ts.none()):new Ms(t.key,t.data,Ts.none());{let n=t.data,r=dr.empty(),i=new qt(an.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zr(t.key,r,new hr(i.toArray()),Ts.none())}}function e4(t,e,n){t instanceof Ms?function(i,s,o){let a=i.value.clone(),u=bR(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(i,s,o){if(!hf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=bR(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(rx(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bu(t,e,n,r){return t instanceof Ms?function(s,o,a,u){if(!hf(s.precondition,o))return a;let l=s.value.clone(),h=TR(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(s,o,a,u){if(!hf(s.precondition,o))return a;let l=TR(s.fieldTransforms,u,o),h=o.data;return h.setAll(rx(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return hf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function t4(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=XR(r.transform,i||null);s!=null&&(n===null&&(n=dr.empty()),n.set(r.field,s))}return n||null}function CR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ta(r,i,(s,o)=>Zq(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Ms=class extends fa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},zr=class extends fa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function rx(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function bR(t,e,n){let r=new Map;wt(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Xq(o,a,n[i]))}return r}function TR(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,Jq(s,o,e))}return r}var If=class extends fa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Yv=class extends fa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Jv=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&e4(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=bu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=bu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=QR();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=nx(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Je.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pt())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(n,r)=>CR(n,r))&&ta(this.baseMutations,e.baseMutations,(n,r)=>CR(n,r))}},Xv=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){wt(e.mutations.length===r.length);let i=function(){return Gq}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Zv=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var st,Ie;function n4(t){switch(t){default:return ge();case P.CANCELLED:case P.UNKNOWN:case P.DEADLINE_EXCEEDED:case P.RESOURCE_EXHAUSTED:case P.INTERNAL:case P.UNAVAILABLE:case P.UNAUTHENTICATED:return!1;case P.INVALID_ARGUMENT:case P.NOT_FOUND:case P.ALREADY_EXISTS:case P.PERMISSION_DENIED:case P.FAILED_PRECONDITION:case P.ABORTED:case P.OUT_OF_RANGE:case P.UNIMPLEMENTED:case P.DATA_LOSS:return!0}}function r4(t){if(t===void 0)return Ss("GRPC error has no .code"),P.UNKNOWN;switch(t){case st.OK:return P.OK;case st.CANCELLED:return P.CANCELLED;case st.UNKNOWN:return P.UNKNOWN;case st.DEADLINE_EXCEEDED:return P.DEADLINE_EXCEEDED;case st.RESOURCE_EXHAUSTED:return P.RESOURCE_EXHAUSTED;case st.INTERNAL:return P.INTERNAL;case st.UNAVAILABLE:return P.UNAVAILABLE;case st.UNAUTHENTICATED:return P.UNAUTHENTICATED;case st.INVALID_ARGUMENT:return P.INVALID_ARGUMENT;case st.NOT_FOUND:return P.NOT_FOUND;case st.ALREADY_EXISTS:return P.ALREADY_EXISTS;case st.PERMISSION_DENIED:return P.PERMISSION_DENIED;case st.FAILED_PRECONDITION:return P.FAILED_PRECONDITION;case st.ABORTED:return P.ABORTED;case st.OUT_OF_RANGE:return P.OUT_OF_RANGE;case st.UNIMPLEMENTED:return P.UNIMPLEMENTED;case st.DATA_LOSS:return P.DATA_LOSS;default:return ge()}}(Ie=st||(st={}))[Ie.OK=0]="OK",Ie[Ie.CANCELLED=1]="CANCELLED",Ie[Ie.UNKNOWN=2]="UNKNOWN",Ie[Ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ie[Ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ie[Ie.NOT_FOUND=5]="NOT_FOUND",Ie[Ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ie[Ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ie[Ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ie[Ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ie[Ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ie[Ie.ABORTED=10]="ABORTED",Ie[Ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ie[Ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ie[Ie.INTERNAL=13]="INTERNAL",Ie[Ie.UNAVAILABLE=14]="UNAVAILABLE",Ie[Ie.DATA_LOSS=15]="DATA_LOSS";var rZ=new gv([4294967295,4294967295],0);var ew=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function tw(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function i4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function s4(t,e){return tw(t,e.toTimestamp())}function ea(t){return wt(!!t),Je.fromTimestamp(function(n){let r=Ri(n);return new Ot(r.seconds,r.nanos)}(t))}function ix(t,e){return nw(t,e).canonicalString()}function nw(t,e){let n=function(i){return new at(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function o4(t){let e=at.fromString(t);return wt(p4(e)),e}function rw(t,e){return ix(t.databaseId,e.path)}function a4(t){let e=o4(t);return e.length===4?at.emptyPath():u4(e)}function c4(t){return new at(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function u4(t){return wt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function DR(t,e,n){return{name:rw(t,e),fields:n.value.mapValue.fields}}function l4(t,e){let n;if(e instanceof Ms)n={update:DR(t,e.key,e.value)};else if(e instanceof If)n={delete:rw(t,e.key)};else if(e instanceof zr)n={update:DR(t,e.key,e.data),updateMask:f4(e.fieldMask)};else{if(!(e instanceof Yv))return ge();n={verify:rw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof da)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Rs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof xs)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ha)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ge()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:s4(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ge()}(t,e.precondition)),n}function d4(t,e){return t&&t.length>0?(wt(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ea(i.updateTime):ea(s);return o.isEqual(Je.min())&&(o=ea(s)),new Qv(o,i.transformResults||[])}(n,e))):[]}function h4(t){let e=a4(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){wt(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=sx(p);return m instanceof xi&&BR(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(D){return new ca(Xo(D.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,Hw(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,I=p.values||[];return new aa(I,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,I=p.values||[];return new aa(I,m)}(n.endAt)),Uq(e,i,o,s,a,"F",u,l)}function sx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Xo(n.unaryFilter.field);return vt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xo(n.unaryFilter.field);return vt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Xo(n.unaryFilter.field);return vt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Xo(n.unaryFilter.field);return vt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ge()}}(t):t.fieldFilter!==void 0?function(n){return vt.create(Xo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ge()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xi.create(n.compositeFilter.filters.map(r=>sx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ge()}}(n.compositeFilter.op))}(t):ge()}function Xo(t){return an.fromServerFormat(t.fieldPath)}function f4(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function p4(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var iw=class{constructor(e){this.ct=e}};function g4(t){let e=h4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kv(e,e.limit,"L"):e}var Ef=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(ht(e.integerValue));else if("doubleValue"in e){let r=ht(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Tu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Ri(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(na(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?VR(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):ge()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),le.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};Ef.bt=new Ef;var sw=class{constructor(){this._n=new ow}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(As.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},ow=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new qt(at.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new qt(at.comparator)).toArray()}};var iZ=new Uint8Array(0);var lr=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(41943040,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);var Su=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var aw=class{constructor(){this.changes=new Mi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,oa.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var cw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var uw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&bu(r.mutation,i,hr.empty(),Ot.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Pt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Pt()){let i=Cs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=uf();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=Cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Pt()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=wf(),o=Cu(),a=function(){return Cu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof zr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),bu(h.mutation,l,h.mutation.getFieldMask(),Ot.now())):o.set(l.key,hr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new cw(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=Cu(),i=new cn((o,a)=>o-a),s=Pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||hr.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||Pt()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=QR();h.forEach(m=>{if(!s.has(m)){let I=nx(n.get(m),r.get(m));I!==null&&p.set(m,I),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return le.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Bq(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Cs()),a=-1,u=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,Pt())).next(h=>({batchId:a,changes:KR(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new le(n)).next(r=>{let i=uf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=uf();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{let l=function(p,m){return new ua(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,oa.newInvalidDocument(h)))});let a=uf();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&bu(h.mutation,l,hr.empty(),Ot.now()),Kw(n,l)&&(a=a.insert(u,l))}),a})}};var lw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ea(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:g4(i.bundledQuery),readTime:ea(i.readTime)}}(n)),O.resolve()}};var dw=class{constructor(){this.overlays=new cn(le.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Cs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=Cs(),s=n.length+1,o=new le(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new cn((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=Cs(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=Cs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Zv(n,r));let s=this.hr.get(n);s===void 0&&(s=Pt(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Au=class{constructor(){this.Pr=new qt(ot.Ir),this.Tr=new qt(ot.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new ot(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new ot(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new le(new at([])),r=new ot(n,e),i=new ot(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new le(new at([])),r=new ot(n,e),i=new ot(n,e+1),s=Pt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new ot(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return le.comparator(e.key,n.key)||ke(e.pr,n.pr)}static Er(e,n){return ke(e.pr,n.pr)||le.comparator(e.key,n.key)}};var hw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new qt(ot.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Jv(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new ot(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new ot(n,0),i=new ot(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qt(ke);return n.forEach(i=>{let s=new ot(i,0),o=new ot(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;le.isDocumentKey(s)||(s=s.child(""));let o=new ot(new le(s),0),a=new qt(ke);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){wt(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let s=new ot(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new ot(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var fw=class{constructor(e){this.vr=e,this.docs=function(){return new cn(le.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():oa.newInvalidDocument(n))}getEntries(e,n){let r=wf();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():oa.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=wf(),o=n.path,a=new le(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||Aq(Sq(h),r)<=0||(i.has(h.key)||Kw(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ge()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new pw(this)}getSize(e){return O.resolve(this.size)}},pw=class extends aw{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var gw=class{constructor(e){this.persistence=e,this.Mr=new Mi(n=>Gw(n),Ww),this.lastRemoteSnapshotVersion=Je.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Au,this.targetCount=0,this.Lr=Su.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Su(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var mw=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new Mq(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new gw(this),this.indexManager=new sw,this.remoteDocumentCache=function(i){return new fw(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new iw(n),this.$r=new lw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new dw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new hw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);let i=new _w(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},_w=class extends Pv{constructor(e){super(),this.currentSequenceNumber=e}},yw=class t{constructor(e){this.persistence=e,this.zr=new Au,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw ge()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=le.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,Je.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var vw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Pt(),i=Pt();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var ww=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Iw=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return HS()?8:xq(dt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new ww;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(vu()<=ue.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",wu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(vu()<=ue.DEBUG&&H("QueryEngine","Query:",wu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(vu()<=ue.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",wu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bs(n))):O.resolve())}ji(e,n){if(IR(n))return O.resolve(null);let r=bs(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kv(n,null,"F"),r=bs(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=Pt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,Kv(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return IR(n)||i.isEqual(Je.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(vu()<=ue.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wu(n)),this.es(e,o,n,Dq(i,-1)).next(a=>a))})}Zi(e,n){let r=new qt(Hq(e));return n.forEach((i,s)=>{Kw(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return vu()<=ue.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",wu(n)),this.zi.getDocumentsMatchingQuery(e,n,As.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Ew=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new cn(ke),this.rs=new Mi(s=>Gw(s),Ww),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new uw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function m4(t,e,n,r){return new Ew(t,e,n,r)}function ox(t,e){return w(this,null,function*(){let n=je(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=Pt();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function _4(t,e){let n=je(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),I=O.resolve();return m.forEach(D=>{I=I.next(()=>h.getEntry(u,D)).next(x=>{let M=l.docVersions.get(D);wt(M!==null),x.version.compareTo(M)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),h.addEntry(x)))})}),I.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Pt();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y4(t){let e=je(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function v4(t,e){let n=je(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Cf=class{constructor(){this.activeTargetIds=Qq()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Cw=class{constructor(){this.no=new Cf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Cf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var bw=class{io(e){}shutdown(){}};var bf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var lf=null;function Ev(){return lf===null?lf=function(){return 268435456+Math.round(2147483648*Math.random())}():lf++,"0x"+lf.toString(16)}var w4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tw=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var Nt="WebChannelConnection",Dw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=Ev(),u=this.vo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(h=>(H("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw ff("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=w4[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=Ev();return new Promise((o,a)=>{let u=new mv;u.setWithCredentials(!0),u.listenOnce(yv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case yu.NO_ERROR:let h=u.getResponseJson();H(Nt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case yu.TIMEOUT:H(Nt,`RPC '${e}' ${s} timed out`),a(new Y(P.DEADLINE_EXCEEDED,"Request time out"));break;case yu.HTTP_ERROR:let p=u.getStatus();if(H(Nt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let I=m?.error;if(I&&I.status&&I.message){let D=function(M){let U=M.toLowerCase().replace(/_/g,"-");return Object.values(P).indexOf(U)>=0?U:P.UNKNOWN}(I.status);a(new Y(D,I.message))}else a(new Y(P.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Y(P.UNAVAILABLE,"Connection failed."));break;default:ge()}}finally{H(Nt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);H(Nt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=Ev(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Iv(),a=wv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new _v({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");H(Nt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,I=!1,D=new Tw({lo:M=>{I?H(Nt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(H(Nt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),H(Nt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},ho:()=>p.close()}),x=(M,U,Q)=>{M.listen(U,j=>{try{Q(j)}catch(Z){setTimeout(()=>{throw Z},0)}})};return x(p,Jo.EventType.OPEN,()=>{I||(H(Nt,`RPC '${e}' stream ${i} transport opened.`),D.mo())}),x(p,Jo.EventType.CLOSE,()=>{I||(I=!0,H(Nt,`RPC '${e}' stream ${i} transport closed`),D.po())}),x(p,Jo.EventType.ERROR,M=>{I||(I=!0,ff(Nt,`RPC '${e}' stream ${i} transport errored:`,M),D.po(new Y(P.UNAVAILABLE,"The operation could not be completed")))}),x(p,Jo.EventType.MESSAGE,M=>{var U;if(!I){let Q=M.data[0];wt(!!Q);let j=Q,Z=j.error||((U=j[0])===null||U===void 0?void 0:U.error);if(Z){H(Nt,`RPC '${e}' stream ${i} received error:`,Z);let Ge=Z.status,ve=function(y){let E=st[y];if(E!==void 0)return r4(E)}(Ge),C=Z.message;ve===void 0&&(ve=P.INTERNAL,C="Unknown error status: "+Ge+" with message "+Z.message),I=!0,D.po(new Y(ve,C)),p.close()}else H(Nt,`RPC '${e}' stream ${i} received:`,Q),D.yo(Q)}}),x(a,vv.STAT_EVENT,M=>{M.stat===af.PROXY?H(Nt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===af.NOPROXY&&H(Nt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.fo()},0),D}};function Cv(){return typeof document<"u"?document:null}function kf(t){return new ew(t,!0)}var Tf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Sw=class{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new Tf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return w(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return w(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return w(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===P.RESOURCE_EXHAUSTED?(Ss(n.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===P.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new Y(P.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>w(this,null,function*(){this.state=0,this.start()}))}c_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var Aw=class extends Sw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=d4(e.writeResults,e.commitTime),r=ea(e.commitTime);return this.listener.A_(r,n)}return wt(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=c4(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>l4(this.serializer,r))};this.i_(n)}};var Rw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Y(P.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,nw(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Y(P.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,nw(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===P.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(P.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},xw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Ss(n),this.y_=!1):H("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Mw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>w(this,null,function*(){Mu(this)&&(H("RemoteStore","Restarting streams for network reachability change."),yield function(u){return w(this,null,function*(){let l=je(u);l.M_.add(4),yield xu(l),l.N_.set("Unknown"),l.M_.delete(4),yield Ff(l)})}(this))}))}),this.N_=new xw(r,i)}};function Ff(t){return w(this,null,function*(){if(Mu(t))for(let e of t.x_)yield e(!0)})}function xu(t){return w(this,null,function*(){for(let e of t.x_)yield e(!1)})}function Mu(t){return je(t).M_.size===0}function ax(t,e,n){return w(this,null,function*(){if(!Of(e))throw e;t.M_.add(1),yield xu(t),t.N_.set("Offline"),n||(n=()=>y4(t.localStore)),t.asyncQueue.enqueueRetryable(()=>w(this,null,function*(){H("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield Ff(t)}))})}function cx(t,e){return e().catch(n=>ax(t,n,e))}function Lf(t){return w(this,null,function*(){let e=je(t),n=Ni(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;I4(e);)try{let i=yield v4(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,E4(e,i)}catch(i){yield ax(e,i)}ux(e)&&lx(e)})}function I4(t){return Mu(t)&&t.v_.length<10}function E4(t,e){t.v_.push(e);let n=Ni(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function ux(t){return Mu(t)&&!Ni(t).Zo()&&t.v_.length>0}function lx(t){Ni(t).start()}function C4(t){return w(this,null,function*(){Ni(t).V_()})}function b4(t){return w(this,null,function*(){let e=Ni(t);for(let n of t.v_)e.d_(n.mutations)})}function T4(t,e,n){return w(this,null,function*(){let r=t.v_.shift(),i=Xv.from(r,e,n);yield cx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Lf(t)})}function D4(t,e){return w(this,null,function*(){e&&Ni(t).E_&&(yield function(r,i){return w(this,null,function*(){if(function(o){return n4(o)&&o!==P.ABORTED}(i.code)){let s=r.v_.shift();Ni(r).t_(),yield cx(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Lf(r)}})}(t,e)),ux(t)&&lx(t)})}function SR(t,e){return w(this,null,function*(){let n=je(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");let r=Mu(n);n.M_.add(3),yield xu(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield Ff(n)})}function S4(t,e){return w(this,null,function*(){let n=je(t);e?(n.M_.delete(2),yield Ff(n)):e||(n.M_.add(2),yield xu(n),n.N_.set("Unknown"))})}function Ni(t){return t.k_||(t.k_=function(n,r,i){let s=je(n);return s.f_(),new Aw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:C4.bind(null,t),Ao:D4.bind(null,t),R_:b4.bind(null,t),A_:T4.bind(null,t)}),t.x_.push(e=>w(this,null,function*(){e?(t.k_.t_(),yield Lf(t)):(yield t.k_.stop(),t.v_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var Nw=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(P.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function dx(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),Of(t))return new Y(P.UNAVAILABLE,`${e}: ${t}`);throw t}var Pw=class{constructor(){this.queries=new Mi(e=>GR(e),zR),this.onlineState="Unknown",this.z_=new Set}};function A4(t){t.z_.forEach(e=>{e.next()})}var AR,RR;(RR=AR||(AR={})).J_="default",RR.Cache="cache";var Ow=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new Mi(a=>GR(a),zR),this.Da=new Map,this.Ca=new Set,this.va=new cn(le.comparator),this.Fa=new Map,this.Ma=new Au,this.xa={},this.Oa=new Map,this.Na=Su.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function R4(t,e,n){return w(this,null,function*(){let r=P4(t);try{let i=yield function(o,a){let u=je(o),l=Ot.now(),h=a.reduce((I,D)=>I.add(D.key),Pt()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",I=>{let D=wf(),x=Pt();return u.os.getEntries(I,h).next(M=>{D=M,D.forEach((U,Q)=>{Q.isValidDocument()||(x=x.add(U))})}).next(()=>u.localDocuments.getOverlayedDocuments(I,D)).next(M=>{p=M;let U=[];for(let Q of a){let j=t4(Q,p.get(Q.key).overlayedDocument);j!=null&&U.push(new zr(Q.key,j,UR(j.value.mapValue),Ts.exists(!0)))}return u.mutationQueue.addMutationBatch(I,l,U,a)}).next(M=>{m=M;let U=M.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(I,M.batchId,U)})}).then(()=>({batchId:m.batchId,changes:KR(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new cn(ke)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Vf(r,i.changes),yield Lf(r.remoteStore)}catch(i){let s=dx(i,"Failed to persist write");n.reject(s)}})}function xR(t,e,n){let r=je(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=je(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(a)&&(l=!0)}),l&&A4(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function x4(t,e){return w(this,null,function*(){let n=je(t),r=e.batch.batchId;try{let i=yield _4(n.localStore,e);fx(n,r,null),hx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Vf(n,i)}catch(i){yield kR(i)}})}function M4(t,e,n){return w(this,null,function*(){let r=je(t);try{let i=yield function(o,a){let u=je(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(wt(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);fx(r,e,n),hx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Vf(r,i)}catch(i){yield kR(i)}})}function hx(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function fx(t,e,n){let r=je(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function Vf(t,e,n){return w(this,null,function*(){let r=je(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=vw.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return w(this,null,function*(){let h=je(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.qi,I=>h.persistence.referenceDelegate.addReference(p,m.targetId,I)).next(()=>O.forEach(m.Qi,I=>h.persistence.referenceDelegate.removeReference(p,m.targetId,I)))))}catch(p){if(!Of(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let I=h.ns.get(m),D=I.snapshotVersion,x=I.withLastLimboFreeSnapshotVersion(D);h.ns=h.ns.insert(m,x)}}})}(r.localStore,s))})}function N4(t,e){return w(this,null,function*(){let n=je(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());let r=yield ox(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new Y(P.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Vf(n,r.us)}})}function P4(t){let e=je(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M4.bind(null,e),e}var Df=class{constructor(){this.synchronizeTabs=!1}initialize(e){return w(this,null,function*(){this.serializer=kf(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return m4(this.persistence,new Iw,e.initialUser,this.serializer)}createPersistence(e){return new mw(yw.Hr,this.serializer)}createSharedClientState(e){return new Cw}terminate(){return w(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var kw=class{initialize(e,n){return w(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>xR(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=N4.bind(null,this.syncEngine),yield S4(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Pw}()}createDatastore(e){let n=kf(e.databaseInfo.databaseId),r=function(s){return new Dw(s)}(e.databaseInfo);return function(s,o,a,u){return new Rw(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Mw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>xR(this.syncEngine,n,0),function(){return bf.D()?new bf:new bw}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new Ow(i,s,o,a,u,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return w(this,null,function*(){var e;yield function(r){return w(this,null,function*(){let i=je(r);H("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield xu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Fw=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=yt.UNAUTHENTICATED,this.clientId=gf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>w(this,null,function*(){H("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(H("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Y(P.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>w(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=dx(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function bv(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>w(this,null,function*(){r.isEqual(i)||(yield ox(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function MR(t,e){return w(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield k4(t);H("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>SR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>SR(e.remoteStore,i)),t._onlineComponents=e})}function O4(t){return t.name==="FirebaseError"?t.code===P.FAILED_PRECONDITION||t.code===P.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function k4(t){return w(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{yield bv(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!O4(n))throw n;ff("Error using user provided cache. Falling back to memory cache: "+n),yield bv(t,new Df)}}else H("FirestoreClient","Using default OfflineComponentProvider"),yield bv(t,new Df);return t._offlineComponents})}function F4(t){return w(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),yield MR(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),yield MR(t,new kw))),t._onlineComponents})}function L4(t){return F4(t).then(e=>e.syncEngine)}function px(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var NR=new Map;function gx(t,e,n){if(!n)throw new Y(P.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function V4(t,e,n,r){if(e===!0&&r===!0)throw new Y(P.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function PR(t){if(!le.isDocumentKey(t))throw new Y(P.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function OR(t){if(le.isDocumentKey(t))throw new Y(P.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Qw(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ge()}function mx(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Y(P.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Qw(t);throw new Y(P.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Sf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(P.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Y(P.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=px((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Y(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Y(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Y(P.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},pa=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Y(P.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new Y(P.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Tv;switch(r.type){case"firstParty":return new Rv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(P.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=NR.get(n);r&&(H("ComponentProvider","Removing Datastore"),NR.delete(n),r.terminate())}(this),Promise.resolve()}};function _x(t,e,n,r={}){var i;let s=(t=mx(t,pa))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ff("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=yt.MOCK_USER;else{a=zo(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new Y(P.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(l)}t._authCredentials=new Dv(new pf(a,u))}}var Lw=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},qr=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},Si=class t extends Lw{constructor(e,n,r){super(e,n,jq(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new qr(this.firestore,null,new le(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function yx(t,e,...n){if(t=He(t),gx("collection","path",e),t instanceof pa){let r=at.fromString(e,...n);return OR(r),new Si(t,null,r)}{if(!(t instanceof qr||t instanceof Si))throw new Y(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(at.fromString(e,...n));return OR(r),new Si(t.firestore,null,r)}}function vx(t,e,...n){if(t=He(t),arguments.length===1&&(e=gf.newId()),gx("doc","path",e),t instanceof pa){let r=at.fromString(e,...n);return PR(r),new qr(t,null,new le(r))}{if(!(t instanceof qr||t instanceof Si))throw new Y(P.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(at.fromString(e,...n));return PR(r),new qr(t.firestore,t instanceof Si?t.converter:null,new le(r))}}var Vw=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new Tf(this,"async_queue_retry"),this.hu=()=>{let n=Cv();n&&H("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=Cv();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=Cv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Hr;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return w(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Of(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Ss("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=Nw.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&ge()}verifyOperationInProgress(){}du(){return w(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var Af=class extends pa{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Vw}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ix(this),this._firestoreClient.terminate()}};function wx(t,e){let n=typeof t=="object"?t:sr(),r=typeof t=="string"?t:e||"(default)",i=Or(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=qo("firestore");s&&_x(i,...s)}return i}function U4(t){return t._firestoreClient||Ix(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Ix(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new kv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,px(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Fw(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Rf=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ai.fromBase64String(e))}catch(n){throw new Y(P.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ai.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var xf=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Y(P.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Mf=class{constructor(e){this._methodName=e}};var Nf=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Y(P.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Y(P.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}};var j4=/^__.*__$/,Uw=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ms(e,this.data,n,this.fieldTransforms)}};function Ex(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge()}}var jw=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Pf(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(Ex(this.fu)&&j4.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Bw=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kf(e)}Fu(e,n,r,i=!1){return new jw({fu:e,methodName:n,vu:r,path:an.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function B4(t){let e=t._freezeSettings(),n=kf(t._databaseId);return new Bw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $4(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);Dx("Data must be an object, but it was:",o,r);let a=bx(r,o),u,l;if(s.merge)u=new hr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=H4(e,p,n);if(!o.contains(m))throw new Y(P.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);G4(h,m)||h.push(m)}u=new hr(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new Uw(new dr(a),u,l)}function Cx(t,e){if(Tx(t=He(t)))return Dx("Unsupported field value:",e,t),bx(t,e);if(t instanceof Mf)return function(r,i){if(!Ex(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=Cx(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=He(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yq(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=Ot.fromDate(r);return{timestampValue:tw(i.serializer,s)}}if(r instanceof Ot){let s=new Ot(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tw(i.serializer,s)}}if(r instanceof Nf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rf)return{bytesValue:i4(i.serializer,r._byteString)};if(r instanceof qr){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ix(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${Qw(r)}`)}(t,e)}function bx(t,e){let n={};return FR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(t,(r,i)=>{let s=Cx(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Tx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ot||t instanceof Nf||t instanceof Rf||t instanceof qr||t instanceof Mf)}function Dx(t,e,n){if(!Tx(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Qw(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function H4(t,e,n){if((e=He(e))instanceof xf)return e._internalPath;if(typeof e=="string")return z4(t,e);throw Pf("Field path arguments must be of type string or ",t,!1,void 0,n)}var q4=new RegExp("[~\\*/\\[\\]]");function z4(t,e,n){if(e.search(q4)>=0)throw Pf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new xf(...e.split("."))._internalPath}catch{throw Pf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Pf(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new Y(P.INVALID_ARGUMENT,a+t+u)}function G4(t,e){return t.some(n=>n.isEqual(e))}function W4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function Sx(t,e){let n=mx(t.firestore,Af),r=vx(t),i=W4(t.converter,e);return K4(n,[$4(B4(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ts.exists(!1))]).then(()=>r)}function K4(t,e){return function(r,i){let s=new Hr;return r.asyncQueue.enqueueAndForget(()=>w(this,null,function*(){return R4(yield L4(r),i,s)})),s.promise}(U4(t),e)}(function(e,n=!0){(function(i){ga=i})(yn),_n(new Mt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Af(new Sv(r.getProvider("auth-internal")),new Mv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new Y(P.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fv(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ae(gR,"4.6.3",e),Ae(gR,"4.6.3","esm2017")})();var kn=class{constructor(e){return e}},Ax="firestore",Yw=class{constructor(){return kr(Ax)}};var Jw=new B("angularfire2.firestore-instances");function Q4(t,e){let n=Ci(Ax,t,e);return n&&new kn(n)}function Y4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new kn(r)}}var J4={provide:Yw,deps:[[new Le,Jw]]},X4={provide:kn,useFactory:Q4,deps:[[new Le,Jw],on]};function Rx(t,...e){return Ae("angularfire",Pn.full,"fst"),Kt([X4,J4,{provide:Jw,useFactory:Y4(t),multi:!0,deps:[_e,ut,ar,On,[new Le,Br],[new Le,or],...e]}])}var Uf=_t(Sx,!0);var jf=_t(yx,!0);var xx=_t(wx,!0);function Z4(t,e){if(t&1){let n=gn();R(0,"div",17)(1,"button",18),Oe("click",function(){ae(n);let i=ne();return ce(i.entrar())}),q(2,"Ingresar"),N(),R(3,"button",18),Oe("click",function(){ae(n);let i=ne();return ce(i.admin())}),q(4,"Ingresar como admin"),N(),R(5,"button",18),Oe("click",function(){ae(n);let i=ne();return ce(i.usuario())}),q(6,"Ingresar como especialista"),N(),R(7,"button",18),Oe("click",function(){ae(n);let i=ne();return ce(i.paciente())}),q(8,"Ingresar como paciente"),N()()}}function ez(t,e){if(t&1&&(R(0,"div")(1,"div",19)(2,"div",20),q(3),N()()()),t&2){let n=ne();K(2),bo(n.clase),pi("width",n.ProgresoDeAncho),K(),rs(" ",n.progresoMensaje," - ",n.progreso,"% ")}}function tz(t,e){if(t&1){let n=gn();R(0,"div",1)(1,"button",21),Oe("click",function(){ae(n);let i=ne();return ce(i.borrar())}),q(2,"Cancelar"),N(),R(3,"button",22),q(4,"Registrarse"),N()()}}var Mx=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.authService=i,this.firestore=s,this.user={email:"",password:""},this.progresoMensaje="esperando...",this.logeando=!0,this.clase="progress-bar progress-bar-info progress-bar-striped ",this.progreso=0,this.ProgresoDeAncho="0%",sessionStorage.getItem("user")==null?this.logueado=!1:this.logueado=!0}ngOnInit(){sessionStorage.clear()}entrar(){return w(this,null,function*(){let r=this.authService.login(this.user.email,this.user.password);this.MoverBarraDeProgreso(),(yield r)?(yield new Promise(i=>setTimeout(i,2500)),sessionStorage.setItem("user",this.user.email),sessionStorage.setItem("muestra","true")):(this.MostarMensaje("Usuario o Clave incorrectos",!0),this.borrar(),this.logeando=!0)})}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let r=Hi(30);this.subscription=r.subscribe(i=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription.unsubscribe();break}})}borrar(){this.user.email="",this.user.password=""}admin(){this.user.email="admin@clinica.com",this.user.password="111111"}usuario(){this.user.email="especialista1@clinica.com",this.user.password="222222"}paciente(){this.user.email="paciente1@hotmail.com",this.user.password="333333"}MostarMensaje(r,i){this.Mensaje=r;var s=document.getElementById("snackbar");i&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3500)}};e.\u0275fac=function(i){return new(i||e)($(lt),$(Di),$(kn))},e.\u0275cmp=rt({type:e,selectors:[["app-login"]],standalone:!0,features:[it],decls:26,vars:6,consts:[[1,"fondo"],[1,"container"],[1,"d-flex","justify-content-center","h-100"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"input-group","form-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"fa","fa-user"],["type","text","placeholder","Usuario","name","uname","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"fa","fa-key"],["type","password","placeholder","Clave","name","psw","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","form-group",4,"ngIf"],[4,"ngIf"],["class","container",4,"ngIf"],["id","snackbar"],[1,"form-group"],[1,"btn","btn-primary",3,"click"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"],["type","button",1,"cancelbtn",3,"click"],["type","button","routerLink","/registro",1,"aceptbtn"]],template:function(i,s){i&1&&(R(0,"body")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),q(7,"Ingreso"),N(),R(8,"div",5)(9,"form")(10,"div",6)(11,"div",7)(12,"span",8),ie(13,"i",9),N()(),R(14,"input",10),Ue("ngModelChange",function(a){return $e(s.user.email,a)||(s.user.email=a),a}),N()(),R(15,"div",6)(16,"div",7)(17,"span",8),ie(18,"i",11),N()(),R(19,"input",12),Ue("ngModelChange",function(a){return $e(s.user.password,a)||(s.user.password=a),a}),N()(),nn(20,Z4,9,0,"div",13)(21,ez,4,6,"div",14)(22,tz,5,0,"div",15),N()()()()(),R(23,"div")(24,"div",16),q(25),N()()()()()),i&2&&(K(14),Ve("ngModel",s.user.email),K(5),Ve("ngModel",s.user.password),K(),Ke("ngIf",s.logeando),K(),Ke("ngIf",!s.logeando),K(),Ke("ngIf",s.logeando),K(3),ns(s.Mensaje))},dependencies:[Mn,Yn,$o,Bo,Ii,Uo,jo,ry,ny,ty,oS,gh],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc;box-sizing:border-box}button[_ngcontent-%COMP%]{background-color:#064b06;color:#fff;padding:14px 20px;margin:8px 0;border:none;cursor:pointer;width:100%}button[_ngcontent-%COMP%]:hover{opacity:.8}.cancelbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#f44336;float:right}.aceptbtn[_ngcontent-%COMP%]{width:auto;padding:10px 18px;background-color:#3664f4}.imgcontainer[_ngcontent-%COMP%]{text-align:center;margin:24px 0 12px}span.psw[_ngcontent-%COMP%]{float:right;padding-top:16px}.fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);margin-top:-9%;width:100vw;height:100vh}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat;height:100%;font-family:Numans,sans-serif}.container[_ngcontent-%COMP%]{height:100%;align-content:center}.card[_ngcontent-%COMP%]{height:370px;margin-top:auto;margin-bottom:auto;width:400px;background-color:#00000080!important;display:inline-table}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}.input-group-prepend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{width:50px;background-color:#ffc312;color:#fff;border:0!important}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;margin-left:-125px;color:#fff;text-align:center;border-radius:2px;padding:16px;position:fixed;z-index:1;left:50%;bottom:30px;font-size:17px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#6e2f05;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}"]});let t=e;return t})();var ma=class{};var Nu=class extends ma{};var Vx="firebasestorage.googleapis.com",Ux="storageBucket",nz=2*60*1e3,rz=10*60*1e3;var Qe=class t extends Ht{constructor(e,n,r=0){super(Zw(e),`Firebase Storage: ${n} (${Zw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Zw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Xe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Xe||{});function Zw(t){return"storage/"+t}function sI(){let t="An unknown error occurred, please check the error payload for server response.";return new Qe(Xe.UNKNOWN,t)}function iz(t){return new Qe(Xe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function sz(t){return new Qe(Xe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oz(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Qe(Xe.UNAUTHENTICATED,t)}function az(){return new Qe(Xe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cz(t){return new Qe(Xe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function uz(){return new Qe(Xe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function lz(){return new Qe(Xe.CANCELED,"User canceled the upload/download.")}function dz(t){return new Qe(Xe.INVALID_URL,"Invalid URL '"+t+"'.")}function hz(t){return new Qe(Xe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function fz(){return new Qe(Xe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Ux+"' property when initializing the app?")}function pz(){return new Qe(Xe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gz(){return new Qe(Xe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function mz(t){return new Qe(Xe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function eI(t){return new Qe(Xe.INVALID_ARGUMENT,t)}function jx(){return new Qe(Xe.APP_DELETED,"The Firebase app was deleted.")}function _z(t){return new Qe(Xe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ou(t,e){return new Qe(Xe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Pu(t){throw new Qe(Xe.INTERNAL_ERROR,"Internal error: "+t)}var Fn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw hz(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(Z){Z.path.charAt(Z.path.length-1)==="/"&&(Z.path_=Z.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(Z){Z.path_=decodeURIComponent(Z.path)}let h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",I=new RegExp(`^https?://${p}/${h}/b/${i}/o${m}`,"i"),D={bucket:1,path:3},x=n===Vx?"(?:storage.googleapis.com|storage.cloud.google.com)":n,M="([^?#]*)",U=new RegExp(`^https?://${x}/${i}/${M}`,"i"),j=[{regex:a,indices:u,postModify:s},{regex:I,indices:D,postModify:l},{regex:U,indices:{bucket:1,path:2},postModify:l}];for(let Z=0;Z<j.length;Z++){let Ge=j[Z],ve=Ge.regex.exec(e);if(ve){let C=ve[Ge.indices.bucket],_=ve[Ge.indices.path];_||(_=""),r=new t(C,_),Ge.postModify(r);break}}if(r==null)throw dz(e);return r}},tI=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function yz(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function h(...M){l||(l=!0,e.apply(null,M))}function p(M){i=setTimeout(()=>{i=null,t(I,u())},M)}function m(){s&&clearTimeout(s)}function I(M,...U){if(l){m();return}if(M){m(),h.call(null,M,...U);return}if(u()||o){m(),h.call(null,M,...U);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,p(j)}let D=!1;function x(M){D||(D=!0,m(),!l&&(i!==null?(M||(a=2),clearTimeout(i),p(0)):M||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function vz(t){t(!1)}function wz(t){return t!==void 0}function Iz(t){return typeof t=="object"&&!Array.isArray(t)}function oI(t){return typeof t=="string"||t instanceof String}function Nx(t){return aI()&&t instanceof Blob}function aI(){return typeof Blob<"u"}function Px(t,e,n,r){if(r<e)throw eI(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw eI(`Invalid value for '${t}'. Expected ${n} or less.`)}function cI(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function Bx(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ya=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(ya||{});function Ez(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var nI=class{constructor(e,n,r,i,s,o,a,u,l,h,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,D)=>{this.resolve_=I,this.reject_=D,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new _a(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===ya.NO_ERROR,u=s.getStatus();if(!a||Ez(u,this.additionalRetryCodes_)&&this.retry){let h=s.getErrorCode()===ya.ABORT;r(!1,new _a(!1,null,h));return}let l=this.successCodes_.indexOf(u)!==-1;r(!0,new _a(l,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let u=this.callback_(a,a.getResponse());wz(u)?s(u):s()}catch(u){o(u)}else if(a!==null){let u=sI();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){let u=this.appDelete_?jx():lz();o(u)}else{let u=uz();o(u)}};this.canceled_?n(!1,new _a(!1,null,!0)):this.backoffId_=yz(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vz(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},_a=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function Cz(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function bz(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Tz(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Dz(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Sz(t,e,n,r,i,s,o=!0){let a=Bx(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return Tz(l,e),Cz(l,n),bz(l,s),Dz(l,r),new nI(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function Az(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Rz(...t){let e=Az();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(aI())return new Blob(t);throw new Qe(Xe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function xz(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Mz(t){if(typeof atob>"u")throw mz("base-64");return atob(t)}var gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ku=class{constructor(e,n){this.data=e,this.contentType=n||null}};function Nz(t,e){switch(t){case gr.RAW:return new ku($x(e));case gr.BASE64:case gr.BASE64URL:return new ku(Hx(t,e));case gr.DATA_URL:return new ku(Oz(e),kz(e))}throw sI()}function $x(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Pz(t){let e;try{e=decodeURIComponent(t)}catch{throw Ou(gr.DATA_URL,"Malformed data URL.")}return $x(e)}function Hx(t,e){switch(t){case gr.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ou(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ou(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Mz(e)}catch(i){throw i.message.includes("polyfill")?i:Ou(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var $f=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ou(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=Fz(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function Oz(t){let e=new $f(t);return e.base64?Hx(gr.BASE64,e.rest):Pz(e.rest)}function kz(t){return new $f(t).contentType}function Fz(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var Hf=class t{constructor(e,n){let r=0,i="";Nx(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nx(this.data_)){let r=this.data_,i=xz(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(aI()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(Rz.apply(null,n))}else{let n=e.map(o=>oI(o)?Nz(gr.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function qx(t){let e;try{e=JSON.parse(t)}catch{return null}return Iz(e)?e:null}function Lz(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Vz(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function zx(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function Uz(t,e){return e}var bt=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Uz}},Bf=null;function jz(t){return!oI(t)||t.length<2?t:zx(t)}function Gx(){if(Bf)return Bf;let t=[];t.push(new bt("bucket")),t.push(new bt("generation")),t.push(new bt("metageneration")),t.push(new bt("name","fullPath",!0));function e(s,o){return jz(o)}let n=new bt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new bt("size");return i.xform=r,t.push(i),t.push(new bt("timeCreated")),t.push(new bt("updated")),t.push(new bt("md5Hash",null,!0)),t.push(new bt("cacheControl",null,!0)),t.push(new bt("contentDisposition",null,!0)),t.push(new bt("contentEncoding",null,!0)),t.push(new bt("contentLanguage",null,!0)),t.push(new bt("contentType",null,!0)),t.push(new bt("metadata","customMetadata",!0)),Bf=t,Bf}function Bz(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Fn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function $z(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return Bz(r,t),r}function Wx(t,e,n){let r=qx(e);return r===null?null:$z(t,r,n)}function Hz(t,e,n,r){let i=qx(e);if(i===null||!oI(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(l=>{let h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),I=cI(m,n,r),D=Bx({alt:"media",token:l});return I+D})[0]}function qz(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var qf=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function Kx(t){if(!t)throw sI()}function zz(t,e){function n(r,i){let s=Wx(t,i,e);return Kx(s!==null),s}return n}function Gz(t,e){function n(r,i){let s=Wx(t,i,e);return Kx(s!==null),Hz(s,i,t.host,t._protocol)}return n}function Qx(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=az():i=oz():n.getStatus()===402?i=sz(t.bucket):n.getStatus()===403?i=cz(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Wz(t){let e=Qx(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=iz(t.path)),s.serverResponse=i.serverResponse,s}return n}function Kz(t,e,n){let r=e.fullServerUrl(),i=cI(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new qf(i,s,Gz(t,n),o);return a.errorHandler=Wz(e),a}function Qz(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Yz(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Qz(null,e)),r}function Jz(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let j="";for(let Z=0;Z<2;Z++)j=j+Math.random().toString().slice(2);return j}let u=a();o["Content-Type"]="multipart/related; boundary="+u;let l=Yz(e,r,i),h=qz(l,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,m=`\r
--`+u+"--",I=Hf.getBlob(p,r,m);if(I===null)throw pz();let D={name:l.fullPath},x=cI(s,t.host,t._protocol),M="POST",U=t.maxUploadRetryTime,Q=new qf(x,M,zz(t,n),U);return Q.urlParams=D,Q.headers=o,Q.body=I.uploadData(),Q.errorHandler=Qx(e),Q}var jee=256*1024;var Ox=null,rI=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ya.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ya.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ya.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Pu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Pu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Pu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Pu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Pu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},iI=class extends rI{initXhr(){this.xhr_.responseType="text"}};function Yx(){return Ox?Ox():new iI}var va=class t{constructor(e,n){this._service=e,n instanceof Fn?this._location=n:this._location=Fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zx(this._location.path)}get storage(){return this._service}get parent(){let e=Lz(this._location.path);if(e===null)return null;let n=new Fn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _z(e)}};function Xz(t,e,n){t._throwIfRoot("uploadBytes");let r=Jz(t.storage,t._location,Gx(),new Hf(e,!0),n);return t.storage.makeRequestWithTokens(r,Yx).then(i=>({metadata:i,ref:t}))}function Zz(t){t._throwIfRoot("getDownloadURL");let e=Kz(t.storage,t._location,Gx());return t.storage.makeRequestWithTokens(e,Yx).then(n=>{if(n===null)throw gz();return n})}function eG(t,e){let n=Vz(t._location.path,e),r=new Fn(t._location.bucket,n);return new va(t.storage,r)}function tG(t){return/^[A-Za-z]+:\/\//.test(t)}function nG(t,e){return new va(t,e)}function Jx(t,e){if(t instanceof Fu){let n=t;if(n._bucket==null)throw fz();let r=new va(n,n._bucket);return e!=null?Jx(r,e):r}else return e!==void 0?eG(t,e):t}function rG(t,e){if(e&&tG(e)){if(t instanceof Fu)return nG(t,e);throw eI("To use ref(service, url), the first argument must be a Storage instance.")}else return Jx(t,e)}function kx(t,e){let n=e?.[Ux];return n==null?null:Fn.makeFromBucketSpec(n,t)}function iG(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:zo(i,t.app.options.projectId))}var Fu=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Vx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nz,this._maxUploadRetryTime=rz,this._requests=new Set,i!=null?this._bucket=Fn.makeFromBucketSpec(i,this._host):this._bucket=kx(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Fn.makeFromBucketSpec(this._url,e):this._bucket=kx(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Px("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return w(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return w(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new va(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new tI(jx());{let o=Sz(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return w(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},Fx="@firebase/storage",Lx="0.12.5";var Xx="storage";function Zx(t,e,n){return t=He(t),Xz(t,e,n)}function eM(t){return t=He(t),Zz(t)}function tM(t,e){return t=He(t),rG(t,e)}function nM(t=sr(),e){t=He(t);let r=Or(t,Xx).getImmediate({identifier:e}),i=qo("storage");return i&&rM(r,...i),r}function rM(t,e,n,r={}){iG(t,e,n,r)}function sG(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Fu(n,r,i,e,yn)}function oG(){_n(new Mt(Xx,sG,"PUBLIC").setMultipleInstances(!0)),Ae(Fx,Lx,""),Ae(Fx,Lx,"esm2017")}oG();var Lu=class{constructor(e){return e}},iM="storage",uI=class{constructor(){return kr(iM)}};var lI=new B("angularfire2.storage-instances");function aG(t,e){let n=Ci(iM,t,e);return n&&new Lu(n)}function cG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Lu(r)}}var uG={provide:uI,deps:[[new Le,lI]]},lG={provide:Lu,useFactory:aG,deps:[[new Le,lI],on]};function sM(t,...e){return Ae("angularfire",Pn.full,"gcs"),Kt([lG,uG,{provide:lI,useFactory:cG(t),multi:!0,deps:[_e,ut,ar,On,[new Le,Br],[new Le,or],...e]}])}var Vu=_t(eM,!0);var wa=_t(nM,!0);var Uu=_t(tM,!0);var ju=_t(Zx,!0);function dG(t,e){if(t&1){let n=gn();R(0,"form",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),ie(5,"label",11),N(),R(6,"div",12)(7,"input",13),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.nombre,i)||(s.paciente.nombre=i),ce(i)}),N()()()(),R(8,"div",8)(9,"div",9)(10,"div",10),ie(11,"label",11),N(),R(12,"div",12)(13,"input",14),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.apellido,i)||(s.paciente.apellido=i),ce(i)}),N()()(),R(14,"div",8)(15,"div",9)(16,"div",10),ie(17,"label",11),N(),R(18,"div",12)(19,"input",15),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.edad,i)||(s.paciente.edad=i),ce(i)}),N()()()()(),R(20,"div",8)(21,"div",9)(22,"div",10),ie(23,"label",16),N(),R(24,"div",12)(25,"input",17),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.dni,i)||(s.paciente.dni=i),ce(i)}),N()()()(),R(26,"div",8)(27,"div",9)(28,"div",10),ie(29,"label",16),N(),R(30,"div",12)(31,"input",18),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.obraSocial,i)||(s.paciente.obraSocial=i),ce(i)}),N()()()(),R(32,"div",8)(33,"div",9)(34,"div",10),ie(35,"label",16),N(),R(36,"div",12)(37,"input",19),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.mail,i)||(s.paciente.mail=i),ce(i)}),N()()()(),R(38,"div",8)(39,"div",9)(40,"div",10),ie(41,"label",20),N(),R(42,"div",12)(43,"input",21),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.pass,i)||(s.paciente.pass=i),ce(i)}),N()()()(),R(44,"div",8)(45,"div",9)(46,"div",10),ie(47,"label",20),N(),R(48,"div",12)(49,"input",22),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.contrasena2,i)||(s.contrasena2=i),ce(i)}),N()()()(),R(50,"div",8)(51,"div",9)(52,"div",10),ie(53,"label",16),N(),R(54,"div",12)(55,"input",23),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.imagen1,i)||(s.paciente.imagen1=i),ce(i)}),Oe("change",function(i){ae(n);let s=ne();return ce(s.onFileSelected(i,1))}),N()()()(),R(56,"div",8)(57,"div",9)(58,"div",10),ie(59,"label",20),N(),R(60,"div",12)(61,"input",24),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.paciente.imagen2,i)||(s.paciente.imagen2=i),ce(i)}),Oe("change",function(i){ae(n);let s=ne();return ce(s.onFileSelected(i,2))}),N()()()(),R(62,"div",8)(63,"div",25)(64,"div",26),Oe("click",function(){ae(n);let i=ne();return ce(i.enviar())}),q(65,"Enviar"),N()(),ie(66,"br"),R(67,"div",25)(68,"div",27),q(69,"Loguearse"),N()()()()()}if(t&2){let n=ne();Ke("formGroup",n.formRegistro),K(7),Ve("ngModel",n.paciente.nombre),K(6),Ve("ngModel",n.paciente.apellido),K(6),Ve("ngModel",n.paciente.edad),K(6),Ve("ngModel",n.paciente.dni),K(6),Ve("ngModel",n.paciente.obraSocial),K(6),Ve("ngModel",n.paciente.mail),K(6),Ve("ngModel",n.paciente.pass),K(6),Ve("ngModel",n.contrasena2),K(6),Ve("ngModel",n.paciente.imagen1),K(6),Ve("ngModel",n.paciente.imagen2)}}function hG(t,e){if(t&1&&(R(0,"div",28)(1,"div",29)(2,"div",30),q(3),N()()()),t&2){let n=ne();K(2),bo(n.clase),pi("width",n.ProgresoDeAncho),K(),rs(" ",n.progresoMensaje," - ",n.progreso,"% ")}}var oM=(()=>{let e=class e{constructor(r,i,s,o){this.fb=r,this.authService=i,this.fire=s,this.router=o,this.progresoMensaje="esperando...",this.logeando=!0,this.storage=wa(),this.clase="progress-bar progress-bar-info progress-bar-striped ",this.formRegistro=this.fb.group({nombre:["",[X.required,X.minLength(3)]],apellido:["",[X.required,X.minLength(2)]],edad:["",[X.required,X.min(0),X.max(150)]],dni:["",[X.required,X.min(1e6),X.max(1e8)]],obraSocial:["",[X.required,X.minLength(2)]],email:["",[X.required,X.email]],contrasena:["",[X.required,X.minLength(6),X.maxLength(8)]],contrasena2:["",[X.required,X.minLength(6),X.maxLength(8)]],foto1:["",[X.required]],foto2:["",[X.required]]}),this.paciente=new Nu}ngOnInit(){sessionStorage.clear()}onFileSelected(r,i){let s=r.target.files[0];i===1?this.foto1=s:this.foto2=s}enviar(){return w(this,null,function*(){if(this.formRegistro.valid)if(this.paciente.pass==this.contrasena2){let r=this.authService.register(this.paciente.mail,this.paciente.pass);if(this.MoverBarraDeProgreso(),yield r){yield new Promise(p=>setTimeout(p,2500)),this.paciente.tipo="paciente";let i=jf(this.fire,"Usuarios"),s=Uu(this.storage,`pacientes/${this.foto1.name}`),o=Uu(this.storage,`pacientes/${this.foto2.name}`),a=yield ju(s,this.foto1),u=yield ju(o,this.foto1),l=yield Vu(a.ref),h=yield Vu(u.ref);console.log(this.paciente,l,h),Uf(i,{email:this.paciente.mail,nombre:this.paciente.nombre,apellido:this.paciente.apellido,tipo:this.paciente.tipo,contrase\u00F1a:this.paciente.pass,edad:this.paciente.edad,obraSocial:this.paciente.obraSocial,foto1:l,foto2:h}),sessionStorage.setItem("user",this.paciente.mail),sessionStorage.setItem("muestra","true"),this.router.navigateByUrl("/home",{replaceUrl:!0})}else this.MostarMensaje("Usuario ya registrado, por favor utilice otro correo",!0),this.paciente=new Nu,this.contrasena2="",this.logeando=!0}else this.MostarMensaje("Las contrase\xF1as no coinciden, por favor revisarlas",!0),this.logeando=!0;else this.MostarMensaje("Hay datos invalidos en el formulario, por favor revisarlos",!0),this.logeando=!0})}MostarMensaje(r,i){this.Mensaje=r;var s=document.getElementById("snackbar");i&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3e3)}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let r=Hi(30);this.subscription=r.subscribe(i=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription.unsubscribe();break}})}};e.\u0275fac=function(i){return new(i||e)($(Sh),$(Di),$(kn),$(lt))},e.\u0275cmp=rt({type:e,selectors:[["app-form-paciente"]],standalone:!0,features:[it],decls:9,vars:3,consts:[[1,"fondo"],[1,"container"],[1,"heading"],[3,"formGroup",4,"ngIf"],["style","margin-top:90%",4,"ngIf"],["id","snackbar"],[3,"formGroup"],[1,"row",2,"margin-left","70px"],[1,"col-sm-12"],[1,"row"],[1,"col-xs-4"],[1,"firstname"],[1,"col-xs-8"],["type","text","name","fname","id","fname","formControlName","nombre","placeholder","Nombre",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","fname","id","fname","formControlName","apellido","placeholder","Apellido",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","fname","id","fname","formControlName","edad","placeholder","Edad",1,"form-control",3,"ngModelChange","ngModel"],[1,"mail"],["type","dni","name","email","id","email","formControlName","dni","placeholder","DNI",1,"form-control",3,"ngModelChange","ngModel"],["type","dni","name","email","id","email","formControlName","obraSocial","placeholder","Obra Social",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","id","email","formControlName","email","placeholder","Correo Electr\xF3nico",1,"form-control",3,"ngModelChange","ngModel"],[1,"pass"],["type","password","name","password","id","password","formControlName","contrasena","placeholder","Contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","formControlName","contrasena2","placeholder","Reingresar contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","file","name","email","id","email","formControlName","foto1","placeholder","Foto 1",1,"form-control",3,"ngModelChange","change","ngModel"],["type","file","name","password","id","password","formControlName","foto2","placeholder","Foto 2",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-sm-12",2,"margin-left","-34px"],[1,"btn","btn-warning",3,"click"],["routerLink","/login",1,"btn","btn-warning"],[2,"margin-top","90%"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"]],template:function(i,s){i&1&&(R(0,"body",0)(1,"div",1)(2,"header",2),q(3," Formulario de Registro de Pacientes"),N(),nn(4,dG,70,11,"form",3)(5,hG,4,6,"div",4),R(6,"div")(7,"div",5),q(8),N()()()()),i&2&&(K(4),Ke("ngIf",s.logeando),K(),Ke("ngIf",!s.logeando),K(3),ns(s.Mensaje))},dependencies:[Mn,Yn,$o,Bo,Ii,Uo,jo,Ah,Zc,eu],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc}.cancelbtn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#f44336}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{float:left;width:50%}.container[_ngcontent-%COMP%]{padding:16px}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006;padding-top:60px}.fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);margin-top:-60px;padding:1%;width:100vw;height:100vh}.container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-image:url(https://image.freepik.com/free-vector/dark-blue-blurred-background_1034-589.jpg);border-style:1px solid grey;padding:3.9%;text-align:center;opacity:.8;max-width:500px}.lastname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:10px}.firstname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:5px}#lname[_ngcontent-%COMP%]{margin-top:5px}.heading[_ngcontent-%COMP%]{text-decoration:bold;text-align:center;font-size:30px;color:#f96;padding-top:10px}#email[_ngcontent-%COMP%]{margin-top:5px}.mail[_ngcontent-%COMP%]{font-family:sans-serif;color:#fff;font-size:14px;margin-top:13px}.pass[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-family:sans-serif;margin-top:9px}#password[_ngcontent-%COMP%]{margin-top:6px}.pno[_ngcontent-%COMP%]{font-size:18px;margin-left:-13px;margin-top:10px;color:#ff9}.gender[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif;font-size:14px;margin-left:28px;margin-top:8px}.sbutton[_ngcontent-%COMP%]{color:#fff;font-size:20px;border:1px solid white;background-color:#080808;width:32%;margin-left:41%;margin-top:16px;box-shadow:0 2px 2px #fff}.btn.btn-warning[_ngcontent-%COMP%]:hover{box-shadow:2px 1px 2px 3px #9cf;background:#5900a6;color:#fff;transition:background-color 1.15s ease-in-out,border-color 1.15s ease-in-out,box-shadow 1.15s ease-in-out}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;color:#fff;text-align:center;border-radius:2px;z-index:1;left:50%;bottom:30px;font-size:20px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#df1818;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}"]});let t=e;return t})();var Bu=class extends ma{constructor(){super(...arguments),this.especialidad=[],this.disponibilidad=[]}};function fG(t,e){if(t&1){let n=gn();R(0,"form",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10),ie(5,"label",11),N(),R(6,"div",12)(7,"input",13),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.nombre,i)||(s.especialista.nombre=i),ce(i)}),N()()()(),R(8,"div",8)(9,"div",9)(10,"div",10),ie(11,"label",11),N(),R(12,"div",12)(13,"input",14),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.apellido,i)||(s.especialista.apellido=i),ce(i)}),N()()(),R(14,"div",8)(15,"div",9)(16,"div",10),ie(17,"label",11),N(),R(18,"div",12)(19,"input",15),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.edad,i)||(s.especialista.edad=i),ce(i)}),N()()()()(),R(20,"div",8)(21,"div",9)(22,"div",10),ie(23,"label",16),N(),R(24,"div",12)(25,"input",17),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.dni,i)||(s.especialista.dni=i),ce(i)}),N()()()(),R(26,"div",8)(27,"div",9)(28,"div",10),ie(29,"label",16),N(),R(30,"div",12)(31,"input",18),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.especialidad,i)||(s.especialista.especialidad=i),ce(i)}),N()()()(),R(32,"div",8)(33,"div",9)(34,"div",10),ie(35,"label",16),N(),R(36,"div",12)(37,"input",19),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.mail,i)||(s.especialista.mail=i),ce(i)}),N()()()(),R(38,"div",8)(39,"div",9)(40,"div",10),ie(41,"label",20),N(),R(42,"div",12)(43,"input",21),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.pass,i)||(s.especialista.pass=i),ce(i)}),N()()()(),R(44,"div",8)(45,"div",9)(46,"div",10),ie(47,"label",20),N(),R(48,"div",12)(49,"input",22),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.contrasena2,i)||(s.contrasena2=i),ce(i)}),N()()()(),R(50,"div",8)(51,"div",9)(52,"div",10),ie(53,"label",16),N(),R(54,"div",12)(55,"input",23),Ue("ngModelChange",function(i){ae(n);let s=ne();return $e(s.especialista.imagen1,i)||(s.especialista.imagen1=i),ce(i)}),Oe("change",function(i){ae(n);let s=ne();return ce(s.onFileSelected(i))}),N()()()()(),R(56,"div",8)(57,"div",24)(58,"div",25),Oe("click",function(){ae(n);let i=ne();return ce(i.enviar())}),q(59,"Enviar"),N()(),ie(60,"br"),R(61,"div",24)(62,"div",26),q(63,"Loguearse"),N()()()()}if(t&2){let n=ne();Ke("formGroup",n.formRegistro),K(7),Ve("ngModel",n.especialista.nombre),K(6),Ve("ngModel",n.especialista.apellido),K(6),Ve("ngModel",n.especialista.edad),K(6),Ve("ngModel",n.especialista.dni),K(6),Ve("ngModel",n.especialista.especialidad),K(6),Ve("ngModel",n.especialista.mail),K(6),Ve("ngModel",n.especialista.pass),K(6),Ve("ngModel",n.contrasena2),K(6),Ve("ngModel",n.especialista.imagen1)}}function pG(t,e){if(t&1&&(R(0,"div",27)(1,"div",28)(2,"div",29),q(3),N()()()),t&2){let n=ne();K(2),bo(n.clase),pi("width",n.ProgresoDeAncho),K(),rs(" ",n.progresoMensaje," - ",n.progreso,"% ")}}var aM=(()=>{let e=class e{constructor(r,i,s,o){this.fb=r,this.authService=i,this.fire=s,this.router=o,this.progresoMensaje="esperando...",this.logeando=!0,this.storage=wa(),this.clase="progress-bar progress-bar-info progress-bar-striped ",this.formRegistro=this.fb.group({nombre:["",[X.required,X.minLength(3)]],apellido:["",[X.required,X.minLength(2)]],edad:["",[X.required,X.min(0),X.max(150)]],dni:["",[X.required,X.min(1e6),X.max(1e8)]],especialidad:["",[X.required,X.minLength(2)]],email:["",[X.required,X.email]],contrasena:["",[X.required,X.minLength(6),X.maxLength(8)]],contrasena2:["",[X.required,X.minLength(6),X.maxLength(8)]],foto1:["",[X.required]]}),this.especialista=new Bu}ngOnInit(){sessionStorage.clear()}onFileSelected(r){this.foto1=r.target.files[0]}enviar(){return w(this,null,function*(){if(this.formRegistro.valid)if(this.especialista.pass==this.contrasena2){let r=this.authService.register(this.especialista.mail,this.especialista.pass);if(this.MoverBarraDeProgreso(),yield r){yield new Promise(u=>setTimeout(u,2500)),this.especialista.tipo="especialista";let i=jf(this.fire,"Usuarios"),s=Uu(this.storage,`especialistas/${this.foto1.name}`),o=yield ju(s,this.foto1),a=yield Vu(o.ref);console.log(this.especialista,a),Uf(i,{email:this.especialista.mail,nombre:this.especialista.nombre,apellido:this.especialista.apellido,tipo:this.especialista.tipo,contrase\u00F1a:this.especialista.pass,edad:this.especialista.edad,Especialidad:this.especialista.especialidad,foto1:a,aprobado:!1}),sessionStorage.setItem("user",this.especialista.mail),sessionStorage.setItem("muestra","true"),this.router.navigateByUrl("/home",{replaceUrl:!0})}else this.MostarMensaje("Usuario ya registrado, por favor utilice otro correo",!0),this.especialista=new Bu,this.contrasena2="",this.logeando=!0}else this.MostarMensaje("Las contrase\xF1as no coinciden, por favor revisarlas",!0),this.logeando=!0;else this.MostarMensaje("Hay datos invalidos en el formulario, por favor revisarlos",!0),this.logeando=!0})}MostarMensaje(r,i){this.Mensaje=r;var s=document.getElementById("snackbar");i&&(s.className="show Ganador");var o=this;setTimeout(function(){s.className=s.className.replace("show","")},3e3)}MoverBarraDeProgreso(){this.progreso=0,this.ProgresoDeAncho="0%",this.logeando=!1,this.clase="progress-bar progress-bar-danger progress-bar-striped active",this.progresoMensaje="Iniciando comprobacion";let r=Hi(30);this.subscription=r.subscribe(i=>{switch(this.progreso=this.progreso+1,this.ProgresoDeAncho=this.progreso+15+"%",this.progreso){case 15:this.clase="progress-bar progress-bar-warning progress-bar-striped active",this.progresoMensaje="Verificando Usuario...";break;case 30:this.clase="progress-bar progress-bar-Info progress-bar-striped active",this.progresoMensaje="Verificando contrase\xF1a..";break;case 60:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Recompilando Info del dispositivo..";break;case 75:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Desencriptacion de clave ..";break;case 85:this.clase="progress-bar progress-bar-success progress-bar-striped active",this.progresoMensaje="Clave ok, ingresando..";break;case 100:console.log("final"),this.subscription.unsubscribe();break}})}};e.\u0275fac=function(i){return new(i||e)($(Sh),$(Di),$(kn),$(lt))},e.\u0275cmp=rt({type:e,selectors:[["app-form-especialista"]],standalone:!0,features:[it],decls:9,vars:3,consts:[[1,"fondo"],[1,"container"],[1,"heading"],[3,"formGroup",4,"ngIf"],["style","margin-top:90%",4,"ngIf"],["id","snackbar"],[3,"formGroup"],[1,"row",2,"margin-left","70px"],[1,"col-sm-12"],[1,"row"],[1,"col-xs-4"],[1,"firstname"],[1,"col-xs-8"],["type","text","name","fname","id","fname","formControlName","nombre","placeholder","Nombre",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","fname","id","fname","formControlName","apellido","placeholder","Apellido",1,"form-control",3,"ngModelChange","ngModel"],["type","text","name","fname","id","fname","formControlName","edad","placeholder","Edad",1,"form-control",3,"ngModelChange","ngModel"],[1,"mail"],["type","dni","name","email","id","email","formControlName","dni","placeholder","DNI",1,"form-control",3,"ngModelChange","ngModel"],["type","dni","name","email","id","email","formControlName","especialidad","placeholder","Especialidad",1,"form-control",3,"ngModelChange","ngModel"],["type","email","name","email","id","email","formControlName","email","placeholder","Correo Electr\xF3nico",1,"form-control",3,"ngModelChange","ngModel"],[1,"pass"],["type","password","name","password","id","password","formControlName","contrasena","placeholder","Contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password","id","password","formControlName","contrasena2","placeholder","Reingresar contrase\xF1a",1,"form-control",3,"ngModelChange","ngModel"],["type","file","name","email","id","email","formControlName","foto1","placeholder","Foto 1",1,"form-control",3,"ngModelChange","change","ngModel"],[1,"col-sm-12",2,"margin-left","-34px"],[1,"btn","btn-warning",3,"click"],["routerLink","/login",1,"btn","btn-warning"],[2,"margin-top","90%"],[1,"progress"],["role","progressbar","aria-valuenow","10","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-info","progress-bar-striped","active"]],template:function(i,s){i&1&&(R(0,"body",0)(1,"div",1)(2,"header",2),q(3," Formulario de Registro de especialistas"),N(),nn(4,fG,64,10,"form",3)(5,pG,4,6,"div",4),R(6,"div")(7,"div",5),q(8),N()()()()),i&2&&(K(4),Ke("ngIf",s.logeando),K(),Ke("ngIf",!s.logeando),K(3),ns(s.Mensaje))},dependencies:[Mn,Yn,$o,Bo,Ii,Uo,jo,Ah,Zc,eu],styles:["input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid #ccc}.cancelbtn[_ngcontent-%COMP%]{padding:14px 20px;background-color:#f44336}.cancelbtn[_ngcontent-%COMP%], .signupbtn[_ngcontent-%COMP%]{float:left;width:50%}.container[_ngcontent-%COMP%]{padding:16px}.modal[_ngcontent-%COMP%]{display:none;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006;padding-top:60px}.fondo[_ngcontent-%COMP%]{background:url(/assets/imagenes/slider-bg-2.jpg);margin-top:-60px;padding:1%;width:100vw;height:100vh}.container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-image:url(https://image.freepik.com/free-vector/dark-blue-blurred-background_1034-589.jpg);border-style:1px solid grey;padding:3.9%;text-align:center;opacity:.8;max-width:500px}.lastname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:10px}.firstname[_ngcontent-%COMP%]{font-family:sans-serif;font-size:14px;color:#fff;margin-top:5px}#lname[_ngcontent-%COMP%]{margin-top:5px}.heading[_ngcontent-%COMP%]{text-decoration:bold;text-align:center;font-size:30px;color:#f96;padding-top:10px}#email[_ngcontent-%COMP%]{margin-top:5px}.mail[_ngcontent-%COMP%]{font-family:sans-serif;color:#fff;font-size:14px;margin-top:13px}.pass[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-family:sans-serif;margin-top:9px}#password[_ngcontent-%COMP%]{margin-top:6px}.pno[_ngcontent-%COMP%]{font-size:18px;margin-left:-13px;margin-top:10px;color:#ff9}.gender[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif;font-size:14px;margin-left:28px;margin-top:8px}.sbutton[_ngcontent-%COMP%]{color:#fff;font-size:20px;border:1px solid white;background-color:#080808;width:32%;margin-left:41%;margin-top:16px;box-shadow:0 2px 2px #fff}.btn.btn-warning[_ngcontent-%COMP%]:hover{box-shadow:2px 1px 2px 3px #9cf;background:#5900a6;color:#fff;transition:background-color 1.15s ease-in-out,border-color 1.15s ease-in-out,box-shadow 1.15s ease-in-out}#snackbar[_ngcontent-%COMP%]{visibility:hidden;min-width:250px;color:#fff;text-align:center;border-radius:2px;z-index:1;left:50%;bottom:30px;font-size:20px}#snackbar.Ganador[_ngcontent-%COMP%]{background-color:#df1818;color:#fff}#snackbar.show[_ngcontent-%COMP%]{visibility:visible;-webkit-animation:fadein .5s,fadeout .5s 2.5s;animation:fadein .5s,fadeout .5s 2.5s}"]});let t=e;return t})();function gG(t,e){if(t&1){let n=gn();R(0,"div",3)(1,"div",4),ie(2,"img",5),R(3,"h2"),q(4,"\xA1Soy Paciente!"),N(),R(5,"p"),q(6,"Te podr\xE1s registrar como paciente de nuestra clinica"),N(),R(7,"p")(8,"a",6),Oe("click",function(){ae(n);let i=ne();return ce(i.cambiarSeccion("paciente"))}),q(9,"Registrarse como Paciente"),N()()(),R(10,"div",4),ie(11,"img",7),R(12,"h2"),q(13,"\xA1Soy Especialista!"),N(),R(14,"p"),q(15,"Te podr\xE1s registrar como integrante de nuestro staff"),N(),R(16,"p")(17,"a",6),Oe("click",function(){ae(n);let i=ne();return ce(i.cambiarSeccion("especialista"))}),q(18,"Registrarse como Especialista"),N()()()()}}function mG(t,e){t&1&&(R(0,"div",12),ie(1,"app-form-paciente"),N())}function _G(t,e){t&1&&(R(0,"div",12),ie(1,"app-form-especialista"),N())}function yG(t,e){if(t&1){let n=gn();R(0,"div",8),nn(1,mG,2,0,"div",9)(2,_G,2,0,"div",9),R(3,"div",10)(4,"button",11),Oe("click",function(){ae(n);let i=ne();return ce(i.volverMenuSeleccion())}),q(5,"Volver"),N()()()}if(t&2){let n=ne();K(),Ke("ngIf",n.tipoUsuarioARegistrar=="paciente"),K(),Ke("ngIf",n.tipoUsuarioARegistrar=="especialista")}}var cM=(()=>{let e=class e{constructor(){this.seccion="menu",this.tipoUsuarioARegistrar=""}cambiarSeccion(r){this.seccion="seleccion",this.tipoUsuarioARegistrar=r}volverMenuSeleccion(){this.seccion="menu"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-registro"]],standalone:!0,features:[it],decls:3,vars:2,consts:[[1,"fondo"],["class","row","style","margin-left: 285px;",4,"ngIf"],["class","pantalla-2",4,"ngIf"],[1,"row",2,"margin-left","285px"],[1,"col-lg-6"],["_ngcontent-c3","","alt","Generic placeholder image","height","235","src","./assets/imagenes/paciente.png","width","243",1,"rounded-circle"],["role","button",1,"btn","btn-primary","btn-lg",3,"click"],["_ngcontent-c3","","alt","Generic placeholder image","height","235","src","./assets/imagenes/especialista.png","width","243",1,"rounded-circle"],[1,"pantalla-2"],["class","contenedor-registros",4,"ngIf"],[1,"boton-menu"],[1,"flecha",3,"click"],[1,"contenedor-registros"]],template:function(i,s){i&1&&(R(0,"div",0),nn(1,gG,19,0,"div",1)(2,yG,6,2,"div",2),N()),i&2&&(K(),Ke("ngIf",s.seccion=="menu"),K(),Ke("ngIf",s.seccion=="seleccion"))},dependencies:[oM,aM,Mn,Yn],styles:['.fondo[_ngcontent-%COMP%]{display:inline-flex;background:url("./media/slider-bg-2-7UI2L5W4.jpg");margin-block-start:101px;margin-top:-60px;padding:43px;width:100vw;height:100vh}.marketing[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]{margin-bottom:1.5rem;text-align:center}.marketing[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:400}.fondo[_ngcontent-%COMP%]   .col-lg-6[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-right:10.75rem;margin-left:-7.25rem}p[_ngcontent-%COMP%]{text-align:center;color:#00096b;font-size:20px}h2[_ngcontent-%COMP%]{color:#27c82a;text-align:left}.featurette-divider[_ngcontent-%COMP%]{margin:5rem 0}@media (min-width: 40em){.carousel-caption[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:1.25rem;font-size:1.25rem;line-height:1.4}.featurette-heading[_ngcontent-%COMP%]{font-size:50px}}@media (min-width: 62em){.featurette-heading[_ngcontent-%COMP%]{margin-top:7rem}}.flecha[_ngcontent-%COMP%]{position:absolute;top:110px;right:20px;background-color:#f44336;color:#fff;padding:10px 20px;border:none;border-radius:4px;font-size:16px;cursor:pointer}']});let t=e;return t})();var uM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-error"]],standalone:!0,features:[it],decls:2,vars:0,template:function(i,s){i&1&&(R(0,"p"),q(1,"error works!"),N())}});let t=e;return t})();var lM=[{path:"",component:z_},{path:"bienvenido",component:z_},{path:"login",component:Mx},{path:"registro",component:cM},{path:"**",component:uM}];var dM="@firebase/database",hM="1.0.5";var cE="";function vG(t){cE=t}var yI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),mt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Ho(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var vI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return nr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var qM=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new yI(e)}}catch{}return new vI},Ps=qM("localStorage"),wI=qM("sessionStorage");var ba=new rr("@firebase/database"),wG=function(){let t=1;return function(){return t++}}(),zM=function(t){let e=YS(t),n=new Rh;n.update(e);let r=n.digest();return xh.encodeByteArray(r)},el=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=el.apply(null,r):typeof r=="object"?e+=mt(r):e+=r,e+=" "}return e},Os=null,fM=!0,IG=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ba.logLevel=ue.VERBOSE,Os=ba.log.bind(ba),e&&wI.set("logging_enabled",!0)):typeof t=="function"?Os=t:(Os=null,wI.remove("logging_enabled"))},kt=function(...t){if(fM===!0&&(fM=!1,Os===null&&wI.get("logging_enabled")===!0&&IG(!0)),Os){let e=el.apply(null,t);Os(e)}},tl=function(t){return function(...e){kt(t,...e)}},II=function(...t){let e="FIREBASE INTERNAL ERROR: "+el(...t);ba.error(e)},Wr=function(...t){let e=`FIREBASE FATAL ERROR: ${el(...t)}`;throw ba.error(e),new Error(e)},un=function(...t){let e="FIREBASE WARNING: "+el(...t);ba.warn(e)},EG=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&un("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},GM=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},CG=function(t){if(tr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Da="[MIN_NAME]",ks="[MAX_NAME]",Pa=function(t,e){if(t===e)return 0;if(t===Da||e===ks)return-1;if(e===Da||t===ks)return 1;{let n=pM(t),r=pM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bG=function(t,e){return t===e?0:t<e?-1:1},$u=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+mt(e))},uE=function(t){if(typeof t!="object"||t===null)return mt(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=mt(e[r]),n+=":",n+=uE(t[e[r]]);return n+="}",n},WM=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function In(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var KM=function(t){F(!GM(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),p="";for(u=0;u<64;u+=8){let m=parseInt(h.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},TG=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},DG=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var SG=new RegExp("^-?(0*)\\d{1,10}$"),AG=-2147483648,RG=2147483647,pM=function(t){if(SG.test(t)){let e=Number(t);if(e>=AG&&e<=RG)return e}return null},nl=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw un("Exception was thrown by user callback.",n),e},Math.floor(0))}},xG=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Wu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var EI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){un(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var CI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(kt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',un(e)}},Ku=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Gf="5",QM="v",YM="s",JM="r",XM="f",ZM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,eN="ls",tN="p",bI="ac",nN="websocket",rN="long_polling";var Wf=class{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ps.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ps.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function MG(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function iN(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===nN)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===rN)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);MG(t)&&(n.ns=t.namespace);let i=[];return In(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var TI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){nr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return US(this.counters_)}};var dI={},hI={};function lE(t){let e=t.toString();return dI[e]||(dI[e]=new TI),dI[e]}function NG(t,e){let n=t.toString();return hI[n]||(hI[n]=e()),hI[n]}var DI=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&nl(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var gM="start",PG="close",OG="pLPCommand",kG="pRTLPCB",sN="id",oN="pw",aN="ser",FG="cb",LG="seg",VG="ts",UG="d",jG="dframe",cN=1870,uN=30,BG=cN-uN,$G=25e3,HG=3e4,SI=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=tl(e),this.stats_=lE(n),this.urlFn=u=>(this.appCheckToken&&(u[bI]=this.appCheckToken),iN(n,rN,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new DI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HG)),CG(()=>{if(this.isClosed_)return;this.scriptTagHolder=new AI((...s)=>{let[o,a,u,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===gM)this.id=a,this.password=u;else if(o===PG)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[gM]="t",r[aN]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FG]=this.scriptTagHolder.uniqueCallbackIdentifier),r[QM]=Gf,this.transportSessionId&&(r[YM]=this.transportSessionId),this.lastSessionId&&(r[eN]=this.lastSessionId),this.applicationId&&(r[tN]=this.applicationId),this.appCheckToken&&(r[bI]=this.appCheckToken),typeof location<"u"&&location.hostname&&ZM.test(location.hostname)&&(r[JM]=XM);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return tr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!TG()&&!DG()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=uy(n),i=WM(r,BG);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(tr())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[jG]="t",r[sN]=e,r[oN]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},AI=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,tr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=wG(),window[OG+this.uniqueCallbackIdentifier]=e,window[kG+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){kt("frame writing exception"),a.stack&&kt(a.stack),kt(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||kt("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[sN]=this.myID,e[oN]=this.myPW,e[aN]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+uN+r.length<=cN;){let o=this.pendingSegs.shift();r=r+"&"+LG+i+"="+o.seg+"&"+VG+i+"="+o.ts+"&"+UG+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor($G)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){tr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{kt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var qG=16384,zG=45e3,Kf=null;typeof MozWebSocket<"u"?Kf=MozWebSocket:typeof WebSocket<"u"&&(Kf=WebSocket);var Hu=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=tl(this.connId),this.stats_=lE(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[QM]=Gf,!tr()&&typeof location<"u"&&location.hostname&&ZM.test(location.hostname)&&(a[JM]=XM),r&&(a[YM]=r),i&&(a[eN]=i),s&&(a[bI]=s),o&&(a[tN]=o),iN(n,nN,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ps.set("previous_websocket_failure",!0);try{let i;if(tr()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Gf}/${cE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Kf(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Kf!==null&&!t.forceDisallow_}static previouslyFailed(){return Ps.isInMemoryStorage||Ps.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ps.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Ho(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=mt(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=WM(r,qG);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(zG))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),GG=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[SI,Hu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Hu&&Hu.isAvailable(),i=r&&!Hu.previouslyFailed();if(n.webSocketOnly&&(r||un("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Hu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),WG=6e4,KG=5e3,QG=10*1024,YG=100*1024,fI="t",mM="d",JG="s",_M="r",XG="e",yM="o",vM="a",wM="n",IM="p",ZG="h",RI=class{constructor(e,n,r,i,s,o,a,u,l,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=tl("c:"+this.id+":"),this.transportManager_=new GG(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Wu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>YG?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QG?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(fI in e){let n=e[fI];n===vM?this.upgradeIfSecondaryHealthy_():n===_M?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===yM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=$u("t",e),r=$u("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:IM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:vM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:wM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=$u("t",e),r=$u("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=$u(fI,e);if(mM in e){let r=e[mM];if(n===ZG){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===wM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===JG?this.onConnectionShutdown_(r):n===_M?this.onReset_(r):n===XG?II("Server Error: "+r):n===yM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):II("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Gf!==r&&un("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Wu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(WG))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Wu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KG))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:IM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ps.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Qf=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Yf=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Jf=class t extends Yf{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!ru()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var EM=32,CM=768,Pe=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Re(){return new Pe("")}function Ee(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Oi(t){return t.pieces_.length-t.pieceNum_}function Be(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Pe(t.pieces_,e)}function lN(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function eW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function dN(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function hN(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Pe(e,0)}function It(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Pe)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Pe(n,0)}function ye(t){return t.pieceNum_>=t.pieces_.length}function vn(t,e){let n=Ee(t),r=Ee(e);if(n===null)return e;if(n===r)return vn(Be(t),Be(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function fN(t,e){if(Oi(t)!==Oi(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Vn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Oi(t)>Oi(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var xI=class{constructor(e,n){this.errorPrefix_=n,this.parts_=dN(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=ou(this.parts_[r]);pN(this)}};function tW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ou(e),pN(t)}function nW(t){let e=t.parts_.pop();t.byteLength_-=ou(e),t.parts_.length>0&&(t.byteLength_-=1)}function pN(t){if(t.byteLength_>CM)throw new Error(t.errorPrefix_+"has a key path longer than "+CM+" bytes ("+t.byteLength_+").");if(t.parts_.length>EM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+EM+") or object contains a cycle "+Ns(t))}function Ns(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var MI=class t extends Yf{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var qu=1e3,rW=60*5*1e3,bM=30*1e3,iW=1.3,sW=3e4,oW="server_kill",TM=3,dE=(()=>{class t extends Qf{constructor(n,r,i,s,o,a,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=tl("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=qu,this.maxReconnectDelay_=rW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!tr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");MI.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Jf.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(mt(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new ls,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,u=>{let l=u.d,h=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(h,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&nr(n,"w")){let i=hs(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();un(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||WS(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=bM)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=GS(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+mt(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):II("Unrecognized action received from server: "+mt(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=qu,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=qu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sW&&(this.reconnectDelay_=qu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iW)}this.onConnectStatus_(!1)}establishConnection_(){return w(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},h=function(m){F(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,I]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?kt("getToken() completed but was canceled"):(kt("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=I&&I.token,u=new RI(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,D=>{un(D+" ("+this.repoInfo_.toString()+")"),this.interrupt(oW)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&un(m),l())}}})}interrupt(n){kt("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){kt("Resuming connection for reason: "+n),delete this.interruptReasons_[n],iu(this.interruptReasons_)&&(this.reconnectDelay_=qu,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>uE(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Pe(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){kt("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=TM&&(this.reconnectDelay_=bM,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){kt("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=TM&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";tr()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+cE.replace(/\./g,"-")]=1,ru()?n["framework.cordova"]=1:Nh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Jf.getInstance().currentlyOnline();return iu(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ce=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Sa=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new Ce(Da,e),i=new Ce(Da,n);return this.compare(r,i)!==0}minPost(){return Ce.MIN}};var zf,Xf=class extends Sa{static get __EMPTY_NODE(){return zf}static set __EMPTY_NODE(e){zf=e}compare(e,n){return Pa(e.name,n.name)}isDefinedOn(e){throw ds("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ce.MIN}maxPost(){return new Ce(ks,zf)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new Ce(e,zf)}toString(){return".key"}},Ta=new Xf;var Ea=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ln=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??wn.EMPTY_NODE,this.right=o??wn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return wn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return wn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),NI=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Ln(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},wn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ln.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ln.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ea(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ea(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ea(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ea(this.root_,null,this.comparator_,!0,e)}};wn.EMPTY_NODE=new NI;function aW(t,e){return Pa(t.name,e.name)}function hE(t,e){return Pa(t,e)}var PI;function cW(t){PI=t}var gN=function(t){return typeof t=="number"?"number:"+KM(t):"string:"+t},mN=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&nr(e,".sv"),"Priority must be a string or number.")}else F(t===PI||t.isEmpty(),"priority of unexpected type.");F(t===PI||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var DM,Aa=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),mN(this.priorityNode_)}static set __childrenNodeConstructor(n){DM=n}static get __childrenNodeConstructor(){return DM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return ye(n)?this:Ee(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=Ee(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Oi(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Be(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+gN(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=KM(this.value_):n+=this.value_,this.lazyHash_=zM(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),_N,yN;function uW(t){_N=t}function lW(t){yN=t}var OI=class extends Sa{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Pa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ce.MIN}maxPost(){return new Ce(ks,new Aa("[PRIORITY-POST]",yN))}makePost(e,n){let r=_N(e);return new Ce(n,new Aa("[PRIORITY-POST]",r))}toString(){return".priority"}},Lt=new OI;var dW=Math.log(2),kI=class{constructor(e){let n=s=>parseInt(Math.log(s)/dW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Zf=function(t,e,n,r){t.sort(e);let i=function(u,l){let h=l-u,p,m;if(h===0)return null;if(h===1)return p=t[u],m=n?n(p):p,new Ln(m,p.node,Ln.BLACK,null,null);{let I=parseInt(h/2,10)+u,D=i(u,I),x=i(I+1,l);return p=t[I],m=n?n(p):p,new Ln(m,p.node,Ln.BLACK,D,x)}},s=function(u){let l=null,h=null,p=t.length,m=function(D,x){let M=p-D,U=p;p-=D;let Q=i(M+1,U),j=t[M],Z=n?n(j):j;I(new Ln(Z,j.node,x,null,Q))},I=function(D){l?(l.left=D,l=D):(h=D,l=D)};for(let D=0;D<u.count;++D){let x=u.nextBitIsOne(),M=Math.pow(2,u.count-(D+1));x?m(M,Ln.BLACK):(m(M,Ln.BLACK),m(M,Ln.RED))}return h},o=new kI(t.length),a=s(o);return new wn(r||e,a)};var pI,Ia={},Ra=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(Ia&&Lt,"ChildrenNode.ts has not been loaded"),pI=pI||new t({".priority":Ia},{".priority":Lt}),pI}get(e){let n=hs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof wn?n:null}hasIndex(e){return nr(this.indexSet_,e.toString())}addIndex(e,n){F(e!==Ta,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(Ce.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Zf(r,e.getCompare()):a=Ia;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let h=Object.assign({},this.indexes_);return h[u]=a,new t(h,l)}addToIndexes(e,n){let r=su(this.indexes_,(i,s)=>{let o=hs(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===Ia)if(o.isDefinedOn(e.node)){let a=[],u=n.getIterator(Ce.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Zf(a,o.getCompare())}else return Ia;else{let a=n.get(e.name),u=i;return a&&(u=u.remove(new Ce(e.name,a))),u.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=su(this.indexes_,i=>{if(i===Ia)return i;{let s=n.get(e.name);return s?i.remove(new Ce(e.name,s)):i}});return new t(r,this.indexSet_)}};var zu,ze=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&mN(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return zu||(zu=new t(new wn(hE),null,Ra.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||zu}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?zu:r}}getChild(n){let r=Ee(n);return r===null?this:this.getImmediateChild(r).getChild(Be(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new Ce(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?zu:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=Ee(n);if(i===null)return r;{F(Ee(n)!==".priority"||Oi(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Be(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Lt,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+gN(this.getPriority().val())+":"),this.forEachChild(Lt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":zM(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new Ce(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new Ce(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new Ce(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ce.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ce.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===rl?-1:0}withIndex(n){if(n===Ta||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===Ta||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Lt),s=r.getIterator(Lt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ta?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),FI=class extends ze{constructor(){super(new wn(hE),ze.EMPTY_NODE,Ra.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ze.EMPTY_NODE}isEmpty(){return!1}},rl=new FI;Object.defineProperties(Ce,{MIN:{value:new Ce(Da,ze.EMPTY_NODE)},MAX:{value:new Ce(ks,rl)}});Xf.__EMPTY_NODE=ze.EMPTY_NODE;Aa.__childrenNodeConstructor=ze;cW(rl);lW(rl);var hW=!0;function Ft(t,e=null){if(t===null)return ze.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Aa(n,Ft(e))}if(!(t instanceof Array)&&hW){let n=[],r=!1;if(In(t,(o,a)=>{if(o.substring(0,1)!=="."){let u=Ft(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new Ce(o,u)))}}),n.length===0)return ze.EMPTY_NODE;let s=Zf(n,aW,o=>o.name,hE);if(r){let o=Zf(n,Lt.getCompare());return new ze(s,Ft(e),new Ra({".priority":o},{".priority":Lt}))}else return new ze(s,Ft(e),Ra.Default)}else{let n=ze.EMPTY_NODE;return In(t,(r,i)=>{if(nr(t,r)&&r.substring(0,1)!=="."){let s=Ft(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Ft(e))}}uW(Ft);var LI=class extends Sa{constructor(e){super(),this.indexPath_=e,F(!ye(e)&&Ee(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Pa(e.name,n.name):s}makePost(e,n){let r=Ft(e),i=ze.EMPTY_NODE.updateChild(this.indexPath_,r);return new Ce(n,i)}maxPost(){let e=ze.EMPTY_NODE.updateChild(this.indexPath_,rl);return new Ce(ks,e)}toString(){return dN(this.indexPath_,0).join("/")}};var VI=class extends Sa{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Pa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ce.MIN}maxPost(){return Ce.MAX}makePost(e,n){let r=Ft(e);return new Ce(n,r)}toString(){return".value"}},fW=new VI;function pW(t){return{type:"value",snapshotNode:t}}function gW(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function mW(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function SM(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function _W(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var UI=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Da}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ks}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Lt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function AM(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Lt?n="$priority":t.index_===fW?n="$value":t.index_===Ta?n="$key":(F(t.index_ instanceof LI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=mt(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=mt(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+mt(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=mt(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function RM(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Lt&&(e.i=t.index_.toString()),e}var jI=class t extends Qf{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=tl("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let u=AM(e._queryParams);this.restRequest_(s+".json",u,(l,h)=>{let p=h;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),hs(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=AM(e._queryParams),r=e._path.toString(),i=new ls;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ps(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Ho(a.responseText)}catch{un("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&un("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var BI=class{constructor(){this.rootNode_=ze.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function ep(){return{value:null,children:new Map}}function vN(t,e,n){if(ye(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=Ee(e);t.children.has(r)||t.children.set(r,ep());let i=t.children.get(r);e=Be(e),vN(i,e,n)}}function $I(t,e,n){t.value!==null?n(e,t.value):yW(t,(r,i)=>{let s=new Pe(e.toString()+"/"+r);$I(i,s,n)})}function yW(t,e){t.children.forEach((n,r)=>{e(r,n)})}var HI=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&In(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var xM=10*1e3,vW=30*1e3,wW=5*60*1e3,qI=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new HI(e);let r=xM+(vW-xM)*Math.random();Wu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;In(e,(i,s)=>{s>0&&nr(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Wu(this.reportStats_.bind(this),Math.floor(Math.random()*2*wW))}};var Gr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Gr||{});function wN(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function IN(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function EN(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var zI=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Gr.ACK_USER_WRITE,this.source=wN()}operationForChild(e){if(ye(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Pe(e));return new t(Re(),n,this.revert)}}else return F(Ee(this.path)===e,"operationForChild called for unrelated child."),new t(Be(this.path),this.affectedTree,this.revert)}};var xa=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Gr.OVERWRITE}operationForChild(e){return ye(this.path)?new t(this.source,Re(),this.snap.getImmediateChild(e)):new t(this.source,Be(this.path),this.snap)}};var tp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Gr.MERGE}operationForChild(e){if(ye(this.path)){let n=this.children.subtree(new Pe(e));return n.isEmpty()?null:n.value?new xa(this.source,Re(),n.value):new t(this.source,Re(),n)}else return F(Ee(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Be(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Ju=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ye(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ee(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function IW(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(_W(o.childName,o.snapshotNode))}),Gu(t,i,"child_removed",e,r,n),Gu(t,i,"child_added",e,r,n),Gu(t,i,"child_moved",s,r,n),Gu(t,i,"child_changed",e,r,n),Gu(t,i,"value",e,r,n),i}function Gu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,u)=>CW(t,a,u)),o.forEach(a=>{let u=EW(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,t.query_))})})}function EW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function CW(t,e,n){if(e.childName==null||n.childName==null)throw ds("Should only compare child_ events.");let r=new Ce(e.childName,e.snapshotNode),i=new Ce(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function CN(t,e){return{eventCache:t,serverCache:e}}function Qu(t,e,n,r){return CN(new Ju(e,n,r),t.serverCache)}function bN(t,e,n,r){return CN(t.eventCache,new Ju(e,n,r))}function GI(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fs(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var gI,bW=()=>(gI||(gI=new wn(bG)),gI),Xt=class t{constructor(e,n=bW()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return In(e,(r,i)=>{n=n.set(new Pe(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Re(),value:this.value};if(ye(e))return null;{let r=Ee(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Be(e),n);return s!=null?{path:It(new Pe(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ye(e))return this;{let n=Ee(e),r=this.children.get(n);return r!==null?r.subtree(Be(e)):new t(null)}}set(e,n){if(ye(e))return new t(n,this.children);{let r=Ee(e),s=(this.children.get(r)||new t(null)).set(Be(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(ye(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ee(e),r=this.children.get(n);if(r){let i=r.remove(Be(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(ye(e))return this.value;{let n=Ee(e),r=this.children.get(n);return r?r.get(Be(e)):null}}setTree(e,n){if(ye(e))return n;{let r=Ee(e),s=(this.children.get(r)||new t(null)).setTree(Be(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Re(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(It(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Re(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(ye(e))return null;{let s=Ee(e),o=this.children.get(s);return o?o.findOnPath_(Be(e),It(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Re(),n)}foreachOnPath_(e,n,r){if(ye(e))return this;{this.value&&r(n,this.value);let i=Ee(e),s=this.children.get(i);return s?s.foreachOnPath_(Be(e),It(n,i),r):new t(null)}}foreach(e){this.foreach_(Re(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(It(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Un=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Xt(null))}};function Yu(t,e,n){if(ye(e))return new Un(new Xt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=vn(i,e);return s=s.updateChild(o,n),new Un(t.writeTree_.set(i,s))}else{let i=new Xt(n),s=t.writeTree_.setTree(e,i);return new Un(s)}}}function MM(t,e,n){let r=t;return In(n,(i,s)=>{r=Yu(r,It(e,i),s)}),r}function NM(t,e){if(ye(e))return Un.empty();{let n=t.writeTree_.setTree(e,new Xt(null));return new Un(n)}}function WI(t,e){return Ls(t,e)!=null}function Ls(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(vn(n.path,e)):null}function PM(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Lt,(r,i)=>{e.push(new Ce(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new Ce(r,i.value))}),e}function Pi(t,e){if(ye(e))return t;{let n=Ls(t,e);return n!=null?new Un(new Xt(n)):new Un(t.writeTree_.subtree(e))}}function KI(t){return t.writeTree_.isEmpty()}function Ma(t,e){return TN(Re(),t.writeTree_,e)}function TN(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=TN(It(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(It(t,".priority"),r)),n}}function DN(t,e){return MN(e,t)}function TW(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=Yu(t.visibleWrites,e,n)),t.lastWriteId=r}function DW(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function SW(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&AW(a,r.path)?i=!1:Vn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return RW(t),!0;if(r.snap)t.visibleWrites=NM(t.visibleWrites,r.path);else{let a=r.children;In(a,u=>{t.visibleWrites=NM(t.visibleWrites,It(r.path,u))})}return!0}else return!1}function AW(t,e){if(t.snap)return Vn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Vn(It(t.path,n),e))return!0;return!1}function RW(t){t.visibleWrites=SN(t.allWrites,xW,Re()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function xW(t){return t.visible}function SN(t,e,n){let r=Un.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Vn(n,o)?(a=vn(n,o),r=Yu(r,a,s.snap)):Vn(o,n)&&(a=vn(o,n),r=Yu(r,Re(),s.snap.getChild(a)));else if(s.children){if(Vn(n,o))a=vn(n,o),r=MM(r,a,s.children);else if(Vn(o,n))if(a=vn(o,n),ye(a))r=MM(r,Re(),s.children);else{let u=hs(s.children,Ee(a));if(u){let l=u.getChild(Be(a));r=Yu(r,Re(),l)}}}else throw ds("WriteRecord should have .snap or .children")}}return r}function AN(t,e,n,r,i){if(!r&&!i){let s=Ls(t.visibleWrites,e);if(s!=null)return s;{let o=Pi(t.visibleWrites,e);if(KI(o))return n;if(n==null&&!WI(o,Re()))return null;{let a=n||ze.EMPTY_NODE;return Ma(o,a)}}}else{let s=Pi(t.visibleWrites,e);if(!i&&KI(s))return n;if(!i&&n==null&&!WI(s,Re()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Vn(l.path,e)||Vn(e,l.path))},a=SN(t.allWrites,o,e),u=n||ze.EMPTY_NODE;return Ma(a,u)}}}function MW(t,e,n){let r=ze.EMPTY_NODE,i=Ls(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Lt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Pi(t.visibleWrites,e);return n.forEachChild(Lt,(o,a)=>{let u=Ma(Pi(s,new Pe(o)),a);r=r.updateImmediateChild(o,u)}),PM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Pi(t.visibleWrites,e);return PM(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function NW(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=It(e,n);if(WI(t.visibleWrites,s))return null;{let o=Pi(t.visibleWrites,s);return KI(o)?i.getChild(n):Ma(o,i.getChild(n))}}function PW(t,e,n,r){let i=It(e,n),s=Ls(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Pi(t.visibleWrites,i);return Ma(o,r.getNode().getImmediateChild(n))}else return null}function OW(t,e){return Ls(t.visibleWrites,e)}function kW(t,e,n,r,i,s,o){let a,u=Pi(t.visibleWrites,e),l=Ls(u,Re());if(l!=null)a=l;else if(n!=null)a=Ma(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),I=m.getNext();for(;I&&h.length<i;)p(I,r)!==0&&h.push(I),I=m.getNext();return h}else return[]}function FW(){return{visibleWrites:Un.empty(),allWrites:[],lastWriteId:-1}}function QI(t,e,n,r){return AN(t.writeTree,t.treePath,e,n,r)}function RN(t,e){return MW(t.writeTree,t.treePath,e)}function OM(t,e,n,r){return NW(t.writeTree,t.treePath,e,n,r)}function np(t,e){return OW(t.writeTree,It(t.treePath,e))}function LW(t,e,n,r,i,s){return kW(t.writeTree,t.treePath,e,n,r,i,s)}function fE(t,e,n){return PW(t.writeTree,t.treePath,e,n)}function xN(t,e){return MN(It(t.treePath,e),t.writeTree)}function MN(t,e){return{treePath:t,writeTree:e}}var YI=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,SM(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,mW(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,gW(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,SM(r,e.snapshotNode,i.oldSnap));else throw ds("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var JI=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},NN=new JI,Xu=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Ju(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fs(this.viewCache_),s=LW(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function VW(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function UW(t,e,n,r,i){let s=new YI,o,a;if(n.type===Gr.OVERWRITE){let l=n;l.source.fromUser?o=XI(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!ye(l.path),o=rp(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Gr.MERGE){let l=n;l.source.fromUser?o=BW(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=ZI(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Gr.ACK_USER_WRITE){let l=n;l.revert?o=qW(t,e,l.path,r,i,s):o=$W(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Gr.LISTEN_COMPLETE)o=HW(t,e,n.path,r,s);else throw ds("Unknown operation type: "+n.type);let u=s.getChanges();return jW(e,o,u),{viewCache:o,changes:u}}function jW(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=GI(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(pW(GI(e)))}}function PN(t,e,n,r,i,s){let o=e.eventCache;if(np(r,n)!=null)return e;{let a,u;if(ye(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=Fs(e),h=l instanceof ze?l:ze.EMPTY_NODE,p=RN(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=QI(r,Fs(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=Ee(n);if(l===".priority"){F(Oi(n)===1,"Can't have a priority with additional path components");let h=o.getNode();u=e.serverCache.getNode();let p=OM(r,n,h,u);p!=null?a=t.filter.updatePriority(h,p):a=o.getNode()}else{let h=Be(n),p;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();let m=OM(r,n,o.getNode(),u);m!=null?p=o.getNode().getImmediateChild(l).updateChild(h,m):p=o.getNode().getImmediateChild(l)}else p=fE(r,l,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),l,p,h,i,s):a=o.getNode()}}return Qu(e,a,o.isFullyInitialized()||ye(n),t.filter.filtersNodes())}}function rp(t,e,n,r,i,s,o,a){let u=e.serverCache,l,h=o?t.filter:t.filter.getIndexedFilter();if(ye(n))l=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){let I=u.getNode().updateChild(n,r);l=h.updateFullNode(u.getNode(),I,null)}else{let I=Ee(n);if(!u.isCompleteForPath(n)&&Oi(n)>1)return e;let D=Be(n),M=u.getNode().getImmediateChild(I).updateChild(D,r);I===".priority"?l=h.updatePriority(u.getNode(),M):l=h.updateChild(u.getNode(),I,M,D,NN,null)}let p=bN(e,l,u.isFullyInitialized()||ye(n),h.filtersNodes()),m=new Xu(i,p,s);return PN(t,p,n,i,m,a)}function XI(t,e,n,r,i,s,o){let a=e.eventCache,u,l,h=new Xu(i,e,s);if(ye(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Qu(e,l,!0,t.filter.filtersNodes());else{let p=Ee(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=Qu(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Be(n),I=a.getNode().getImmediateChild(p),D;if(ye(m))D=r;else{let x=h.getCompleteChild(p);x!=null?lN(m)===".priority"&&x.getChild(hN(m)).isEmpty()?D=x:D=x.updateChild(m,r):D=ze.EMPTY_NODE}if(I.equals(D))u=e;else{let x=t.filter.updateChild(a.getNode(),p,D,m,h,o);u=Qu(e,x,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function kM(t,e){return t.eventCache.isCompleteForChild(e)}function BW(t,e,n,r,i,s,o){let a=e;return r.foreach((u,l)=>{let h=It(n,u);kM(e,Ee(h))&&(a=XI(t,a,h,l,i,s,o))}),r.foreach((u,l)=>{let h=It(n,u);kM(e,Ee(h))||(a=XI(t,a,h,l,i,s,o))}),a}function FM(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ZI(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;ye(n)?l=r:l=new Xt(null).setTree(n,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){let I=e.serverCache.getNode().getImmediateChild(p),D=FM(t,I,m);u=rp(t,u,new Pe(p),D,i,s,o,a)}}),l.children.inorderTraversal((p,m)=>{let I=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!I){let D=e.serverCache.getNode().getImmediateChild(p),x=FM(t,D,m);u=rp(t,u,new Pe(p),x,i,s,o,a)}}),u}function $W(t,e,n,r,i,s,o){if(np(i,n)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(ye(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return rp(t,e,n,u.getNode().getChild(n),i,s,a,o);if(ye(n)){let l=new Xt(null);return u.getNode().forEachChild(Ta,(h,p)=>{l=l.set(new Pe(h),p)}),ZI(t,e,n,l,i,s,a,o)}else return e}else{let l=new Xt(null);return r.foreach((h,p)=>{let m=It(n,h);u.isCompleteForPath(m)&&(l=l.set(h,u.getNode().getChild(m)))}),ZI(t,e,n,l,i,s,a,o)}}function HW(t,e,n,r,i){let s=e.serverCache,o=bN(e,s.getNode(),s.isFullyInitialized()||ye(n),s.isFiltered());return PN(t,o,n,r,NN,i)}function qW(t,e,n,r,i,s){let o;if(np(r,n)!=null)return e;{let a=new Xu(r,e,i),u=e.eventCache.getNode(),l;if(ye(n)||Ee(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=QI(r,Fs(e));else{let p=e.serverCache.getNode();F(p instanceof ze,"serverChildren would be complete if leaf node"),h=RN(r,p)}h=h,l=t.filter.updateFullNode(u,h,s)}else{let h=Ee(n),p=fE(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=u.getImmediateChild(h)),p!=null?l=t.filter.updateChild(u,h,p,Be(n),a,s):e.eventCache.getNode().hasChild(h)?l=t.filter.updateChild(u,h,ze.EMPTY_NODE,Be(n),a,s):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=QI(r,Fs(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||np(r,Re())!=null,Qu(e,l,o,t.filter.filtersNodes())}}function zW(t,e){let n=Fs(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ye(e)&&!n.getImmediateChild(Ee(e)).isEmpty())?n.getChild(e):null}function LM(t,e,n,r){e.type===Gr.MERGE&&e.source.queryId!==null&&(F(Fs(t.viewCache_),"We should always have a full cache before handling merges"),F(GI(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=UW(t.processor_,i,e,n,r);return VW(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,GW(t,s.changes,s.viewCache.eventCache.getNode(),null)}function GW(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return IW(t.eventGenerator_,e,n,i)}var VM;function WW(t){F(!VM,"__referenceConstructor has already been defined"),VM=t}function pE(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),LM(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(LM(o,e,n,r));return s}}function gE(t,e){let n=null;for(let r of t.views.values())n=n||zW(r,e);return n}var UM;function KW(t){F(!UM,"__referenceConstructor has already been defined"),UM=t}var ip=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Xt(null),this.pendingWriteTree_=FW(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function QW(t,e,n,r,i){return TW(t.pendingWriteTree_,e,n,r,i),i?op(t,new xa(wN(),e,n)):[]}function Ca(t,e,n=!1){let r=DW(t.pendingWriteTree_,e);if(SW(t.pendingWriteTree_,e)){let s=new Xt(null);return r.snap!=null?s=s.set(Re(),!0):In(r.children,o=>{s=s.set(new Pe(o),!0)}),op(t,new zI(r.path,s,n))}else return[]}function sp(t,e,n){return op(t,new xa(IN(),e,n))}function YW(t,e,n){let r=Xt.fromObject(n);return op(t,new tp(IN(),e,r))}function JW(t,e,n,r){let i=LN(t,r);if(i!=null){let s=VN(i),o=s.path,a=s.queryId,u=vn(o,e),l=new xa(EN(a),u,n);return UN(t,o,l)}else return[]}function XW(t,e,n,r){let i=LN(t,r);if(i){let s=VN(i),o=s.path,a=s.queryId,u=vn(o,e),l=Xt.fromObject(n),h=new tp(EN(a),u,l);return UN(t,o,h)}else return[]}function ON(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let u=vn(o,e),l=gE(a,u);if(l)return l});return AN(i,e,s,n,!0)}function op(t,e){return kN(e,t.syncPointTree_,null,DN(t.pendingWriteTree_,Re()))}function kN(t,e,n,r){if(ye(t.path))return FN(t,e,n,r);{let i=e.get(Re());n==null&&i!=null&&(n=gE(i,Re()));let s=[],o=Ee(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){let l=n?n.getImmediateChild(o):null,h=xN(r,o);s=s.concat(kN(a,u,l,h))}return i&&(s=s.concat(pE(i,t,r,n))),s}}function FN(t,e,n,r){let i=e.get(Re());n==null&&i!=null&&(n=gE(i,Re()));let s=[];return e.children.inorderTraversal((o,a)=>{let u=n?n.getImmediateChild(o):null,l=xN(r,o),h=t.operationForChild(o);h&&(s=s.concat(FN(h,a,u,l)))}),i&&(s=s.concat(pE(i,t,r,n))),s}function LN(t,e){return t.tagToQueryMap.get(e)}function VN(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Pe(t.substr(0,e))}}function UN(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=DN(t.pendingWriteTree_,e);return pE(r,n,i,null)}var eE=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},tE=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=It(this.path_,e);return new t(this.syncTree_,n)}node(){return ON(this.syncTree_,this.path_)}},ZW=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},jM=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return e3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return t3(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},e3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},t3=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},n3=function(t,e,n,r){return mE(e,new tE(n,t),r)},r3=function(t,e,n){return mE(t,new eE(e),n)};function mE(t,e,n){let r=t.getPriority().val(),i=jM(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=jM(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Aa(a,Ft(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Aa(i))),o.forEachChild(Lt,(a,u)=>{let l=mE(u,e.getImmediateChild(a),n);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}var Zu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function _E(t,e){let n=e instanceof Pe?e:new Pe(e),r=t,i=Ee(n);for(;i!==null;){let s=hs(r.node.children,i)||{children:{},childCount:0};r=new Zu(i,r,s),n=Be(n),i=Ee(n)}return r}function Oa(t){return t.node.value}function jN(t,e){t.node.value=e,nE(t)}function BN(t){return t.node.childCount>0}function i3(t){return Oa(t)===void 0&&!BN(t)}function ap(t,e){In(t.node.children,(n,r)=>{e(new Zu(n,t,r))})}function $N(t,e,n,r){n&&!r&&e(t),ap(t,i=>{$N(i,e,!0,r)}),n&&r&&e(t)}function s3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function il(t){return new Pe(t.parent===null?t.name:il(t.parent)+"/"+t.name)}function nE(t){t.parent!==null&&o3(t.parent,t.name,t)}function o3(t,e,n){let r=i3(n),i=nr(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,nE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,nE(t))}var a3=/[\[\].#$\/\u0000-\u001F\u007F]/,c3=/[\[\].#$\u0000-\u001F\u007F]/,mI=10*1024*1024,HN=function(t){return typeof t=="string"&&t.length!==0&&!a3.test(t)},u3=function(t){return typeof t=="string"&&t.length!==0&&!c3.test(t)},l3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),u3(t)};var qN=function(t,e,n){let r=n instanceof Pe?new xI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ns(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ns(r)+" with contents = "+e.toString());if(GM(e))throw new Error(t+"contains "+e.toString()+" "+Ns(r));if(typeof e=="string"&&e.length>mI/3&&ou(e)>mI)throw new Error(t+"contains a string greater than "+mI+" utf8 bytes "+Ns(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(In(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!HN(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ns(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);tW(r,o),qN(t,a,r),nW(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ns(r)+" in addition to actual children.")}};var d3=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!HN(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!l3(n))throw new Error(QS(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var rE=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function h3(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!fN(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Vs(t,e,n){h3(t,n),f3(t,r=>Vn(r,e)||Vn(e,r))}function f3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(p3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function p3(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Os&&kt("event: "+n.toString()),nl(r)}}}var g3="repo_interrupt",m3=25,iE=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new rE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ep(),this.transactionQueueTree_=new Zu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function _3(t,e,n){if(t.stats_=lE(t.repoInfo_),t.forceRestClient_||xG())t.server_=new jI(t.repoInfo_,(r,i,s,o)=>{BM(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>$M(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{mt(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new dE(t.repoInfo_,e,(r,i,s,o)=>{BM(t,r,i,s,o)},r=>{$M(t,r)},r=>{v3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=NG(t.repoInfo_,()=>new qI(t.stats_,t.server_)),t.infoData_=new BI,t.infoSyncTree_=new ip({startListening:(r,i,s,o)=>{let a=[],u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=sp(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),yE(t,"connected",!1),t.serverSyncTree_=new ip({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{let l=o(a,u);Vs(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function y3(t){let n=t.infoData_.getNode(new Pe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function zN(t){return ZW({timestamp:y3(t)})}function BM(t,e,n,r,i){t.dataUpdateCount++;let s=new Pe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let u=su(n,l=>Ft(l));o=XW(t.serverSyncTree_,s,u,i)}else{let u=Ft(n);o=JW(t.serverSyncTree_,s,u,i)}else if(r){let u=su(n,l=>Ft(l));o=YW(t.serverSyncTree_,s,u)}else{let u=Ft(n);o=sp(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=wE(t,s)),Vs(t.eventQueue_,a,o)}function $M(t,e){yE(t,"connected",e),e===!1&&I3(t)}function v3(t,e){In(e,(n,r)=>{yE(t,n,r)})}function yE(t,e,n){let r=new Pe("/.info/"+e),i=Ft(n);t.infoData_.updateSnapshot(r,i);let s=sp(t.infoSyncTree_,r,i);Vs(t.eventQueue_,r,s)}function w3(t){return t.nextWriteId_++}function I3(t){GN(t,"onDisconnectEvents");let e=zN(t),n=ep();$I(t.onDisconnect_,Re(),(i,s)=>{let o=n3(i,s,t.serverSyncTree_,e);vN(n,i,o)});let r=[];$I(n,Re(),(i,s)=>{r=r.concat(sp(t.serverSyncTree_,i,s));let o=T3(t,i);wE(t,o)}),t.onDisconnect_=ep(),Vs(t.eventQueue_,Re(),r)}function E3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(g3)}function GN(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),kt(n,...e)}function WN(t,e,n){return ON(t.serverSyncTree_,e,n)||ze.EMPTY_NODE}function vE(t,e=t.transactionQueueTree_){if(e||cp(t,e),Oa(e)){let n=QN(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&C3(t,il(e),n)}else BN(e)&&ap(e,n=>{vE(t,n)})}function C3(t,e,n){let r=n.map(l=>l.currentWriteId),i=WN(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let h=n[l];F(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=vn(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),u=e;t.server_.put(u.toString(),a,l=>{GN(t,"transaction put response",{path:u.toString(),status:l});let h=[];if(l==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(Ca(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();cp(t,_E(t.transactionQueueTree_,e)),vE(t,t.transactionQueueTree_),Vs(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)nl(p[m])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{un("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}wE(t,e)}},o)}function wE(t,e){let n=KN(t,e),r=il(n),i=QN(t,n);return b3(t,i,r),r}function b3(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=vn(n,u.path),h=!1,p;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,p=u.abortReason,i=i.concat(Ca(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=m3)h=!0,p="maxretry",i=i.concat(Ca(t.serverSyncTree_,u.currentWriteId,!0));else{let m=WN(t,u.path,o);u.currentInputSnapshot=m;let I=e[a].update(m.val());if(I!==void 0){qN("transaction failed: Data returned ",I,u.path);let D=Ft(I);typeof I=="object"&&I!=null&&nr(I,".priority")||(D=D.updatePriority(m.getPriority()));let M=u.currentWriteId,U=zN(t),Q=r3(D,m,U);u.currentOutputSnapshotRaw=D,u.currentOutputSnapshotResolved=Q,u.currentWriteId=w3(t),o.splice(o.indexOf(M),1),i=i.concat(QW(t.serverSyncTree_,u.path,Q,u.currentWriteId,u.applyLocally)),i=i.concat(Ca(t.serverSyncTree_,M,!0))}else h=!0,p="nodata",i=i.concat(Ca(t.serverSyncTree_,u.currentWriteId,!0))}Vs(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}cp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)nl(r[a]);vE(t,t.transactionQueueTree_)}function KN(t,e){let n,r=t.transactionQueueTree_;for(n=Ee(e);n!==null&&Oa(r)===void 0;)r=_E(r,n),e=Be(e),n=Ee(e);return r}function QN(t,e){let n=[];return YN(t,e,n),n.sort((r,i)=>r.order-i.order),n}function YN(t,e,n){let r=Oa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ap(e,i=>{YN(t,i,n)})}function cp(t,e){let n=Oa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,jN(e,n.length>0?n:void 0)}ap(e,r=>{cp(t,r)})}function T3(t,e){let n=il(KN(t,e)),r=_E(t.transactionQueueTree_,e);return s3(r,i=>{_I(t,i)}),_I(t,r),$N(r,i=>{_I(t,i)}),n}function _I(t,e){let n=Oa(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ca(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?jN(e,void 0):n.length=s+1,Vs(t.eventQueue_,il(e),i);for(let o=0;o<r.length;o++)nl(r[o])}}function D3(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function S3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):un(`Invalid query segment '${n}' in query '${t}'`)}return e}var HM=function(t,e){let n=A3(t),r=n.namespace;n.domain==="firebase.com"&&Wr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Wr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EG();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Wf(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Pe(n.pathString)}},A3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=D3(t.substring(h,p)));let m=S3(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let I=e.slice(0,l);if(I.toLowerCase()==="localhost")n="localhost";else if(I.split(".").length<=2)n=I;else{let D=e.indexOf(".");r=e.substring(0,D).toLowerCase(),n=e.substring(D+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var sE=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return ye(this._path)?null:lN(this._path)}get ref(){return new Na(this._repo,this._path)}get _queryIdentifier(){let e=RM(this._queryParams),n=uE(e);return n==="{}"?"default":n}get _queryObject(){return RM(this._queryParams)}isEqual(e){if(e=He(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=fN(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+eW(this._path)}};var Na=class t extends sE{constructor(e,n){super(e,n,new UI,!1)}get parent(){let e=hN(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};WW(Na);KW(Na);var R3="FIREBASE_DATABASE_EMULATOR_HOST",oE={},x3=!1;function M3(t,e,n,r){t.repoInfo_=new Wf(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function N3(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Wr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),kt("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=HM(s,i),a=o.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[R3]),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=HM(s,i),a=o.repoInfo):u=!o.repoInfo.secure;let h=i&&u?new Ku(Ku.OWNER):new CI(t.name,t.options,e);d3("Invalid Firebase Database URL",o),ye(o.path)||Wr("Database URL must point to the root of a Firebase Database (not including a child path).");let p=O3(a,t,h,new EI(t.name,n));return new aE(p,t)}function P3(t,e){let n=oE[e];(!n||n[t.key]!==t)&&Wr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),E3(t),delete n[t.key]}function O3(t,e,n,r){let i=oE[e.name];i||(i={},oE[e.name]=i);let s=i[t.toURLString()];return s&&Wr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new iE(t,x3,n,r),i[t.toURLString()]=s,s}var aE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(_3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Na(this._repo,Re())),this._rootInternal}_delete(){return this._rootInternal!==null&&(P3(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Wr("Cannot call "+e+" on a deleted database.")}};function JN(t=sr(),e){let n=Or(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=qo("database");r&&XN(n,...r)}return n}function XN(t,e,n,r={}){t=He(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Wr("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Wr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ku(Ku.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:zo(r.mockUserToken,t.app.options.projectId);s=new Ku(o)}M3(i,e,n,s)}function k3(t){vG(yn),_n(new Mt("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return N3(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Ae(dM,hM,t),Ae(dM,hM,"esm2017")}dE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};dE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};k3();var sl=class{constructor(e){return e}},ZN="database",IE=class{constructor(){return kr(ZN)}};var EE=new B("angularfire2.database-instances");function F3(t,e){let n=Ci(ZN,t,e);return n&&new sl(n)}function L3(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new sl(r)}}var V3={provide:IE,deps:[[new Le,EE]]},U3={provide:sl,useFactory:F3,deps:[[new Le,EE],on]};function eP(t,...e){return Ae("angularfire",Pn.full,"rtdb"),Kt([U3,V3,{provide:EE,useFactory:L3(t),multi:!0,deps:[_e,ut,ar,On,[new Le,Br],[new Le,or],...e]}])}var tP=_t(JN,!0);var nP={providers:[tS(lM),dA(()=>hA({projectId:"clinica-22442",appId:"1:235357332503:web:e03014e1b1fcb0af3b6852",storageBucket:"clinica-22442.appspot.com",apiKey:"AIzaSyCYJNO1mUpzxRzCSi7jWwwquq2q-8KAETU",authDomain:"clinica-22442.firebaseapp.com",messagingSenderId:"235357332503"})),aR(()=>uR()),Rx(()=>xx()),eP(()=>tP()),sM(()=>wa())]};function j3(t,e){t&1&&(R(0,"div")(1,"div")(2,"a",9),q(3,"Ingres\xE1"),N()(),R(4,"div")(5,"a",10),q(6,"Registrate"),N()()())}function B3(t,e){if(t&1){let n=gn();R(0,"div")(1,"div")(2,"p"),q(3),N()(),R(4,"div")(5,"a",11),Oe("click",function(){ae(n);let i=ne();return ce(i.cerrarSesion())}),q(6,"Cerrar sesion"),N()()()}if(t&2){let n=ne();K(3),$d("Hola ",n.nombre,"!")}}function $3(t,e){t&1&&(R(0,"ul",8)(1,"li")(2,"a",12),q(3,"Inicio"),N()(),R(4,"li")(5,"a",13),q(6,"Juegos"),N()(),R(7,"li")(8,"a",14),q(9,"Chat"),N()(),R(10,"li")(11,"a"),q(12,"Sobre Mi"),N(),R(13,"ul",15)(14,"li")(15,"a",16),q(16,"En Github"),N()(),R(17,"li")(18,"a",17),q(19,"Sobre Facundo Islas"),N()()()()())}var rP=(()=>{let e=class e{constructor(r,i,s){this.router=r,this.route=i,this.auth=s}verificarSesion(){let r=sessionStorage.getItem("user");return r==null?!1:(this.nombre=r,!0)}cerrarSesion(){this.auth.logout(),sessionStorage.clear(),this.logueado=!1,this.router.navigate(["/login"]),console.log("Se cierra sesion")}ngOnInit(){}};e.\u0275fac=function(i){return new(i||e)($(lt),$(Zn),$(Di))},e.\u0275cmp=rt({type:e,selectors:[["app-cabecera"]],standalone:!0,features:[it],decls:12,vars:3,consts:[[1,"header-section"],[1,"header-warp"],[1,"header-bar-warp","d-flex"],[2,"text-align","center"],[1,"top-nav-area","w-100"],[1,"user-panel"],[4,"ngIf"],["class","main-menu primary-menu",4,"ngIf"],[1,"main-menu","primary-menu"],["routerLink","login"],["routerLink","registro"],["routerLink","/",3,"click"],["routerLink","/home"],["routerLink","/juegos"],["routerLink","chat"],[1,"sub-menu"],["href","https://github.com/facundoislas","target","blank"],["routerLink","/quienSoy"]],template:function(i,s){i&1&&(R(0,"header",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h2",3),q(5," Clinica Buena Salud"),N()(),R(6,"nav",4)(7,"div",5),nn(8,j3,7,0,"div",6)(9,B3,7,1,"div",6),N(),nn(10,$3,20,0,"ul",7),ie(11,"ul",8),N()()()()),i&2&&(K(8),Ke("ngIf",!s.verificarSesion()),K(),Ke("ngIf",s.verificarSesion()),K(),Ke("ngIf",s.verificarSesion()))},dependencies:[Mn,Yn],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;font-family:Roboto,sans-serif;-webkit-font-smoothing:antialiased}h1[_ngcontent-%COMP%]{font-size:70px}h2[_ngcontent-%COMP%]{font-size:36px}h3[_ngcontent-%COMP%]{font-size:30px}h4[_ngcontent-%COMP%]{font-size:24px}h5[_ngcontent-%COMP%]{font-size:18px}h6[_ngcontent-%COMP%]{font-size:16px}p[_ngcontent-%COMP%]{font-size:15px;color:#585858;line-height:1.6;font-weight:500}img[_ngcontent-%COMP%]{max-width:100%}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus, button[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus{outline:none}a[_ngcontent-%COMP%]:hover, a[_ngcontent-%COMP%]:focus{text-decoration:none;outline:none}ul[_ngcontent-%COMP%], ol[_ngcontent-%COMP%]{padding:0;margin:0}.header-section[_ngcontent-%COMP%]{position:relative;width:100%;left:0;top:-60px;z-index:99;padding:50px 50px 0;background-image:url("./media/cabecera-5JSPQBZJ.png");height:33%}.header-warp[_ngcontent-%COMP%]{max-width:1496px;margin:0 auto}.header-bar-warp[_ngcontent-%COMP%]{padding:17px 40px 0}.user-panel[_ngcontent-%COMP%]{float:right;font-size:20px;font-weight:500;padding-top:3px;display:grid;margin-top:5px;margin-right:-66px}.user-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .user-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000f58;text-align:center;text-decoration:none}.user-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.main-menu[_ngcontent-%COMP%]{list-style:none;text-align:center;padding-top:15px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;position:relative}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;font-size:30px;font-weight:500;color:#02ecdf;margin-right:10px;padding-bottom:20px;position:relative;padding-right:20px;border:#000;text-decoration:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";width:20px;height:20px;right:0;top:1px;background-repeat:no-repeat;background-position:right center;text-decoration:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#928d92;margin-left:5px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after{color:#000}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .sub-menu[_ngcontent-%COMP%]{visibility:visible;opacity:1;margin-top:0}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]{color:#b01ba5}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover > a[_ngcontent-%COMP%]:after{background-color:#190d36}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]{position:absolute;list-style:none;text-align:center;width:200px;left:0;top:100%;visibility:hidden;opacity:0;margin-top:20px;background:#e9fa00;z-index:99;-webkit-transition:all .4s;-o-transition:all .4s;transition:all .4s;-webkit-box-shadow:2px 7px 20px rgba(0,0,0,.4);box-shadow:2px 7px 20px #0006}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:block}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:#000;margin-right:0;padding:8px 30px;font-size:20px}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{display:none}.main-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .sub-menu[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#b01ba5}.slicknav_menu[_ngcontent-%COMP%]{display:none}.titulo[_ngcontent-%COMP%]{display:inline-flex;font-size:40px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:500;color:#fff;margin-top:-5px;text-align:center;padding-right:140px}']});let t=e;return t})();var iP=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-footer"]],standalone:!0,features:[it],decls:4,vars:0,consts:[[1,"page-footer","font-small","blue",2,"background-color","rgb(4, 23, 61)"],[1,"footer-copyright","text-center","py-3",2,"color","aliceblue"]],template:function(i,s){i&1&&(R(0,"body")(1,"footer",0)(2,"div",1),q(3,"\xA9 2024 Facundo Islas "),N()()())},styles:["body[_ngcontent-%COMP%]{height:100%}footer[_ngcontent-%COMP%]{height:6%;flex-shrink:0;width:100%;position:fixed;bottom:0;left:0;z-index:999;text-align:justify}"]});let t=e;return t})();var sP=(()=>{let e=class e{constructor(){this.title="tpclinica24"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=rt({type:e,selectors:[["app-root"]],standalone:!0,features:[it],decls:3,vars:0,template:function(i,s){i&1&&ie(0,"app-cabecera")(1,"router-outlet")(2,"app-footer")},dependencies:[V_,rP,iP]});let t=e;return t})();fD(sP,nP).catch(t=>console.error(t));
